import{a as e,j as s}from"./chunk-CAff-kf5.js";import{L as r,l as t,m as a,b as n,g as i,i as o,A as c,aw as l,j as m,ax as d,ay as h,az as u}from"../entries/src_pages.8IG4k9ME.js";import{a as j}from"./chunk-Xgiuglox.js";import{s as p}from"./chunk-NrGmxrQc.js";import{L as g}from"./chunk-GmA6ITIw.js";import"./chunk-BmSI4Fww.js";import"./chunk-CVevwmbB.js";import"./chunk-CNpwfz3n.js";import"../entries/entry-client-routing.Bbnd9vHe.js";import"./chunk-VF2LHfxc.js";/* empty css              *//* empty css              */import"./chunk-D3Yr0q6g.js";import"./chunk-CKSHq_s9.js";import"./chunk-CmA2CWkd.js";import"./chunk-Cgv-mfVR.js";import"./chunk-DbeWnEfh.js";import"./chunk-BurK_taE.js";import"./chunk-BVvUx4OK.js";import"./chunk-B3S1iNVp.js";import"./chunk-ei4kQ0Q2.js";import"./chunk-B_VbuTrp.js";import"./chunk-DFDIFHTJ.js";import"./chunk-BvVqAYuT.js";import"./chunk-DAUSXQgp.js";import"./chunk-RtNBUybj.js";import"./chunk-CrSVf9D1.js";import"./chunk-Cgo1rCBn.js";import"./chunk-DQcwr13S.js";/* empty css              */import"./chunk-ITMKy72C.js";import"./chunk-e2Lvd1W2.js";import"./chunk-mrHSz1EB.js";/* empty css              */import"./chunk-CFcfonrM.js";import"./chunk-CblELM-r.js";import"./chunk-CEm4-sWZ.js";import"./chunk-CeuMhN-M.js";/* empty css              */import"./chunk-fiALBYsU.js";const x=({easy:n,medium:i,hard:o,language:c})=>{const{t:l}=e.useContext(r),{windowWidth:m}=t(),[d,h]=e.useState(!0);return e.useEffect(()=>{h(!(m<a))},[m]),s.jsxs("table",{className:p.highscores,children:[s.jsx("caption",{children:l("YourHighscores")}),s.jsx("thead",{children:s.jsxs("tr",{className:p.th,children:[s.jsx("th",{children:l("Difficulty")}),s.jsx("th",{className:p.score,children:l("Score")}),d&&s.jsx("th",{className:p.percentage,children:"%"}),s.jsx("th",{children:l("Speed")})]})}),s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("th",{children:l("Easy")}),s.jsxs("td",{children:[n?n.score:0,"/300"]}),d&&s.jsxs("td",{children:[+(100*n.score/300).toFixed(1),"%"]}),s.jsx("td",{children:0===n.score||0===n.time?l("NA"):s.jsxs(s.Fragment,{children:[Math.floor(n.time/60)<10&&"0",Math.floor(n.time/60),":",n.time%60<10&&"0",n.time%60]})})]}),s.jsxs("tr",{children:[s.jsx("th",{children:l("Medium")}),s.jsxs("td",{children:[i?i.score:0,"/300"]}),d&&s.jsxs("td",{children:[+(100*i.score/300).toFixed(1),"%"]}),s.jsx("td",{children:0===i.score||0===i.time?l("NA"):s.jsxs(s.Fragment,{children:[Math.floor(i.time/60)<10&&"0",Math.floor(i.time/60),":",i.time%60<10&&"0",i.time%60]})})]}),s.jsxs("tr",{children:[s.jsx("th",{children:l("Hard")}),s.jsxs("td",{children:[o?o.score:0,"/300"]}),d&&s.jsxs("td",{children:[+(100*o.score/300).toFixed(1),"%"]}),s.jsx("td",{children:0===o.score||0===o.time?l("NA"):s.jsxs(s.Fragment,{children:[Math.floor(o.time/60)<10&&"0",Math.floor(o.time/60),":",o.time%60<10&&"0",o.time%60]})})]})]})]})},k=({easy:t,medium:a,hard:h,language:u,setIsFormOpen:k})=>{const{t:f}=e.useContext(r),v=n(),[w,N]=e.useState(!1),[S,y]=e.useState(""),[E,F]=e.useState(""),b=e.useRef(null),[C,$]=e.useState({easy:t??{score:0,time:210},medium:a??{score:0,time:210},hard:h??{score:0,time:210}}),[L,I]=e.useState(!1),M=j(e=>{var s;return null==(s=e.auth)?void 0:s.user});e.useEffect(()=>{(null==M?void 0:M._id)&&v(i(M._id)).then(e=>{null!==e&&$(e.highscores)})},[null==M?void 0:M._id]),e.useEffect(()=>{v(o())},[]);return s.jsx("div",{className:"login-wrap",children:M?s.jsxs(s.Fragment,{children:[s.jsxs("p",{children:[s.jsxs("span",{children:[f("LoggedInAs")," ",(null==M?void 0:M.name)?null==M?void 0:M.name:M.username," "]}),s.jsx(g,{to:"/edit",children:`${f("Edit")}`}),s.jsxs("button",{onClick:()=>{v(l())},id:"logout",className:"logout danger",children:[f("Logout")," Ã—"]})]}),s.jsx("button",{onClick:()=>I(!L),className:p.showHighscores,children:(L?"hide":"show")+" highscores"}),L&&s.jsx(x,{language:u,easy:C.easy,medium:C.medium,hard:C.hard})]}):s.jsx(s.Fragment,{children:s.jsxs(c,{language:u,className:"accordion-login login-to-save",wrapperClass:"login-to-save-wrap",text:f("LogInToSaveScore"),ref:b,setIsFormOpen:k,hideBrackets:!0,children:[s.jsx("h2",{children:f("LogInToSaveScore")}),s.jsxs("form",{onSubmit:async e=>{e.preventDefault(),N(!0),v(m(f("LoggingIn"),!1,8)),await v(d(S,E,"en")).then(()=>{y(""),F(""),N(!1)}).catch(e=>{var s,r;(null==(r=null==(s=e.response)?void 0:s.data)?void 0:r.message)?v(m(e.response.data.message,!0,8)):"ERR_BAD_REQUEST"===e.code?v(m(`${f("Error")}: ${e.response.data.message}`,!0,8)):"ERR_NETWORK"===e.code&&v(m(`${f("Error")}: ${e.message}`,!0,8)),N(!1)})},className:`login ${p.login}`,children:[s.jsx("div",{className:"input-wrap",children:s.jsxs("label",{htmlFor:"quiz-username",children:[s.jsx("input",{id:"quiz-username",name:"username",type:"text",value:S,required:!0,autoComplete:"email",onChange:({target:e})=>y(e.value.trim())}),s.jsxs("span",{children:[f("Username"),": "]})]})}),s.jsx("div",{className:"input-wrap",children:s.jsxs("label",{children:[s.jsx("input",{name:"password",type:"password",required:!0,autoComplete:"current-password",value:E,onChange:({target:e})=>F(e.value.trim())}),s.jsxs("span",{children:[f("Password"),": "]})]})}),s.jsx("button",{type:"submit",disabled:w,id:"login",className:"login",children:f("Login")})]})]})})})},f=({language:t,user:a,highscoresLocal:i,text:o})=>{const{t:c}=e.useContext(r),l=n(),[d,j]=e.useState(!1),[g,x]=e.useState(!1),[f,v]=e.useState(""),[w,N]=e.useState(""),[S,y]=e.useState(""),[E,F]=e.useState(""),[b,C]=e.useState(!1);return s.jsxs("div",{className:`quiz-register-login-wrap register-login-wrap ${p["register-login-wrap"]}`,children:[s.jsx("div",{className:`${d?"open":""} ${a?"logged":""}`,children:s.jsx(k,{setIsFormOpen:j,language:t,easy:i.easy,medium:i.medium,hard:i.hard})}),s.jsx("div",{className:""+(g?"open":""),children:s.jsx(h,{sending:b,setIsFormOpen:x,language:t,handleRegister:e=>{if(e.preventDefault(),C(!0),w.trim()!==S.trim())return l(m(c("PasswordsDoNotMatch"),!0,8)),void C(!1);l(u({name:E,username:f,password:w,language:"en"})).then(async()=>{l(m(c("RegistrationSuccesful"),!1,8)),C(!1)}).catch(e=>{var s,r;(null==(r=null==(s=e.response)?void 0:s.data)?void 0:r.message)?l(m(e.response.data.message,!0,8)):l(m(`${c("Error")}: ${e.message}`,!0,8)),C(!1)})},username:f,setUsername:v,password:w,setPassword:N,confirmPassword:S,setConfirmPassword:y,name:E,setName:F,text:o})})]})};export{f as default};
