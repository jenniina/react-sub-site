import{a as s,j as e}from"./chunk-CAff-kf5.js";import{L as r,b as n,j as t,ar as i}from"../entries/src_pages.8IG4k9ME.js";import{s as a}from"./chunk-ByA33Q6F.js";import"./chunk-BmSI4Fww.js";import"./chunk-CVevwmbB.js";import"./chunk-CNpwfz3n.js";import"../entries/entry-client-routing.Bbnd9vHe.js";import"./chunk-VF2LHfxc.js";/* empty css              *//* empty css              */import"./chunk-D3Yr0q6g.js";import"./chunk-CKSHq_s9.js";import"./chunk-GmA6ITIw.js";import"./chunk-DFDIFHTJ.js";import"./chunk-BvVqAYuT.js";import"./chunk-Xgiuglox.js";import"./chunk-CmA2CWkd.js";import"./chunk-Cgv-mfVR.js";import"./chunk-fiALBYsU.js";import"./chunk-DbeWnEfh.js";import"./chunk-BurK_taE.js";import"./chunk-BVvUx4OK.js";import"./chunk-B3S1iNVp.js";import"./chunk-ei4kQ0Q2.js";import"./chunk-B_VbuTrp.js";import"./chunk-DAUSXQgp.js";import"./chunk-RtNBUybj.js";import"./chunk-CrSVf9D1.js";import"./chunk-Cgo1rCBn.js";import"./chunk-DQcwr13S.js";/* empty css              */import"./chunk-ITMKy72C.js";import"./chunk-e2Lvd1W2.js";import"./chunk-mrHSz1EB.js";/* empty css              */import"./chunk-CFcfonrM.js";import"./chunk-CblELM-r.js";import"./chunk-CEm4-sWZ.js";import"./chunk-CeuMhN-M.js";/* empty css              */const o=({user:o,language:u})=>{const{t:m}=s.useContext(r),c=n(),[p,h]=s.useState((null==o?void 0:o.username)??""),[d,j]=s.useState(""),[l,k]=s.useState(!1);return e.jsx(e.Fragment,{children:o?e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:m("EditEmail")}),e.jsx("p",{className:a.p,children:m("SendsAnEmailToTheNewAddressForVerification")}),e.jsxs("p",{className:`${a.p} ${a["p-last"]}`,children:[m("CurrentEmail"),": ",e.jsx("strong",{children:null==o?void 0:o.username})]}),e.jsxs("form",{onSubmit:async s=>{var e,r;s.preventDefault(),k(!0);try{const s={_id:o._id,username:p,passwordOld:d,language:u};if(o){if(p.trim()===o.username.trim())return c(t(`${m("UsernameIsTheSame")}`,!0,5)),void k(!1);c(i(s)).then(s=>{s&&(!1===s.success?c(t(`${s.message??m("Error")}`,!0,5)):(c(t(`${s.message??m("UserUpdated")}`,!1,5)),j(""))),k(!1)}).catch(s=>{var e,r,n,i;(null==(r=null==(e=s.response)?void 0:e.data)?void 0:r.message)?c(t(s.response.data.message,!0,8)):"ERR_BAD_REQUEST"===s.code&&(null==(i=null==(n=s.response)?void 0:n.data)?void 0:i.message)?c(t(`${s.response.data.message}`,!0,5)):setTimeout(()=>{c(t(m("UserNotUpdated"),!0,5))},2e3),k(!1)})}}catch(n){(null==(r=null==(e=n.response)?void 0:e.data)?void 0:r.message)&&c(t(n.response.data.message,!0,8))}},className:a["edit-user"],children:[e.jsx("div",{className:"input-wrap",children:e.jsxs("label",{children:[e.jsx("input",{required:!0,type:"text",name:"username",id:"username",value:p,onChange:({target:s})=>h(s.value.trim())}),e.jsx("span",{children:m("Email")})]})}),e.jsx("div",{className:"input-wrap",children:e.jsxs("label",{children:[e.jsx("input",{required:!0,type:"password",name:"old-password",id:"old-password-username",value:d,onChange:({target:s})=>j(s.value.trim())}),e.jsx("span",{children:m("CurrentPassword")})]})}),e.jsx("button",{type:"submit",disabled:l,children:m("Edit")})]})]}):e.jsx(e.Fragment,{})})};export{o as default};
