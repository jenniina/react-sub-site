import{a as s,j as e}from"./chunk-CAff-kf5.js";import{b as n,L as a,S as t,a0 as r,as as o,j as i,at as u,a3 as c,i as m}from"../entries/src_pages.8IG4k9ME.js";import{s as p}from"./chunk-ByA33Q6F.js";import"./chunk-BmSI4Fww.js";import"./chunk-CVevwmbB.js";import"./chunk-CNpwfz3n.js";import"../entries/entry-client-routing.Bbnd9vHe.js";import"./chunk-VF2LHfxc.js";/* empty css              *//* empty css              */import"./chunk-D3Yr0q6g.js";import"./chunk-CKSHq_s9.js";import"./chunk-GmA6ITIw.js";import"./chunk-DFDIFHTJ.js";import"./chunk-BvVqAYuT.js";import"./chunk-Xgiuglox.js";import"./chunk-CmA2CWkd.js";import"./chunk-Cgv-mfVR.js";import"./chunk-fiALBYsU.js";import"./chunk-DbeWnEfh.js";import"./chunk-BurK_taE.js";import"./chunk-BVvUx4OK.js";import"./chunk-B3S1iNVp.js";import"./chunk-ei4kQ0Q2.js";import"./chunk-B_VbuTrp.js";import"./chunk-DAUSXQgp.js";import"./chunk-RtNBUybj.js";import"./chunk-CrSVf9D1.js";import"./chunk-Cgo1rCBn.js";import"./chunk-DQcwr13S.js";/* empty css              */import"./chunk-ITMKy72C.js";import"./chunk-e2Lvd1W2.js";import"./chunk-mrHSz1EB.js";/* empty css              */import"./chunk-CFcfonrM.js";import"./chunk-CblELM-r.js";import"./chunk-CEm4-sWZ.js";import"./chunk-CeuMhN-M.js";/* empty css              */const h=({user:h,language:j,setLanguage:l,options:d})=>{const g=n(),[k,v]=s.useState(""),{t:x}=s.useContext(a),[b,f]=s.useState((null==h?void 0:h.language)??j),[E,w]=s.useState(!1);return e.jsx(e.Fragment,{children:h?e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:x("EditLanguagePreference")}),e.jsxs("form",{onSubmit:async s=>{var e,n;s.preventDefault(),w(!0);try{const s={_id:h._id,name:h.name,passwordOld:k,language:b};h&&g(o(s)).then(s=>{s&&(!1===s.success?g(i(`${x("Error")}: ${s.message}`,!0,5)):(g(i(`${s.message??x("UserUpdated")}`,!1,5)),g(u(s.user)).then(()=>{g(c(null==h?void 0:h._id)).then(()=>g(m())),l(b)}),v(""))),w(!1)}).catch(s=>{var e,n,a,t;(null==(n=null==(e=s.response)?void 0:e.data)?void 0:n.message)?g(i(s.response.data.message,!0,8)):"ERR_BAD_REQUEST"===s.code&&(null==(t=null==(a=s.response)?void 0:a.data)?void 0:t.message)?g(i(`${x("Error")}: ${s.response.data.message}`,!0,5)):setTimeout(()=>{g(i(x("UserNotUpdated"),!0,5))},2e3),w(!1)})}catch(a){(null==(n=null==(e=a.response)?void 0:e.data)?void 0:n.message)&&g(i(a.response.data.message,!0,8)),w(!1)}},className:p["edit-user"],children:[e.jsx(t,{language:j,id:"language-register",className:`language ${p.language}`,instructions:"Language",hide:!0,options:d(r),value:b?{value:b,label:r[b]}:void 0,onChange:s=>{f(null==s?void 0:s.value)}}),e.jsx("div",{className:"input-wrap",children:e.jsxs("label",{children:[e.jsx("input",{required:!0,type:"password",name:"old-password",id:"old-password-user-language",value:k,onChange:({target:s})=>v(s.value.trim())}),e.jsx("span",{children:x("CurrentPassword")})]})}),e.jsx("button",{type:"submit",disabled:E,children:x("Edit")})]})]}):e.jsx(e.Fragment,{})})};export{h as default};
