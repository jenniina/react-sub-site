import{a as e,j as s}from"./chunk-CAff-kf5.js";import{L as t,E as i,P as a,aF as n,aG as r,N as l,O as o,b as c,A as u,S as h,a0 as m,aH as d,a8 as p,a3 as g,i as j,V as k,j as x}from"../entries/src_pages.8IG4k9ME.js";import{B as b}from"./chunk-DDoA0iX_.js";import{v}from"./chunk-BYLounmj.js";import"./chunk-BmSI4Fww.js";import"./chunk-CVevwmbB.js";import"./chunk-CNpwfz3n.js";import"../entries/entry-client-routing.Bbnd9vHe.js";import"./chunk-VF2LHfxc.js";/* empty css              *//* empty css              */import"./chunk-D3Yr0q6g.js";import"./chunk-CKSHq_s9.js";import"./chunk-GmA6ITIw.js";import"./chunk-DFDIFHTJ.js";import"./chunk-BvVqAYuT.js";import"./chunk-Xgiuglox.js";import"./chunk-CmA2CWkd.js";import"./chunk-Cgv-mfVR.js";import"./chunk-fiALBYsU.js";import"./chunk-DbeWnEfh.js";import"./chunk-BurK_taE.js";import"./chunk-BVvUx4OK.js";import"./chunk-B3S1iNVp.js";import"./chunk-ei4kQ0Q2.js";import"./chunk-B_VbuTrp.js";import"./chunk-DAUSXQgp.js";import"./chunk-RtNBUybj.js";import"./chunk-CrSVf9D1.js";import"./chunk-Cgo1rCBn.js";import"./chunk-DQcwr13S.js";/* empty css              */import"./chunk-ITMKy72C.js";import"./chunk-e2Lvd1W2.js";import"./chunk-mrHSz1EB.js";/* empty css              */import"./chunk-CFcfonrM.js";import"./chunk-CblELM-r.js";import"./chunk-CEm4-sWZ.js";import"./chunk-CeuMhN-M.js";/* empty css              */import"./chunk-CtjXaO95.js";const f=({userId:f,language:y,optionsCategory:N,categoryByLanguages:S,jokeCategoryByLanguage:T,options:C,getKeyByValue:w,norrisCategories:A})=>{const{t:$}=e.useContext(t),[E,P]=e.useState(i[y]),[F,J]=e.useState(a.single),[I,L]=e.useState(n.en),[O,q]=e.useState(r.en),[B,W]=e.useState(""),[R,D]=e.useState(""),[M,V]=e.useState(""),[H,_]=e.useState(!0),[z,K]=e.useState(!0),[Y,G]=e.useState(!1),[Q,U]=e.useState({label:T[y].Misc,value:l.Misc}),X=$("SelectAnOption"),[Z,ee]=e.useState(""),[se,te]=e.useState(A[0]),[ie,ae]=e.useState(!1),[ne,re]=e.useState(!1);e.useEffect(()=>{const e=Z===o.ChuckNorris;ae(e)},[Z]);const le=c();e.useEffect(()=>{J(H?a.twopart:a.single)},[H]);return e.useEffect(()=>{L(n[y]),q(r[y])},[y]),e.useEffect(()=>{setTimeout(()=>{const e=null==document?void 0:document.querySelectorAll(".select-container"),s=(null==e?void 0:e.length)+2;null==e||e.forEach((e,t)=>{const i=s-t;e.style.zIndex=`${i}`})},500)},[]),s.jsx(u,{language:y,text:$("ClickHereToWriteYourOwnJoke"),className:"submit",wrapperClass:"submit-wrap",children:s.jsxs("div",{className:"submit-inner",children:[s.jsx("h3",{children:$("SubmitAJoke")}),s.jsxs("p",{className:"textcenter",children:[$("SubmitAJokeTo")," jenniina.fi"]}),s.jsx("p",{className:"textcenter mb3",children:$("IfTheJokeIsNotPrivateVerificationIsNeeded")}),s.jsxs("form",{onSubmit:e=>{e.preventDefault(),re(!0);const s=e.currentTarget.nsfw.checked||e.currentTarget.religious.checked||e.currentTarget.political.checked||e.currentTarget.racist.checked||e.currentTarget.sexist.checked||e.currentTarget.explicit.checked;let t;t={jokeId:v(),category:(null==Q?void 0:Q.value)??o.Misc,subCategories:(null==Q?void 0:Q.label)===o.ChuckNorris?[null==se?void 0:se.value]:[],language:E,type:a.single,user:[f],private:z,verified:!!z,anonymous:Y,author:f,safe:(null==Q?void 0:Q.value)!==l.Dark&&!s,flags:{nsfw:e.currentTarget.nsfw.checked,religious:e.currentTarget.religious.checked,political:e.currentTarget.political.checked,racist:e.currentTarget.racist.checked,sexist:e.currentTarget.sexist.checked,explicit:e.currentTarget.explicit.checked}},t=F===a.single?{...t,joke:B,type:a.single}:{...t,setup:R,delivery:M,type:a.twopart},le(p(t)).then(e=>{le(g(f)).then(()=>le(j())).then(()=>{le(k()),W(""),D(""),V(""),re(!1)}),le(x(`${$("SavedJoke")}. ${e.message??""}`,!1,8))}).catch(e=>{var s,t;re(!1),"ERR_BAD_RESPONSE"===e.code?le(x(`${$("Error")}: ${e.response.data.message}. ${$("ReportErrorToAdmin")}`,!0,8)):(re(!1),(null==(t=null==(s=e.response)?void 0:s.data)?void 0:t.message)?le(x(e.response.data.message,!0,8)):le(x(`${$("Error")}: ${e.message}. ${$("ReportErrorToAdmin")}`,!0,8)))})},className:"form-submit-new",children:[s.jsxs("div",{className:"toggle-wrap",children:[s.jsx(b,{isChecked:H,name:"submit-joketype",id:"submit-joketype",hideLabel:!1,label:`${$("JokeTypeTitle")}: `,className:`${y} submit joketype`,on:$("TwoPart"),off:$("Single"),handleToggleChange:()=>{_(!H)},equal:!0}),s.jsx(b,{isChecked:z,name:"submit-private",id:"submit-private",hideLabel:!1,label:`${$("Privacy")}: `,className:`${y} submit private`,on:$("Private"),off:$("Public"),handleToggleChange:()=>{K(!z)},equal:!1}),s.jsx(b,{isChecked:Y,name:"submit-anonymous",id:"submit-anonymous",hideLabel:!1,label:`${$("PublishWithNickname")}: `,className:`${y} submit anonymous`,on:$("Anonymous"),off:$("Nickname"),handleToggleChange:()=>{G(!Y)},equal:!1})]}),F===a.single?s.jsxs("label",{htmlFor:"submit-joke-single-input",className:"textarea-wrap",children:[s.jsx("span",{children:$("Joke")}),s.jsx("textarea",{name:"joke",id:"submit-joke-single-input",required:!0,rows:4,value:B,onChange:e=>{W(e.target.value)}})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"input-wrap",children:s.jsxs("label",{htmlFor:"submit-setup-input",children:[s.jsx("input",{type:"text",id:"submit-setup-input",name:"setup",required:!0,value:R,onChange:e=>{D(e.target.value)}}),s.jsx("span",{children:I})]})}),s.jsx("div",{className:"input-wrap",children:s.jsxs("label",{htmlFor:"submit-delivery-input",children:[s.jsx("input",{type:"text",id:"submit-delivery-input",name:"delivery",value:M,onChange:e=>{V(e.target.value)},required:!0}),s.jsx("span",{children:O})]})})]}),S?s.jsxs(s.Fragment,{children:[s.jsx(h,{language:y,id:"submit-category-select",className:"submit",instructions:`${$("CategoryTitle")}:`,selectAnOption:X,value:Q,options:N(S),onChange:e=>{U(e),ee(null==e?void 0:e.label)}}),s.jsx(h,{language:y,id:"jokeCategoryNorrisCategories-submit",className:"category extras narrow "+(ie?"":"hidden"),instructions:"Chuck Norris Category:",selectAnOption:$("Any"),value:se,options:A,onChange:e=>{te(e)}})]}):"",s.jsx(h,{language:y,id:"submit-language",className:"submit narrow",instructions:`${$("JokeLanguage")}:`,options:C(m),value:y?{value:i[E],label:m[E]}:void 0,onChange:e=>{P(null==e?void 0:e.value)}}),s.jsxs("fieldset",{children:[s.jsx("legend",{children:$("AddWarningTitle")}),s.jsxs("div",{className:"checkbox-wrap",children:[s.jsxs("div",{children:[s.jsx("input",{type:"checkbox",id:"flag-nsfw",name:"nsfw",value:"nsfw"}),s.jsx("label",{htmlFor:"flag-nsfw",children:d[y].nsfw})]}),s.jsxs("div",{children:[s.jsx("input",{type:"checkbox",id:"flag-religious",name:"religious",value:"religious"}),s.jsx("label",{htmlFor:"flag-religious",children:d[y].religious})]}),s.jsxs("div",{children:[s.jsx("input",{type:"checkbox",id:"flag-political",name:"political",value:"political"}),s.jsx("label",{htmlFor:"flag-political",children:d[y].political})]}),s.jsxs("div",{children:[s.jsx("input",{type:"checkbox",id:"flag-racist",name:"racist",value:"racist"}),s.jsx("label",{htmlFor:"flag-racist",children:d[y].racist})]}),s.jsxs("div",{children:[s.jsx("input",{type:"checkbox",id:"flag-sexist",name:"sexist",value:"sexist"}),s.jsx("label",{htmlFor:"flag-sexist",children:d[y].sexist})]}),s.jsxs("div",{children:[s.jsx("input",{type:"checkbox",id:"flag-explicit",name:"explicit",value:"explicit"}),s.jsx("label",{htmlFor:"flag-explicit",children:d[y].explicit})]})]})]}),s.jsxs("p",{children:[$(z?"JokeIsSetToPrivateAndWillOnlyBeSeenByYouAndTheAdministrator":"JokeIsSetToPublicAndWillNeedVerificationFromAnAdministrator"),s.jsx("br",{}),s.jsx("br",{}),$(Y?"PublishAnonymously":"PublishWithNickname")]}),s.jsx("button",{type:"submit",className:"small",disabled:ne,id:"submit-new-joke",children:$(ne?"Saving":z?"Publish":"Send")})]})]})})};export{f as default};
