import{a as s,j as e}from"./chunk-CAff-kf5.js";import{L as n,b as r,as as t,j as a,at as i,a3 as o,i as u}from"../entries/src_pages.8IG4k9ME.js";import{s as c}from"./chunk-ByA33Q6F.js";import"./chunk-BmSI4Fww.js";import"./chunk-CVevwmbB.js";import"./chunk-CNpwfz3n.js";import"../entries/entry-client-routing.Bbnd9vHe.js";import"./chunk-VF2LHfxc.js";/* empty css              *//* empty css              */import"./chunk-D3Yr0q6g.js";import"./chunk-CKSHq_s9.js";import"./chunk-GmA6ITIw.js";import"./chunk-DFDIFHTJ.js";import"./chunk-BvVqAYuT.js";import"./chunk-Xgiuglox.js";import"./chunk-CmA2CWkd.js";import"./chunk-Cgv-mfVR.js";import"./chunk-fiALBYsU.js";import"./chunk-DbeWnEfh.js";import"./chunk-BurK_taE.js";import"./chunk-BVvUx4OK.js";import"./chunk-B3S1iNVp.js";import"./chunk-ei4kQ0Q2.js";import"./chunk-B_VbuTrp.js";import"./chunk-DAUSXQgp.js";import"./chunk-RtNBUybj.js";import"./chunk-CrSVf9D1.js";import"./chunk-Cgo1rCBn.js";import"./chunk-DQcwr13S.js";/* empty css              */import"./chunk-ITMKy72C.js";import"./chunk-e2Lvd1W2.js";import"./chunk-mrHSz1EB.js";/* empty css              */import"./chunk-CFcfonrM.js";import"./chunk-CblELM-r.js";import"./chunk-CEm4-sWZ.js";import"./chunk-CeuMhN-M.js";/* empty css              */const m=({user:m,language:p})=>{const{t:h}=s.useContext(n),d=r(),[j,l]=s.useState((null==m?void 0:m.name)||""),[k,g]=s.useState(""),[x,v]=s.useState(!1);return e.jsx(e.Fragment,{children:m?e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:h("EditPreferredNickname")}),e.jsxs("p",{className:c.p,children:[h("CurrentNickname"),": ",e.jsx("strong",{children:null==m?void 0:m.name})]}),e.jsx("p",{className:`${c.p} ${c["p-last"]}`,children:h("PleaseUseGoodTasteWhenChoosingYourNickname")}),e.jsxs("form",{onSubmit:async s=>{var e,n;s.preventDefault(),v(!0);try{const s=m._id;m&&d(t({_id:s,name:j,passwordOld:k,language:p})).then(s=>{s&&(!1===s.success?d(a(`${h("Error")}: ${s.message}`,!0,5)):(d(a(`${s.message??h("UserUpdated")}`,!1,5)),d(i(s.user)).then(()=>{d(o(null==m?void 0:m._id)).then(()=>d(u()))}),g(""))),v(!1)}).catch(s=>{var e,n,r,t;(null==(n=null==(e=s.response)?void 0:e.data)?void 0:n.message)?d(a(s.response.data.message,!0,8)):"ERR_BAD_REQUEST"===s.code&&(null==(t=null==(r=s.response)?void 0:r.data)?void 0:t.message)?d(a(`${h("Error")}: ${s.response.data.message}`,!0,5)):setTimeout(()=>{d(a(h("UserNotUpdated"),!0,5))},2e3),v(!1)})}catch(r){(null==(n=null==(e=r.response)?void 0:e.data)?void 0:n.message)&&d(a(r.response.data.message,!0,8)),v(!1)}},className:c["edit-user"],children:[e.jsx("div",{className:"input-wrap",children:e.jsxs("label",{children:[e.jsx("input",{required:!0,type:"text",name:"name",id:"name-edit",value:j,onChange:({target:s})=>l(s.value)}),e.jsx("span",{children:h("Nickname")})]})}),e.jsx("div",{className:"input-wrap",children:e.jsxs("label",{children:[e.jsx("input",{required:!0,type:"password",name:"old-password",id:"old-password-user",value:k,onChange:({target:s})=>g(s.value.trim())}),e.jsx("span",{children:h("CurrentPassword")})]})}),e.jsx("button",{type:"submit",disabled:x,children:h("Edit")})]})]}):e.jsx(e.Fragment,{})})};export{m as default};
