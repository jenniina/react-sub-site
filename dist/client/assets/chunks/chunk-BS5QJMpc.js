import{a as t,j as e}from"./chunk-CAff-kf5.js";import{s as h}from"./chunk-DciIfG-w.js";import{L as i,b as s,o,l as n,j as r,aE as c}from"../entries/src_pages.8IG4k9ME.js";import"./chunk-BmSI4Fww.js";import"./chunk-CVevwmbB.js";import"./chunk-CNpwfz3n.js";import"../entries/entry-client-routing.Bbnd9vHe.js";import"./chunk-VF2LHfxc.js";/* empty css              *//* empty css              */import"./chunk-D3Yr0q6g.js";import"./chunk-CKSHq_s9.js";import"./chunk-GmA6ITIw.js";import"./chunk-DFDIFHTJ.js";import"./chunk-BvVqAYuT.js";import"./chunk-Xgiuglox.js";import"./chunk-CmA2CWkd.js";import"./chunk-Cgv-mfVR.js";import"./chunk-fiALBYsU.js";import"./chunk-DbeWnEfh.js";import"./chunk-BurK_taE.js";import"./chunk-BVvUx4OK.js";import"./chunk-B3S1iNVp.js";import"./chunk-ei4kQ0Q2.js";import"./chunk-B_VbuTrp.js";import"./chunk-DAUSXQgp.js";import"./chunk-RtNBUybj.js";import"./chunk-CrSVf9D1.js";import"./chunk-Cgo1rCBn.js";import"./chunk-DQcwr13S.js";/* empty css              */import"./chunk-ITMKy72C.js";import"./chunk-e2Lvd1W2.js";import"./chunk-mrHSz1EB.js";/* empty css              */import"./chunk-CFcfonrM.js";import"./chunk-CblELM-r.js";import"./chunk-CEm4-sWZ.js";import"./chunk-CeuMhN-M.js";/* empty css              */const u=({language:u,title:p,onClick:a,words:l,width:x=600,height:d=400})=>{const{t:m}=t.useContext(i),y=s(),[j,k]=t.useState([]),g=o(),{windowWidth:w}=n(),f=t.useRef(null),C=(t,e)=>{const{width:h,height:i,ascent:s}=((t,e)=>{const h=(null==document?void 0:document.createElement("canvas")).getContext("2d");if(h){h.font=`${e}px Arial`;const i=.65*e,s=.2*e;return{width:h.measureText(t).width+2,height:i+s,ascent:i,descent:s}}return{width:0,height:0,ascent:0,descent:0}})(t.text,e);return{width:h,height:i,ascent:s}},$=(t,e)=>{const h=[],i=e.width*c(.2,.4),s=.2*e.height;return h.push({x:t.x+i,y:t.y-e.height}),h.push({x:t.x+i,y:t.y+t.height}),h.push({x:t.x+t.width,y:t.y+s}),h.push({x:t.x+t.width-i,y:t.y-e.height}),h.push({x:t.x+t.width-i,y:t.y+t.height}),h.push({x:t.x-e.width,y:t.y+s}),h.push({x:t.x-e.width,y:t.y+t.height}),w<500&&h.push({x:t.x-e.width,y:t.y-e.height}),w<500&&h.push({x:t.x-i,y:t.y+2*t.height}),w<500&&h.push({x:t.x-i,y:t.y-2*t.height}),w<500&&h.push({x:t.x+i,y:t.y+3*t.height}),w<500&&h.push({x:t.x+i,y:t.y-3*t.height}),w<500&&h.push({x:t.x-i,y:t.y+3*t.height}),w<500&&h.push({x:t.x-i,y:t.y-3*t.height}),h},b=(t,e,h,i,s)=>s.some(s=>t<s.x+s.width&&t+h>s.x&&e<s.y+s.height&&e+i>s.y),v=async t=>{var e,h;const i=t;if(a)a(t);else if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(i).then(()=>{y(r(m("CopiedToClipboard"),!1,3))},t=>{y(r(`${m("FailedToCopy")}`,!0,3))});else{const t=null==document?void 0:document.createElement("textarea");t.value=i,null==(e=f.current)||e.appendChild(t),t.focus(),t.select();try{null==document||document.execCommand("copy"),y(r(m("CopiedToClipboard"),!1,3))}catch(s){y(r(`${m("FailedToCopy")}`,!0,3))}null==(h=f.current)||h.removeChild(t)}};return t.useEffect(()=>{if(0===l.length)return void k([]);const t=[...l].sort((t,e)=>e.weight!==t.weight?e.weight-t.weight:t.text.length-e.text.length),i=[],s=[];t.forEach((t,o)=>{const n=t.weight,{width:r,height:c,ascent:u}=C(t,n);let a=!1;let l=0;if(0===o){const l=(x-r)/2,y=(d+u-c)/2;i.push({x:l,y:y,width:r,height:c}),s.push(e.jsx("text",{x:l,y:y+u,fontSize:n,fontFamily:"Arial, sans-serif",fill:`hsl(${110*o%360}, 100%, ${g?"20":"70"}%)`,className:h.word,style:{cursor:"pointer"},onClick:()=>{v(t.text)},tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||v(t.text)},"aria-label":p??`${m("CopyToClipboard")}: ${t.text}`,children:t.text},`${t.text}-${o}`)),a=!0}for(;!a&&l<30;){for(let l=0;l<i.length&&!a;l++){const y=i[l],j=$(y,{width:r,height:c});for(let l of j){const y={x:l.x,y:l.y,width:r,height:c};if(!(y.x<0||y.y<0||y.x+y.width>x||y.y+y.height>d)&&!b(y.x,y.y,y.width,y.height,i)){i.push(y),s.push(e.jsx("text",{x:y.x,y:y.y+u,fontSize:n,fontFamily:"Arial, sans-serif",fill:`hsl(${110*o%360}, 100%, ${g?"20":"70"}%)`,style:{cursor:"pointer"},className:h.word,onClick:()=>v(t.text),tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||v(t.text)},"aria-label":p??`${m("CopyToClipboard")}: ${t.text}`,children:t.text},`${t.text}-${o}`)),a=!0;break}}}l++}}),k(s)},[l,x,d,u,g,y]),e.jsx("div",{ref:f,className:h["cloud-wrap"],children:e.jsx("svg",{width:x,height:d,className:h.cloud,children:j})})};export{u as default};
