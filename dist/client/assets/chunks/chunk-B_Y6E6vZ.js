import{a as e,j as a}from"./chunk-CAff-kf5.js";import{s as n}from"./chunk-CFcfonrM.js";import{bi as t,bj as s,bk as l,bl as r,bm as o,bn as i,bo as d,bp as c,bq as u,br as m,bs as h}from"./chunk-D3Yr0q6g.js";import{L as p,o as g,S as j,av as x,aL as v,G as w,u as y,a as N,q as b,b as k,j as f}from"../entries/src_pages.8IG4k9ME.js";import{R as D}from"./chunk-CVevwmbB.js";import{s as $}from"./chunk-DAUSXQgp.js";import"./chunk-BmSI4Fww.js";import"../entries/entry-client-routing.Bbnd9vHe.js";import"./chunk-VF2LHfxc.js";/* empty css              *//* empty css              */import"./chunk-CKSHq_s9.js";import"./chunk-GmA6ITIw.js";import"./chunk-DFDIFHTJ.js";import"./chunk-BvVqAYuT.js";import"./chunk-Xgiuglox.js";import"./chunk-CmA2CWkd.js";import"./chunk-Cgv-mfVR.js";import"./chunk-fiALBYsU.js";import"./chunk-DbeWnEfh.js";import"./chunk-BurK_taE.js";import"./chunk-BVvUx4OK.js";import"./chunk-B3S1iNVp.js";import"./chunk-ei4kQ0Q2.js";import"./chunk-B_VbuTrp.js";import"./chunk-RtNBUybj.js";import"./chunk-CrSVf9D1.js";import"./chunk-Cgo1rCBn.js";import"./chunk-DQcwr13S.js";/* empty css              */import"./chunk-ITMKy72C.js";import"./chunk-e2Lvd1W2.js";import"./chunk-mrHSz1EB.js";/* empty css              */import"./chunk-CblELM-r.js";import"./chunk-CEm4-sWZ.js";import"./chunk-CeuMhN-M.js";/* empty css              */import"./chunk-CNpwfz3n.js";const S=w(6),C=({todo:l,language:r,priorityOptions:o,categoryOptions:i,handleModify:d,sending:c,newCategory:u,newPriority:m,setNewPriority:h,setNewCategory:w,showDeadline:y,setShowDeadline:N,title:b,newName:k,setNewName:f,newDay:C,setNewDay:T,newMonth:M,setNewMonth:Y,newYear:E,setNewYear:P,setIsOpen:F,maxCharacters:O})=>{const{t:L}=e.useContext(p),[_,q]=e.useState(null);e.useEffect(()=>{if(C&&M&&E){const e=new Date(Number(E),Number(M)-1,Number(C)),a=new Date;a.setHours(0,0,0,0),q(null),e<a&&q(L("TheDateIsInThePast"))}},[C,M,E,r]),e.useEffect(()=>{y?(C||T(((new Date).getDate()+1).toString().padStart(2,"0")),M||Y(((new Date).getMonth()+1).toString().padStart(2,"0")),E||P((new Date).getFullYear().toString())):(T(""),Y(""),P(""))},[y]);const I=e.useRef(null),H=e.useRef(null);e.useEffect(()=>{var e;H.current=null==document?void 0:document.activeElement,null==(e=I.current)||e.focus();const a=e=>{var a,n;if("Tab"===e.key){const t=null==(n=null==(a=I.current)?void 0:a.parentElement)?void 0:n.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(!t||0===t.length)return void e.preventDefault();const s=null==t?void 0:t[0],l=null==t?void 0:t[t.length-1];e.shiftKey?(null==document?void 0:document.activeElement)===s&&(e.preventDefault(),null==l||l.focus()):(null==document?void 0:document.activeElement)===l&&(e.preventDefault(),null==s||s.focus())}else"Escape"===e.key&&z()};return null==document||document.addEventListener("keydown",a),()=>{null==document||document.removeEventListener("keydown",a),H.current?H.current.focus():null==document||document.body.focus()}},[I.current]);const z=()=>{F(!1),H.current?H.current.focus():null==document||document.body.focus()},A=g();return D.createPortal(a.jsx("div",{className:`${$["modal-overlay"]} ${A?n.light:""}`,onClick:z,children:a.jsxs("div",{className:`${$["modal-content"]} ${n["todo-modal"]}`,onClick:e=>e.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":b??"Task",children:[a.jsxs("button",{ref:I,className:`${$["close-button"]} tooltip-wrap`,onClick:z,children:[a.jsx("span",{"aria-hidden":"true",children:"×"}),a.jsx("span",{className:"scr",children:L("Close")}),a.jsx("span",{"aria-hidden":"true",className:"tooltip below left narrow2",children:L("Close")})]}),a.jsx("h2",{children:L("Edit")}),a.jsxs("form",{onSubmit:d,className:`${n.modify}`,children:[a.jsx(j,{id:`category_${x(v((null==l?void 0:l.name)??S,r))}`,className:`${n.select} ${n["category-select"]}`,value:null==i?void 0:i.find(e=>e.value===u),onChange:e=>w(null==e?void 0:e.value),options:i,instructions:L("SelectCategory"),language:r,hideDelete:!0,z:3}),a.jsx(j,{id:`priority_${x(v((null==l?void 0:l.name)??S,r))}`,className:`${n.select}`,value:null==o?void 0:o.find(e=>e.value===m),onChange:e=>h(null==e?void 0:e.value),options:o,instructions:L("Priority"),language:r,hideDelete:!0,z:2}),a.jsxs("fieldset",{className:`${n.fieldset} ${n["deadline-wrap"]}`,children:[a.jsx("legend",{children:a.jsxs("label",{children:[L("Deadline")," ",a.jsx("input",{style:{marginLeft:"0.5em"},type:"checkbox",checked:y,onChange:()=>N(!y)})]})}),y&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:n["deadline-inputs"],children:[a.jsxs("div",{className:n.input,children:[a.jsx("label",{className:"scr",htmlFor:`day_${x(v((null==l?void 0:l.name)??L("Task"),r))}`,children:L("Day")}),a.jsx("input",{type:"number",id:`day_${x((null==l?void 0:l.name)||"Task")}`,name:"day",min:1,max:31,value:C,placeholder:"DD",onChange:e=>{return a=e.target.value,void(Number(a)<=31&&a.length<=2?(T(a),q(null)):q(`${L("Set")}: ${L("Day")}`));var a},required:!0,className:"bg"})]}),a.jsxs("div",{className:n.input,children:[a.jsx("label",{className:"scr",htmlFor:`month_${x((null==l?void 0:l.name)||"Task")}`,children:L("Month")}),a.jsx("input",{type:"number",id:`month_${x(v((null==l?void 0:l.name)??L("Task"),r))}`,name:"month",min:1,max:12,value:M,placeholder:"MM",onChange:e=>{return a=e.target.value,void(Number(a)<=12&&a.length<=2?(Y(a),q(null)):q(`${L("Set")}: ${L("Month")}`));var a},required:!0,className:"bg"})]}),a.jsxs("div",{className:n.input,children:[a.jsx("label",{className:"scr",htmlFor:`year_${x((null==l?void 0:l.name)||"Task")}`,children:L("Year")}),a.jsx("input",{type:"number",id:`year_${x(v((null==l?void 0:l.name)??L("Task"),r))}`,name:"year",min:(new Date).getFullYear(),max:(new Date).getFullYear()+10,value:E,placeholder:"YYYY",onChange:e=>(e=>{const a=e.target.value;Number(a)<=Number((new Date).getFullYear())+10&&a.length<=4?(P(a),q(null)):q(L("YearMustBeBetweenCurrentYearAnd10YearsFromNow"))})(e),required:!0,className:"bg"})]})]})," ",_&&a.jsx("p",{className:n.error,children:_})]})]}),a.jsxs("fieldset",{className:`${n.fieldset} ${n.textarea}`,children:[a.jsx("legend",{children:L("Task")}),a.jsxs("label",{children:[a.jsx("textarea",{id:`task_${x(null==l?void 0:l.name)}`,required:!0,name:"task",rows:4,value:k,onChange:e=>{f(e.target.value)}}),a.jsxs("p",{className:n.small,children:[O-k.length," ",L("CharactersLeft")," (",L("Max"),": ",O,")"," ",k.length>O&&a.jsx("span",{className:n.warning,children:L("NameTooLong")})]}),a.jsxs("span",{className:"scr",children:[L("Edit")," ",v((null==l?void 0:l.name)??L("Task"),r)]})]})]}),a.jsxs("button",{type:"submit",disabled:c,className:"modify",children:[L("Confirm")," ",a.jsx(t,{})]}),a.jsxs("button",{onClick:z,className:`reset ${n.cancel}`,type:"button",children:[L("Cancel")," ",a.jsx(s,{})]})]})]})}),null==document?void 0:document.getElementById("modal-root"))};function T({todo:t,toggleTodo:s,deleteTodo:g,language:j,modifyTodo:v,isDragging:w,handleUpdate:D,handleDragging:$,sending:S,priorityOptions:T,categoryOptions:M,zin:Y,maxCharacters:E}){const P=y(),F=N(),{t:O}=e.useContext(p),L=b(),_=k(),[q,I]=e.useState((null==t?void 0:t.name)??""),[H,z]=e.useState(!1),[A,B]=e.useState((null==t?void 0:t.priority)||"low"),[R,W]=e.useState((null==t?void 0:t.deadline)?new Date(t.deadline).getDate().toString().padStart(2,"0"):""),[K,U]=e.useState((null==t?void 0:t.deadline)?(new Date(t.deadline).getMonth()+1).toString().padStart(2,"0"):""),[G,J]=e.useState((null==t?void 0:t.deadline)?new Date(t.deadline).getFullYear().toString():""),Q=R&&K&&G?`${G}-${K}-${R}`:"",[V,X]=e.useState((null==t?void 0:t.category)||"other"),[Z,ee]=e.useState(!1);e.useEffect(()=>{(null==t?void 0:t.deadline)&&z(!0)},[t]),e.useEffect(()=>{if((null==t?void 0:t.name)!==q&&I((null==t?void 0:t.name)||""),null==t?void 0:t.deadline){const e=new Date(t.deadline);W(e.getDate().toString().padStart(2,"0")),U((e.getMonth()+1).toString().padStart(2,"0")),J(e.getFullYear().toString())}},[t]);const[ae,ne]=e.useState(!0),[te,se]=e.useState(!1);return a.jsx(a.Fragment,{children:a.jsxs("li",{style:{zIndex:`calc(${Y} - ${null==t?void 0:t.order})`},className:`${w?"dragging":""} ${Z?n.open:n.closed}`,draggable:ae,onDragStart:e=>{var a;ae?(e.dataTransfer.setData("application/my-app",null==(a=null==t?void 0:t.order)?void 0:a.toString()),$(!0)):e.preventDefault()},onDragEnd:()=>$(!1),children:[a.jsxs("span",{onMouseOver:()=>{ne(!0)},onMouseDown:()=>{ne(!0),se(!1)},className:`${n["drag-handle"]} tooltip-wrap`,children:[a.jsx(l,{}),a.jsx("span",{className:"tooltip narrow2 below right",children:O("Draggable")})]}),a.jsxs("label",{onClick:e=>{te&&e.preventDefault()},children:[a.jsx("input",{type:"checkbox",id:`check_${x(null==t?void 0:t.name)}`,checked:(null==t?void 0:t.complete)??!1,onChange:function(){s(null==t?void 0:t.key)}}),a.jsx("span",{onMouseOver:()=>{ne(!1)},onMouseDown:()=>{ne(!1),se(!0)},onMouseUp:()=>{var e;P&&F&&((null==(e=F.getSelection())?void 0:e.toString())?(ne(!1),se(!0)):(ne(!0),se(!1)))},children:null==t?void 0:t.name}),a.jsx("div",{className:`${n["more-info-wrap"]}`,children:(null==t?void 0:t.deadline)&&""!==(null==t?void 0:t.deadline)&&(()=>{const e=new Date(t.deadline),s=new Date;e.setHours(0,0,0,0),s.setHours(0,0,0,0);const l=e<s,r=e.getTime()===s.getTime();return a.jsxs("span",{className:`${n.deadline} ${l?n.overdue:""} ${r?n.today:""}`,children:[O("Deadline"),":"," ",r?O("Today"):new Date(t.deadline).toLocaleDateString(j,{year:"numeric",month:"long",day:"numeric"})]})})()})]}),a.jsxs("div",{className:`${n["btn-wrap"]}`,children:["high"===(null==t?void 0:t.priority)?a.jsxs("b",{className:`tooltip-wrap ${n.high}`,children:[a.jsx(r,{}),a.jsxs("span",{className:"scr",children:[O("Priority"),": ",O("High")]}),a.jsxs("span",{className:"tooltip narrow2 below left","aria-hidden":"true",children:[O("Priority"),": ",O("High")]})]}):"medium"===(null==t?void 0:t.priority)?a.jsxs("b",{className:`tooltip-wrap ${n.medium}`,children:[a.jsx(o,{}),a.jsxs("span",{className:"scr",children:[O("Priority"),": ",O("Medium")]}),a.jsxs("span",{className:"tooltip narrow2 below left","aria-hidden":"true",children:[O("Priority"),": ",O("Medium")]})]}):"low"===(null==t?void 0:t.priority)?a.jsxs("b",{className:`tooltip-wrap ${n.low}`,children:[a.jsx(i,{viewBox:"0 0 17 17"}),a.jsxs("span",{className:"scr",children:[O("Priority"),": ",O("Low")]}),a.jsxs("span",{className:"tooltip narrow2 below left","aria-hidden":"true",children:[O("Priority"),": ",O("Low")]})]}):a.jsx(a.Fragment,{children:" "}),"personal"===(null==t?void 0:t.category)?a.jsxs("b",{className:`tooltip-wrap ${n.cat}`,children:[a.jsx(d,{}),a.jsxs("span",{className:"scr",children:[O("CategoryTitle"),": ",O("Personal")]}),a.jsxs("span",{className:"tooltip narrow2 below left","aria-hidden":"true",children:[O("CategoryTitle"),": ",O("Personal")]})]}):"work"===(null==t?void 0:t.category)?a.jsxs("b",{className:`tooltip-wrap ${n.cat} ${n.bg}`,children:[a.jsx(c,{}),a.jsxs("span",{className:"scr",children:[O("CategoryTitle"),": ",O("Work")]}),a.jsxs("span",{className:"tooltip narrow2 below left","aria-hidden":"true",children:[O("CategoryTitle"),": ",O("Work")]})]}):"shopping"===(null==t?void 0:t.category)?a.jsxs("b",{className:`tooltip-wrap ${n.cat} ${n.bg}`,children:[a.jsx(u,{}),a.jsxs("span",{className:"scr",children:[O("CategoryTitle"),": ",O("Shopping")]}),a.jsxs("span",{className:"tooltip narrow2 below left","aria-hidden":"true",children:[O("CategoryTitle"),": ",O("Shopping")]})]}):a.jsxs("b",{className:`tooltip-wrap ${n.cat}`,children:[a.jsx(m,{}),a.jsxs("span",{className:"scr",children:[O("CategoryTitle"),": ",O("Other")]}),a.jsxs("span",{className:"tooltip narrow2 below left","aria-hidden":"true",children:[O("CategoryTitle"),": ",O("Other")]})]}),a.jsxs("button",{onClick:()=>ee(!0),className:`${n.edit} tooltip-wrap`,disabled:(null==t?void 0:t.complete)??!1,children:[a.jsx(h,{}),a.jsx("span",{className:"scr",children:O("Edit")}),a.jsx("span",{className:"tooltip narrow2 below left","aria-hidden":"true",children:O("Edit")})]}),a.jsxs("button",{className:`${n.delete} tooltip-wrap`,onClick:Z?()=>ee(!1):async function(){await L({message:O("AreYouSureYouWantToDelete")+' "'+(null==t?void 0:t.name)+'"?'})&&(I(""),g(null==t?void 0:t.key),ee(!1))},children:[a.jsx("span",{className:n["delete-inner"],"aria-hidden":"true",children:"×"}),a.jsx("span",{className:"scr",children:O("DeleteTask")}),a.jsx("span",{className:"tooltip below left narrow2","aria-hidden":"true",children:O("DeleteTask")})]})]}),Z&&a.jsx(C,{title:null==t?void 0:t.name,language:j,handleModify:e=>{e.preventDefault(),""!==q?q.length>E?_(f(O("NameTooLong"),!0,5)):(v(null==t?void 0:t.key,q,A,Q,V),ee(!1)):_(f(O("AddTask"),!0,5))},newName:q,setNewName:I,newPriority:A,setNewPriority:B,newDay:R,setNewDay:W,newMonth:K,setNewMonth:U,newYear:G,setNewYear:J,newCategory:V,setNewCategory:X,priorityOptions:T,categoryOptions:M,showDeadline:H,setShowDeadline:z,sending:S,todo:t,setIsOpen:ee,maxCharacters:E})]})})}export{T as default};
