import{a as e,j as t}from"./chunk-CAff-kf5.js";import{s as a}from"./chunk-ITMKy72C.js";import{M as s,aT as n,aU as r}from"./chunk-D3Yr0q6g.js";import{L as o,b as i,au as l,av as c,j as u,A as d}from"../entries/src_pages.8IG4k9ME.js";import"./chunk-BmSI4Fww.js";import"./chunk-CVevwmbB.js";import"./chunk-CNpwfz3n.js";import"../entries/entry-client-routing.Bbnd9vHe.js";import"./chunk-VF2LHfxc.js";/* empty css              *//* empty css              */import"./chunk-CKSHq_s9.js";import"./chunk-GmA6ITIw.js";import"./chunk-DFDIFHTJ.js";import"./chunk-BvVqAYuT.js";import"./chunk-Xgiuglox.js";import"./chunk-CmA2CWkd.js";import"./chunk-Cgv-mfVR.js";import"./chunk-fiALBYsU.js";import"./chunk-DbeWnEfh.js";import"./chunk-BurK_taE.js";import"./chunk-BVvUx4OK.js";import"./chunk-B3S1iNVp.js";import"./chunk-ei4kQ0Q2.js";import"./chunk-B_VbuTrp.js";import"./chunk-DAUSXQgp.js";import"./chunk-RtNBUybj.js";import"./chunk-CrSVf9D1.js";import"./chunk-Cgo1rCBn.js";import"./chunk-DQcwr13S.js";/* empty css              */import"./chunk-e2Lvd1W2.js";import"./chunk-mrHSz1EB.js";/* empty css              */import"./chunk-CFcfonrM.js";import"./chunk-CblELM-r.js";import"./chunk-CEm4-sWZ.js";import"./chunk-CeuMhN-M.js";/* empty css              */function p({language:d,status:p,statuses:h,id:m,index:g,data:j,handleDragging:x,handleUpdate:k,handleRemoveColor:f,setTheTarget:v,focusedCard:b,setFocusedCard:C,translateStatus:y}){const{t:D}=e.useContext(o),S=i(),N={backgroundColor:null==j?void 0:j.color,padding:"0.3em 5%",color:"dark"==(null==j?void 0:j.lightness)?"white":"black",borderColor:"dark"==(null==j?void 0:j.lightness)?"var(--color-gray-7)":"var(--color-gray-5)",textShadow:"dark"==(null==j?void 0:j.lightness)?"1px 1px 1px black":"1px -1px 3px rgba(255,255,255,0.6), -1px 1px 3px rgba(255,255,255,0.6)"},[$,w]=e.useState(!1);const T=e.useRef(null);l({ref:T,onOutsideClick:function(){w(!1)}});const O=e.useRef(0);e.useEffect(()=>{var e;b===m&&(null==(e=T.current)||e.focus())},[b,m]);return t.jsx("li",{ref:T,draggable:"true",onDragStart:e=>(e=>{e.dataTransfer.setData("text/plain",JSON.stringify({type:"item",id:null==j?void 0:j.id}))})(e),onDragEnter:e=>((e,t)=>{e.preventDefault(),v(t),O.current=t})(e,m),onDragOver:e=>(e=>{x(!0),e.preventDefault()})(e),onDragEnd:()=>x(!1),role:"listitem",tabIndex:0,onKeyDown:e=>((e,t)=>{var a,s;const n=e.target.closest("li");let r;r=n||e.target;const o=Number(null==(a=null==r?void 0:r.previousElementSibling)?void 0:a.dataset.identity),i=Number(null==(s=null==r?void 0:r.nextElementSibling)?void 0:s.dataset.identity);switch(e.key){case"ArrowUp":j&&null!==o&&(e.preventDefault(),k(t,j.status,o),C(t));break;case"ArrowDown":j&&null!==i&&(e.preventDefault(),k(t,j.status,i),C(t));break;case"Tab":C(null)}})(e,m),"data-identity":m,children:t.jsxs("div",{style:N,className:`${a.card}`,children:[t.jsx("span",{className:a.text,children:null==j?void 0:j.content}),t.jsxs("b",{children:[t.jsx("button",{onClick:()=>f(j.content),children:"Ã—"}),t.jsxs("button",{"aria-haspopup":"true",onClick:function(){w(e=>!e)},children:[t.jsx(s,{"aria-hidden":"true"}),t.jsx("span",{className:"scr",id:`instructions${m}`,children:D("ChooseDestination")})]})]}),t.jsxs("nav",{className:$?`${a.open} ${a.blur}`:`${a.blur}`,style:{color:"var(--color-primary-20)",textShadow:"none"},children:[t.jsxs("span",{style:{margin:"0 auto 0.3em",display:"block",width:"max-content",fontSize:"0.9em"},children:[D("Move"),":"]}),t.jsxs("ul",{role:"listbox","aria-describedby":`instructions${m}`,"aria-expanded":$?"true":"false",className:c(p),children:[t.jsx("li",{role:"option",className:a.copy,children:t.jsxs("a",{className:a.copy,onClick:()=>(e=>{var t,a,s;if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(e).then(()=>{S(u(D("CopiedToClipboard"),!1,3))},e=>{S(u(`${D("FailedToCopy")}`,!0,3))});else{const r=null==document?void 0:document.createElement("textarea");r.value=e,null==(t=T.current)||t.appendChild(r),r.focus(),r.select();try{null==document||document.execCommand("copy"),S(u(D("CopiedToClipboard"),!1,3))}catch(n){(null==(s=null==(a=n.response)?void 0:a.data)?void 0:s.message)?S(u(n.response.data.message,!0,8)):S(u(`${D("FailedToCopy")}`,!0,3))}null==document||document.body.removeChild(r)}})(j.content),tabIndex:0,title:D("CopyToClipboard"),children:[t.jsx(n,{}),t.jsx("i",{children:D("CopyText")})]})}),h.map((e,a)=>t.jsx("li",{role:"option",className:c(e),children:t.jsxs("a",{className:c(e),"data-status":e,onClick:e=>function(e){const t=e.target.closest("a[data-status]"),a=null==t?void 0:t.dataset.status;j&&a&&k(j.id,a)}(e),onKeyDown:e=>function(e){switch(e.code){case"Enter":case"Space":e.stopPropagation(),e.preventDefault();const t=e.target.closest("a[data-status]"),a=(null==t?void 0:t.dataset.status)??p;j&&k(j.id,a),w(e=>!e);break;case"Escape":e.stopPropagation(),e.preventDefault(),w(!1)}}(e),tabIndex:0,title:`${D("ToTarget")}: ${y(e).toLowerCase()}`,children:[t.jsx(r,{}),t.jsx("i",{children:y(e)})]})},`${c(e)}-${a}-${g}`))]})]})]})})}const h=({language:s,status:n,statuses:r,isDragging:h,handleDragging:m,handleUpdate:g,handleRemoveColor:j,itemsByStatus:x,lightTheme:k,updateStatus:f,reorderStatuses:v,deleteStatus:b,regex:C})=>{const{t:y}=e.useContext(o),D=i(),[S,N]=e.useState(0),[$,w]=e.useState(!1),[T,O]=e.useState(""),[E,F]=e.useState(null),R=e.useRef(null),[A,I]=e.useState(!1);l({ref:R,onOutsideClick:()=>w(!1)});const J=e=>{switch(e.toLowerCase()){case"good":return y("Good");case"bad":return y("Bad");case"neutral":return y("Neutral");default:return e.replace(/_/g," ")}};return t.jsxs("div",{className:`${a["cards-container"]} ${h?a["area-dragging"]:""} ${k?a.light:""}`,onDrop:e=>((e,t)=>{e.preventDefault();const a=JSON.parse(e.dataTransfer.getData("text/plain"));if("span"===a.type){const e=a.id;if(e!==t){const a=Array.from(r),[s]=a.splice(e,1);a.splice(t,0,s),v(e,t)}m(!1)}})(e,r.indexOf(n)),onDragEnd:()=>m(!1),children:[t.jsxs("span",{ref:R,id:`label-${c(n)}`,className:a["status-label"],draggable:!0,onDragStart:e=>((e,t)=>{e.dataTransfer.setData("text/plain",JSON.stringify({type:"span",id:t.toString()})),m(!0)})(e,r.indexOf(n)),onDragOver:e=>{e.stopPropagation(),e.preventDefault()},children:[t.jsx("b",{children:J(n)}),t.jsx(d,{isOpen:$,setIsFormOpen:w,language:s,text:"*",hideBrackets:!0,onClick:()=>O(n),className:`narrow2 ${a["change-status"]} change-status`,wrapperClass:"change-status-wrap",tooltip:y("Edit"),x:"left",y:"below",children:t.jsxs(t.Fragment,{children:[t.jsx("i",{children:J(n)}),t.jsxs("form",{className:a["change-status-form"],onSubmit:e=>{e.preventDefault(),f(r.indexOf(n),T)},children:[t.jsx("div",{className:"input-wrap",children:t.jsxs("label",{htmlFor:`${c(n)}-status`,children:[t.jsx("input",{type:"text",required:!0,id:`${c(n)}-status`,value:T,onChange:e=>(e=>{I(!0);const t=e.target.value;C.test(t)?(O(t),I(!1)):(D(u(y("SpecialCharactersNotAllowed"),!0,6)),I(!1))})(e)}),t.jsxs("span",{children:[y("Change"),":"]})]})}),t.jsx("button",{type:"submit",disabled:A,children:y("Change")}),t.jsx("button",{type:"button",className:"danger delete",onClick:()=>{b(n)},children:y("Delete")})]})]})})]}),t.jsx("ul",{"aria-labelledby":`label-${c(n)}`,id:c(n),className:c(n),role:"list",onDrop:e=>{const t=JSON.parse(e.dataTransfer.getData("text/plain"));"item"===t.type&&(g(t.id,n,S),m(!1))},onDragOver:e=>e.preventDefault(),children:null==x?void 0:x.map((e,a)=>t.jsx(p,{language:s,id:e.id,index:a,data:e,status:n,statuses:r,handleDragging:m,handleUpdate:g,handleRemoveColor:j,setTheTarget:N,focusedCard:E,setFocusedCard:F,translateStatus:J},`${c(n)}-item-${e.id}-${a}`))})]})};export{h as default};
