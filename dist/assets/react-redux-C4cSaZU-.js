import{r as U}from"./react-dom-CxfJ6lHP.js";import"./hoist-non-react-statics-D5aJipOz.js";import{r as u}from"./react-A9DAvxly.js";import"./react-is-DUDD-a5e.js";import{w as D}from"./use-sync-external-store-DEc9BFqZ.js";function L(e){e()}let E=L;const M=e=>E=e,H=()=>E,m=Symbol.for("react-redux-context"),v=typeof globalThis<"u"?globalThis:{};function T(){var e;if(!u.createContext)return{};const o=(e=v[m])!=null?e:v[m]=new Map;let r=o.get(u.createContext);return r||(r=u.createContext(null),o.set(u.createContext,r)),r}const l=T();function h(e=l){return function(){return u.useContext(e)}}const k=h(),V=()=>{throw new Error("uSES not initialized!")};let R=V;const $=e=>{R=e},z=(e,o)=>e===o;function B(e=l){const o=e===l?k:h(e);return function(t,s={}){const{equalityFn:n=z,stabilityCheck:i=void 0,noopCheck:b=void 0}=typeof s=="function"?{equalityFn:s}:s,{store:a,subscription:c,getServerState:d,stabilityCheck:S,noopCheck:y}=o();u.useRef(!0);const p=u.useCallback({[t.name](x){return t(x)}}[t.name],[t,S,i]),f=R(c.addNestedSub,a.getState,d||a.getState,p,n);return u.useDebugValue(f),f}}const Q=B();function P(){const e=H();let o=null,r=null;return{clear(){o=null,r=null},notify(){e(()=>{let t=o;for(;t;)t.callback(),t=t.next})},get(){let t=[],s=o;for(;s;)t.push(s),s=s.next;return t},subscribe(t){let s=!0,n=r={callback:t,next:null,prev:r};return n.prev?n.prev.next=n:o=n,function(){!s||o===null||(s=!1,n.next?n.next.prev=n.prev:r=n.prev,n.prev?n.prev.next=n.next:o=n.next)}}}}const w={notify(){},get:()=>[]};function W(e,o){let r,t=w,s=0,n=!1;function i(x){d();const C=t.subscribe(x);let g=!1;return()=>{g||(g=!0,C(),S())}}function b(){t.notify()}function a(){f.onStateChange&&f.onStateChange()}function c(){return n}function d(){s++,r||(r=e.subscribe(a),t=P())}function S(){s--,r&&s===0&&(r(),r=void 0,t.clear(),t=w)}function y(){n||(n=!0,d())}function p(){n&&(n=!1,S())}const f={addNestedSub:i,notifyNestedSubs:b,handleChangeWrapper:a,isSubscribed:c,trySubscribe:y,tryUnsubscribe:p,getListeners:()=>t};return f}const I=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",K=I?u.useLayoutEffect:u.useEffect;function X({store:e,context:o,children:r,serverState:t,stabilityCheck:s="once",noopCheck:n="once"}){const i=u.useMemo(()=>{const c=W(e);return{store:e,subscription:c,getServerState:t?()=>t:void 0,stabilityCheck:s,noopCheck:n}},[e,t,s,n]),b=u.useMemo(()=>e.getState(),[e]);K(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),b!==e.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,b]);const a=o||l;return u.createElement(a.Provider,{value:i},r)}function N(e=l){const o=e===l?k:h(e);return function(){const{store:t}=o();return t}}const _=N();function q(e=l){const o=e===l?_:N(e);return function(){return o().dispatch}}const Y=q();$(D.useSyncExternalStoreWithSelector);M(U.unstable_batchedUpdates);export{X as P,Q as a,Y as u};
