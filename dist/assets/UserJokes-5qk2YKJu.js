import{r,j as s}from"./react-kX_YxI4E.js";import{a_ as Ls,a$ as Ns,b0 as $s,b1 as As,b2 as Js,b3 as Bs,b4 as Fs,b5 as Os,b6 as Ts,b7 as Ms,b8 as Ps,b9 as ks,ba as Is,z as De,w as qe,bb as Rs,bc as Us,x as _s,y as Vs}from"./react-icons-DhcENkY1.js";import{L as Ds,E as O,O as Y,u as qs,aO as he,i as zs,U as Ys,V as ze,a9 as ue,S as K,aP as Se,a8 as Hs,P as A,A as Ws,W as Gs,aN as ee,e as H,a6 as Qs}from"./index-De2CRixK.js";import{B as Ye}from"./ButtonToggle-Brqk0qTA.js";import{a as He}from"./react-redux-BEmJlIGA.js";import{n as Xs,d as Zs}from"./Jokes-CxiXlxbo.js";import"./dom-to-image-more-CfDXlNbO.js";import"./react-dom-B5MLDbn_.js";import"./scheduler-CzFDRTuY.js";import"./@reduxjs-DhFEcpJw.js";import"./immer-C0GRqQ_d.js";import"./redux-CE3tqztX.js";import"./@babel-DF5_wy6Y.js";import"./redux-thunk-CY0Q9z1Q.js";import"./axios-CCb-kr4I.js";import"./react-router-dom-StiqOUIT.js";import"./react-router-DUuhLvki.js";import"./@remix-run-DTnHqtaE.js";import"./hoist-non-react-statics-DQogQWOa.js";import"./react-is-DUDD-a5e.js";import"./use-sync-external-store-BPp6CH6k.js";var Ks=(o=>(o.newest="newest",o.oldest="oldest",o))(Ks||{});const jt=({user:o,handleDelete:Le,handleUpdate:We,language:h,isCheckedSafemode:se,setIsCheckedSafemode:Ge,handleToggleChangeSafemode:Qe,translateWordLanguage:Xe,optionsSortBy:Ze,getKeyofEnum:le,options:Ke,norrisCategories:es,getCategoryInLanguage:te,setIsEditOpen:ss,editId:ts,setEditId:as,handleRemoveJokeFromBlacklisted:ls,handleBlacklistUpdate:is,sending:pe})=>{var Ie;const{t}=r.useContext(Ds),ae=He(e=>e.users),x=o==null?void 0:o._id,v=He(e=>{var a;return(a=e.jokes)==null?void 0:a.jokes}),[J,ns]=r.useState([]),[xe,rs]=r.useState({}),[m,W]=r.useState(!1),[G,fe]=r.useState(J),[y,B]=r.useState(!1),[ge,cs]=r.useState([]),[Q,ie]=r.useState(!1),[os,Ne]=r.useState(0),[F,ve]=r.useState("popularity"),[f,$e]=r.useState(""),[T,ne]=r.useState(""),[_,Ae]=r.useState(""),[Je,ds]=r.useState(!1),[S,me]=r.useState(es[0]),[hs,j]=r.useState(void 0),[ye,Be]=r.useState(O.en),[Fe,Oe]=r.useState(Y.Misc),[be,Te]=r.useState("newest"),[re,us]=r.useState(!0),[E,ps]=r.useState(3),[ce,je]=r.useState(!1),C=qs();r.useEffect(()=>{if(Array.isArray(v)&&v.length>0&&Array.isArray(ae)&&(ae==null?void 0:ae.length)>0){let e=v==null?void 0:v.map(a=>{const l=o==null?void 0:o.name,i=he[h][le(O,a.language)];return{...a,visible:!1,translatedLanguage:i??"",name:a.anonymous?"ÖÖÖ_Anonymous":l??""}});e=se?se?e.filter(a=>a.safe).sort((a,l)=>{var i,d;return((i=l.user)==null?void 0:i.length)-((d=a.user)==null?void 0:d.length)}):[]:e.filter(a=>a.safe===!1).sort((a,l)=>{var i,d;return((i=l.user)==null?void 0:i.length)-((d=a.user)==null?void 0:d.length)}),ns(e)}},[v,ae,h,se,F,be,re]),r.useEffect(()=>{Te(re?"newest":"oldest")},[re]);const xs=()=>{us(e=>!e)};r.useEffect(()=>{C(zs()),C(Ys()),C(ze())},[]),r.useEffect(()=>{const e=T===Y.ChuckNorris;ds(e)},[T]);const Me=e=>{D(1),$e(e.target.value)},fs=()=>{ne(""),Ae(""),me(V[0]),$e(""),ie(!1),Ne(e=>e+1),ve("popularity"),D(1),Ge(!0)},gs=e=>{ne(e.value)};r.useEffect(()=>{setTimeout(()=>{const e=document.querySelectorAll(".select-container"),a=(e==null?void 0:e.length)+2;e==null||e.forEach((l,i)=>{const d=a-i;l.style.zIndex=`${d}`})},500)},[y]),r.useEffect(()=>{W(!x)},[x]);const vs=e=>{rs(a=>({...a,[e]:!a[e]}))};r.useEffect(()=>{D(1);let e=[...J];F==="age"&&(e=[...J].sort((l,i)=>{const d=l.createdAt?new Date(l.createdAt).getTime():0,p=i.createdAt?new Date(i.createdAt).getTime():0;return be==="newest"?p-d:d-p})),e=e==null?void 0:e.filter(l=>{var i,d,p,b,L,N,M,P,k;if(l){const I=("joke"in l?(i=l.joke)==null?void 0:i.toLowerCase().includes(f.toLowerCase()):!1)||("setup"in l?(d=l.setup)==null?void 0:d.toLowerCase().includes(f.toLowerCase()):!1)||("delivery"in l?(p=l.delivery)==null?void 0:p.toLowerCase().includes(f.toLowerCase()):!1)||((b=l.name)==null?void 0:b.toLowerCase().includes(f.toLowerCase()))||((L=l.category)==null?void 0:L.toLowerCase().includes(f.toLowerCase()))||((N=l.subCategories)==null?void 0:N.includes(f==null?void 0:f.toLowerCase()))||((M=l.translatedLanguage)==null?void 0:M.toLowerCase().includes(f.toLowerCase())),R=T?l.category===T:!0,U=_!==""?l.language===_:!0,c=(S==null?void 0:S.value)!==""&&(S==null?void 0:S.value)!=="any"?(P=l.subCategories)==null?void 0:P.includes(S==null?void 0:S.value):!0;return m&&l.private===!1&&l.verified===!0||m&&l.private===void 0||!m&&((k=l.user)!=null&&k.includes(x))?U&&R&&c&&I:!1}}),e=e==null?void 0:e.filter(l=>{var d;return!((d=o==null?void 0:o.blacklistedJokes)==null?void 0:d.some(p=>p.jokeId===l.jokeId&&p.language===l.language))}),F==="popularity"&&(e=e==null?void 0:e.sort((l,i)=>{var d,p;return((d=i.user)==null?void 0:d.length)-((p=l.user)==null?void 0:p.length)})),F==="category"&&(e=e==null?void 0:e.sort((l,i)=>l.category>i.category?1:-1)),F==="language"&&(e=e==null?void 0:e.sort((l,i)=>l.translatedLanguage>i.translatedLanguage?1:-1)),F==="name"&&(e=e==null?void 0:e.sort((l,i)=>l.name>i.name?1:-1));const a=e.slice(0,E);if(Q&&e.length>0){const l=e[Math.floor(Math.random()*e.length)];fe([l])}else fe(ce?a:e)},[m,J,T,_,S,f,Q,os,be,F,ce,E]);const ms=e=>{let a=e;e==="Chuck Norris"?a="ChuckNorris":e==="Dad Joke"&&(a="DadJoke"),ne(a)},ys=e=>{var l;const a=v==null?void 0:v.find(i=>i._id===e);if(!a){C(H(`${t("ENoJokeFound")}`,!0,8));return}if(a){if((l=a.user)!=null&&l.includes(x==null?void 0:x.toString())){C(H(`${t("EJokeAlreadySaved")}`,!1,8));return}C(Qs({...a,user:[...a.user,x]})).then(()=>{C(ze()),C(H(`${t("ESavedJoke")}`,!1,8))})}};let V=Array.from(new Set((Ie=J==null?void 0:J.filter(e=>e.private===!1&&e.verified===!0||e.private===void 0))==null?void 0:Ie.flatMap(e=>e.subCategories))).map(e=>{const a=e?ue[e][h]||e:"",l=(a==null?void 0:a.charAt(0).toUpperCase())??e??"",i=(a==null?void 0:a.slice(1))??e??"";return{label:l+i,value:e}});V=V.filter(e=>e.value!=="any"),V.unshift({label:ue.any[h].charAt(0).toUpperCase()+ue.any[h].slice(1),value:"any"}),r.useEffect(()=>{me(V[0])},[h]),r.useEffect(()=>{(async()=>{var a;if(Array.isArray(v)&&v.length>0&&o&&(o!=null&&o.blacklistedJokes)){const l=await Promise.all(((a=o==null?void 0:o.blacklistedJokes)==null?void 0:a.map(async i=>{let d=i.value;return(v==null?void 0:v.find(b=>{var L,N;return((L=b.jokeId)==null?void 0:L.toString())===((N=i.jokeId)==null?void 0:N.toString())&&b.language===i.language}))??await bs(i.jokeId,i.language,d??void 0)}))||[]);cs(l)}})()},[o==null?void 0:o.blacklistedJokes,v]);const X=ge==null?void 0:ge.filter(e=>{var a,l,i,d,p;if(e)return("joke"in e?(a=e.joke)==null?void 0:a.toLowerCase().includes(f.toLowerCase()):!1)||("setup"in e?(l=e.setup)==null?void 0:l.toLowerCase().includes(f.toLowerCase()):!1)||("delivery"in e?(i=e.delivery)==null?void 0:i.toLowerCase().includes(f.toLowerCase()):!1)||((d=e.category)==null?void 0:d.toLowerCase().includes(f.toLowerCase()))||((p=e.subCategories)==null?void 0:p.includes(f==null?void 0:f.toLowerCase()))}),bs=async(e,a,l)=>{var i,d,p,b,L,N,M,P,k,I,R,U,c,w,z,de,Re,Ue,_e;try{if(l){let $;try{$=await Xs.searchNorrisJoke(l)}catch(u){return(d=(i=u.response)==null?void 0:i.data)!=null&&d.message&&C(H(u.response.data.message,!0,8)),console.error(u),null}finally{return{jokeId:$.id,joke:$.value,category:Y.ChuckNorris,language:O.en,type:A.single,safe:!((p=$.categories)!=null&&p.includes("explicit")||(b=$.categories)!=null&&b.includes("political")||(L=$.categories)!=null&&L.includes("religion"))}}}else{const u=await(await fetch(`https://v2.jokeapi.dev/joke/Any?idRange=${e}&lang=${a}&format=json`)).json();if(u.error){const Ve=await Zs.getDadJokeById(e);return{jokeId:Ve.id,joke:Ve.joke,category:Y.DadJoke,language:O.en,type:A.single,safe:!0}}else return u.type==="twopart"?{jokeId:u.id,setup:u.setup,delivery:u.delivery,category:u.category,language:u.lang,type:A.twopart,safe:!((N=u.flags)!=null&&N.nsfw||(M=u.flags)!=null&&M.religious||(P=u.flags)!=null&&P.political||(k=u.flags)!=null&&k.racist||(I=u.flags)!=null&&I.sexist||(R=u.flags)!=null&&R.explicit||!u.safe)}:{jokeId:u.id,joke:u.joke,category:u.category,language:u.lang,type:A.single,safe:!((U=u.flags)!=null&&U.nsfw||(c=u.flags)!=null&&c.religious||(w=u.flags)!=null&&w.political||(z=u.flags)!=null&&z.racist||(de=u.flags)!=null&&de.sexist||(Re=u.flags)!=null&&Re.explicit||!u.safe)}}}catch($){return(_e=(Ue=$.response)==null?void 0:Ue.data)!=null&&_e.message&&C(H($.response.data.message,!0,8)),console.error($),null}};r.useEffect(()=>{x||B(!1)},[x]);const[g,D]=r.useState(1),[oe,js]=r.useState(10),[Cs,Ce]=r.useState(1),[ws,we]=r.useState(3),Z=e=>{D(e),e<=2?(Ce(1),we(3)):e>=n.length-1?(Ce(n.length-2),we(n.length)):(Ce(e-1),we(e+1))};r.useEffect(()=>{g||D(1)},[g]),r.useEffect(()=>{Z(1),B(!1)},[m]);const Pe=g*oe,Es=Pe-oe,q=G==null?void 0:G.slice(Es,Pe),n=[];for(let e=1;e<=Math.ceil((G==null?void 0:G.length)/oe);e++)n==null||n.push(e);const Ee=n==null?void 0:n.slice(Cs-1,ws);r.useEffect(()=>{g>n.length&&D(1)},[n]);const Ss=e=>{navigator.clipboard.writeText(e).then(function(){C(H(`${t("EJokeCopiedToClipboard")}`,!1,3))},function(){C(H(`${t("EFailedToCopyJokeToClipboard")}`,!0,3))})},ke=e=>s.jsxs("div",{className:"pagination",children:[(n==null?void 0:n.length)>1&&s.jsx("div",{children:s.jsxs("span",{children:[g," / ",n==null?void 0:n.length]})}),s.jsxs("div",{children:[s.jsxs("div",{className:"chevrons-wrap back",children:[s.jsxs("button",{className:`inner-nav-btn first tooltip-wrap ${g===1?"disabled":""} ${(n==null?void 0:n.length)<=3?"hidden":""}`,disabled:g===1,onClick:()=>Z(1),children:[s.jsx(qe,{})," ",s.jsx("span",{className:"tooltip narrow2 below right",children:t("EFirstPage")})]}),s.jsxs("button",{className:`inner-nav-btn back tooltip-wrap ${g===1?"disabled":""} ${(n==null?void 0:n.length)<=3?"hidden":""}`,disabled:g===1,onClick:()=>Z(g-1),children:[s.jsx(_s,{})," ",s.jsx("span",{className:"tooltip narrow2 below right",children:t("EBack")})]})]}),s.jsx("div",{className:`numbers${(n==null?void 0:n.length)===1?" hidden":""}`,children:Ee==null?void 0:Ee.map(a=>s.jsx("button",{className:`${a>9?"over9":a>99?"over99":a>999?"over999":""} ${a===g?"active":""}`,onClick:()=>Z(a),children:a},a))}),s.jsxs("div",{className:"chevrons-wrap forward",children:[s.jsxs("button",{className:`inner-nav-btn forward tooltip-wrap ${g===(n==null?void 0:n.length)?"disabled":""} ${(n==null?void 0:n.length)<=3?"hidden":""}`,disabled:g===(n==null?void 0:n.length),onClick:()=>Z(g+1),children:[s.jsx(Vs,{})," ",s.jsx("span",{className:"tooltip narrow2 below left",children:t("ENext")})]}),s.jsxs("button",{className:`inner-nav-btn last tooltip-wrap ${g===(n==null?void 0:n.length)?"disabled":""} ${(n==null?void 0:n.length)<=3?"hidden":""}`,disabled:g===(n==null?void 0:n.length),onClick:()=>Z(n==null?void 0:n.length),children:[s.jsx(De,{}),s.jsxs("span",{className:"tooltip narrow2 left below",children:[t("ELastPage"),": ",n==null?void 0:n.length]})]})]})]}),s.jsxs("div",{children:[s.jsx("input",{"aria-labelledby":"items-per-page",className:"items-per-page narrow",name:"items-per-page",id:`items-per-page-input-${e}`,type:"number",min:"1",max:"100",defaultValue:oe,onChange:a=>js(a.target.valueAsNumber>0?a.target.valueAsNumber:1)})," ",s.jsx("span",{id:"items-per-page",children:t("EPerPage")})," "]})]});return s.jsxs("div",{className:"saved",id:"saved",children:[x&&s.jsxs("div",{className:"local-saved-wrap",children:[s.jsx("button",{className:`btn${m&&!y?" active":""}`,onClick:()=>{W(!0),B(!1)},children:t(m?"ELocalJokes":"ESeeLocalJokes")}),s.jsx("button",{className:`btn${!m&&!y?" active":""}`,onClick:()=>{W(!1),B(!1)},children:t("EYourSavedJokes")})]}),s.jsxs("div",{className:"saved-inner",children:[s.jsx("div",{className:"filler"}),s.jsxs("div",{children:[!y&&s.jsxs(s.Fragment,{children:[s.jsx("h3",{children:t(m?"ELocalJokes":"EYourSavedJokes")}),m&&s.jsxs("p",{className:"mb3 flex center textcenter",children:[" ",t("EUserSubmittedJokes")]}),s.jsxs("div",{className:"toggle-wrap",children:[s.jsxs("div",{className:"toggle-inner-wrap",children:[s.jsxs("div",{className:"safemode-wrap",children:[s.jsx(Ye,{isChecked:se,name:"safemode",id:"safemode2",className:`${h} ${se?"":"unsafe"} userjokes safemode`,label:`${t("EFilter")}: `,hideLabel:!1,on:t("ESafeTitle"),off:t("EUnsafeTitle"),handleToggleChange:Qe}),F==="age"&&s.jsx(Ye,{isChecked:re,name:"age",id:"age",className:`${h} age`,label:`${t("EAge")}: `,hideLabel:!1,on:t("ENewest"),off:t("EOldest"),handleToggleChange:()=>{xs()},equal:!0})]}),s.jsx("div",{className:"sortby-wrap",children:s.jsx(K,{language:h,id:"sortby",className:"sortby",instructions:`${t("EOrderBy")}:`,options:Ze(Se),value:{label:Se[F][O[h]],value:Se[F][O[h]]},onChange:e=>{ve(e==null?void 0:e.value)}})})]}),s.jsxs("div",{className:"toggle-inner-wrap",children:[s.jsx("div",{children:s.jsx(K,{language:h,id:"joke-languages",className:"language-filter",instructions:`${t("EFilterByLanguage")}:`,options:[{label:t("EAll"),value:""},...Array.from(new Set(J==null?void 0:J.map(e=>e.language))).map(e=>({label:he[e][le(O,e)],value:e}))],value:_?{label:he[_][le(O,_)],value:_}:{label:t("EAll"),value:""},onChange:e=>{Ae(e==null?void 0:e.value)}})}),s.jsx("div",{children:s.jsx(K,{language:h,id:"single-category-select",className:"single-category-select",instructions:`${t("EFilterByCategory")}:`,options:[{label:t("ESelectACategory"),value:""},...Object.values(Y).map(e=>({label:te(e,h),value:e}))],value:T?{label:te(T,h),value:T}:{label:t("ESelectACategory"),value:""},onChange:e=>{ne(e==null?void 0:e.value),gs(e),ms(e==null?void 0:e.value)}})})]}),s.jsxs("div",{className:"toggle-inner-wrap",children:[s.jsx("div",{children:s.jsx(K,{language:h,id:"userNorrisCategories",className:`category extras ${Je?"":"hidden"}`,instructions:`${t("EFilterFurther")}:`,selectAnOption:V[0].label,value:S,options:V,onChange:e=>{me(e)}})}),s.jsx("div",{className:Je?"search-jokes-wrap":"full search-jokes-wrap",children:s.jsx("div",{className:"search-jokes input-wrap",children:s.jsxs("label",{htmlFor:"search-jokes",children:[s.jsx("input",{type:"text",id:"search-jokes",value:f,onChange:Me,placeholder:t("ESearch")}),s.jsx("span",{children:t("ESearchByKeyword")})]})})})]})]}),s.jsx("div",{className:"reset-btn-wrap mb3",children:s.jsxs("button",{className:"reset-btn delete danger",onClick:()=>fs(),children:[s.jsx(Ls,{})," ",s.jsx("span",{children:t("EReset")})]})})]}),s.jsxs("div",{className:"button-wrap",children:[!y&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{className:`icontext random-btn ${Q?"active":""}`,onClick:()=>{D(1),B(!1),ie(!0),Ne(e=>e+1),je(!1)},children:[t("ERandom")," ",s.jsx(Ns,{})]})," ",s.jsxs("button",{className:`icontext all-or-latest-btn ${!Q&&!ce?"active":""}`,onClick:()=>{ie(!1),B(!1),je(!1)},children:[t("EAllJokes")," ",s.jsx($s,{})]}),s.jsxs("div",{className:"flex center",children:[s.jsxs("button",{className:`icontext all-or-latest-btn ${ce?"active":""}`,onClick:()=>{ie(!1),B(!1),Te("newest"),ve("age"),je(!0)},children:[t("ELatest"),s.jsx("span",{className:"scr",children:E})," ",E===3&&s.jsx(As,{}),E===4&&s.jsx(Js,{}),E===5&&s.jsx(Bs,{}),E===6&&s.jsx(Fs,{}),E===7&&s.jsx(Os,{}),E===8&&s.jsx(Ts,{}),E===9&&s.jsx(Ms,{}),E>9&&s.jsx(Ps,{})]}),s.jsxs("div",{children:[s.jsx("input",{type:"number",min:3,max:100,id:"number-of-latest",defaultValue:E,className:"narrow",onChange:e=>{ps(e.target.valueAsNumber)}}),s.jsx("label",{htmlFor:"number-of-latest",className:"scr",children:s.jsx("span",{children:t("EHowMany")})})]})]})]}),o&&s.jsx("button",{className:`blocked-btn danger ${y?"active":""}`,onClick:()=>B(e=>!e),children:y?s.jsxs(s.Fragment,{children:[t("EHideBlockedJokes")," ",s.jsx(ks,{})]}):s.jsxs(s.Fragment,{children:[t("EBlocked")," ",s.jsx(Is,{})]})})]}),!Q&&!y&&ke(1),o&&y&&(X==null?void 0:X.length)>0?s.jsx("div",{className:"blocked-controls-wrap",children:s.jsx("div",{className:"input-wrap search-blacklist",children:s.jsxs("label",{htmlFor:"searchBlacklistedJokes",children:[s.jsx("input",{id:"searchBlacklistedJokes",type:"text",onChange:Me}),s.jsx("span",{children:t("ESearchByKeyword")})]})})}):y?s.jsx("p",{className:"textcenter",children:t("ENoJokesYet")}):"",s.jsx("ul",{className:`userjokeslist ${y?"blockedJokes":""}`,children:o&&y?X==null?void 0:X.map((e,a)=>{var l,i;return s.jsxs("li",{children:[s.jsx("form",{onSubmit:d=>{var p,b;C(Hs(e)),ls(d,e,(b=(p=o==null?void 0:o.blacklistedJokes)==null?void 0:p[a])==null?void 0:b._id)},children:s.jsx("button",{className:"",type:"submit",disabled:pe,children:t("ERestore")})}),e?e.type===A.single?s.jsx("p",{children:e.joke}):s.jsxs("div",{children:[s.jsx("p",{children:e.setup}),s.jsx("p",{children:e.delivery})]}):""]},((i=(l=o==null?void 0:o.blacklistedJokes)==null?void 0:l[a])==null?void 0:i.jokeId)??a)}):q&&(q==null?void 0:q.length)>0?q==null?void 0:q.map(e=>{var d,p,b,L,N,M,P,k,I,R,U;const{visible:a,translatedLanguage:l,...i}=e;return s.jsxs("li",{children:[s.jsx("div",{className:"primary-wrap",children:e.type===A.single?s.jsx("p",{className:"",children:e.joke}):s.jsxs("div",{children:[s.jsx("p",{className:"",children:e.setup}),s.jsx("p",{children:e.delivery?s.jsxs("button",{type:"button",onClick:()=>vs(e.jokeId),className:`${xe[e.jokeId]?"reveal":""} delivery`,children:[s.jsxs("span",{...xe[e.jokeId]?{"aria-hidden":!0}:{"aria-hidden":!1},children:[s.jsx(De,{})," ",t("EClickToReveal")," ",s.jsx(qe,{})]}),s.jsx("p",{"aria-live":"assertive",children:xe[e.jokeId]?e.delivery:""})]}):""})]})}),s.jsxs("div",{className:"secondary-wrap",children:[s.jsxs("div",{children:[s.jsxs("span",{children:[t("ECategoryTitle"),":"," ",te(e.category,h)," ",e.subCategories&&((d=e.subCategories)==null?void 0:d.length)>0&&((p=e.subCategories)!=null&&p.find(c=>c!=="any"))?s.jsxs(s.Fragment,{children:["(",(L=(b=e.subCategories)==null?void 0:b.filter(c=>c!=="any"))==null?void 0:L.map(c=>ue[c][h].toLowerCase()??c).join(", "),")"]}):""]}),s.jsxs("span",{children:[Xe,": ",e.translatedLanguage]}),e.anonymous?s.jsxs("span",{children:[t("EAnonymous")," "]}):e.anonymous===!1?s.jsxs("span",{children:[t("EAuthor"),": ",e.name??""]}):"",!m&&x&&e.private?s.jsx("span",{children:t("EPrivate")}):!m&&x&&e.private===!1?s.jsx("span",{children:t("EPublic")}):"",e.private===!1&&e.verified===!1&&s.jsx("span",{children:t("EPendingVerification")}),((N=e.user)==null?void 0:N.length)>1&&s.jsxs("span",{children:[t("ESavedBy")," ",(M=e.user)==null?void 0:M.length]})]}),s.jsxs("div",{children:[x&&((P=e.user)==null?void 0:P.includes(x))&&s.jsx("form",{onSubmit:e.type===A.single?Le(e==null?void 0:e._id,e==null?void 0:e.joke):Le(e==null?void 0:e._id,e==null?void 0:e.setup),className:"button-wrap",children:s.jsx("button",{type:"submit",disabled:pe,className:"delete danger",children:((k=e.user)==null?void 0:k.length)>1?t("ERemove"):t("EDelete")})}),e.author!==x&&!((I=e.user)!=null&&I.includes(x))&&s.jsx("button",{onClick:()=>is(e.jokeId,e.language,e.category===Y.ChuckNorris&&e.type===A.single?e.joke:void 0),className:"delete danger",children:t("EBlock")}),!((R=e.user)!=null&&R.includes(x))&&s.jsxs("button",{onClick:()=>ys(e._id),className:"save",children:[t("ESaveJoke")," ",s.jsx(Rs,{})]}),s.jsxs("button",{onClick:()=>Ss(e.type===A.single?e.joke:e.setup+` 
`+e.delivery),children:[t("ECopy")," ",s.jsx(Us,{})]}),x&&((U=e.user)==null?void 0:U.includes(x))&&e.author===x&&s.jsx(Ws,{language:h,id:`joke-edit-${e.jokeId}`,className:"joke-edit",wrapperClass:"joke-edit-wrap",text:t("EEdit"),onClick:()=>{Be(e.language),Oe(e.category),j(i),as(e.jokeId)},isOpen:ts===e.jokeId,setIsFormOpen:ss,children:s.jsxs("form",{onSubmit:We(e==null?void 0:e._id,hs??e),className:"joke-edit",children:[s.jsx("div",{className:"edit-wrap",children:e.private===!0&&e.type===A.twopart?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"input-wrap",children:s.jsxs("label",{htmlFor:"edit-setup",children:[s.jsx("input",{required:!0,type:"text",name:"edit-setup",id:"setup",defaultValue:e.setup,onChange:c=>{j(w=>({...w,setup:c.target.value}))}}),s.jsx("span",{children:t("EJokeSetup")})]})}),s.jsx("div",{className:"input-wrap",children:s.jsxs("label",{htmlFor:"edit-delivery",children:[s.jsx("input",{required:!0,type:"text",name:"delivery",id:"edit-delivery",defaultValue:e.delivery,onChange:c=>{j(w=>({...w,delivery:c.target.value}))}}),s.jsx("span",{children:t("EJokeDelivery")})," "]})})]}):e.private===!0&&e.type===A.single?s.jsx("div",{className:"input-wrap",children:s.jsxs("label",{htmlFor:"edit-joke",children:[s.jsx("input",{required:!0,type:"text",name:"joke",id:"edit-joke",defaultValue:e.joke,onChange:c=>{j(w=>({...w,joke:c.target.value}))}}),s.jsx("span",{children:t("EJoke")})]})}):s.jsxs("div",{children:[t("EOnlyPrivateJokesCanBeEdited"),". ",t("ENote")," ",t("ERepublishingWillRequireVerificationFromAnAdministrator")]})}),e.private===!0&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex column center gap",children:[s.jsx(K,{language:h,id:"edit-language",className:"edit-language",instructions:`${t("ELanguageTitle")}:`,hide:!0,options:Ke(Gs),value:{label:he[ye][le(O,ye)],value:ye},onChange:c=>{Be(c==null?void 0:c.value),j(w=>({...w,language:c==null?void 0:c.value}))}}),s.jsx(K,{language:h,id:"edit-category",className:"edit-category",instructions:`${t("ESelectCategory")}:`,hide:!0,options:[{label:t("EAny"),value:""},...Object.values(Y).map(c=>({label:te(c,h),value:c}))],value:{label:te(Fe,h),value:Fe},onChange:c=>{const{visible:w,translatedLanguage:z,...de}=e;Oe(c==null?void 0:c.value),j(()=>({...de,category:c==null?void 0:c.value}))}})]}),s.jsxs("fieldset",{children:[s.jsx("legend",{children:t("EAddWarningTitle")}),s.jsxs("div",{className:"checkbox-wrap",children:[s.jsxs("div",{children:[s.jsx("input",{type:"checkbox",id:"flag-nsfw",name:"nsfw",value:"nsfw",onChange:()=>{j(()=>({...i,nsfw:!e.flags.nsfw}))}}),s.jsx("label",{htmlFor:"flag-nsfw",children:ee[h].nsfw})]}),s.jsxs("div",{children:[s.jsx("input",{type:"checkbox",id:"flag-religious",name:"religious",value:"religious",onChange:()=>{j(()=>({...i,religious:!e.flags.religious}))}}),s.jsx("label",{htmlFor:"flag-religious",children:ee[h].religious})]}),s.jsxs("div",{children:[s.jsx("input",{type:"checkbox",id:"flag-political",name:"political",value:"political",onChange:()=>{j(()=>({...i,political:!e.flags.political}))}}),s.jsx("label",{htmlFor:"flag-political",children:ee[h].political})]}),s.jsxs("div",{children:[s.jsx("input",{type:"checkbox",id:"flag-racist",name:"racist",value:"racist",onChange:()=>{j(()=>({...i,racist:!e.flags.racist}))}}),s.jsx("label",{htmlFor:"flag-racist",children:ee[h].racist})]}),s.jsxs("div",{children:[s.jsx("input",{type:"checkbox",id:"flag-sexist",name:"sexist",value:"sexist",onChange:()=>{j(()=>({...i,sexist:!e.flags.sexist}))}}),s.jsx("label",{htmlFor:"flag-sexist",children:ee[h].sexist})]}),s.jsxs("div",{children:[s.jsx("input",{type:"checkbox",id:"flag-explicit",name:"explicit",value:"explicit",onChange:()=>{j(()=>({...i,explicit:!e.flags.explicit}))}}),s.jsx("label",{htmlFor:"flag-explicit",children:ee[h].explicit})]})]})]})]}),s.jsxs("fieldset",{className:"flex center gap margin0auto",children:[s.jsxs("div",{children:[s.jsx("input",{type:"checkbox",name:"anonymous",id:"edit-anonymous",defaultChecked:e.anonymous,onChange:()=>{const{visible:c,translatedLanguage:w,...z}=e;j(()=>({...z,anonymous:!e.anonymous}))}}),s.jsx("label",{htmlFor:"edit-anonymous",children:"Anonymous:"})]}),s.jsxs("div",{children:[s.jsx("input",{type:"checkbox",name:"private",id:"edit-private",defaultChecked:e.private,onChange:()=>{const{visible:c,translatedLanguage:w,...z}=e;j(()=>({...z,private:!e.private}))}}),s.jsx("label",{htmlFor:"edit-private",children:"Private:"})]})]}),s.jsx("button",{type:"submit",disabled:pe,className:"save",children:t("ESaveJoke")})]})})]})]})]},e._id)}):s.jsxs("li",{className:"margin0auto max-content",children:[t("ELoadingJokes"),s.jsx("br",{}),s.jsx("br",{}),"(",t("EThisMayTakeUpToAMinute"),")"]})}),!Q&&!y&&ke(2)]}),s.jsx("div",{className:"filler below"})]}),x&&s.jsxs("div",{className:"local-saved-wrap below",children:[s.jsx("button",{className:`btn${m&&!y?" active":""}`,onClick:()=>{W(!0),B(!1)},children:t(m?"ELocalJokes":"ESeeLocalJokes")}),s.jsx("button",{className:`btn${!m&&!y?" active":""}`,onClick:()=>{W(!1),B(!1)},children:t("EYourSavedJokes")})]})]})};export{Ks as EOrderByAge,jt as default};
