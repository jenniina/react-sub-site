import{r as o,j as s}from"./react-A9DAvxly.js";import{a6 as L,cl as C,cm as p,cn as y,co as M,cp as z,cq as D,cr as H,cs as R,ct as O,cu as U,H as F,cv as _,bf as q,cw as A,a$ as P,cx as k,aX as I,cy as b,cz as B,b$ as T,b2 as W,cA as Q,R as j,cB as K,cC as X,a_ as $,cD as Y,c1 as G,cE as J,cF as V}from"./index-DZjHXxcK.js";import{a as Z}from"./react-redux-CHm9GgGE.js";import{L as ss}from"./react-router-dom-Dz0dtoa0.js";import"./hoist-non-react-statics-D5aJipOz.js";import"./react-dom-yh0erWL-.js";import"./scheduler-CzFDRTuY.js";import"./@reduxjs-DTZ4pglK.js";import"./immer-BNrqi0cU.js";import"./redux-CE3tqztX.js";import"./@babel-DF5_wy6Y.js";import"./redux-thunk-CY0Q9z1Q.js";import"./axios-BimPEqV4.js";import"./react-icons-B_BWYIjI.js";import"./react-is-DUDD-a5e.js";import"./react-router-KETZ66Sq.js";import"./@remix-run-DTnHqtaE.js";import"./uuid-Dv1xt2bl.js";import"./use-sync-external-store-DEc9BFqZ.js";const es=({easy:r,medium:n,hard:i,language:t})=>{const{windowWidth:d}=L(),[c,h]=o.useState(!0);return o.useEffect(()=>{d<C?h(!1):h(!0)},[d]),s.jsxs("table",{className:p.highscores,children:[s.jsx("caption",{children:y[t]}),s.jsx("thead",{children:s.jsxs("tr",{className:p.th,children:[s.jsx("th",{children:M[t]}),s.jsx("th",{className:p.score,children:z[t]}),c&&s.jsx("th",{className:p.percentage,children:"%"}),s.jsx("th",{children:D[t]})]})}),s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("th",{children:H[t]}),s.jsxs("td",{children:[r?r.score:0,"/300"]}),c&&s.jsxs("td",{children:[+(r.score*100/300).toFixed(1),"%"]}),s.jsx("td",{children:r.score===0||r.time===0?R[t]:s.jsxs(s.Fragment,{children:[Math.floor(r.time/60)<10&&"0",Math.floor(r.time/60),":",r.time%60<10&&"0",r.time%60]})})]}),s.jsxs("tr",{children:[s.jsx("th",{children:O[t]}),s.jsxs("td",{children:[n?n.score:0,"/300"]}),c&&s.jsxs("td",{children:[+(n.score*100/300).toFixed(1),"%"]}),s.jsx("td",{children:n.score===0||n.time===0?R[t]:s.jsxs(s.Fragment,{children:[Math.floor(n.time/60)<10&&"0",Math.floor(n.time/60),":",n.time%60<10&&"0",n.time%60]})})]}),s.jsxs("tr",{children:[s.jsx("th",{children:U[t]}),s.jsxs("td",{children:[i?i.score:0,"/300"]}),c&&s.jsxs("td",{children:[+(i.score*100/300).toFixed(1),"%"]}),s.jsx("td",{children:i.score===0||i.time===0?R[t]:s.jsxs(s.Fragment,{children:[Math.floor(i.time/60)<10&&"0",Math.floor(i.time/60),":",i.time%60<10&&"0",i.time%60]})})]})]})]})},ts=({easy:r,medium:n,hard:i,language:t,setIsFormOpen:d})=>{const c=F(),[h,f]=o.useState(""),[E,u]=o.useState(""),g=o.useRef(null),[m,w]=o.useState({easy:r??{score:0,time:210},medium:n??{score:0,time:210},hard:i??{score:0,time:210}}),[x,S]=o.useState(!1),e=Z(a=>{var l;return(l=a.auth)==null?void 0:l.user});o.useEffect(()=>{e!=null&&e._id&&c(_(e._id)).then(a=>{a!==null&&w(a.highscores)})},[e==null?void 0:e._id]),o.useEffect(()=>{c(q())},[]);const N=()=>{c(Q())},v=async a=>{a.preventDefault(),c(j(K[t],!1,8)),await c(X(h,E,"en")).then(()=>{f(""),u("")}).catch(l=>{l.code==="ERR_BAD_REQUEST"?c(j(`${$.en}: ${l.response.data.message}`,!0,8)):l.code==="ERR_NETWORK"&&c(j(`${$.en}: ${l.message}`,!0,8))})};return s.jsx("div",{className:"login-wrap",children:e?s.jsxs(s.Fragment,{children:[s.jsxs("p",{children:[s.jsxs("span",{children:[A[(e==null?void 0:e.language)??"en"]," ",e!=null&&e.name?e==null?void 0:e.name:e.username," "]}),s.jsx(ss,{to:"/edit",children:`${P[e==null?void 0:e.language]}`}),s.jsxs("button",{onClick:N,id:"logout",className:"logout danger",children:[k[(e==null?void 0:e.language)??"en"]," Ã—"]})]}),s.jsx("button",{onClick:()=>S(!x),className:p.showHighscores,children:`${x?"hide":"show"} highscores`}),x&&s.jsx(es,{language:t,easy:m.easy,medium:m.medium,hard:m.hard})]}):s.jsx(s.Fragment,{children:s.jsxs(I,{language:t,className:"accordion-login login-to-save",text:b[t],ref:g,setIsFormOpen:d,hideBrackets:!0,children:[s.jsx("h2",{children:b[t]}),s.jsxs("form",{onSubmit:v,className:`login ${p.login}`,children:[s.jsx("div",{className:"input-wrap",children:s.jsxs("label",{htmlFor:"quiz-username",children:[s.jsx("input",{id:"quiz-username",name:"username",type:"text",value:h,required:!0,autoComplete:"email",onChange:({target:a})=>f(a.value.trim())}),s.jsxs("span",{children:[B[t],": "]})]})}),s.jsx("div",{className:"input-wrap",children:s.jsxs("label",{children:[s.jsx("input",{name:"password",type:"password",required:!0,autoComplete:"current-password",value:E,onChange:({target:a})=>u(a.value.trim())}),s.jsxs("span",{children:[T[t],": "]})]})}),s.jsx("button",{type:"submit",id:"login",className:"login",children:W[t]})]})]})})})},Ns=({language:r,user:n,highscoresLocal:i,text:t})=>{const d=F(),[c,h]=o.useState(!1),[f,E]=o.useState(!1),[u,g]=o.useState(""),[m,w]=o.useState(""),[x,S]=o.useState(""),[e,N]=o.useState(""),v=a=>{if(a.preventDefault(),m.trim()!==x.trim()){d(j(G[r],!0,8));return}d(J({name:e,username:u,password:m,language:"en"})).then(async()=>{d(j(V[r],!1,8))}).catch(l=>{console.error(l),d(j(`${$[r]}: ${l.message}`,!0,8))})};return s.jsxs("div",{className:`quiz-register-login-wrap register-login-wrap ${p["register-login-wrap"]}`,children:[s.jsx("div",{className:`${c?"open":""} ${n?"logged":""}`,children:s.jsx(ts,{setIsFormOpen:h,language:r,easy:i.easy,medium:i.medium,hard:i.hard})}),s.jsx("div",{className:`${f?"open":""}`,children:s.jsx(Y,{setIsFormOpen:E,language:r,handleRegister:v,username:u,setUsername:g,password:m,setPassword:w,confirmPassword:x,setConfirmPassword:S,name:e,setName:N,text:t})})]})};export{Ns as default};
