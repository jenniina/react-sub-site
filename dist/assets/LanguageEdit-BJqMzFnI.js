import{a as m,j as e}from"./react-B6RMQhYh.js";import{u as $,L as C,S as N,a4 as U,ax as R,e as n,ay as D,a7 as F,i as P}from"./app-C3K_VWIj.js";import{s as S}from"./edit.module-3NLXhYEv.js";import"./dom-to-image-more-sr33WCep.js";import"./react-dom-DKT7fI1i.js";import"./scheduler-C323NY8X.js";import"./react-redux-CQ4WY322.js";import"./hoist-non-react-statics-C-Qo8PK8.js";import"./react-is-BwqtTtay.js";import"./use-sync-external-store-w3cjJFH7.js";import"./@reduxjs-CJhiLCiq.js";import"./redux-BXkGT1VS.js";import"./immer-BGhKXxrG.js";import"./redux-thunk-ClJT1hhx.js";import"./axios-ngrFHoWO.js";import"./react-icons-CHi_nPWV.js";import"./react-router-dom-_ze6FMLH.js";import"./react-router-hVrguzn3.js";import"./@remix-run-CeDW-7A3.js";import"./react-helmet-async-DQ_5QNst.js";import"./react-fast-compare-BHbKlhN4.js";import"./invariant-B_pwkeTo.js";import"./shallowequal-C7ef0Lra.js";const ie=({user:a,language:l,setLanguage:v,options:y})=>{const t=$(),[g,c]=m.useState(""),{t:i}=m.useContext(C),[o,L]=m.useState((a==null?void 0:a.language)??l),[b,d]=m.useState(!1),w=async r=>{var u,f;r.preventDefault(),d(!0);try{const _={_id:a._id,name:a.name,passwordOld:g,language:o};a&&t(R(_)).then(s=>{s&&(s.success===!1?t(n(`${i("Error")}: ${s.message}`,!0,5)):(t(n(`${s.message??i("UserUpdated")}`,!1,5)),t(D(s.user)).then(()=>{t(F(a==null?void 0:a._id)).then(()=>t(P())),v(o)}),c(""))),d(!1)}).catch(s=>{var h,x,j,E;console.error(s),(x=(h=s.response)==null?void 0:h.data)!=null&&x.message?t(n(s.response.data.message,!0,8)):s.code==="ERR_BAD_REQUEST"&&((E=(j=s.response)==null?void 0:j.data)!=null&&E.message)?t(n(`${i("Error")}: ${s.response.data.message}`,!0,5)):setTimeout(()=>{t(n(i("UserNotUpdated"),!0,5))},2e3),d(!1)})}catch(p){(f=(u=p.response)==null?void 0:u.data)!=null&&f.message?t(n(p.response.data.message,!0,8)):console.error("error",p),d(!1)}};return e.jsx(e.Fragment,{children:a?e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:i("EditLanguagePreference")}),e.jsxs("form",{onSubmit:w,className:S["edit-user"],children:[e.jsx(N,{language:l,id:"language-register",className:`language ${S.language}`,instructions:"Language",hide:!0,options:y(U),value:o?{value:o,label:U[o]}:void 0,onChange:r=>{L(r==null?void 0:r.value)}}),e.jsx("div",{className:"input-wrap",children:e.jsxs("label",{children:[e.jsx("input",{required:!0,type:"password",name:"old-password",id:"old-password-user-language",value:g,onChange:({target:r})=>c(r.value.trim())}),e.jsx("span",{children:i("CurrentPassword")})]})}),e.jsx("button",{type:"submit",disabled:b,children:i("Edit")})]})]}):e.jsx(e.Fragment,{})})};export{ie as default};
