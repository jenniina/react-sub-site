import{r as E,j as o}from"./react-A9DAvxly.js";import{K as he,S as pe,f3 as Ne,f4 as kt,W as At,bd as Mt,c$ as Te,f5 as Ee,u as wt,bX as Ie,f6 as Ue,f7 as Se,f8 as Fe,f9 as Be,fa as Me,fb as De,fc as Le,fd as ke,fe as Ge,ff as We,z as Oe,A as Ve,fg as He,fh as Pe,ap as Je,fi as Xe,fj as Ye,fk as qe,fl as Ke,fm as ze,fn as Qe,fo as Ze,fp as jt,fq as Ut,fr as me,fs as tt,d9 as to,ft as eo,fu as oo,ax as so,ay as ro,fv as no,fw as lo,fx as ao,fy as io,fz as Nt,bC as de,fA as co,fB as ft,fC as mo,Y as St}from"./index-0bd-ABUi.js";import{a2 as ue,a3 as uo,a4 as ho}from"./react-icons-BXtkaQB_.js";import"./hoist-non-react-statics-D5aJipOz.js";import"./react-dom-yh0erWL-.js";import"./scheduler-CzFDRTuY.js";import"./react-redux-CHm9GgGE.js";import"./react-is-DUDD-a5e.js";import"./use-sync-external-store-DEc9BFqZ.js";import"./@reduxjs-DhFEcpJw.js";import"./immer-C0GRqQ_d.js";import"./redux-CE3tqztX.js";import"./@babel-DF5_wy6Y.js";import"./redux-thunk-CY0Q9z1Q.js";import"./axios-CCb-kr4I.js";import"./react-router-dom-CYs6befe.js";import"./react-router-S1Hdk0kP.js";import"./@remix-run-DTnHqtaE.js";const po="_light_v2tly_39",Ao="_drag_v2tly_221",go="_overflow_v2tly_235",xo="_indicator_v2tly_343",fo="_tooltip_v2tly_343",$o="_form_v2tly_511",Co="_remove_v2tly_539",_o="_inputs_v2tly_569",m={"color-container":"_color-container_v2tly_1",light:po,"color-picker":"_color-picker_v2tly_57","width-wrap":"_width-wrap_v2tly_109","btn-wrap":"_btn-wrap_v2tly_123","info-wrap":"_info-wrap_v2tly_141","color-blocks":"_color-blocks_v2tly_189",drag:Ao,overflow:go,"block-wrap":"_block-wrap_v2tly_243","color-wrap":"_color-wrap_v2tly_261","color-block":"_color-block_v2tly_189","compliance-indicators":"_compliance-indicators_v2tly_321",indicator:xo,tooltip:fo,"indicator-aaa":"_indicator-aaa_v2tly_373","indicator-null":"_indicator-null_v2tly_381","compliance-info":"_compliance-info_v2tly_389","toggle-controls":"_toggle-controls_v2tly_397","color-edit-container":"_color-edit-container_v2tly_427","color-select":"_color-select_v2tly_429","mode-container":"_mode-container_v2tly_485",form:$o,"color-format-submit":"_color-format-submit_v2tly_537",remove:Co,"color-name":"_color-name_v2tly_553",inputs:_o,"hex-input":"_hex-input_v2tly_593"},bo=({language:d,block:$,fontSize:U,updateColor:X,width:S,hexToRGB:gt,hslToRGB:W,rgbToHex:O,rgbToHSL:j})=>{const B=he(),nt=/^hsl\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*\)$/i,lt=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i,k=/^#([0-9A-F]{3}){1,2}$/i,et=[{value:"hsl",label:"HSL"},{value:"rgb",label:"RGB"},{value:"hex",label:"Hex"}],[N,Ct]=E.useState(et.find(l=>l.value===$.colorFormat)||et[0]),[R,V]=E.useState(""),[Y,ot]=E.useState(0),[q,st]=E.useState(0),[H,G]=E.useState(0),[at,p]=E.useState(0),[K,F]=E.useState(0),[it,z]=E.useState(0);E.useEffect(()=>{switch($.colorFormat){case"hex":{V($.color);const{r:l,g:A,b:g}=gt($.color);ot(l),st(A),G(g);const{h:C,s:x,l:y}=j(l,A,g);p(C),F(x),z(y);break}case"rgb":{const l=$.color.match(lt);if(l){const A=Number(l[1]),g=Number(l[2]),C=Number(l[3]);ot(A),st(g),G(C);const{h:x,s:y,l:T}=j(A,g,C);p(x),F(y),z(T)}break}case"hsl":{const l=$.color.match(nt);if(l){const A=Number(l[1]),g=Number(l[2]),C=Number(l[3]);p(A),F(g),z(C);const{r:x,g:y,b:T}=W(A,g,C);ot(x),st(y),G(T);const Q=O(x,y,T);V(Q)}break}}},[]);const Tt=l=>{try{let A;if(l==="hex")if(k.test(R)){A=R.toUpperCase(),X($.id,A,"hex");const{r:g,g:C,b:x}=gt(A);ot(g),st(C),G(x);const{h:y,s:T,l:Q}=j(g,C,x);p(y),F(T),z(Q)}else throw new Error("Invalid Hex format.");else if(l==="rgb")if(Y>=0&&Y<=255&&q>=0&&q<=255&&H>=0&&H<=255){A=`rgb(${Y}, ${q}, ${H})`,X($.id,A,"rgb");const g=O(Y,q,H);V(g);const{h:C,s:x,l:y}=j(Y,q,H);p(C),F(x),z(y)}else throw new Error("Invalid RGB values.");else if(l==="hsl")if(at>=0&&at<=360&&K>=0&&K<=100&&it>=0&&it<=100){A=`hsl(${at}, ${K}%, ${it}%)`,X($.id,A,"hsl");const{r:g,g:C,b:x}=W(at,K,it);ot(g),st(C),G(x);const y=O(g,C,x);V(y)}else throw new Error("Invalid HSL values.");else throw new Error("Unsupported color format.")}catch(A){console.error(A.message),B(At(Mt[d]+" "+A.message,!0,4))}},_t=l=>{l.preventDefault(),Tt(N==null?void 0:N.value)},ut=(l,A)=>{l==="h"&&p(A),l==="s"&&F(A),l==="l"&&z(A);const g=l==="h"?A:at,C=l==="s"?A:K,x=l==="l"?A:it;if(g>=0&&g<=360&&C>=0&&C<=100&&x>=0&&x<=100){const{r:y,g:T,b:Q}=W(g,C,x);ot(y),st(T),G(Q),X($.id,`hsl(${g}, ${C}%, ${x}%)`,"hsl"),V(O(y,T,Q))}},P=(l,A)=>{l==="r"&&ot(A),l==="g"&&st(A),l==="b"&&G(A);const g=l==="r"?A:Y,C=l==="g"?A:q,x=l==="b"?A:H;if([g,C,x].every(y=>y>=0&&y<=255)){const{h:y,s:T,l:Q}=j(g,C,x);p(y),F(T),z(Q),X($.id,`rgb(${g}, ${C}, ${x})`,"rgb"),V(O(g,C,x))}};return o.jsxs(o.Fragment,{children:[o.jsx(pe,{hideDelete:!0,id:"color-select",className:m["color-select"],language:d,instructions:Ne[d],hide:!0,options:et,value:N,onChange:l=>{if(Ct(l),(l==null?void 0:l.value)==="hex"){const A=O(Y,q,H);V(A)}else(l==null?void 0:l.value)==="rgb"?(ot(Y),st(q),G(H)):(l==null?void 0:l.value)==="hsl"&&(p(at),F(K),z(it))}}),(N==null?void 0:N.value)==="hex"&&o.jsxs("form",{className:m.form,onSubmit:_t,children:[o.jsx("div",{className:`${m.inputs} ${m["hex-input"]}`,children:o.jsxs("label",{children:[o.jsx("span",{children:"Hex: "}),o.jsx("input",{name:`hex-input-${$.id}`,type:"text",value:R,onChange:l=>V(l.target.value),className:m["color-input"],style:{maxWidth:`${S}`,fontSize:U},placeholder:"#FFFFFF"})]})}),o.jsx("button",{style:{minWidth:"calc(100% - 4px)",maxWidth:"calc(100% - 4px)",fontSize:U},type:"submit",className:`${m["color-format-submit"]} small gray`,children:kt[d]})]}),(N==null?void 0:N.value)==="rgb"&&o.jsxs("form",{className:`${m.inputs} ${m["rgb-inputs"]}`,onSubmit:_t,children:[o.jsxs("label",{children:[o.jsx("span",{children:"R: "}),o.jsx("input",{name:`r-input-${$.id}`,type:"number",value:Y,onChange:l=>P("r",Number(l.target.value)),min:0,max:255,className:m["color-input"],style:{maxWidth:`${S}`,fontSize:U}})]}),o.jsxs("label",{children:[o.jsx("span",{children:"G: "}),o.jsx("input",{name:`g-input-${$.id}`,type:"number",value:q,onChange:l=>P("g",Number(l.target.value)),min:0,max:255,className:m["color-input"],style:{maxWidth:`${S}`,fontSize:U}})]}),o.jsxs("label",{children:[o.jsx("span",{children:"B: "}),o.jsx("input",{name:`b-input-${$.id}`,type:"number",value:H,onChange:l=>P("b",Number(l.target.value)),min:0,max:255,className:m["color-input"],style:{maxWidth:`${S}`,fontSize:U}})]}),o.jsx("button",{style:{minWidth:"calc(100% - 4px)",maxWidth:"calc(100% - 4px)",fontSize:U},type:"submit",className:`${m["color-format-submit"]} small gray`,children:kt[d]})]}),(N==null?void 0:N.value)==="hsl"&&o.jsxs("form",{className:`${m.inputs} ${m["hsl-inputs"]}`,onSubmit:_t,children:[o.jsxs("label",{children:[o.jsx("span",{children:"H: "}),o.jsx("input",{name:`h-input-${$.id}`,type:"number",value:at,onChange:l=>ut("h",Number(l.target.value)),min:0,max:360,className:m["color-input"],style:{maxWidth:`${S}`,fontSize:U}})," "]}),o.jsxs("label",{children:[o.jsx("span",{children:"S: "}),o.jsx("input",{name:`s-input-${$.id}`,type:"number",value:K,onChange:l=>ut("s",Number(l.target.value)),min:0,max:100,className:m["color-input"],style:{maxWidth:`${S}`,fontSize:U}})]}),o.jsxs("label",{children:[o.jsx("span",{children:"L: "}),o.jsx("input",{name:`l-input-${$.id}`,type:"number",value:it,onChange:l=>ut("l",Number(l.target.value)),min:0,max:100,className:m["color-input"],style:{maxWidth:`${S}`,fontSize:U}})]}),o.jsx("button",{style:{minWidth:"calc(100% - 4px)",maxWidth:"calc(100% - 4px)",fontSize:U},type:"submit",className:`${m["color-format-submit"]} small gray`,children:kt[d]})]})]})};function Gt(d,$){return Math.random()*($-d)+d}const $t=io(5),Ft=(d,$)=>{const U=j=>{let B,nt,lt;if(j.colorFormat==="hex")({r:B,g:nt,b:lt}=jt(j.color));else if(j.colorFormat==="rgb"){const k=j.color.match(/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i);if(k)B=Number(k[1]),nt=Number(k[2]),lt=Number(k[3]);else throw new Error("Invalid RGB format")}else if(j.colorFormat==="hsl"){const k=j.color.match(/^hsl\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*\)$/i);if(k){const et=Number(k[1]),N=Number(k[2]),Ct=Number(k[3]);({r:B,g:nt,b:lt}=tt(et,N,Ct))}else throw new Error("Invalid HSL format")}else throw new Error("Unsupported color format");return{r:B,g:nt,b:lt}},X=U(d),S=U($),gt=Nt(X.r,X.g,X.b),W=Nt(S.r,S.g,S.b),O=mo(gt,W);return{isAAARegularTextCompliant:O>=7,isAARegularTextCompliant:O>=4.5,isAAUIComponentsCompliant:O>=3}},_="colors",Rt="hsl",Bt=[{id:1,color:"hsl(200, 50%, 10%)",luminance:.011540526030345211,status:_,colorFormat:Rt,compliantColors:{AAA_RegularText:[4,5],AA_UIComponents:[3,4,5],AA_RegularText:[3,4,5]}},{id:2,color:"hsl(200, 50%, 35%)",luminance:.12179747967530058,status:_,colorFormat:Rt,compliantColors:{AAA_RegularText:[],AA_UIComponents:[4,5],AA_RegularText:[5]}},{id:3,color:"hsl(200, 50%, 55%)",luminance:.3071249100459835,status:_,colorFormat:Rt,compliantColors:{AAA_RegularText:[],AA_UIComponents:[1],AA_RegularText:[1]}},{id:4,color:"hsl(200, 50%, 75%)",luminance:.5493970089199802,status:_,colorFormat:Rt,compliantColors:{AAA_RegularText:[1],AA_UIComponents:[1,2],AA_RegularText:[1]}},{id:5,color:"hsl(200, 50%, 90%)",luminance:.800081557105977,status:_,colorFormat:Rt,compliantColors:{AAA_RegularText:[1],AA_UIComponents:[1,2],AA_RegularText:[1,2]}}],Wo=({language:d})=>{var Pt,Jt,Xt,Yt,qt;const $=he(),U=Te(),X=Ee(),[S,gt]=E.useState(!0),[W,O]=wt("Jenniina-showColorNames",!0),[j,B,nt]=wt("Jenniina-colorsAccessibility",Bt),[lt,k]=wt("Jenniina-currentColor","#7D7D7D"),[et,N]=wt("Jenniina-idCounter",1),{isDragging:Ct,listItemsByStatus:R,handleDragging:V,handleUpdate:Y}=Ie(j,[_]),ot=E.useRef(0),[q,st]=E.useState(0),H=8,[G,at]=wt("Jenniina-color-block-width",H),p=`${G}em`,K=G/H,F={tooltip:`${.7*K}em`,colorName:`${.7*K}em`,input:`${.8*K}em`},it=(t,s)=>{const r=Ft(t,s);return r.isAAARegularTextCompliant&&(t.compliantColors.AAA_RegularText.push(s.id),s.compliantColors.AAA_RegularText.push(t.id)),r.isAARegularTextCompliant&&(t.compliantColors.AA_RegularText.push(s.id),s.compliantColors.AA_RegularText.push(t.id)),r.isAAUIComponentsCompliant&&(t.compliantColors.AA_UIComponents.push(s.id),s.compliantColors.AA_UIComponents.push(t.id)),t.compliantColors.AAA_RegularText=Array.from(new Set(t.compliantColors.AAA_RegularText)),t.compliantColors.AA_RegularText=Array.from(new Set(t.compliantColors.AA_RegularText)),t.compliantColors.AA_UIComponents=Array.from(new Set(t.compliantColors.AA_UIComponents)),s.compliantColors.AAA_RegularText=Array.from(new Set(s.compliantColors.AAA_RegularText)),s.compliantColors.AA_RegularText=Array.from(new Set(s.compliantColors.AA_RegularText)),s.compliantColors.AA_UIComponents=Array.from(new Set(s.compliantColors.AA_UIComponents)),{updatedColor1:t,updatedColor2:s}},[z,Tt]=E.useState(!1),_t=500;E.useEffect(()=>{let t;return j.length<1?t=setTimeout(()=>{Tt(!0)},_t):Tt(!1),()=>{t&&clearTimeout(t)}},[j.length]);const ut=()=>Math.floor(Math.random()*256),P=()=>{const t=Math.ceil(Gt(30,100));return St(30,t,100)},l=()=>{const t=Math.ceil(Gt(5,90));return St(5,t,90)},A=(t="array")=>{if(t==="hsl"){const s=Math.floor(Math.random()*360),r=P(),e=l();return`hsl(${s}, ${r}%, ${e}%)`}else{const s=Math.floor(Math.random()*360),r=P(),e=l();return[s,r,e]}},g=[{value:"analogous",label:Ue[d]},{value:"complementary",label:Se[d]},{value:"monochromatic",label:Fe[d]},{value:"triad",label:Be[d]},{value:"tetrad",label:Me[d]}];let C=Math.floor(Math.random()*g.length);const[x,y]=E.useState(g[C]),T=Math.round(Gt(15,35)),Q=(t,s)=>{const r=[];switch(t){case"analogous":for(let n=1;n<=4;n++){const a=ft((s.l-T*n+90)%90),u=[(s.h+30*n)%360,P(),a],i=tt(...u);r.push([i.r,i.g,i.b])}break;case"complementary":const e=[(s.h+180)%360,s.s,s.l],c=tt(...e);r.push([c.r,c.g,c.b]);for(let n=1;n<=3;n++){const a=ft((s.l-T*n+90)%90),u=[(e[0]+30*n)%360,P(),a],i=tt(...u);r.push([i.r,i.g,i.b])}break;case"triad":for(let n=1;n<=2;n++){const a=ft((s.l-T*n+90)%90),u=[(s.h+120*n)%360,P(),a],i=tt(...u);r.push([i.r,i.g,i.b])}break;case"monochromatic":for(let n=1;n<=4;n++){const a=ft((s.l-T*n+90)%90),u=[s.h,P(),a],i=tt(...u);r.push([i.r,i.g,i.b])}break;case"tetrad":for(let n=1;n<=3;n++){const a=ft((s.l-T*n+90)%90),u=[(s.h+90*n)%360,P(),a],i=tt(...u);r.push([i.r,i.g,i.b])}break;default:for(let n=1;n<=4;n++){const a=ft((s.l-T*n+90)%90),u=[(s.h+30*n)%360,P(),a],i=tt(...u);r.push([i.r,i.g,i.b])}break}return r},[Dt,Wt]=E.useState(!1),Ae=t=>{const s=[];if(t.length===0||Dt){const r=A("array");Array.isArray(r)&&s.push(r);const e=Q(x==null?void 0:x.value,{h:r[0],s:r[1],l:r[2]});return s.push(...e),s}else{const r=t[t.length-1];let e;try{if(r.colorFormat==="hex")e=jt(r.color);else if(r.colorFormat==="rgb"){const a=r.color.match(/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i);if(a)e={r:Number(a[1]),g:Number(a[2]),b:Number(a[3])};else throw new Error("Invalid RGB format")}else if(r.colorFormat==="hsl"){const a=r.color.match(/^hsl\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*\)$/i);if(a){const u=Number(a[1]),i=Number(a[2]),f=Number(a[3]);e=tt(u,i,f)}else throw new Error("Invalid HSL format")}else throw new Error("Unsupported color format");const c=Ut(e.r,e.g,e.b),n=Q(x==null?void 0:x.value,c);s.push(...n.slice(0,2))}catch(c){console.error("Error generating new colors:",c);for(let n=0;n<2;n++)s.push([ut(),ut(),ut()])}}return s.slice(0,t.length+2)},Ot=()=>{nt(),B([]),N(1)},ge=()=>{nt(),B(Bt),N(Bt.length+1)},xe=()=>{Wt(!0),Ot()};E.useEffect(()=>{Dt&&j.length===0&&Vt()},[Dt,j]);const Vt=()=>{const s=Ae(j).map((e,c)=>{const[n,a,u]=e,i=Ut(n,a,u),f=Nt(n,a,u);return{id:et+c,color:`hsl(${i.h}, ${i.s}%, ${i.l}%)`,luminance:f,status:_,colorFormat:"hsl",compliantColors:{AA_RegularText:[],AAA_RegularText:[],AA_UIComponents:[]}}});let r=[...j,...s];r=r.map(e=>(s.forEach(c=>{const{updatedColor1:n,updatedColor2:a}=it(e,c);e=n,c=a}),e)),B(r),N(et+s.length),C=Math.floor(Math.random()*g.length),y(g[C]),Wt(!1)},ht=(t,s)=>{if(s==="hex"){if(/^#([A-Fa-f0-9]{6})$/.test(t))return t.toUpperCase();throw new Error(`Invalid HEX color format: ${t}`)}else if(s==="rgb"){const r=t.match(/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i);if(r){const e=Number(r[1]),c=Number(r[2]),n=Number(r[3]);if([e,c,n].every(a=>a>=0&&a<=255))return me(e,c,n);throw new Error(`RGB values out of range in color: ${t}`)}else throw new Error(`Invalid RGB color format: ${t}`)}else if(s==="hsl"){const r=t.match(/^hsl\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*\)$/i);if(r){let e=Number(r[1]),c=Number(r[2]),n=Number(r[3]);return e=(e+360)%360,c=St(0,c,100),n=St(0,n,100),`hsl(${e}, ${c}%, ${n}%)`}else throw new Error(`Invalid HSL color format: ${t}`)}else throw new Error(`Unsupported color format: ${s}`)},fe={AA_RegularText:({xPosition:t,yIndicator:s,blockWidth:r,indicatorSize:e,otherColor:c,blockColor:n,colorFormatBlock:a,colorFormatOther:u})=>{const i=ht(n,a),f=ht(c,u);return`
 <circle
  cx="${t+r/2}"
  cy="${s+e/2}"
  r="${e*.32}"
  fill="${i}"
  stroke="${f}"
  stroke-width="${e*.1}"
/>
`},AA_UIComponents:({xPosition:t,yIndicator:s,blockWidth:r,indicatorSize:e,otherColor:c,blockColor:n,colorFormatBlock:a,colorFormatOther:u})=>{const i=ht(n,a),f=ht(c,u);return`
    <rect
  x="${t+r/2-e*.2}"
  y="${s+e/2-e*.15}"
  width="${e*.3}"
  height="${e*.3}"
  fill="${i}"
  stroke="${f}"
  stroke-width="${e*.1}"
/>
`},AAA_RegularText:({xPosition:t,yIndicator:s,blockWidth:r,indicatorSize:e,otherColor:c,blockColor:n,colorFormatBlock:a,colorFormatOther:u})=>{const i=ht(c,u);return`
<circle
  cx="${t+r/2}"
  cy="${s+e/2}"
  r="${e/2}"
  fill="${i}"
  stroke="none"
/>
`}},Ht=()=>{var Kt,zt,Qt,Zt,te,ee,oe,se,re;const t=G*20,s=t,r=s/3,e=r/1.5,c=t/4,n=r/20,a=s/10,i=((zt=(Kt=R[_])==null?void 0:Kt.items)==null?void 0:zt.length)*(r+e)-e+c*2,f=W?a+c:0,J=((Qt=R[_])==null?void 0:Qt.items.length)*s,Z=i+f*1.6,h=(te=(Zt=R[_])==null?void 0:Zt.items)==null?void 0:te.map((L,bt)=>{const xt=bt*s;let dt;try{dt=ht(L.color,L.colorFormat)}catch(yt){console.error(yt),$(At(`${Mt[d]}: ${yt.message}`,!0,4)),dt="#000000"}const Et=`
        <rect
          x="${xt}"
          y="0"
          width="${s}"
          height="${i}"
          fill="${dt}"
          stroke="none"
        />
      `,It=W?`
        <!-- Text Background -->
        <rect
          x="${xt}"
          y="${i-.5}"
          width="${s}"
          height="${f}"
          fill="${dt}"
          stroke="none"
        />
        <!-- Color Text Label -->
        <text
          x="${xt+s/2}"
          y="${i+f/2+a/3}"
          font-size="${a}"
          font-family="Arial"
          text-anchor="middle"
          dominant-baseline="middle"
          fill="${L.luminance>.179?"#000000":"#FFFFFF"}"
          stroke="none"
        >
          ${L.color}
        </text>
      `:"";return`
        <g>
          <!-- Color Block -->
          ${Et}
          <!-- Color Text Label -->
          ${It}
        </g>
      `}).join(""),v=(oe=(ee=R[_])==null?void 0:ee.items)==null?void 0:oe.map((L,bt)=>{const dt=c+bt*(r+e)+(r-n)/2,Et=ht(L.color,L.colorFormat);return`
        <rect
          x="0"
          y="${dt}"
          width="${J}"
          height="${n}"
          fill="${Et}"
          stroke="none"
        />
      `}).join(""),w=(re=(se=R[_])==null?void 0:se.items)==null?void 0:re.map((L,bt)=>{var It,yt;const xt=bt*s,dt=rt=>{var vt,ne,le,ae,ie,ce;return(ne=(vt=L.compliantColors)==null?void 0:vt.AAA_RegularText)!=null&&ne.includes(rt)?"AAA_RegularText":(ae=(le=L.compliantColors)==null?void 0:le.AA_RegularText)!=null&&ae.includes(rt)?"AA_RegularText":(ce=(ie=L.compliantColors)==null?void 0:ie.AA_UIComponents)!=null&&ce.includes(rt)?"AA_UIComponents":null};return`
        <g>
          <!-- Compliance Indicators -->
          ${(yt=(It=R[_])==null?void 0:It.items)==null?void 0:yt.filter(rt=>rt.id!==L.id).map(rt=>{const vt=dt(rt.id);return vt?fe[vt]({xPosition:xt,yIndicator:c+(rt.id-1)*(r+e),blockWidth:s,indicatorSize:r,otherColor:rt.color,blockColor:L.color,colorFormatBlock:L.colorFormat,colorFormatOther:rt.colorFormat}):""}).join("")}
        </g>
      `}).join(""),b=10,I=J-b,M=Z-b*1.5,D="https://colors.jenniina.fi",pt=`
      <a href="${D}" target="_blank" rel="noopener noreferrer">
        <text
          x="${I}"
          y="${M}"
          font-size="${a}"
          font-family="Arial"
          text-anchor="end"
          fill="#000000"
          stroke="none"
        >
          ${D}
        </text>
      </a>
    `,mt=`
      <a href="${D}" target="_blank" rel="noopener noreferrer">
        <text
          x="${b}"
          y="${M}"
          font-size="${a}"
          font-family="Arial"
          text-anchor="start"
          fill="#FFFFFF"
          stroke="none"
        >
          ${D}
        </text>
      </a>
    `;return{svgContent:`
    <svg xmlns="http://www.w3.org/2000/svg" width="${J}" height="${Z}">
      <!-- Color Blocks -->
      <g>
        ${h}
      </g>
      <!-- Lines -->
      <g>
        ${v}
      </g>
      <!-- Compliance Indicators -->
      <g>
        ${w}
      </g>
      <!-- Source Link -->
      <g>
        ${mt}
      </g>
      <g>
        ${pt}
      </g>
    </svg>
  `,svgWidth:J,svgHeight:Z}},$e=()=>{const{svgContent:t}=Ht(),s=new Blob([t],{type:"image/svg+xml;charset=utf-8"}),r=URL.createObjectURL(s),e=document.createElement("a");e.href=r,e.download="color-blocks.svg",document.body.appendChild(e),e.click(),document.body.removeChild(e),URL.revokeObjectURL(r),$(At(de[d],!1,5))},Ce=()=>{const{svgContent:t,svgWidth:s,svgHeight:r}=Ht(),e=new Image;e.width=s,e.height=r;const c=new Blob([t],{type:"image/svg+xml;charset=utf-8"}),n=URL.createObjectURL(c);e.onload=()=>{const a=document.createElement("canvas");a.width=s,a.height=r;const u=a.getContext("2d");u==null||u.drawImage(e,0,0);const i=a.toDataURL("image/png"),f=document.createElement("a");f.href=i,f.download="color-blocks.png",document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(n),$(At(de[d],!1,5))},e.onerror=a=>{console.error("Error loading SVG into image for PNG conversion:",a),URL.revokeObjectURL(n),$(At(Mt[d],!0,4))},e.src=n},_e=()=>{var f,J,Z;const{r:t,g:s,b:r}=jt(lt),{h:e,s:c,l:n}=Ut(t,s,r),a=Nt(t,s,r),u={id:et,color:`hsl(${e}, ${c}%, ${n}%)`,luminance:a,status:_,colorFormat:"hsl",compliantColors:{AA_RegularText:[],AAA_RegularText:[],AA_UIComponents:[]}};(J=(f=R[_])==null?void 0:f.items)==null||J.forEach(h=>{var w,b,I,M,D,pt,mt,ct;const v=Ft(u,h);v.isAAARegularTextCompliant?((w=u.compliantColors)==null||w.AAA_RegularText.push(h.id),(b=h.compliantColors)==null||b.AAA_RegularText.push(u.id)):v.isAARegularTextCompliant?((I=u.compliantColors)==null||I.AA_RegularText.push(h.id),(M=h.compliantColors)==null||M.AA_RegularText.push(u.id)):v.isAAUIComponentsCompliant&&((pt=(D=u.compliantColors)==null?void 0:D.AA_UIComponents)==null||pt.push(h.id),(ct=(mt=h.compliantColors)==null?void 0:mt.AA_UIComponents)==null||ct.push(u.id))});const i=(Z=R[_])==null?void 0:Z.items.map(h=>{var v,w,b;return{...h,compliantColors:{AAA_RegularText:Array.from(new Set((v=h.compliantColors)==null?void 0:v.AAA_RegularText)),AA_RegularText:Array.from(new Set((w=h.compliantColors)==null?void 0:w.AA_RegularText)),AA_UIComponents:Array.from(new Set((b=h.compliantColors)==null?void 0:b.AA_UIComponents))}}});N(et+1),B([...i,u])},be=t=>{var r;const s=(r=R[_])==null?void 0:r.items.filter(e=>e.id!==t).map(e=>{var c,n,a,u;return{...e,compliantColors:{AAA_RegularText:(c=e.compliantColors)==null?void 0:c.AAA_RegularText.filter(i=>i!==t),AA_RegularText:(n=e.compliantColors)==null?void 0:n.AA_RegularText.filter(i=>i!==t),AA_UIComponents:(u=(a=e.compliantColors)==null?void 0:a.AA_UIComponents)==null?void 0:u.filter(i=>i!==t)}}});B(s),$(At(co[d],!1,5))},ye=(t,s,r)=>{var e;try{let c,n,a,u;if(r==="hsl"){const h=s.match(/^hsl\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*\)$/i);if(!h)throw new Error("Invalid HSL format");const v=Number(h[1]),w=Number(h[2]),b=Number(h[3]);if(v<0||v>360||w<0||w>100||b<0||b>100)throw new Error("HSL values out of range");c=`hsl(${v}, ${w}%, ${b}%)`;const I=tt(v,w,b);n=I.r,a=I.g,u=I.b}else if(r==="rgb"){const h=s.match(/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i);if(!h)throw new Error("Invalid RGB format");const v=Number(h[1]),w=Number(h[2]),b=Number(h[3]);if([v,w,b].some(I=>I<0||I>255))throw new Error("RGB values must be between 0 and 255");c=`rgb(${v}, ${w}, ${b})`,n=v,a=w,u=b}else if(r==="hex"){if(!/^#([0-9A-F]{3}){1,2}$/i.test(s))throw new Error("Invalid Hex format");c=s.toUpperCase();const h=jt(c);n=h.r,a=h.g,u=h.b}else throw new Error("Unsupported color format");const i=Nt(n,a,u),f=(e=R[_])==null?void 0:e.items.map(h=>{var v,w,b,I,M,D,pt;if(h.id===t)return{...h,color:c,colorFormat:r,luminance:i,compliantColors:{AAA_RegularText:[],AA_RegularText:[],AA_UIComponents:[]}};{const mt=Ft(h,{id:t,color:c,colorFormat:r,luminance:i,status:h.status,compliantColors:{AAA_RegularText:[],AA_RegularText:[],AA_UIComponents:[]}});return{...h,compliantColors:{AAA_RegularText:mt.isAAARegularTextCompliant?[...new Set([...(v=h.compliantColors)==null?void 0:v.AAA_RegularText,t])]:(w=h.compliantColors)==null?void 0:w.AAA_RegularText.filter(ct=>ct!==t),AA_RegularText:mt.isAARegularTextCompliant?[...new Set([...(b=h.compliantColors)==null?void 0:b.AA_RegularText,t])]:(I=h.compliantColors)==null?void 0:I.AA_RegularText.filter(ct=>ct!==t),AA_UIComponents:mt.isAAUIComponentsCompliant?[...new Set([...(M=h.compliantColors)==null?void 0:M.AA_UIComponents,t])]:(pt=(D=h.compliantColors)==null?void 0:D.AA_UIComponents)==null?void 0:pt.filter(ct=>ct!==t)}}}}),J=(h,v)=>{let w=[],b=[],I=[];return v.forEach(M=>{if(M.id===h.id)return;const D=Ft(h,M);D.isAAARegularTextCompliant&&w.push(M.id),D.isAARegularTextCompliant&&I.push(M.id),D.isAAUIComponentsCompliant&&b.push(M.id)}),{AAA_RegularText:Array.from(new Set(w)),AA_RegularText:Array.from(new Set(I)),AA_UIComponents:Array.from(new Set(b))}},Z=f.findIndex(h=>h.id===t);if(Z!==-1){const h=J(f[Z],f);f[Z]={...f[Z],compliantColors:h}}B([...f])}catch(c){console.error("Error updating color:",c),$(At(`${Mt[d]}: ${c.message}`,!0,4))}},ve=(t,s)=>{t.dataTransfer.setData("text/plain",JSON.stringify({type:"item",id:s}))},we=(t,s)=>{t.preventDefault(),st(s),ot.current=s},Re=t=>{t.preventDefault(),V(!0)},je=t=>{const s=JSON.parse(t.dataTransfer.getData("text/plain"));s.type==="item"&&(Y(s.id,_,q),V(!1))};E.useEffect(()=>{var t,s;(!((t=R[_])!=null&&t.items)||((s=R[_])==null?void 0:s.items.length)<1)&&B(Bt)},[]);const Lt=.04;return o.jsxs("div",{id:m["color-container"],className:`${m["color-container"]} ${U?m.light:""}`,style:{"--font-size":F.input},children:[o.jsx("div",{id:"info",className:m["info-wrap"],children:o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx("div",{style:{display:"inline-block",backgroundColor:"var(--color-primary-20)",borderRadius:"50%",width:"2em",height:"2em"}}),o.jsx("span",{children:De[d]})]}),o.jsxs("li",{children:[o.jsx("div",{style:{display:"inline-block",backgroundColor:"transparent",outline:"0.3em solid var(--color-primary-20)",outlineOffset:"-0.3em",borderRadius:"50%",width:"1.7em",height:"1.7em",margin:"0 0.2em 0 0.2em "}}),o.jsx("span",{children:Le[d]})]}),o.jsxs("li",{children:[o.jsx("div",{style:{display:"inline-block",backgroundColor:"transparent",outline:"0.3em solid var(--color-primary-20)",outlineOffset:"-0.26em",borderRadius:"0",width:"0.9em",height:"0.9em",margin:"0 0.65em 0 0.65em"}}),o.jsx("span",{children:ke[d]})]})]})}),o.jsxs("div",{className:m["btn-wrap"],children:[((Jt=(Pt=R[_])==null?void 0:Pt.items)==null?void 0:Jt.length)>0&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{type:"button",onClick:Ce,className:"gray small",children:[Ge[d],"  ",o.jsx(ue,{})]}),o.jsxs("button",{type:"button",onClick:$e,className:"gray small",children:[We[d],"  ",o.jsx(ue,{})]})]}),o.jsx("button",{onClick:X,className:"gray small",children:U?o.jsxs(o.Fragment,{children:[Oe[d],"  ",o.jsx(uo,{})]}):o.jsxs(o.Fragment,{children:[Ve[d],"  ",o.jsx(ho,{})," "]})})]}),o.jsxs("div",{className:m["color-picker"],children:[o.jsxs("label",{htmlFor:"color-input",className:" ",children:[He[d],":"]}),o.jsx("input",{id:"color-input",type:"color",value:lt,onChange:t=>k(t.target.value)}),o.jsx("button",{className:"gray small",type:"button",onClick:_e,children:Pe[d]}),o.jsx("button",{className:"gray small",type:"button",onClick:ge,children:Je[d]}),o.jsx("button",{className:"gray small",type:"button",onClick:Ot,children:Xe[d]}),o.jsx("button",{className:"gray small",type:"button",onClick:Vt,children:Ye[d]}),!z&&o.jsx("button",{className:"gray small",type:"button",onClick:xe,children:qe[d]}),z&&o.jsx("div",{className:`${m["color-edit-container"]} ${m["mode-container"]}`,children:o.jsx(pe,{options:g,value:x,onChange:t=>y(t),id:"color-mode",instructions:Ke[d],className:`${m["color-select"]}`,hide:!0,hideDelete:!0})})]}),o.jsx("div",{id:"color-blocks",className:`${m["color-blocks"]} ${!W||!S?m.overflow:""} ${Ct?m.drag:""}`,children:(Xt=R[_])==null?void 0:Xt.items.map(t=>{var s,r;return o.jsx("ul",{className:m["block-wrap"],onDrop:je,children:o.jsxs("li",{className:m["color-wrap"],title:`ID: ${t.id}`,"aria-label":`ID: ${t.id}`,style:{width:`${p}`,maxWidth:`${p}`},children:[o.jsx("ul",{children:o.jsx("li",{draggable:"true",onDragStart:e=>ve(e,t.id),onDragEnter:e=>we(e,t.id),onDragOver:e=>Re(e),onDragEnd:()=>V(!1),"data-identity":t.id,className:m["color-block"],style:{"--color":t.color,backgroundColor:t.color,width:`${p}`,maxWidth:`${p}`,height:`calc(calc(${p} * 0.6) * ${(s=R[_])==null?void 0:s.items.length})`},children:o.jsx("div",{className:m["compliance-indicators"],style:{gap:`calc(${p} / 4)`,"--width-full":`${p}`},children:(r=R[_])==null?void 0:r.items.map(e=>{var n,a,u,i,f,J;if(e.id===t.id)return o.jsx("div",{className:`${m["indicator-null"]} ${m.indicator}`,style:{"--color":e.color,"--width":`calc(${p} / 3)`,"--left":`calc(calc(${p} / 3) * -1)`,backgroundColor:"transparent",width:`calc(${p} / 3)`,height:`calc(${p} / 3)`}},`none-${e.color}-${e.id}`);let c=null;return(a=(n=t.compliantColors)==null?void 0:n.AAA_RegularText)!=null&&a.includes(e.id)?c="AAA_RegularText":(i=(u=t.compliantColors)==null?void 0:u.AA_RegularText)!=null&&i.includes(e.id)?c="AA_RegularText":(J=(f=t.compliantColors)==null?void 0:f.AA_UIComponents)!=null&&J.includes(e.id)&&(c="AA_UIComponents"),c==="AAA_RegularText"?o.jsx("div",{tabIndex:0,className:`${m["indicator-aaa"]} ${m.indicator} tooltip-wrap`,style:{"--color":e.color,backgroundColor:e.color,"--left":`calc(calc(${p} / 3) * -1)`,width:`calc(${p} / 3)`,height:`calc(${p} / 3)`},"aria-labelledby":`span-${e.id}-${t.id}-${$t}`,children:o.jsx("span",{id:`span-${e.id}-${t.id}-${$t}`,className:`tooltip below narrow3 ${m.tooltip}`,style:{fontSize:`clamp(0.7rem, ${F.input}, 0.9rem)`,"--tooltip-max-width":p},children:`${ze[d]}: ${e.id}`})},`aaa-${e.color}-${e.id}`):c==="AA_RegularText"?o.jsx("div",{tabIndex:0,className:`${m["indicator-aa"]} ${m.indicator} tooltip-wrap`,style:{"--color":e.color,backgroundColor:t.color,outline:`calc(${p} * ${Lt*1.1}) solid ${e.color}`,outlineOffset:`calc(${p} * -0.013)`,"--left":`calc(calc(${p} / 5) * -2)`,width:`calc(${p} / 5)`,height:`calc(${p} / 5)`,margin:`calc(${p} / 15)`,borderRadius:"50%"},"aria-labelledby":`span-${e.id}-${t.id}-${$t}`,children:o.jsx("span",{id:`span-${e.id}-${t.id}-${$t}`,className:"tooltip below narrow3",style:{fontSize:`clamp(0.7rem, ${F.input}, 0.9rem)`,"--tooltip-max-width":p},children:`${Qe[d]}: ${e.id}`})},`aa-${e.color}-${e.id}`):c==="AA_UIComponents"?o.jsx("div",{tabIndex:0,className:`${m["indicator-aa-ui"]} ${m.indicator} tooltip-wrap`,style:{"--color":e.color,"--left":`calc(calc(${p} / 7) * -3)`,backgroundColor:t.color,outline:`calc(${p} * ${Lt}) solid ${e.color}`,outlineOffset:`calc(${p} * ${Lt} * -1)`,width:`calc(${p} / 7)`,height:`calc(${p} / 7)`,margin:`calc(${p} / 10.5)`},"aria-labelledby":`span-ui-${e.id}-${t.id}-${$t}`,children:o.jsx("span",{id:`span-ui-${e.id}-${t.id}-${$t}`,className:`tooltip below narrow3 ${m.tooltip}`,style:{fontSize:`clamp(0.7rem, ${F.input}, 0.9rem)`,"--tooltip-max-width":p},children:`${Ze[d]}: ${e.id}`})},`aa-ui-${e.color}-${e.id}`):o.jsx("div",{"aria-hidden":"true",className:`${m["indicator-null"]} ${m.indicator}`,style:{"--color":e.color,backgroundColor:"transparent","--left":`calc(calc(${p} / 3) * -1)`,width:`calc(${p} / 3)`,height:`calc(${p} / 3)`}},`null-${e.color}-${e.id}`)})})})}),W&&o.jsx("div",{style:{backgroundColor:t.color,width:`${p}`,maxWidth:`${p}`,display:"flex",justifyContent:"center",alignItems:"center",padding:"0.5em 0.1em "},className:m["color-name"],children:o.jsx("span",{style:{color:t.luminance<.179?"white":"black",fontSize:`clamp(0.7rem, ${F.input}, 1.2rem)`,textAlign:"center"},children:t.color})}),S&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:m["color-edit-container"],children:o.jsx(bo,{language:d,block:t,updateColor:ye,width:p,hexToRGB:jt,rgbToHSL:Ut,rgbToHex:me,hslToRGB:tt,fontSize:`clamp(0.75rem, ${F.input}, 1rem)`})}),o.jsx("button",{className:`tooltip-wrap small delete danger gray ${m.remove}`,onClick:()=>be(t.id),style:{margin:"0.8em auto",width:"calc(100% - 4px)",minWidth:"calc(100% - 4px)",fontSize:`clamp(0.75rem, ${F.input}, 2rem)`},children:to[d]})]})]})},`${t.color}-${t.id}`)})}),((qt=(Yt=R[_])==null?void 0:Yt.items)==null?void 0:qt.length)>0&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:m["width-wrap"],children:[o.jsx("label",{htmlFor:"color-block-width",children:eo[d]}),o.jsx("input",{id:"color-block-width",type:"range",min:6,max:12,step:.5,value:G,onChange:t=>at(Number(t.target.value))})]}),o.jsxs("div",{className:`${m["toggle-controls"]}`,children:[o.jsxs("div",{children:[o.jsx("strong",{children:oo[d]}),o.jsx("button",{id:"toggle-controls",type:"button",onClick:()=>gt(!S),className:"gray small",children:S?so[d]:ro[d]})]}),o.jsxs("div",{children:[o.jsx("strong",{children:no[d]}),o.jsx("button",{type:"button",onClick:()=>O(!W),className:"gray small",children:W?lo[d]:ao[d]})]})]})]})]})};export{Wo as default};
