import{r as T,j as o}from"./react-A9DAvxly.js";import{K as de,S as ue,f3 as Re,f4 as kt,W as ht,bd as Lt,c$ as je,f5 as Ne,u as yt,bX as Te,f6 as Ee,f7 as Ie,f8 as Ue,f9 as Se,fa as Fe,fb as Rt,fc as Le,fd as De,fe as ke,ff as Be,fg as Me,z as We,A as Ge,fh as Oe,fi as Ve,ap as He,fj as Pe,fk as Je,fl as Xe,fm as Ye,fn as qe,fo as Ke,fp as ze,fq as Qe,fr as jt,fs as Ut,ft as ie,d9 as Ze,fu as to,fv as eo,ax as oo,ay as so,fw as ro,fx as no,fy as lo,fz as ao,fA as Nt,bC as ce,fB as io,fC as co,Y as O}from"./index-9A_O1IDu.js";import{a2 as me,a3 as mo,a4 as uo}from"./react-icons-BXtkaQB_.js";import"./hoist-non-react-statics-D5aJipOz.js";import"./react-dom-yh0erWL-.js";import"./scheduler-CzFDRTuY.js";import"./react-redux-CHm9GgGE.js";import"./react-is-DUDD-a5e.js";import"./use-sync-external-store-DEc9BFqZ.js";import"./@reduxjs-DhFEcpJw.js";import"./immer-C0GRqQ_d.js";import"./redux-CE3tqztX.js";import"./@babel-DF5_wy6Y.js";import"./redux-thunk-CY0Q9z1Q.js";import"./axios-CCb-kr4I.js";import"./react-router-dom-CYs6befe.js";import"./react-router-S1Hdk0kP.js";import"./@remix-run-DTnHqtaE.js";const po="_light_pgtsa_39",ho="_drag_pgtsa_221",Ao="_overflow_pgtsa_235",go="_indicator_pgtsa_343",xo="_tooltip_pgtsa_343",fo="_form_pgtsa_511",$o="_remove_pgtsa_539",Co="_inputs_pgtsa_569",c={"color-container":"_color-container_pgtsa_1",light:po,"color-picker":"_color-picker_pgtsa_57","width-wrap":"_width-wrap_pgtsa_109","btn-wrap":"_btn-wrap_pgtsa_123","info-wrap":"_info-wrap_pgtsa_141","color-blocks":"_color-blocks_pgtsa_189",drag:ho,overflow:Ao,"block-wrap":"_block-wrap_pgtsa_243","color-wrap":"_color-wrap_pgtsa_261","color-block":"_color-block_pgtsa_189","compliance-indicators":"_compliance-indicators_pgtsa_321",indicator:go,tooltip:xo,"indicator-aaa":"_indicator-aaa_pgtsa_373","indicator-null":"_indicator-null_pgtsa_381","compliance-info":"_compliance-info_pgtsa_389","toggle-controls":"_toggle-controls_pgtsa_397","color-edit-container":"_color-edit-container_pgtsa_427","color-select":"_color-select_pgtsa_429","mode-container":"_mode-container_pgtsa_485",form:fo,"color-format-submit":"_color-format-submit_pgtsa_537",remove:$o,"color-name":"_color-name_pgtsa_553",inputs:Co,"hex-input":"_hex-input_pgtsa_593"},_o=({language:m,block:x,fontSize:I,updateColor:q,width:U,hexToRGB:At,hslToRGB:V,rgbToHex:H,rgbToHSL:j})=>{const F=de(),rt=/^hsl\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*\)$/i,nt=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i,M=/^#([0-9A-F]{3}){1,2}$/i,tt=[{value:"hsl",label:"HSL"},{value:"rgb",label:"RGB"},{value:"hex",label:"Hex"}],[N,$t]=T.useState(tt.find(a=>a.value===x.colorFormat)||tt[0]),[R,P]=T.useState(""),[K,et]=T.useState(0),[z,ot]=T.useState(0),[J,W]=T.useState(0),[lt,p]=T.useState(0),[Q,S]=T.useState(0),[at,it]=T.useState(0);T.useEffect(()=>{switch(x.colorFormat){case"hex":{P(x.color);const{r:a,g:h,b:f}=At(x.color);et(a),ot(h),W(f);const{h:A,s:C,l:$}=j(a,h,f);p(A),S(C),it($);break}case"rgb":{const a=x.color.match(nt);if(a){const h=Number(a[1]),f=Number(a[2]),A=Number(a[3]);et(h),ot(f),W(A);const{h:C,s:$,l:L}=j(h,f,A);p(C),S($),it(L)}break}case"hsl":{const a=x.color.match(rt);if(a){const h=Number(a[1]),f=Number(a[2]),A=Number(a[3]);p(h),S(f),it(A);const{r:C,g:$,b:L}=V(h,f,A);et(C),ot($),W(L);const G=H(C,$,L);P(G)}break}}},[]);const Tt=a=>{try{let h;if(a==="hex")if(M.test(R)){h=R.toUpperCase(),q(x.id,h,"hex");const{r:f,g:A,b:C}=At(h);et(f),ot(A),W(C);const{h:$,s:L,l:G}=j(f,A,C);p($),S(L),it(G)}else throw new Error("Invalid Hex format.");else if(a==="rgb")if(K>=0&&K<=255&&z>=0&&z<=255&&J>=0&&J<=255){h=`rgb(${K}, ${z}, ${J})`,q(x.id,h,"rgb");const f=H(K,z,J);P(f);const{h:A,s:C,l:$}=j(K,z,J);p(A),S(C),it($)}else throw new Error("Invalid RGB values.");else if(a==="hsl")if(lt>=0&&lt<=360&&Q>=0&&Q<=100&&at>=0&&at<=100){h=`hsl(${lt}, ${Q}%, ${at}%)`,q(x.id,h,"hsl");const{r:f,g:A,b:C}=V(lt,Q,at);et(f),ot(A),W(C);const $=H(f,A,C);P($)}else throw new Error("Invalid HSL values.");else throw new Error("Unsupported color format.")}catch(h){console.error(h.message),F(ht(Lt[m]+" "+h.message,!0,4))}},Ct=a=>{a.preventDefault(),Tt(N==null?void 0:N.value)},X=(a,h)=>{a==="h"&&p(h),a==="s"&&S(h),a==="l"&&it(h);const f=a==="h"?h:lt,A=a==="s"?h:Q,C=a==="l"?h:at;if(f>=0&&f<=360&&A>=0&&A<=100&&C>=0&&C<=100){const{r:$,g:L,b:G}=V(f,A,C);et($),ot(L),W(G),q(x.id,`hsl(${f}, ${A}%, ${C}%)`,"hsl"),P(H($,L,G))}},gt=(a,h)=>{a==="r"&&et(h),a==="g"&&ot(h),a==="b"&&W(h);const f=a==="r"?h:K,A=a==="g"?h:z,C=a==="b"?h:J;if([f,A,C].every($=>$>=0&&$<=255)){const{h:$,s:L,l:G}=j(f,A,C);p($),S(L),it(G),q(x.id,`rgb(${f}, ${A}, ${C})`,"rgb"),P(H(f,A,C))}};return o.jsxs(o.Fragment,{children:[o.jsx(ue,{hideDelete:!0,id:"color-select",className:c["color-select"],language:m,instructions:Re[m],hide:!0,options:tt,value:N,onChange:a=>{if($t(a),(a==null?void 0:a.value)==="hex"){const h=H(K,z,J);P(h)}else(a==null?void 0:a.value)==="rgb"?(et(K),ot(z),W(J)):(a==null?void 0:a.value)==="hsl"&&(p(lt),S(Q),it(at))}}),(N==null?void 0:N.value)==="hex"&&o.jsxs("form",{className:c.form,onSubmit:Ct,children:[o.jsx("div",{className:`${c.inputs} ${c["hex-input"]}`,children:o.jsxs("label",{children:[o.jsx("span",{children:"Hex: "}),o.jsx("input",{name:`hex-input-${x.id}`,type:"text",value:R,onChange:a=>P(a.target.value),className:c["color-input"],style:{maxWidth:`${U}`,fontSize:I},placeholder:"#FFFFFF"})]})}),o.jsx("button",{style:{minWidth:"calc(100% - 4px)",maxWidth:"calc(100% - 4px)",fontSize:I},type:"submit",className:`${c["color-format-submit"]} small gray`,children:kt[m]})]}),(N==null?void 0:N.value)==="rgb"&&o.jsxs("form",{className:`${c.inputs} ${c["rgb-inputs"]}`,onSubmit:Ct,children:[o.jsxs("label",{children:[o.jsx("span",{children:"R: "}),o.jsx("input",{name:`r-input-${x.id}`,type:"number",value:K,onChange:a=>gt("r",Number(a.target.value)),min:0,max:255,className:c["color-input"],style:{maxWidth:`${U}`,fontSize:I}})]}),o.jsxs("label",{children:[o.jsx("span",{children:"G: "}),o.jsx("input",{name:`g-input-${x.id}`,type:"number",value:z,onChange:a=>gt("g",Number(a.target.value)),min:0,max:255,className:c["color-input"],style:{maxWidth:`${U}`,fontSize:I}})]}),o.jsxs("label",{children:[o.jsx("span",{children:"B: "}),o.jsx("input",{name:`b-input-${x.id}`,type:"number",value:J,onChange:a=>gt("b",Number(a.target.value)),min:0,max:255,className:c["color-input"],style:{maxWidth:`${U}`,fontSize:I}})]}),o.jsx("button",{style:{minWidth:"calc(100% - 4px)",maxWidth:"calc(100% - 4px)",fontSize:I},type:"submit",className:`${c["color-format-submit"]} small gray`,children:kt[m]})]}),(N==null?void 0:N.value)==="hsl"&&o.jsxs("form",{className:`${c.inputs} ${c["hsl-inputs"]}`,onSubmit:Ct,children:[o.jsxs("label",{children:[o.jsx("span",{children:"H: "}),o.jsx("input",{name:`h-input-${x.id}`,type:"number",value:lt,onChange:a=>X("h",Number(a.target.value)),min:0,max:360,className:c["color-input"],style:{maxWidth:`${U}`,fontSize:I}})," "]}),o.jsxs("label",{children:[o.jsx("span",{children:"S: "}),o.jsx("input",{name:`s-input-${x.id}`,type:"number",value:Q,onChange:a=>X("s",Number(a.target.value)),min:0,max:100,className:c["color-input"],style:{maxWidth:`${U}`,fontSize:I}})]}),o.jsxs("label",{children:[o.jsx("span",{children:"L: "}),o.jsx("input",{name:`l-input-${x.id}`,type:"number",value:at,onChange:a=>X("l",Number(a.target.value)),min:0,max:100,className:c["color-input"],style:{maxWidth:`${U}`,fontSize:I}})]}),o.jsx("button",{style:{minWidth:"calc(100% - 4px)",maxWidth:"calc(100% - 4px)",fontSize:I},type:"submit",className:`${c["color-format-submit"]} small gray`,children:kt[m]})]})]})};function Bt(m,x){return Math.random()*(x-m)+m}const ft=ao(5),St=(m,x)=>{const I=j=>{let F,rt,nt;if(j.colorFormat==="hex")({r:F,g:rt,b:nt}=jt(j.color));else if(j.colorFormat==="rgb"){const M=j.color.match(/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i);if(M)F=Number(M[1]),rt=Number(M[2]),nt=Number(M[3]);else throw new Error("Invalid RGB format")}else if(j.colorFormat==="hsl"){const M=j.color.match(/^hsl\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*\)$/i);if(M){const tt=Number(M[1]),N=Number(M[2]),$t=Number(M[3]);({r:F,g:rt,b:nt}=Rt(tt,N,$t))}else throw new Error("Invalid HSL format")}else throw new Error("Unsupported color format");return{r:F,g:rt,b:nt}},q=I(m),U=I(x),At=Nt(q.r,q.g,q.b),V=Nt(U.r,U.g,U.b),H=co(At,V);return{isAAARegularTextCompliant:H>=7,isAARegularTextCompliant:H>=4.5,isAAUIComponentsCompliant:H>=3}},b="colors",vt="hsl",Ft=[{id:1,color:"hsl(200, 50%, 10%)",luminance:.011540526030345211,status:b,colorFormat:vt,compliantColors:{AAA_RegularText:[4,5],AA_UIComponents:[3,4,5],AA_RegularText:[3,4,5]}},{id:2,color:"hsl(200, 50%, 35%)",luminance:.12179747967530058,status:b,colorFormat:vt,compliantColors:{AAA_RegularText:[],AA_UIComponents:[4,5],AA_RegularText:[5]}},{id:3,color:"hsl(200, 50%, 55%)",luminance:.3071249100459835,status:b,colorFormat:vt,compliantColors:{AAA_RegularText:[],AA_UIComponents:[1],AA_RegularText:[1]}},{id:4,color:"hsl(200, 50%, 75%)",luminance:.5493970089199802,status:b,colorFormat:vt,compliantColors:{AAA_RegularText:[1],AA_UIComponents:[1,2],AA_RegularText:[1]}},{id:5,color:"hsl(200, 50%, 90%)",luminance:.800081557105977,status:b,colorFormat:vt,compliantColors:{AAA_RegularText:[1],AA_UIComponents:[1,2],AA_RegularText:[1,2]}}],Wo=({language:m})=>{var Vt,Ht,Pt,Jt,Xt;const x=de(),I=je(),q=Ne(),[U,At]=T.useState(!0),[V,H]=yt("Jenniina-showColorNames",!0),[j,F,rt]=yt("Jenniina-colorsAccessibility",Ft),[nt,M]=yt("Jenniina-currentColor","#7D7D7D"),[tt,N]=yt("Jenniina-idCounter",1),{isDragging:$t,listItemsByStatus:R,handleDragging:P,handleUpdate:K}=Te(j,[b]),et=T.useRef(0),[z,ot]=T.useState(0),J=8,[W,lt]=yt("Jenniina-color-block-width",J),p=`${W}em`,Q=W/J,S={tooltip:`${.7*Q}em`,colorName:`${.7*Q}em`,input:`${.8*Q}em`},at=(t,s)=>{const n=St(t,s);return n.isAAARegularTextCompliant&&(t.compliantColors.AAA_RegularText.push(s.id),s.compliantColors.AAA_RegularText.push(t.id)),n.isAARegularTextCompliant&&(t.compliantColors.AA_RegularText.push(s.id),s.compliantColors.AA_RegularText.push(t.id)),n.isAAUIComponentsCompliant&&(t.compliantColors.AA_UIComponents.push(s.id),s.compliantColors.AA_UIComponents.push(t.id)),t.compliantColors.AAA_RegularText=Array.from(new Set(t.compliantColors.AAA_RegularText)),t.compliantColors.AA_RegularText=Array.from(new Set(t.compliantColors.AA_RegularText)),t.compliantColors.AA_UIComponents=Array.from(new Set(t.compliantColors.AA_UIComponents)),s.compliantColors.AAA_RegularText=Array.from(new Set(s.compliantColors.AAA_RegularText)),s.compliantColors.AA_RegularText=Array.from(new Set(s.compliantColors.AA_RegularText)),s.compliantColors.AA_UIComponents=Array.from(new Set(s.compliantColors.AA_UIComponents)),{updatedColor1:t,updatedColor2:s}},[it,Tt]=T.useState(!1),Ct=500;T.useEffect(()=>{let t;return j.length<1?t=setTimeout(()=>{Tt(!0)},Ct):Tt(!1),()=>{t&&clearTimeout(t)}},[j.length]);const X=()=>{const t=Math.ceil(Bt(30,100));return O(30,t,100)},gt=()=>{const t=Math.ceil(Bt(5,90));return O(5,t,90)},a=(t="array")=>{if(t==="hsl"){const s=Math.floor(Math.random()*360),n=X(),e=gt();return`hsl(${s}, ${n}%, ${e}%)`}else{const s=Math.floor(Math.random()*360),n=X(),e=gt();return[s,n,e]}},h=[{value:"analogous",label:Ee[m]},{value:"complementary",label:Ie[m]},{value:"monochromatic",label:Ue[m]},{value:"triad",label:Se[m]},{value:"tetrad",label:Fe[m]}];let f=Math.floor(Math.random()*h.length);const[A,C]=T.useState(h[f]),$=Math.round(Bt(15,35)),L=(t,s)=>{const n=[];switch(t){case"analogous":for(let r=1;r<=4;r++){let l=(s.l-$*r+90)%90;l=O(0,l,90);const u=[(s.h+30*r)%360,X(),l];n.push(u)}break;case"complementary":const e=[(s.h+180)%360,s.s,s.l],i=Rt(...e);n.push([i.r,i.g,i.b]);for(let r=1;r<=3;r++){let l=(s.l-$*r+90)%90;l=O(0,l,90);const u=[(e[0]+30*r)%360,X(),l];n.push(u)}break;case"triad":for(let r=1;r<=2;r++){let l=(s.l-$*r+90)%90;l=O(0,l,90);const u=[(s.h+120*r)%360,X(),l];n.push(u)}break;case"monochromatic":for(let r=1;r<=4;r++){let l=(s.l-$*r+90)%90;l=O(0,l,90);const u=[s.h,X(),l];n.push(u)}break;case"tetrad":for(let r=1;r<=3;r++){let l=(s.l-$*r+90)%90;l=O(0,l,90);const u=[(s.h+90*r)%360,X(),l];n.push(u)}break;default:for(let r=1;r<=4;r++){let l=(s.l-$*r+90)%90;l=O(0,l,90);const u=[(s.h+30*r)%360,X(),l];n.push(u)}break}return n},[G,Mt]=T.useState(!1),pe=t=>{const s=[];if(t.length===0||G){const n=a("array");Array.isArray(n)&&s.push(n);const e=L(A==null?void 0:A.value,{h:n[0],s:n[1],l:n[2]});return s.push(...e),s}else{const n=t[t.length-1];let e;try{if(n.colorFormat==="hex"){const r=jt(n.color);e=Ut(r.r,r.g,r.b)}else if(n.colorFormat==="rgb"){const r=n.color.match(/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i);if(r){const l=Number(r[1]),u=Number(r[2]),g=Number(r[3]);e=Ut(l,u,g)}else throw new Error("Invalid RGB format")}else if(n.colorFormat==="hsl"){const r=n.color.match(/^hsl\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*\)$/i);if(r){const l=Number(r[1]),u=Number(r[2]),g=Number(r[3]);e={h:l,s:u,l:g}}else throw new Error("Invalid HSL format")}else throw new Error("Unsupported color format");const i=L(A==null?void 0:A.value,e);s.push(...i.slice(0,2))}catch(i){console.error("Error generating new colors:",i);for(let r=0;r<2;r++){const l=a("array");Array.isArray(l)&&s.push(l)}}}return!G&&t.length>0?s.slice(0,2):s},Wt=()=>{rt(),F([]),N(1)},he=()=>{rt(),F(Ft),N(Ft.length+1)},Ae=()=>{Mt(!0),Wt()};T.useEffect(()=>{G&&j.length===0&&Gt()},[G,j]);const Gt=()=>{const s=pe(j).map((e,i)=>{const r=Rt(e[0],e[1],e[2]),l=Nt(r.r,r.g,r.b);return{id:tt+i,color:`hsl(${e[0]}, ${e[1]}%, ${e[2]}%)`,luminance:l,status:b,colorFormat:"hsl",compliantColors:{AA_RegularText:[],AAA_RegularText:[],AA_UIComponents:[]}}});let n=[...j,...s];n=n.map(e=>(s.forEach(i=>{const{updatedColor1:r,updatedColor2:l}=at(e,i);e=r,i=l}),e)),F(n),N(tt+s.length),Mt(!1)},ut=(t,s)=>{if(s==="hex"){if(/^#([A-Fa-f0-9]{6})$/.test(t))return t.toUpperCase();throw new Error(`Invalid HEX color format: ${t}`)}else if(s==="rgb"){const n=t.match(/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i);if(n){const e=Number(n[1]),i=Number(n[2]),r=Number(n[3]);if([e,i,r].every(l=>l>=0&&l<=255))return ie(e,i,r);throw new Error(`RGB values out of range in color: ${t}`)}else throw new Error(`Invalid RGB color format: ${t}`)}else if(s==="hsl"){const n=t.match(/^hsl\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*\)$/i);if(n){let e=O(0,Number(n[1]),360),i=O(0,Number(n[2]),100),r=O(0,Number(n[3]),100);return e=(e+360)%360,i=O(0,i,100),r=O(0,r,100),`hsl(${e}, ${i}%, ${r}%)`}else throw new Error(`Invalid HSL color format: ${t}`)}else throw new Error(`Unsupported color format: ${s}`)},ge={AA_RegularText:({xPosition:t,yIndicator:s,blockWidth:n,indicatorSize:e,otherColor:i,blockColor:r,colorFormatBlock:l,colorFormatOther:u})=>{const g=ut(r,l),_=ut(i,u);return`
 <circle
  cx="${t+n/2}"
  cy="${s+e/2}"
  r="${e*.32}"
  fill="${g}"
  stroke="${_}"
  stroke-width="${e*.1}"
/>
`},AA_UIComponents:({xPosition:t,yIndicator:s,blockWidth:n,indicatorSize:e,otherColor:i,blockColor:r,colorFormatBlock:l,colorFormatOther:u})=>{const g=ut(r,l),_=ut(i,u);return`
    <rect
  x="${t+n/2-e*.2}"
  y="${s+e/2-e*.15}"
  width="${e*.3}"
  height="${e*.3}"
  fill="${g}"
  stroke="${_}"
  stroke-width="${e*.1}"
/>
`},AAA_RegularText:({xPosition:t,yIndicator:s,blockWidth:n,indicatorSize:e,otherColor:i,blockColor:r,colorFormatBlock:l,colorFormatOther:u})=>{const g=ut(i,u);return`
<circle
  cx="${t+n/2}"
  cy="${s+e/2}"
  r="${e/2}"
  fill="${g}"
  stroke="none"
/>
`}},Ot=()=>{var Yt,qt,Kt,zt,Qt,Zt,te,ee,oe;const t=W*20,s=t,n=s/3,e=n/1.5,i=t/4,r=n/20,l=s/10,g=((qt=(Yt=R[b])==null?void 0:Yt.items)==null?void 0:qt.length)*(n+e)-e+i*2,_=V?l+i:0,Y=((Kt=R[b])==null?void 0:Kt.items.length)*s,Z=g+_*1.6,d=(Qt=(zt=R[b])==null?void 0:zt.items)==null?void 0:Qt.map((B,_t)=>{const xt=_t*s;let dt;try{dt=ut(B.color,B.colorFormat)}catch(bt){console.error(bt),x(ht(`${Lt[m]}: ${bt.message}`,!0,4)),dt="#000000"}const Et=`
        <rect
          x="${xt}"
          y="0"
          width="${s}"
          height="${g}"
          fill="${dt}"
          stroke="none"
        />
      `,It=V?`
        <!-- Text Background -->
        <rect
          x="${xt}"
          y="${g-.5}"
          width="${s}"
          height="${_}"
          fill="${dt}"
          stroke="none"
        />
        <!-- Color Text Label -->
        <text
          x="${xt+s/2}"
          y="${g+_/2+l/3}"
          font-size="${l}"
          font-family="Arial"
          text-anchor="middle"
          dominant-baseline="middle"
          fill="${B.luminance>.179?"#000000":"#FFFFFF"}"
          stroke="none"
        >
          ${B.color}
        </text>
      `:"";return`
        <g>
          <!-- Color Block -->
          ${Et}
          <!-- Color Text Label -->
          ${It}
        </g>
      `}).join(""),y=(te=(Zt=R[b])==null?void 0:Zt.items)==null?void 0:te.map((B,_t)=>{const dt=i+_t*(n+e)+(n-r)/2,Et=ut(B.color,B.colorFormat);return`
        <rect
          x="0"
          y="${dt}"
          width="${Y}"
          height="${r}"
          fill="${Et}"
          stroke="none"
        />
      `}).join(""),v=(oe=(ee=R[b])==null?void 0:ee.items)==null?void 0:oe.map((B,_t)=>{var It,bt;const xt=_t*s,dt=st=>{var wt,se,re,ne,le,ae;return(se=(wt=B.compliantColors)==null?void 0:wt.AAA_RegularText)!=null&&se.includes(st)?"AAA_RegularText":(ne=(re=B.compliantColors)==null?void 0:re.AA_RegularText)!=null&&ne.includes(st)?"AA_RegularText":(ae=(le=B.compliantColors)==null?void 0:le.AA_UIComponents)!=null&&ae.includes(st)?"AA_UIComponents":null};return`
        <g>
          <!-- Compliance Indicators -->
          ${(bt=(It=R[b])==null?void 0:It.items)==null?void 0:bt.filter(st=>st.id!==B.id).map(st=>{const wt=dt(st.id);return wt?ge[wt]({xPosition:xt,yIndicator:i+(st.id-1)*(n+e),blockWidth:s,indicatorSize:n,otherColor:st.color,blockColor:B.color,colorFormatBlock:B.colorFormat,colorFormatOther:st.colorFormat}):""}).join("")}
        </g>
      `}).join(""),w=10,E=Y-w,D=Z-w*1.5,k="https://colors.jenniina.fi",pt=`
      <a href="${k}" target="_blank" rel="noopener noreferrer">
        <text
          x="${E}"
          y="${D}"
          font-size="${l}"
          font-family="Arial"
          text-anchor="end"
          fill="#000000"
          stroke="none"
        >
          ${k}
        </text>
      </a>
    `,mt=`
      <a href="${k}" target="_blank" rel="noopener noreferrer">
        <text
          x="${w}"
          y="${D}"
          font-size="${l}"
          font-family="Arial"
          text-anchor="start"
          fill="#FFFFFF"
          stroke="none"
        >
          ${k}
        </text>
      </a>
    `;return{svgContent:`
    <svg xmlns="http://www.w3.org/2000/svg" width="${Y}" height="${Z}">
      <!-- Color Blocks -->
      <g>
        ${d}
      </g>
      <!-- Lines -->
      <g>
        ${y}
      </g>
      <!-- Compliance Indicators -->
      <g>
        ${v}
      </g>
      <!-- Source Link -->
      <g>
        ${mt}
      </g>
      <g>
        ${pt}
      </g>
    </svg>
  `,svgWidth:Y,svgHeight:Z}},xe=()=>{const{svgContent:t}=Ot(),s=new Blob([t],{type:"image/svg+xml;charset=utf-8"}),n=URL.createObjectURL(s),e=document.createElement("a");e.href=n,e.download="color-blocks.svg",document.body.appendChild(e),e.click(),document.body.removeChild(e),URL.revokeObjectURL(n),x(ht(ce[m],!1,5))},fe=()=>{const{svgContent:t,svgWidth:s,svgHeight:n}=Ot(),e=new Image;e.width=s,e.height=n;const i=new Blob([t],{type:"image/svg+xml;charset=utf-8"}),r=URL.createObjectURL(i);e.onload=()=>{const l=document.createElement("canvas");l.width=s,l.height=n;const u=l.getContext("2d");u==null||u.drawImage(e,0,0);const g=l.toDataURL("image/png"),_=document.createElement("a");_.href=g,_.download="color-blocks.png",document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(r),x(ht(ce[m],!1,5))},e.onerror=l=>{console.error("Error loading SVG into image for PNG conversion:",l),URL.revokeObjectURL(r),x(ht(Lt[m],!0,4))},e.src=r},$e=()=>{var _,Y,Z;const{r:t,g:s,b:n}=jt(nt),{h:e,s:i,l:r}=Ut(t,s,n),l=Nt(t,s,n),u={id:tt,color:`hsl(${e}, ${i}%, ${r}%)`,luminance:l,status:b,colorFormat:"hsl",compliantColors:{AA_RegularText:[],AAA_RegularText:[],AA_UIComponents:[]}};(Y=(_=R[b])==null?void 0:_.items)==null||Y.forEach(d=>{var v,w,E,D,k,pt,mt,ct;const y=St(u,d);y.isAAARegularTextCompliant?((v=u.compliantColors)==null||v.AAA_RegularText.push(d.id),(w=d.compliantColors)==null||w.AAA_RegularText.push(u.id)):y.isAARegularTextCompliant?((E=u.compliantColors)==null||E.AA_RegularText.push(d.id),(D=d.compliantColors)==null||D.AA_RegularText.push(u.id)):y.isAAUIComponentsCompliant&&((pt=(k=u.compliantColors)==null?void 0:k.AA_UIComponents)==null||pt.push(d.id),(ct=(mt=d.compliantColors)==null?void 0:mt.AA_UIComponents)==null||ct.push(u.id))});const g=(Z=R[b])==null?void 0:Z.items.map(d=>{var y,v,w;return{...d,compliantColors:{AAA_RegularText:Array.from(new Set((y=d.compliantColors)==null?void 0:y.AAA_RegularText)),AA_RegularText:Array.from(new Set((v=d.compliantColors)==null?void 0:v.AA_RegularText)),AA_UIComponents:Array.from(new Set((w=d.compliantColors)==null?void 0:w.AA_UIComponents))}}});N(tt+1),F([...g,u])},Ce=t=>{var n;const s=(n=R[b])==null?void 0:n.items.filter(e=>e.id!==t).map(e=>{var i,r,l,u;return{...e,compliantColors:{AAA_RegularText:(i=e.compliantColors)==null?void 0:i.AAA_RegularText.filter(g=>g!==t),AA_RegularText:(r=e.compliantColors)==null?void 0:r.AA_RegularText.filter(g=>g!==t),AA_UIComponents:(u=(l=e.compliantColors)==null?void 0:l.AA_UIComponents)==null?void 0:u.filter(g=>g!==t)}}});F(s),x(ht(io[m],!1,5))},_e=(t,s,n)=>{var e;try{let i,r,l,u;if(n==="hsl"){const d=s.match(/^hsl\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*\)$/i);if(!d)throw new Error("Invalid HSL format");const y=Number(d[1]),v=Number(d[2]),w=Number(d[3]);if(y<0||y>360||v<0||v>100||w<0||w>100)throw new Error("HSL values out of range");i=`hsl(${y}, ${v}%, ${w}%)`;const E=Rt(y,v,w);r=E.r,l=E.g,u=E.b}else if(n==="rgb"){const d=s.match(/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i);if(!d)throw new Error("Invalid RGB format");const y=Number(d[1]),v=Number(d[2]),w=Number(d[3]);if([y,v,w].some(E=>E<0||E>255))throw new Error("RGB values must be between 0 and 255");i=`rgb(${y}, ${v}, ${w})`,r=y,l=v,u=w}else if(n==="hex"){if(!/^#([0-9A-F]{3}){1,2}$/i.test(s))throw new Error("Invalid Hex format");i=s.toUpperCase();const d=jt(i);r=d.r,l=d.g,u=d.b}else throw new Error("Unsupported color format");const g=Nt(r,l,u),_=(e=R[b])==null?void 0:e.items.map(d=>{var y,v,w,E,D,k,pt;if(d.id===t)return{...d,color:i,colorFormat:n,luminance:g,compliantColors:{AAA_RegularText:[],AA_RegularText:[],AA_UIComponents:[]}};{const mt=St(d,{id:t,color:i,colorFormat:n,luminance:g,status:d.status,compliantColors:{AAA_RegularText:[],AA_RegularText:[],AA_UIComponents:[]}});return{...d,compliantColors:{AAA_RegularText:mt.isAAARegularTextCompliant?[...new Set([...(y=d.compliantColors)==null?void 0:y.AAA_RegularText,t])]:(v=d.compliantColors)==null?void 0:v.AAA_RegularText.filter(ct=>ct!==t),AA_RegularText:mt.isAARegularTextCompliant?[...new Set([...(w=d.compliantColors)==null?void 0:w.AA_RegularText,t])]:(E=d.compliantColors)==null?void 0:E.AA_RegularText.filter(ct=>ct!==t),AA_UIComponents:mt.isAAUIComponentsCompliant?[...new Set([...(D=d.compliantColors)==null?void 0:D.AA_UIComponents,t])]:(pt=(k=d.compliantColors)==null?void 0:k.AA_UIComponents)==null?void 0:pt.filter(ct=>ct!==t)}}}}),Y=(d,y)=>{let v=[],w=[],E=[];return y.forEach(D=>{if(D.id===d.id)return;const k=St(d,D);k.isAAARegularTextCompliant&&v.push(D.id),k.isAARegularTextCompliant&&E.push(D.id),k.isAAUIComponentsCompliant&&w.push(D.id)}),{AAA_RegularText:Array.from(new Set(v)),AA_RegularText:Array.from(new Set(E)),AA_UIComponents:Array.from(new Set(w))}},Z=_.findIndex(d=>d.id===t);if(Z!==-1){const d=Y(_[Z],_);_[Z]={..._[Z],compliantColors:d}}F([..._])}catch(i){console.error("Error updating color:",i),x(ht(`${Lt[m]}: ${i.message}`,!0,4))}},be=(t,s)=>{t.dataTransfer.setData("text/plain",JSON.stringify({type:"item",id:s}))},we=(t,s)=>{t.preventDefault(),ot(s),et.current=s},ye=t=>{t.preventDefault(),P(!0)},ve=t=>{const s=JSON.parse(t.dataTransfer.getData("text/plain"));s.type==="item"&&(K(s.id,b,z),P(!1))};T.useEffect(()=>{var t,s;(!((t=R[b])!=null&&t.items)||((s=R[b])==null?void 0:s.items.length)<1)&&F(Ft)},[]);const Dt=.04;return o.jsxs("div",{id:c["color-container"],className:`${c["color-container"]} ${I?c.light:""}`,style:{"--font-size":S.input},children:[o.jsx("div",{id:"info",className:c["info-wrap"],children:o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx("div",{style:{display:"inline-block",backgroundColor:"var(--color-primary-20)",borderRadius:"50%",width:"2em",height:"2em"}}),o.jsx("span",{children:Le[m]})]}),o.jsxs("li",{children:[o.jsx("div",{style:{display:"inline-block",backgroundColor:"transparent",outline:"0.3em solid var(--color-primary-20)",outlineOffset:"-0.3em",borderRadius:"50%",width:"1.7em",height:"1.7em",margin:"0 0.2em 0 0.2em "}}),o.jsx("span",{children:De[m]})]}),o.jsxs("li",{children:[o.jsx("div",{style:{display:"inline-block",backgroundColor:"transparent",outline:"0.3em solid var(--color-primary-20)",outlineOffset:"-0.26em",borderRadius:"0",width:"0.9em",height:"0.9em",margin:"0 0.65em 0 0.65em"}}),o.jsx("span",{children:ke[m]})]})]})}),o.jsxs("div",{className:c["btn-wrap"],children:[((Ht=(Vt=R[b])==null?void 0:Vt.items)==null?void 0:Ht.length)>0&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{type:"button",onClick:fe,className:"gray small",children:[Be[m],"  ",o.jsx(me,{})]}),o.jsxs("button",{type:"button",onClick:xe,className:"gray small",children:[Me[m],"  ",o.jsx(me,{})]})]}),o.jsx("button",{onClick:q,className:"gray small",children:I?o.jsxs(o.Fragment,{children:[We[m],"  ",o.jsx(mo,{})]}):o.jsxs(o.Fragment,{children:[Ge[m],"  ",o.jsx(uo,{})," "]})})]}),o.jsxs("div",{className:c["color-picker"],children:[o.jsxs("label",{htmlFor:"color-input",className:" ",children:[Oe[m],":"]}),o.jsx("input",{id:"color-input",type:"color",value:nt,onChange:t=>M(t.target.value)}),o.jsx("button",{className:"gray small",type:"button",onClick:$e,children:Ve[m]}),o.jsx("button",{className:"gray small",type:"button",onClick:he,children:He[m]}),o.jsx("button",{className:"gray small",type:"button",onClick:Wt,children:Pe[m]}),o.jsx("button",{className:"gray small",type:"button",onClick:Ae,children:Je[m]}),o.jsxs("div",{className:`${c["color-edit-container"]} ${c["mode-container"]}`,children:[o.jsx(ue,{options:h,value:A,onChange:t=>C(t),id:"color-mode",instructions:Xe[m],className:`${c["color-select"]}`,hide:!0,hideDelete:!0,tooltip:!0,y:"above narrow2"}),o.jsxs("button",{className:"gray small tooltip-wrap",type:"button",onClick:Gt,children:[Ye[m],o.jsx("span",{className:"tooltip above narrow2",children:qe[m]})]})," "]})]}),o.jsx("div",{id:"color-blocks",className:`${c["color-blocks"]} ${!V||!U?c.overflow:""} ${$t?c.drag:""}`,children:(Pt=R[b])==null?void 0:Pt.items.map(t=>{var s,n;return o.jsx("ul",{className:c["block-wrap"],onDrop:ve,children:o.jsxs("li",{className:c["color-wrap"],title:`ID: ${t.id}`,"aria-label":`ID: ${t.id}`,style:{width:`${p}`,maxWidth:`${p}`},children:[o.jsx("ul",{children:o.jsx("li",{draggable:"true",onDragStart:e=>be(e,t.id),onDragEnter:e=>we(e,t.id),onDragOver:e=>ye(e),onDragEnd:()=>P(!1),"data-identity":t.id,className:c["color-block"],style:{"--color":t.color,backgroundColor:t.color,width:`${p}`,maxWidth:`${p}`,height:`calc(calc(${p} * 0.6) * ${(s=R[b])==null?void 0:s.items.length})`},children:o.jsx("div",{className:c["compliance-indicators"],style:{gap:`calc(${p} / 4)`,"--width-full":`${p}`},children:(n=R[b])==null?void 0:n.items.map(e=>{var r,l,u,g,_,Y;if(e.id===t.id)return o.jsx("div",{className:`${c["indicator-null"]} ${c.indicator}`,style:{"--color":e.color,"--width":`calc(${p} / 3)`,"--left":`calc(calc(${p} / 3) * -1)`,backgroundColor:"transparent",width:`calc(${p} / 3)`,height:`calc(${p} / 3)`}},`none-${e.color}-${e.id}`);let i=null;return(l=(r=t.compliantColors)==null?void 0:r.AAA_RegularText)!=null&&l.includes(e.id)?i="AAA_RegularText":(g=(u=t.compliantColors)==null?void 0:u.AA_RegularText)!=null&&g.includes(e.id)?i="AA_RegularText":(Y=(_=t.compliantColors)==null?void 0:_.AA_UIComponents)!=null&&Y.includes(e.id)&&(i="AA_UIComponents"),i==="AAA_RegularText"?o.jsx("div",{tabIndex:0,className:`${c["indicator-aaa"]} ${c.indicator} tooltip-wrap`,style:{"--color":e.color,backgroundColor:e.color,"--left":`calc(calc(${p} / 3) * -1)`,width:`calc(${p} / 3)`,height:`calc(${p} / 3)`},"aria-labelledby":`span-${e.id}-${t.id}-${ft}`,children:o.jsx("span",{id:`span-${e.id}-${t.id}-${ft}`,className:`tooltip below narrow3 ${c.tooltip}`,style:{fontSize:`clamp(0.7rem, ${S.input}, 0.9rem)`,"--tooltip-max-width":p},children:`${Ke[m]}: ${e.id}`})},`aaa-${e.color}-${e.id}`):i==="AA_RegularText"?o.jsx("div",{tabIndex:0,className:`${c["indicator-aa"]} ${c.indicator} tooltip-wrap`,style:{"--color":e.color,backgroundColor:t.color,outline:`calc(${p} * ${Dt*1.1}) solid ${e.color}`,outlineOffset:`calc(${p} * -0.013)`,"--left":`calc(calc(${p} / 5) * -2)`,width:`calc(${p} / 5)`,height:`calc(${p} / 5)`,margin:`calc(${p} / 15)`,borderRadius:"50%"},"aria-labelledby":`span-${e.id}-${t.id}-${ft}`,children:o.jsx("span",{id:`span-${e.id}-${t.id}-${ft}`,className:"tooltip below narrow3",style:{fontSize:`clamp(0.7rem, ${S.input}, 0.9rem)`,"--tooltip-max-width":p},children:`${ze[m]}: ${e.id}`})},`aa-${e.color}-${e.id}`):i==="AA_UIComponents"?o.jsx("div",{tabIndex:0,className:`${c["indicator-aa-ui"]} ${c.indicator} tooltip-wrap`,style:{"--color":e.color,"--left":`calc(calc(${p} / 7) * -3)`,backgroundColor:t.color,outline:`calc(${p} * ${Dt}) solid ${e.color}`,outlineOffset:`calc(${p} * ${Dt} * -1)`,width:`calc(${p} / 7)`,height:`calc(${p} / 7)`,margin:`calc(${p} / 10.5)`},"aria-labelledby":`span-ui-${e.id}-${t.id}-${ft}`,children:o.jsx("span",{id:`span-ui-${e.id}-${t.id}-${ft}`,className:`tooltip below narrow3 ${c.tooltip}`,style:{fontSize:`clamp(0.7rem, ${S.input}, 0.9rem)`,"--tooltip-max-width":p},children:`${Qe[m]}: ${e.id}`})},`aa-ui-${e.color}-${e.id}`):o.jsx("div",{"aria-hidden":"true",className:`${c["indicator-null"]} ${c.indicator}`,style:{"--color":e.color,backgroundColor:"transparent","--left":`calc(calc(${p} / 3) * -1)`,width:`calc(${p} / 3)`,height:`calc(${p} / 3)`}},`null-${e.color}-${e.id}`)})})})}),V&&o.jsx("div",{style:{backgroundColor:t.color,width:`${p}`,maxWidth:`${p}`,display:"flex",justifyContent:"center",alignItems:"center",padding:"0.5em 0.1em "},className:c["color-name"],children:o.jsx("span",{style:{color:t.luminance<.179?"white":"black",fontSize:`clamp(0.7rem, ${S.input}, 1.2rem)`,textAlign:"center"},children:t.color})}),U&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:c["color-edit-container"],children:o.jsx(_o,{language:m,block:t,updateColor:_e,width:p,hexToRGB:jt,rgbToHSL:Ut,rgbToHex:ie,hslToRGB:Rt,fontSize:`clamp(0.75rem, ${S.input}, 1rem)`})}),o.jsx("button",{className:`tooltip-wrap small delete danger gray ${c.remove}`,onClick:()=>Ce(t.id),style:{margin:"0.8em auto",width:"calc(100% - 4px)",minWidth:"calc(100% - 4px)",fontSize:`clamp(0.75rem, ${S.input}, 2rem)`},children:Ze[m]})]})]})},`${t.color}-${t.id}`)})}),((Xt=(Jt=R[b])==null?void 0:Jt.items)==null?void 0:Xt.length)>0&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:c["width-wrap"],children:[o.jsx("label",{htmlFor:"color-block-width",children:to[m]}),o.jsx("input",{id:"color-block-width",type:"range",min:6,max:12,step:.5,value:W,onChange:t=>lt(Number(t.target.value))})]}),o.jsxs("div",{className:`${c["toggle-controls"]}`,children:[o.jsxs("div",{children:[o.jsx("strong",{children:eo[m]}),o.jsx("button",{id:"toggle-controls",type:"button",onClick:()=>At(!U),className:"gray small",children:U?oo[m]:so[m]})]}),o.jsxs("div",{children:[o.jsx("strong",{children:ro[m]}),o.jsx("button",{type:"button",onClick:()=>H(!V),className:"gray small",children:V?no[m]:lo[m]})]})]})]})]})};export{Wo as default};
