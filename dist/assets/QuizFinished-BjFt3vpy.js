import{r as n,j as s}from"./react-A9DAvxly.js";import{a as x}from"./react-redux-CHm9GgGE.js";import{aZ as L,c6 as F,i2 as _,b0 as j,i3 as y,id as A,M}from"./index-C6FAuXie.js";import{s as E}from"./quiz.module-DTU83NUw.js";import{p as v,q as O,r as $,s as B,t as P,u as Q,v as T,w as C,o as D,h as H,g as R,f as J,x as w,y as U,z as G,A as I,B as Y,C as Z}from"./quiz-BfGJjqZ6.js";import{L as K}from"./LoginRegisterCombo-BiDKJ304.js";import{c as V}from"./react-router-344DmMNz.js";import"./hoist-non-react-statics-D5aJipOz.js";import"./react-dom-yh0erWL-.js";import"./scheduler-CzFDRTuY.js";import"./react-is-DUDD-a5e.js";import"./use-sync-external-store-DEc9BFqZ.js";import"./@reduxjs-DTZ4pglK.js";import"./immer-BNrqi0cU.js";import"./redux-CE3tqztX.js";import"./@babel-DF5_wy6Y.js";import"./redux-thunk-CY0Q9z1Q.js";import"./axios-BimPEqV4.js";import"./react-icons-DJiaMApb.js";import"./react-router-dom-BQMcumiI.js";import"./@remix-run-DTnHqtaE.js";const qs=({language:e})=>{const{points:a,highscores:f,finalSeconds:i}=x(t=>t.questions),{mode:o}=x(t=>t.difficulty),h=+(a*100/300).toFixed(1),p=V(),[X,S]=n.useState(!1),[g,q]=n.useState(!1);n.useState(""),n.useState(""),n.useState(""),n.useState("");const z=i%60,k=Math.floor(i/60),d=L(),r=x(t=>{var c;return(c=t.auth)==null?void 0:c.user});n.useEffect(()=>{d(F())},[]),n.useEffect(()=>{i===0&&p("/portfolio/quiz")},[]);const N=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1";n.useEffect(()=>{(!r&&a!==0&&i!==0||i===void 0)&&localStorage.setItem(`${N?"local-":""}quiz-highscores`,JSON.stringify(f)),(r!=null&&r._id&&a!==0&&i!==0||r!=null&&r._id&&i!==void 0)&&d(_(r._id)).then(t=>{if(t===null){const c={highscores:{...f,[o]:{score:a,time:i}},user:r._id};d(j(v[e],!1,3)),d(y(c)).then(m=>{d(A(r._id)).then(u=>{})})}else if(t!==null&&t.highscores[o].score<=a){const c={highscores:{...t.highscores,[o]:{score:a,time:t.highscores[o].time}},user:r._id};t.highscores[o].score<a?(d(j(v[e],!1,3)),c.highscores[o].time=i):t.highscores[o].score===a&&t.highscores[o].time>i&&(d(j(O[e],!1,3)),c.highscores[o].time=i),d(y(c)).then(m=>{})}})},[]);let l;switch(!0){case h===100:l=Q[e];break;case(h>=80&&h<100):l=P[e];break;case(h>=50&&h<80):l=B[e];break;case(h>=0&&h<50):l=$[e];break;default:l=""}n.useEffect(()=>{const t=document.querySelector(".login-wrap .open"),c=document.querySelector(".login-wrap .close"),m=document.querySelector(".register-wrap .open"),u=document.querySelector(".register-wrap .close");t==null||t.addEventListener("click",()=>{S(!0)}),c==null||c.addEventListener("click",()=>{S(!1)}),m==null||m.addEventListener("click",()=>{q(!0)}),u==null||u.addEventListener("click",()=>{q(!1)})},[]);const b=()=>{p("/portfolio/quiz")};return s.jsx(s.Fragment,{children:i!==0&&s.jsx(s.Fragment,{children:s.jsx("section",{className:`card ${E.top}`,children:s.jsxs("div",{children:[s.jsxs("div",{className:`${E.quiz}`,children:[s.jsx("h1",{className:E.h1,children:s.jsxs("a",{href:"#",onClick:b,children:["« ",M[e]]})}),s.jsx("h2",{children:l}),s.jsxs("p",{className:"result",children:[T[e]," ",s.jsx("strong",{children:a})," ",C[e]," (",h,"%)"]}),s.jsxs("p",{children:[D[e],":"," ",(()=>{switch(o){case"easy":return J[e];case"medium":return R[e];case"hard":return H[e];default:return o}})()]}),s.jsx("p",{children:i===0?s.jsxs(s.Fragment,{children:[w[e],": ",U[e]]}):s.jsxs(s.Fragment,{children:[w[e],": ",k<10&&"0",k,":",z<10&&"0",z]})}),s.jsxs("p",{className:"highscore",children:["(",G[e],": ",f[o].score," ",I[e],")"]}),s.jsxs("div",{className:`${E.reset}`,children:[s.jsx("button",{className:"btn",onClick:()=>p("/portfolio/quiz"),children:Y[e]}),s.jsx("button",{className:"btn",onClick:()=>p(`/portfolio/quiz/${o}`),children:Z[e]})]})]}),s.jsx(K,{language:e,user:r,highscoresLocal:f,text:"quizfinish"})]})})})})};export{qs as default};
