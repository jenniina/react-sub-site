import{r as $,j as c}from"./react-A9DAvxly.js";import{b3 as F,df as H,dg as K,bA as W,bU as B}from"./AccessibleColors-CRBQVtI_.js";import{u as G}from"./Blob-DEVQxHac.js";const J="_selectscard_1dkd0_1",M="_container_1dkd0_63",Q="_multiple_1dkd0_129",X="_half_1dkd0_137",Y="_error_1dkd0_143",v="_prev_1dkd0_179",ee="_prev2_1dkd0_187",se="_instructions_1dkd0_195",re="_value_1dkd0_203",te="_caret_1dkd0_249",ce="_options_1dkd0_323",ae="_show_1dkd0_361",ne="_option_1dkd0_323",le="_selected_1dkd0_387",ie="_highlighted_1dkd0_395",de="_scr_1dkd0_487",r={selectscard:J,"select-container":"_select-container_1dkd0_9",container:M,multiple:Q,half:X,error:Y,prev:v,prev2:ee,instructions:se,value:re,"clear-btn":"_clear-btn_1dkd0_219",caret:te,"required-message":"_required-message_1dkd0_271","caret-up":"_caret-up_1dkd0_283",options:ce,show:ae,option:ne,selected:le,highlighted:ie,"option-btn":"_option-btn_1dkd0_409","remove-btn":"_remove-btn_1dkd0_461",scr:de};let A,E="";function be({z:O,instructions:S,hide:y,hideDelete:T,id:n,className:C,multiple:l,required:L,validated:q,value:s,onChange:b,options:i,language:p=F.English,requiredMessage:I=H[p]??"This field is required",remove:R=K[p]??"remove",clear:P=W[p]??"clear",selectAnOption:N=B[p]??"Select an option",tooltip:g,y:z,x:U}){const[d,o]=$.useState(!1),w=L&&!q,[u,k]=$.useState(0),V=e=>{o(!1)},f=$.useRef(null);G({ref:f,onOutsideClick:V});const m=$.useRef(null);function Z(e){return e.preventDefault(),b(l?[]:i[0])}function x(e){let t=!0;const a=()=>{t=!0};l?s!=null&&s.some(_=>_.label===e.label)&&t?(t=!1,b(s==null?void 0:s.filter(_=>_.label!==e.label)),setTimeout(a,200)):t&&(t=!1,b([...s,e])):e!==s&&b(e)}function j(e){return l?s==null?void 0:s.some(t=>t.label===e.label):(s==null?void 0:s.label)===e.label}return $.useEffect(()=>{d&&k(0)},[d]),$.useEffect(()=>{if(s&&Array.isArray(s)&&s[0]&&s[0].value===""&&(s==null?void 0:s.length)>1){const e=[...s];e.shift(),b([...e])}},[s,b]),$.useEffect(()=>{var t;const e=a=>{var _;if(a.target===f.current)switch(a.code){case"Enter":case"Space":a.preventDefault(),d?x(i[u]):o(!0);break;case"ArrowUp":case"ArrowDown":{if(a.preventDefault(),!d){o(!0);break}const h=u+(a.code==="ArrowDown"?1:-1);h>=0&&h<i.length&&k(h);break}case"Escape":a.preventDefault(),o(!1),(_=f.current)==null||_.blur();break;case"Tab":break;default:a.preventDefault(),clearTimeout(A),E+=a.key,A=setTimeout(()=>{E=""},600);const D=i.find(h=>h==null?void 0:h.label.toLowerCase().startsWith(E));D&&k(i.indexOf(D))}};return(t=f.current)==null||t.addEventListener("keydown",e),()=>{var a;(a=f.current)==null||a.removeEventListener("keydown",e)}},[d,u,i]),c.jsxs("div",{className:`${r["select-container"]} select-container ${C} ${g?"tooltip-wrap":""}`,style:{zIndex:O},children:[c.jsx("span",{id:`${n}-instructions`,className:`
                ${n}-instructions 
                instructions
                ${r[`${n}-instructions`]} 
                ${r.instructions}
                ${y&&g?`tooltip ${z??""} ${U??""}`:""}
                ${y&&!g?r.scr:""}`,children:S}),c.jsxs("div",{id:`${n}-container`,role:"combobox","aria-labelledby":`${n}-instructions`,"aria-controls":n,"aria-expanded":d,"aria-activedescendant":`${n}-${u}`,ref:f,onClick:()=>o(e=>!e),tabIndex:0,className:l?`${r.multiple} ${r.container} multiple container ${w?r.error:""}`:`${r.container} container ${w?r.error:""}`,children:[c.jsx("span",{className:r.scr,"aria-live":"polite",ref:m}),c.jsx("span",{className:`${r.value} value`,children:l&&(s==null?void 0:s.length)===1&&s[0].value==""?c.jsx("span",{children:N}):l&&(s==null?void 0:s.length)>0?s==null?void 0:s.map(e=>c.jsxs("button",{type:"button",onClick:t=>{t.stopPropagation(),x(e)},onKeyUp:t=>{var a;switch(t.code){case"Enter":case"Space":t.preventDefault(),o(!1),x(e),m.current&&(m.current.textContent=`removed ${e.label}`),setTimeout(()=>{m.current&&(m.current.textContent="")},500),f.current&&f.current.focus();break;case"ArrowUp":case"ArrowDown":{if(t.preventDefault(),!d){o(!0);break}break}case"Escape":t.preventDefault(),o(!1),(a=f.current)==null||a.blur();break}},className:`${r["option-btn"]} option-btn`,children:[e==null?void 0:e.label,c.jsx("span",{"aria-hidden":"true",className:`${r["remove-btn"]} remove-btn`,children:"×"}),c.jsx("span",{className:`${r.scr} scr`,children:R})]},`${e.value}`)):l?c.jsx("span",{children:N}):s==null?void 0:s.label}),!T&&c.jsxs("button",{onClick:e=>{e.stopPropagation(),Z(e)},className:`${r["clear-btn"]} clear-btn`,children:[c.jsx("span",{"aria-hidden":"true",children:"×"}),c.jsx("span",{className:`${r.scr} scr`,children:P})]}),c.jsx("div",{className:`${r.caret} caret`}),c.jsx("ul",{id:n,"aria-label":"options",role:"listbox","aria-multiselectable":l?"true":"false","aria-expanded":d,"aria-labelledby":`${n}-instructions`,className:`${r.options} options ${d?`${r.show} show`:""}`,children:i==null?void 0:i.map((e,t)=>{var a;return c.jsxs("li",{role:"option","aria-selected":j(e)?"true":"false",onClick:_=>{_.stopPropagation(),_.preventDefault(),x(e),o(!1)},onPointerEnter:()=>k(t),className:`${r.option} option ${j(e)?`${r.selected} selected`:""} ${t===u?`${r.highlighted} highlighted`:""}`,id:`${n}-${t}`,children:[c.jsx("input",{multiple:!!l,id:`${n}-${typeof e.label=="string"?(a=e==null?void 0:e.label)==null?void 0:a.replace(/\s+/g,"-").toLowerCase().replace(/[^a-zA-Z]/g,""):""}`,type:"checkbox",className:`${r.scr} scr`,value:e==null?void 0:e.label,name:`${n}-${typeof e.label=="string"?e.label.replace(/\s+/g,"-").toLowerCase().replace(/[^a-zA-Z]/g,""):""}-${t}`,checked:!!j(e),readOnly:!0}),c.jsx("label",{htmlFor:`${n}-${typeof e.label=="string"?e.label.replace(/\s+/g,"-").toLowerCase().replace(/[^a-zA-Z]/g,""):""}`,children:e==null?void 0:e.label})]},e.value)})})]}),w&&c.jsxs("span",{className:`${r["required-message"]} required-message`,children:[c.jsx("span",{className:r["caret-up"]}),c.jsx("span",{children:I}),c.jsx("span",{className:r["caret-up"]})]})]})}export{be as S,r as s};
