import{K as f,r as x,j as s,cs as U,ct as w,cu as b,cv as v,ck as y,bi as N,V as n,cw as S,cx as $,bh as T,cq as _,cr as A}from"./index-DmCUPrzn.js";import{s as d}from"./edit.module-Tb44_we2.js";const R=({user:t,language:e})=>{const r=f(),[c,E]=x.useState((t==null?void 0:t.username)??""),[m,o]=x.useState(""),j=async i=>{i.preventDefault();try{const u={_id:t._id,username:c,passwordOld:m,language:e};if(t){if(c.trim()===t.username.trim()){r(n(`${S[e]}`,!0,5));return}r($(u)).then(a=>{a&&(a.success===!1?r(n(`${a.message??T[e]}`,!0,5)):(r(n(`${a.message??_[e]}`,!1,5)),o("")))}).catch(a=>{var p,h;console.error(a),a.code==="ERR_BAD_REQUEST"&&((h=(p=a.response)==null?void 0:p.data)!=null&&h.message)?r(n(`${a.response.data.message}`,!0,5)):setTimeout(()=>{r(n(A[e],!0,5))},2e3)})}}catch(l){console.error("error",l)}};return s.jsx(s.Fragment,{children:t?s.jsxs(s.Fragment,{children:[s.jsx("h2",{children:U[e]}),s.jsx("p",{className:d.p,children:w[e]}),s.jsxs("p",{className:`${d.p} ${d["p-last"]}`,children:[b[e],": ",s.jsx("strong",{children:t==null?void 0:t.username})]}),s.jsxs("form",{onSubmit:j,className:d["edit-user"],children:[s.jsx("div",{className:"input-wrap",children:s.jsxs("label",{children:[s.jsx("input",{required:!0,type:"text",name:"username",id:"username",value:c,onChange:({target:i})=>E(i.value.trim())}),s.jsx("span",{children:v[e]})]})}),s.jsx("div",{className:"input-wrap",children:s.jsxs("label",{children:[s.jsx("input",{required:!0,type:"password",name:"old-password",id:"old-password-username",value:m,onChange:({target:i})=>o(i.value.trim())}),s.jsx("span",{children:y[e]})]})}),s.jsx("button",{type:"submit",children:N[e]})]})]}):s.jsx(s.Fragment,{})})};export{R as default};
