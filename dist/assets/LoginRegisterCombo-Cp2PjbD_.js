import{aa as L,r as c,cH as M,j as s,cI as x,cJ as C,cK as O,cL as U,cM as y,cN as z,cO as R,cP as H,cQ as P,K as F,a9 as _,cR as D,bz as I,cS as k,cT as q,bi as A,cU as T,be as W,cV as $,cW as K,cl as Q,bm as B,cX as V,V as p,cY as Y,cZ as J,bh as v,c_ as X,cn as Z,c$ as G,d0 as ss}from"./index-DmCUPrzn.js";const es=({easy:r,medium:o,hard:i,language:t})=>{const{windowWidth:d}=L(),[n,h]=c.useState(!0);return c.useEffect(()=>{d<M?h(!1):h(!0)},[d]),s.jsxs("table",{className:x.highscores,children:[s.jsx("caption",{children:C[t]}),s.jsx("thead",{children:s.jsxs("tr",{className:x.th,children:[s.jsx("th",{children:O[t]}),s.jsx("th",{className:x.score,children:U[t]}),n&&s.jsx("th",{className:x.percentage,children:"%"}),s.jsx("th",{children:y[t]})]})}),s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("th",{children:z[t]}),s.jsxs("td",{children:[r?r.score:0,"/300"]}),n&&s.jsxs("td",{children:[+(r.score*100/300).toFixed(1),"%"]}),s.jsx("td",{children:r.score===0||r.time===0?R[t]:s.jsxs(s.Fragment,{children:[Math.floor(r.time/60)<10&&"0",Math.floor(r.time/60),":",r.time%60<10&&"0",r.time%60]})})]}),s.jsxs("tr",{children:[s.jsx("th",{children:H[t]}),s.jsxs("td",{children:[o?o.score:0,"/300"]}),n&&s.jsxs("td",{children:[+(o.score*100/300).toFixed(1),"%"]}),s.jsx("td",{children:o.score===0||o.time===0?R[t]:s.jsxs(s.Fragment,{children:[Math.floor(o.time/60)<10&&"0",Math.floor(o.time/60),":",o.time%60<10&&"0",o.time%60]})})]}),s.jsxs("tr",{children:[s.jsx("th",{children:P[t]}),s.jsxs("td",{children:[i?i.score:0,"/300"]}),n&&s.jsxs("td",{children:[+(i.score*100/300).toFixed(1),"%"]}),s.jsx("td",{children:i.score===0||i.time===0?R[t]:s.jsxs(s.Fragment,{children:[Math.floor(i.time/60)<10&&"0",Math.floor(i.time/60),":",i.time%60<10&&"0",i.time%60]})})]})]})]})},ts=({easy:r,medium:o,hard:i,language:t,setIsFormOpen:d})=>{const n=F(),[h,f]=c.useState(""),[E,u]=c.useState(""),g=c.useRef(null),[m,w]=c.useState({easy:r??{score:0,time:210},medium:o??{score:0,time:210},hard:i??{score:0,time:210}}),[j,S]=c.useState(!1),e=_(a=>{var l;return(l=a.auth)==null?void 0:l.user});c.useEffect(()=>{e!=null&&e._id&&n(D(e._id)).then(a=>{a!==null&&w(a.highscores)})},[e==null?void 0:e._id]),c.useEffect(()=>{n(I())},[]);const N=()=>{n(V())},b=async a=>{a.preventDefault(),n(p(Y[t],!1,8)),await n(J(h,E,"en")).then(()=>{f(""),u("")}).catch(l=>{l.code==="ERR_BAD_REQUEST"?n(p(`${v.en}: ${l.response.data.message}`,!0,8)):l.code==="ERR_NETWORK"&&n(p(`${v.en}: ${l.message}`,!0,8))})};return s.jsx("div",{className:"login-wrap",children:e?s.jsxs(s.Fragment,{children:[s.jsxs("p",{children:[s.jsxs("span",{children:[k[(e==null?void 0:e.language)??"en"]," ",e!=null&&e.name?e==null?void 0:e.name:e.username," "]}),s.jsx(q,{to:"/edit",children:`${A[e==null?void 0:e.language]}`}),s.jsxs("button",{onClick:N,id:"logout",className:"logout danger",children:[T[(e==null?void 0:e.language)??"en"]," Ã—"]})]}),s.jsx("button",{onClick:()=>S(!j),className:x.showHighscores,children:`${j?"hide":"show"} highscores`}),j&&s.jsx(es,{language:t,easy:m.easy,medium:m.medium,hard:m.hard})]}):s.jsx(s.Fragment,{children:s.jsxs(W,{language:t,className:"accordion-login login-to-save",text:$[t],ref:g,setIsFormOpen:d,hideBrackets:!0,children:[s.jsx("h2",{children:$[t]}),s.jsxs("form",{onSubmit:b,className:`login ${x.login}`,children:[s.jsx("div",{className:"input-wrap",children:s.jsxs("label",{htmlFor:"quiz-username",children:[s.jsx("input",{id:"quiz-username",name:"username",type:"text",value:h,required:!0,autoComplete:"email",onChange:({target:a})=>f(a.value.trim())}),s.jsxs("span",{children:[K[t],": "]})]})}),s.jsx("div",{className:"input-wrap",children:s.jsxs("label",{children:[s.jsx("input",{name:"password",type:"password",required:!0,autoComplete:"current-password",value:E,onChange:({target:a})=>u(a.value.trim())}),s.jsxs("span",{children:[Q[t],": "]})]})}),s.jsx("button",{type:"submit",id:"login",className:"login",children:B[t]})]})]})})})},is=({language:r,user:o,highscoresLocal:i,text:t})=>{const d=F(),[n,h]=c.useState(!1),[f,E]=c.useState(!1),[u,g]=c.useState(""),[m,w]=c.useState(""),[j,S]=c.useState(""),[e,N]=c.useState(""),b=a=>{if(a.preventDefault(),m.trim()!==j.trim()){d(p(Z[r],!0,8));return}d(G({name:e,username:u,password:m,language:"en"})).then(async()=>{d(p(ss[r],!1,8))}).catch(l=>{console.error(l),d(p(`${v[r]}: ${l.message}`,!0,8))})};return s.jsxs("div",{className:`quiz-register-login-wrap register-login-wrap ${x["register-login-wrap"]}`,children:[s.jsx("div",{className:`${n?"open":""} ${o?"logged":""}`,children:s.jsx(ts,{setIsFormOpen:h,language:r,easy:i.easy,medium:i.medium,hard:i.hard})}),s.jsx("div",{className:`${f?"open":""}`,children:s.jsx(X,{setIsFormOpen:E,language:r,handleRegister:b,username:u,setUsername:g,password:m,setPassword:w,confirmPassword:j,setConfirmPassword:S,name:e,setName:N,text:t})})]})};export{is as default};
