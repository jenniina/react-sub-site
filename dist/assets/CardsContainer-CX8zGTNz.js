import{r as d,j as r}from"./react-kX_YxI4E.js";import{u as Z,gZ as H,g_ as l,g$ as Q,h0 as V,h1 as p,h2 as W,h3 as X,h4 as U,o as j,h5 as q,h6 as G,aA as B,bY as ee,h7 as Y,ag as te,gt as re,h8 as se,h9 as ne,ha as oe}from"./index-epxSP5Qu.js";import{M as ae,aO as ie,aP as le}from"./react-icons-D7bD3W54.js";import"./dom-to-image-more-CfDXlNbO.js";import"./react-dom-B5MLDbn_.js";import"./scheduler-CzFDRTuY.js";import"./react-redux-BEmJlIGA.js";import"./hoist-non-react-statics-DQogQWOa.js";import"./react-is-DUDD-a5e.js";import"./use-sync-external-store-BPp6CH6k.js";import"./@reduxjs-DhFEcpJw.js";import"./immer-C0GRqQ_d.js";import"./redux-CE3tqztX.js";import"./@babel-DF5_wy6Y.js";import"./redux-thunk-CY0Q9z1Q.js";import"./axios-CCb-kr4I.js";import"./react-router-dom-StiqOUIT.js";import"./react-router-DUuhLvki.js";import"./@remix-run-DTnHqtaE.js";function ce({language:a,status:i,statuses:x,id:f,index:m,data:s,handleDragging:N,handleUpdate:u,handleRemoveColor:T,setTheTarget:A,focusedCard:O,setFocusedCard:v,translateStatus:E}){const b=Z(),I={backgroundColor:s==null?void 0:s.color,padding:"0.3em 5%",color:(s==null?void 0:s.lightness)=="dark"?"white":"black",borderColor:(s==null?void 0:s.lightness)=="dark"?"var(--color-gray-7)":"var(--color-gray-5)",textShadow:(s==null?void 0:s.lightness)=="dark"?"1px 1px 1px black":"1px -1px 3px rgba(255,255,255,0.6), -1px 1px 3px rgba(255,255,255,0.6)"},L={color:"var(--color-primary-20)",textShadow:"none"},R={margin:"0 auto 0.3em",display:"block",width:"max-content",fontSize:"0.9em"},[D,C]=d.useState(!1);function S(){C(e=>!e)}function M(){C(!1)}const y=d.useRef(null);H({ref:y,onOutsideClick:M});const $=d.useRef(0),J=(e,o)=>{e.preventDefault(),A(o),$.current=o},g=e=>{N(!0),e.preventDefault()},P=(e,o)=>{e.dataTransfer.setData("text/plain",JSON.stringify({type:"item",id:s==null?void 0:s.id}))};function F(e){const o=e.target.closest("a[data-status]"),t=o==null?void 0:o.dataset.status;s&&t&&u(s.id,t)}function z(e){switch(e.code){case"Enter":case"Space":e.stopPropagation(),e.preventDefault();const o=e.target.closest("a[data-status]"),t=(o==null?void 0:o.dataset.status)??i;s&&u(s.id,t),C(n=>!n);break;case"Escape":e.stopPropagation(),e.preventDefault(),C(!1);break}}const K=(e,o)=>{var w,k;const t=e.target.closest("li");let n;t?n=t:n=e.target;const c=Number((w=n==null?void 0:n.previousElementSibling)==null?void 0:w.dataset.identity),h=Number((k=n==null?void 0:n.nextElementSibling)==null?void 0:k.dataset.identity);switch(e.key){case"ArrowUp":s&&c!==null&&(e.preventDefault(),u(o,s.status,c),v(o));break;case"ArrowDown":s&&h!==null&&(e.preventDefault(),u(o,s.status,h),v(o));break;case"Tab":v(null)}};d.useEffect(()=>{var e;O===f&&((e=y.current)==null||e.focus())},[O,f]);const _=e=>{var o,t,n;if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(e).then(()=>{b(j(q[a],!1,3))},c=>{b(j(`${G[a]}`,!0,3))});else{const c=document.createElement("textarea");c.value=e,(o=y.current)==null||o.appendChild(c),c.focus(),c.select();try{document.execCommand("copy"),b(j(q[a],!1,3))}catch(h){(n=(t=h.response)==null?void 0:t.data)!=null&&n.message?b(j(h.response.data.message,!0,8)):b(j(`${G[a]}`,!0,3))}document.body.removeChild(c)}};return r.jsx("li",{ref:y,draggable:"true",onDragStart:e=>P(e),onDragEnter:e=>J(e,f),onDragOver:e=>g(e),onDragEnd:()=>N(!1),role:"listitem",tabIndex:0,onKeyDown:e=>K(e,f),"data-identity":f,children:r.jsxs("div",{style:I,className:`${l.card}`,children:[r.jsx("span",{className:l.text,children:s==null?void 0:s.content}),r.jsxs("b",{children:[r.jsx("button",{onClick:()=>T(s.content),children:"Ã—"}),r.jsxs("button",{"aria-haspopup":"true",onClick:S,children:[r.jsx(ae,{"aria-hidden":"true"}),r.jsx("span",{className:"scr",id:`instructions${f}`,children:Q[a]})]})]}),r.jsxs("nav",{className:D?`${l.open} ${l.blur}`:`${l.blur}`,style:L,children:[r.jsxs("span",{style:R,children:[V[a],":"]}),r.jsxs("ul",{role:"listbox","aria-describedby":`instructions${f}`,"aria-expanded":D?"true":"false",className:p(i),children:[r.jsx("li",{role:"option",className:l.copy,children:r.jsxs("a",{className:l.copy,onClick:()=>_(s.content),tabIndex:0,title:W[a],children:[r.jsx(ie,{}),r.jsx("i",{children:X[a]})]})}),x.map((e,o)=>r.jsx("li",{role:"option",className:p(e),children:r.jsxs("a",{className:p(e),"data-status":e,onClick:t=>F(t),onKeyDown:t=>z(t),tabIndex:0,title:`${U[a]}: ${E(e).toLowerCase()}`,children:[r.jsx(le,{}),r.jsx("i",{children:E(e)})]})},`${p(e)}-${o}-${m}`))]})]})]})})}const $e=({language:a,status:i,statuses:x,isDragging:f,handleDragging:m,handleUpdate:s,handleRemoveColor:N,itemsByStatus:u,lightTheme:T,updateStatus:A,reorderStatuses:O,deleteStatus:v,regex:E})=>{const b=Z(),[I,L]=d.useState(0),[R,D]=d.useState(!1),[C,S]=d.useState(""),[M,y]=d.useState(null),$=d.useRef(null),[J,g]=d.useState(!1),P=t=>{g(!0);const n=t.target.value;E.test(n)?(S(n),g(!1)):(b(j(re[a],!0,6)),g(!1))};H({ref:$,onOutsideClick:()=>D(!1)});const F=t=>{const n=JSON.parse(t.dataTransfer.getData("text/plain"));n.type==="item"&&(s(n.id,i,I),m(!1))},z=t=>t.preventDefault(),K=(t,n)=>{t.dataTransfer.setData("text/plain",JSON.stringify({type:"span",id:n.toString()})),m(!0)},_=t=>{t.stopPropagation(),t.preventDefault()},e=(t,n)=>{t.preventDefault();const c=JSON.parse(t.dataTransfer.getData("text/plain"));if(c.type==="span"){const h=c.id;if(h!==n){const w=Array.from(x),[k]=w.splice(h,1);w.splice(n,0,k),O(h,n)}m(!1)}},o=t=>{switch(t.toLowerCase()){case"good":return oe[a];case"bad":return ne[a];case"neutral":return se[a];default:return t.replace(/_/g," ")}};return r.jsxs("div",{className:`${l["cards-container"]} ${f?l["area-dragging"]:""} ${T?l.light:""}`,onDrop:t=>e(t,x.indexOf(i)),onDragEnd:()=>m(!1),children:[r.jsxs("span",{ref:$,id:`label-${p(i)}`,className:l["status-label"],draggable:!0,onDragStart:t=>K(t,x.indexOf(i)),onDragOver:_,children:[r.jsx("b",{children:o(i)}),r.jsx(B,{isOpen:R,setIsFormOpen:D,language:a,text:"*",hideBrackets:!0,onClick:()=>S(i),className:`narrow2 ${l["change-status"]} change-status`,wrapperClass:"change-status-wrap",tooltip:ee[a],x:"left",y:"below",children:r.jsxs(r.Fragment,{children:[r.jsx("i",{children:o(i)}),r.jsxs("form",{className:l["change-status-form"],onSubmit:t=>{t.preventDefault(),A(x.indexOf(i),C)},children:[r.jsx("div",{className:"input-wrap",children:r.jsxs("label",{htmlFor:`${p(i)}-status`,children:[r.jsx("input",{type:"text",required:!0,id:`${p(i)}-status`,value:C,onChange:t=>P(t)}),r.jsxs("span",{children:[Y[a],":"]})]})}),r.jsx("button",{type:"submit",disabled:J,children:Y[a]}),r.jsx("button",{type:"button",className:"danger delete",onClick:()=>{v(i)},children:te[a]})]})]})})]}),r.jsx("ul",{"aria-labelledby":`label-${p(i)}`,id:p(i),className:p(i),role:"list",onDrop:F,onDragOver:z,children:u==null?void 0:u.map((t,n)=>r.jsx(ce,{language:a,id:t.id,index:n,data:t,status:i,statuses:x,handleDragging:m,handleUpdate:s,handleRemoveColor:N,setTheTarget:L,focusedCard:M,setFocusedCard:y,translateStatus:o},`${p(i)}-item-${t.id}-${n}`))})]})};export{$e as default};
