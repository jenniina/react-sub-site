import{r as k,j as $}from"./react-A9DAvxly.js";import{u as q,ae as J,X as L,hB as M,G as E,hE as R,hF as I,kF as Q}from"./index-DQhGG1l7.js";import"./hoist-non-react-statics-D5aJipOz.js";import"./react-dom-CxfJ6lHP.js";import"./scheduler-CzFDRTuY.js";import"./react-redux-C4cSaZU-.js";import"./react-is-DUDD-a5e.js";import"./use-sync-external-store-DEc9BFqZ.js";import"./@reduxjs-DhFEcpJw.js";import"./immer-C0GRqQ_d.js";import"./redux-CE3tqztX.js";import"./@babel-DF5_wy6Y.js";import"./redux-thunk-CY0Q9z1Q.js";import"./axios-CCb-kr4I.js";import"./react-icons-yVutJqMS.js";import"./react-router-dom-j9Ns2JNj.js";import"./react-router-BoqxkIr7.js";import"./@remix-run-DTnHqtaE.js";const U="_cloud_1ami1_1",V="_word_1ami1_29",v={"cloud-wrap":"_cloud-wrap_1ami1_1",cloud:U,word:V},ot=({language:x,title:A,onClick:F,words:T,width:l=600,height:g=400})=>{const o=q(),[K,N]=k.useState([]),_=J(),{windowWidth:r}=L(),b=k.useRef(null),S=(t,h)=>{const e=document.createElement("canvas").getContext("2d");if(e){e.font=`${h}px Arial`;const s=e.measureText(t).width+2,u=h*.65,a=h*.2,m=u+a;return{width:s,height:m,ascent:u,descent:a}}return{width:0,height:0,ascent:0,descent:0}},z=(t,h)=>{const{width:i,height:e,ascent:n}=S(t.text,h);return{width:i,height:e,ascent:n}},G=(t,h)=>{const i=[],e=h.width*Q(.2,.4),n=h.height*.2;return i.push({x:t.x+e,y:t.y-h.height}),i.push({x:t.x+e,y:t.y+t.height}),i.push({x:t.x+t.width,y:t.y+n}),i.push({x:t.x+t.width-e,y:t.y-h.height}),i.push({x:t.x+t.width-e,y:t.y+t.height}),i.push({x:t.x-h.width,y:t.y+n}),i.push({x:t.x-h.width,y:t.y+t.height}),r<500&&i.push({x:t.x-h.width,y:t.y-h.height}),r<500&&i.push({x:t.x-e,y:t.y+t.height*2}),r<500&&i.push({x:t.x-e,y:t.y-t.height*2}),r<500&&i.push({x:t.x+e,y:t.y+t.height*3}),r<500&&i.push({x:t.x+e,y:t.y-t.height*3}),r<500&&i.push({x:t.x-e,y:t.y+t.height*3}),r<500&&i.push({x:t.x-e,y:t.y-t.height*3}),i},O=(t,h,i,e,n)=>n.some(s=>t<s.x+s.width&&t+i>s.x&&h<s.y+s.height&&h+e>s.y),p=async t=>{var i,e;const h=t;if(F)F(t);else if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(h).then(()=>{o(E(R[x],!1,3))},n=>{o(E(`${I[x]}`,!0,3)),console.error("Failed to copy:",n)});else{const n=document.createElement("textarea");n.value=h,(i=b.current)==null||i.appendChild(n),n.focus(),n.select();try{document.execCommand("copy"),o(E(R[x],!1,3))}catch(s){console.error("Failed to copy:",s),o(E(`${I[x]}`,!0,3))}(e=b.current)==null||e.removeChild(n)}};return k.useEffect(()=>{if(T.length===0){N([]);return}const t=[...T].sort((e,n)=>n.weight!==e.weight?n.weight-e.weight:e.text.length-n.text.length),h=[],i=[];t.forEach((e,n)=>{const s=e.weight,{width:u,height:a,ascent:m}=z(e,s);let f=!1;const X=30;let j=0;if(n===0){const y=(l-u)/2,w=(g+m-a)/2;h.push({x:y,y:w,width:u,height:a}),i.push($.jsx("text",{x:y,y:w+m,fontSize:s,fontFamily:"Arial, sans-serif",fill:`hsl(${n*110%360}, 100%, ${_?"20":"70"}%)`,className:v.word,style:{cursor:"pointer"},onClick:()=>{p(e.text)},tabIndex:0,onKeyDown:C=>{(C.key==="Enter"||C.key===" ")&&p(e.text)},"aria-label":A??`${M[x]}: ${e.text}`,children:e.text},e.text)),f=!0}for(;!f&&j<X;){for(let y=0;y<h.length&&!f;y++){const w=h[y],C=G(w,{width:u,height:a});for(let D of C){const c={x:D.x,y:D.y,width:u,height:a};if(!(c.x<0||c.y<0||c.x+c.width>l||c.y+c.height>g)&&!O(c.x,c.y,c.width,c.height,h)){h.push(c),i.push($.jsx("text",{x:c.x,y:c.y+m,fontSize:s,fontFamily:"Arial, sans-serif",fill:`hsl(${n*110%360}, 100%, ${_?"20":"70"}%)`,style:{cursor:"pointer"},className:v.word,onClick:()=>p(e.text),tabIndex:0,onKeyDown:H=>{(H.key==="Enter"||H.key===" ")&&p(e.text)},"aria-label":A??`${M[x]}: ${e.text}`,children:e.text},e.text)),f=!0;break}}}j++}f||console.warn(`Could not place word after ${j} attempts:: ${e.text}`)}),N(i)},[T,l,g,x,_,o]),$.jsx("div",{ref:b,className:v["cloud-wrap"],children:$.jsx("svg",{width:l,height:g,className:v.cloud,children:K})})};export{ot as default};
