import{r as m,j as e}from"./react-A9DAvxly.js";import{u as N,ca as R,bB as B,be as j,bW as C,bZ as D,cb as F,p as o,c1 as b,c2 as P,cc as A,cd as O,i as T,c3 as q}from"./index-ewQ3yapg.js";import{s as U}from"./edit.module-Tb44_we2.js";import"./hoist-non-react-statics-D5aJipOz.js";import"./react-dom-CxfJ6lHP.js";import"./scheduler-CzFDRTuY.js";import"./react-redux-C4cSaZU-.js";import"./react-is-DUDD-a5e.js";import"./use-sync-external-store-DEc9BFqZ.js";import"./@reduxjs-DhFEcpJw.js";import"./immer-C0GRqQ_d.js";import"./redux-CE3tqztX.js";import"./@babel-DF5_wy6Y.js";import"./redux-thunk-CY0Q9z1Q.js";import"./axios-CCb-kr4I.js";import"./react-icons-yVutJqMS.js";import"./react-router-dom-j9Ns2JNj.js";import"./react-router-BoqxkIr7.js";import"./@remix-run-DTnHqtaE.js";const re=({user:t,language:i,setLanguage:v,options:S,getKeyByValue:w})=>{const a=N(),[c,l]=m.useState(""),[n,y]=m.useState((t==null?void 0:t.language)??i),[_,d]=m.useState(!1),$=async r=>{var u,g;r.preventDefault(),d(!0);try{const L={_id:t._id,name:t.name,passwordOld:c,language:n};t&&a(F(L)).then(s=>{s&&(s.success===!1?a(o(`${b[i]}: ${s.message}`,!0,5)):(a(o(`${s.message??P[n]}`,!1,5)),a(A(s.user)).then(()=>{a(O(t==null?void 0:t._id)).then(()=>a(T())),v(n)}),l(""))),d(!1)}).catch(s=>{var f,h,E,x;console.error(s),(h=(f=s.response)==null?void 0:f.data)!=null&&h.message?a(o(s.response.data.message,!0,8)):s.code==="ERR_BAD_REQUEST"&&((x=(E=s.response)==null?void 0:E.data)!=null&&x.message)?a(o(`${b[i]}: ${s.response.data.message}`,!0,5)):setTimeout(()=>{a(o(q[i],!0,5))},2e3),d(!1)})}catch(p){(g=(u=p.response)==null?void 0:u.data)!=null&&g.message?a(o(p.response.data.message,!0,8)):console.error("error",p),d(!1)}};return e.jsx(e.Fragment,{children:t?e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:R[i]}),e.jsxs("form",{onSubmit:$,className:U["edit-user"],children:[e.jsx(B,{language:i,id:"language-register",className:`language ${U.language}`,instructions:"Language",hide:!0,options:S(j),value:n?{value:n,label:w(j,n)}:void 0,onChange:r=>{y(r==null?void 0:r.value)}}),e.jsx("div",{className:"input-wrap",children:e.jsxs("label",{children:[e.jsx("input",{required:!0,type:"password",name:"old-password",id:"old-password-user-language",value:c,onChange:({target:r})=>l(r.value.trim())}),e.jsx("span",{children:C[i]})]})}),e.jsx("button",{type:"submit",disabled:_,children:D[i]})]})]}):e.jsx(e.Fragment,{})})};export{re as default};
