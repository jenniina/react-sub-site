const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TodoList-CwR99ZCK.js","assets/index-DE35o7R3.js","assets/react-B6RMQhYh.js","assets/dom-to-image-more-sr33WCep.js","assets/react-dom-DKT7fI1i.js","assets/scheduler-C323NY8X.js","assets/react-redux-CQ4WY322.js","assets/hoist-non-react-statics-C-Qo8PK8.js","assets/react-is-BwqtTtay.js","assets/use-sync-external-store-w3cjJFH7.js","assets/@reduxjs-CJhiLCiq.js","assets/redux-BXkGT1VS.js","assets/immer-BGhKXxrG.js","assets/redux-thunk-ClJT1hhx.js","assets/axios-ngrFHoWO.js","assets/react-icons-CHi_nPWV.js","assets/react-router-dom-_ze6FMLH.js","assets/react-router-hVrguzn3.js","assets/@remix-run-CeDW-7A3.js","assets/react-helmet-async-BlGJtXmD.js","assets/react-fast-compare-BHbKlhN4.js","assets/invariant-B_pwkeTo.js","assets/shallowequal-C7ef0Lra.js","assets/index-DPWMNifH.css"])))=>i.map(i=>d[i]);
import{L as Ce,q as Ae,u as _e,i as Oe,ah as be,e as m,ai as $e,aj as B,ak as u,S as O,al as V,am as U,an as Y,ao as G,ap as Ie,aq as Fe,ar as Ke,as as L,at as Pe,au as Je,_ as ze}from"./index-DE35o7R3.js";import{a as c,j as n}from"./react-B6RMQhYh.js";import{a as b}from"./react-redux-CQ4WY322.js";import{aK as Le}from"./react-icons-CHi_nPWV.js";import{v as De}from"./uuid-BOvFkHkt.js";import"./react-dom-DKT7fI1i.js";import"./dom-to-image-more-sr33WCep.js";import"./scheduler-C323NY8X.js";import"./@reduxjs-CJhiLCiq.js";import"./redux-BXkGT1VS.js";import"./immer-BGhKXxrG.js";import"./redux-thunk-ClJT1hhx.js";import"./axios-ngrFHoWO.js";import"./react-router-dom-_ze6FMLH.js";import"./react-router-hVrguzn3.js";import"./@remix-run-CeDW-7A3.js";import"./hoist-non-react-statics-C-Qo8PK8.js";import"./react-is-BwqtTtay.js";import"./react-helmet-async-BlGJtXmD.js";import"./react-fast-compare-BHbKlhN4.js";import"./invariant-B_pwkeTo.js";import"./shallowequal-C7ef0Lra.js";import"./use-sync-external-store-w3cjJFH7.js";var Q=(e=>(e.en="Low",e.es="Bajo",e.fr="Faible",e.de="Niedrig",e.pt="Baixo",e.cs="Nízký",e.fi="Matala",e))(Q||{}),X=(e=>(e.en="Medium",e.es="Medio",e.fr="Moyen",e.de="Mittel",e.pt="Médio",e.cs="Střední",e.fi="Keskiverto",e))(X||{}),Z=(e=>(e.en="High",e.es="Alto",e.fr="Haut",e.de="Hoch",e.pt="Alto",e.cs="Vysoký",e.fi="Korkea",e))(Z||{}),H=(e=>(e.en="Priority",e.es="Prioridad",e.fr="Priorité",e.de="Priorität",e.pt="Prioridade",e.cs="Priorita",e.fi="Tärkeys",e))(H||{}),W=(e=>(e.en="Deadline",e.es="Fecha Límite",e.fr="Date Limite",e.de="Frist",e.pt="Prazo",e.cs="Termín",e.fi="Määräaika",e))(W||{}),E=(e=>(e.en="Category",e.es="Categoría",e.fr="Catégorie",e.de="Kategorie",e.pt="Categoria",e.cs="Kategorie",e.fi="Kategoria",e))(E||{}),ee=(e=>(e.en="Shopping",e.es="Compras",e.fr="Achats",e.de="Einkaufen",e.pt="Compras",e.cs="Nákupy",e.fi="Ostokset",e))(ee||{}),te=(e=>(e.en="All",e.es="Todos",e.fr="Tous",e.de="Alle",e.pt="Todos",e.cs="Vše",e.fi="Kaikki",e))(te||{}),se=(e=>(e.en="Work",e.es="Trabajo",e.fr="Travail",e.de="Arbeit",e.pt="Trabalho",e.cs="Práce",e.fi="Työ",e))(se||{}),re=(e=>(e.en="Personal",e.es="Personal",e.fr="Personnel",e.de="Persönlich",e.pt="Pessoal",e.cs="Osobní",e.fi="Henkilökohtainen",e))(re||{}),oe=(e=>(e.en="Other",e.es="Otro",e.fr="Autre",e.de="Andere",e.pt="Outro",e.cs="Jiný",e.fi="Muu",e))(oe||{}),ae=(e=>(e.en="None",e.es="Ninguna",e.fr="Aucun",e.de="Keiner",e.pt="Nenhum",e.cs="Žádný",e.fi="Ei mitään",e))(ae||{}),ie=(e=>(e.en="Text",e.es="Texto",e.fr="Texte",e.de="Text",e.pt="Texto",e.cs="Text",e.fi="Teksti",e))(ie||{});const Me={all:te,low:Q,medium:X,high:Z,priority:H,deadline:W,category:E,work:se,personal:re,shopping:ee,other:oe,none:ae,text:ie},$=(e,l)=>e.map(j=>({label:Me[j][l],value:j})),Re=c.lazy(()=>ze(()=>import("./TodoList-CwR99ZCK.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]))),v=300;function ut({language:e}){const{t:l}=c.useContext(Ce),j=Ae(),o=_e(),a=b(t=>{var s;return(s=t.auth)==null?void 0:s.user});c.useEffect(()=>{o(Oe())},[]);const i=b(t=>t.todos.todos),I=b(t=>t.todos.status),D=b(t=>t.todos.error),[C,ne]=c.useState("low"),[M,qe]=c.useState(""),[F,le]=c.useState("other"),[S,de]=c.useState("all"),[k,ce]=c.useState("all"),T="ReactTodos",fe=i==null?void 0:i.some(t=>t.complete);c.useEffect(()=>{if(i.length===0&&!a){const t=JSON.parse(window.localStorage.getItem(T)||"[]"),s=new Set(i.map(r=>r.key));t.forEach(r=>{s.has(r.key)||o(be(r))})}},[o,i,a]),c.useEffect(()=>{window.localStorage.setItem(T,JSON.stringify(i))},[i]);const ue=t=>{const s=new Set,r=[];return t.forEach(f=>{s.has(f.key)?r.push(f):s.add(f.key)}),r},pe=t=>{if(!t){o(m("Error: no key",!0,8));return}if(a!=null&&a._id)o(V(a._id,t));else{o(U(t));const s=i.filter(r=>r.key!==t);window.localStorage.setItem(T,JSON.stringify(s))}};c.useEffect(()=>{const t=ue(i),s=new Set;t.forEach(r=>{s.has(r.key)||(pe(r.key),s.add(r.key))})},[i]);const[w,me]=c.useState([]),K=i.filter(t=>{const s=S==="all"||t.priority===S,r=k==="all"||t.category===k;return s&&r});c.useEffect(()=>{const t=K==null?void 0:K.slice().sort((s,r)=>(s.order??0)-(r.order??0)).map(s=>({...s,id:s.order,status:"todos"}));me(t)},[i,S,k]);const he=["all","low","medium","high"],ye=["all","work","personal","shopping","other"],ge=["low","medium","high"],Te=["work","personal","shopping","other"],P=$(he,e),J=$(ye,e),A=$(ge,e),_=$(Te,e);c.useEffect(()=>{I==="failed"&&o(m(`There was an error: ${D}`,!0,8))},[I,D,o]);const[R,h]=c.useState(!1);c.useEffect(()=>{a!=null&&a._id&&o($e(a._id)).then(()=>{o(B(a._id))}).catch(t=>{var s,r;console.error(t),(r=(s=t.response)==null?void 0:s.data)!=null&&r.message?o(m(t.response.data.message,!0,8)):o(m(`${t.message}`,!0,8))})},[a==null?void 0:a._id]);function xe(t){const s=i.find(r=>r.key===t);if(s){const r={...s,complete:!s.complete};o(a?Y(a._id,t,r):G(r))}}const ve=async(t,s,r,f,g)=>{if(h(!0),!t){o(m("Error: no key",!0,8)),h(!1);return}const p=i.find(d=>d.key===t);if(p){const d={...p,name:s,priority:r,deadline:f,category:g};if(a)await o(Y(a._id,t,d)).then(()=>{o(m(`${l("Updated")}`,!1,3)),h(!1)}).catch(y=>{var N,q;console.error(y),(q=(N=y.response)==null?void 0:N.data)!=null&&q.message?o(m(y.response.data.message,!0,8)):o(m(`${y}`,!0,8)),h(!1)});else{o(G(d));const y=i.map(N=>N.key===t?d:N);window.localStorage.setItem(T,JSON.stringify(y)),h(!1)}}},Se=t=>{var s,r;if(a)o(async f=>{var g,p;try{await Ie(a._id,t).then(()=>{f(B(a._id))})}catch(d){console.error(d),(p=(g=d.response)==null?void 0:g.data)!=null&&p.message?f(m(d.response.data.message,!0,8)):f(m(`${d}`,!0,8))}});else try{o(Fe(t))}catch(f){console.error(f),(r=(s=f.response)==null?void 0:s.data)!=null&&r.message?o(m(f.response.data.message,!0,8)):o(m(`${f}`,!0,8))}finally{window.localStorage.setItem(T,JSON.stringify(i))}},z=c.useRef(null),[x,ke]=c.useState(""),we=t=>{if(t.preventDefault(),h(!0),x===""){h(!1),o(m(l("AddTask"),!0,3));return}if(x.length>v){h(!1),o(m(`${l("NameTooLong")} (${v} max)`,!0,8));return}const s=De(),r=i.reduce((p,d)=>d.order>p?d.order:p,0),f=i.reduce((p,d)=>d.order<p?d.order:p,0);let g;if(C==="high"?g={key:s,name:x,complete:!1,order:f-1,priority:C,deadline:M,category:F}:g={key:s,name:x,complete:!1,order:r+1,priority:C,deadline:M,category:F},a)o(Ke(a._id,g)),h(!1);else{const p=[...i,g].sort((d,y)=>d.order-y.order).map((d,y)=>({...d,order:y}));o(L(p)),window.localStorage.setItem(T,JSON.stringify(p)),L(p),h(!1)}z.current&&(z.current.value="")};async function Ne(t){if(t.preventDefault(),await j({message:l("AreYouSureYouWantToClearAllCompletedTasks")}))if(a)await o(Pe(a._id));else{o(Je());const s=i.filter(r=>!r.complete);window.localStorage.setItem(T,JSON.stringify(s))}}function je(t){if(!t){o(m("Error: no key",!0,8));return}if(a!=null&&a._id)o(V(a._id,t));else{o(U(t));let s=i.filter(r=>r.key!==t);s=s.map((r,f)=>({...r,order:f+1})),o(L(s)),window.localStorage.setItem(T,JSON.stringify(s))}}return n.jsxs(n.Fragment,{children:[n.jsx("form",{onSubmit:we,className:u.form,children:n.jsxs("fieldset",{children:[n.jsx("legend",{className:"scr",children:l("AddTaskToTheTaskList")}),n.jsxs("div",{className:u["todo-input-area"],children:[n.jsx("label",{htmlFor:"taskinput",children:l("AddTask")}),n.jsx("textarea",{ref:z,id:"taskinput",className:"bg",rows:3,name:"task",value:x,onChange:t=>ke(t.target.value),required:!0,autoComplete:"off",placeholder:`${l("Task")}...`}),n.jsxs("p",{className:u.small,children:[v-x.length," ",l("CharactersLeft")," (",l("Max"),":"," ",v,")"," ",x.length>v&&n.jsx("span",{className:u.warning,children:l("NameTooLong")})]}),n.jsx(O,{z:w.length+5,id:"category",className:`${u.select} ${u["category-select"]}`,hideDelete:!0,instructions:l("SelectCategory"),value:_.find(t=>t.value===F)||_[0],onChange:t=>le(t==null?void 0:t.value),options:_,language:e}),n.jsx(O,{id:"priority",className:u.select,hideDelete:!0,instructions:l("SelectPriority"),value:A.find(t=>t.value===C)||A[0],onChange:t=>ne(t==null?void 0:t.value),options:A,language:e,z:w.length+4}),n.jsxs("button",{id:u["submit-todo"],className:u["submit-todo"],type:"submit",disabled:R,children:[l("AddTask")," ",n.jsx(Le,{})]})]})]})}),n.jsxs("div",{className:u["controls-wrap"],children:[n.jsx(O,{id:"category-filter",className:`${u.select} ${u["category-select"]}`,hideDelete:!0,instructions:l("FilterByCategory"),value:J.find(t=>t.value===k)||J[0],onChange:t=>ce(t==null?void 0:t.value),options:J,language:e,z:w.length+3}),n.jsx(O,{id:"priority-filter",className:u.select,hideDelete:!0,instructions:l("FilterByPriority"),value:P.find(t=>t.value===S)||P[0],onChange:t=>de(t==null?void 0:t.value),options:P,language:e,z:w.length+2}),n.jsx("button",{className:`danger ${u["clear-completed"]}`,disabled:!fe,onClick:t=>Ne(t),children:l("ClearCompleted")})]}),n.jsxs("div",{className:u["list-wrap"],children:[n.jsxs("p",{className:u["left-to-do"],children:[i==null?void 0:i.filter(t=>!(t!=null&&t.complete)).length," ",l("LeftToDo")]}),(S!=="all"||k!=="all")&&n.jsxs("p",{className:u["filter-notification"],children:[l("Note")," ",l("Filtered")]}),n.jsx(c.Suspense,{fallback:n.jsxs("p",{className:"flex center margin0auto textcenter",children:[l("Loading"),"..."]}),children:n.jsx(Re,{sending:R,todosWithIdAndStatus:w,toggleTodo:xe,deleteTodo:je,language:e,modifyTodo:ve,modifyTodoOrder:Se,priorityOptions:A,categoryOptions:_,maxCharacters:v})}),I==="loading"&&n.jsxs("p",{className:"flex center margin0auto textcenter",children:[l("Loading"),"..."]})]})]})}export{ut as default};
