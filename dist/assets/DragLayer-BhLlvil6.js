import{r as A,j as b}from"./react-kX_YxI4E.js";import{L as q,J as G,aI as H,u as J,e as P}from"./index-De2CRixK.js";import"./dom-to-image-more-CfDXlNbO.js";import"./react-dom-B5MLDbn_.js";import"./scheduler-CzFDRTuY.js";import"./react-redux-BEmJlIGA.js";import"./hoist-non-react-statics-DQogQWOa.js";import"./react-is-DUDD-a5e.js";import"./use-sync-external-store-BPp6CH6k.js";import"./@reduxjs-DhFEcpJw.js";import"./immer-C0GRqQ_d.js";import"./redux-CE3tqztX.js";import"./@babel-DF5_wy6Y.js";import"./redux-thunk-CY0Q9z1Q.js";import"./axios-CCb-kr4I.js";import"./react-icons-DhcENkY1.js";import"./react-router-dom-StiqOUIT.js";import"./react-router-DUuhLvki.js";import"./@remix-run-DTnHqtaE.js";const V=({d:l,layer:f,language:D,item:r,index:$,start:C,movement:g,stopMovementCheck:d,stopMoving:m,wheel:w,focused:S,blurred:B,selectedvalue0:i,setFocusedBlob:y,dragUlRef:n,removeBlob:T,mode:s,changeBlobLayer:v,layerAmount:M,changeColor:j})=>{const{t:c}=A.useContext(q),E=l===0?33:G(22,r.i*2.6,50),{dispatch:u}=A.useContext(H),N=J(),h={background:`${r.background}`,display:"block",left:`${r.x}`,top:`${r.y}`,zIndex:`${r.z}`,"--i":isNaN(Number(r.i))?"10":`${r.i}`,"--layer":`${f}`,WebkitFilter:`blur(${E}px)`,filter:`blur(${E}px)`},o=l===0?["5.9px","8.2px","9.9px","10.8px","10.7px","10.5px","10px"]:["5.1px","5.4px","6.5px","7px","7.8px","8.4px","8.6px"],z=e=>{if(s==="change-color")j(r.id);else if(s==="delete")T(r);else if(s==="clone")u({type:"duplicateDraggable",payload:{d:l,draggable:r}});else if(s==="layer-up"){let t=r.layer;t<M-1?(t+=1,v(r,t)):N(P(c("ECannotRaiseBlobFurther"),!0,4))}else if(s==="layer-down"){let t=r.layer;t>0?(t-=1,v(r,t)):N(P(c("ECannotLowerBlobFurther"),!0,4))}else if(s==="scale-down"){let t=r.i;t=isNaN(t)?10:t,t-=.4,t=Math.min(Math.max(7,t),36),u({type:"partialUpdate",payload:{d:l,id:r.id,update:{i:t}}})}else if(s==="scale-up"){let t=r.i;t=isNaN(t)?10:t,t+=.4,t=Math.min(Math.max(7,t),36),u({type:"partialUpdate",payload:{d:l,id:r.id,update:{i:t}}})}};return b.jsxs("li",{onFocus:e=>{var a;n&&n.current&&((a=n.current)==null||a.setAttribute("aria-activedescendant",`${e.target.id}`));const t=e.target;setTimeout(()=>{var k,F;const p=t.getBoundingClientRect(),L=(k=t.parentNode)==null?void 0:k.getBoundingClientRect(),x=t.closest(".drag-wrap-outer"),W=x==null?void 0:x.scrollLeft,I=x==null?void 0:x.scrollTop;y({top:p.top-L.top-I,left:p.left-L.left-W,width:p.width,height:p.height}),i.current&&(i.current.textContent=`${c("ESelectedBlob")}: ${(F=t.querySelector("span"))==null?void 0:F.textContent}`)},500),S(t)},onBlur:e=>{var t;y(null),B(e.target),n&&n.current&&((t=n.current)==null||t.removeAttribute("aria-activedescendant")),i.current&&(i.current.textContent=`${c("ESelectedBlobNone")}`)},className:`dragzone animation ${s}`,id:r.id,role:"option",tabIndex:0,style:h,onClick:z,children:[b.jsx("div",{className:"draggable-overlay",style:Number(r.i)<8?{width:`calc(var(--i) * ${o[0]})`,height:`calc(var(--i) * ${o[0]})`}:Number(r.i)<10?{width:`calc(var(--i) * ${o[1]})`,height:`calc(var(--i) * ${o[1]})`}:Number(r.i)<20?{width:`calc(var(--i) * ${o[2]})`,height:`calc(var(--i) * ${o[2]})`}:Number(r.i)<24?{width:`calc(var(--i) * ${o[3]})`,height:`calc(var(--i) * ${o[3]})`}:Number(r.i)<28?{width:`calc(var(--i) * ${o[4]})`,height:`calc(var(--i) * ${o[4]})`}:Number(r.i)<32?{width:`calc(var(--i) * ${o[5]})`,height:`calc(var(--i) * ${o[5]})`}:isNaN(Number(r.i))||r.i===null||r.i===void 0?{width:`7 * ${o[6]})`,height:`7 * ${o[6]})`}:{width:`calc(var(--i) * ${o[6]})`,height:`calc(var(--i) * ${o[6]})`},onMouseDown:e=>{var a,p;e.stopPropagation();const t=e.currentTarget.parentElement;t.draggable=!0,i.current&&(i.current.textContent=`${c("ESelectedBlob")}: ${(a=t==null?void 0:t.querySelector("span"))==null?void 0:a.textContent}`),n&&n.current&&((p=n.current)==null||p.setAttribute("aria-activedescendant",`${t.id}`)),C(e,t)},onMouseMove:e=>{var t;if(e.buttons===1){e.stopPropagation();const a=e.currentTarget.parentElement;a.draggable=!0,g(e,a),i.current&&(i.current.textContent=`${c("ESelectedBlob")}: ${(t=a==null?void 0:a.querySelector("span"))==null?void 0:t.textContent}`)}},onMouseLeave:e=>{var a;e.stopPropagation();const t=e.currentTarget.parentElement;t.draggable=!1,n&&n.current&&((a=n.current)==null||a.removeAttribute("aria-activedescendant")),m(e,t),i.current&&(i.current.textContent=`${c("ESelectedBlobNone")}`)},onMouseUp:e=>{var a;const t=e.currentTarget.parentElement;t.draggable=!1,d(e,t),n&&n.current&&((a=n.current)==null||a.removeAttribute("aria-activedescendant")),i.current&&(i.current.textContent=`${c("ESelectedBlobNone")}`)},onTouchStart:e=>{var a,p;e.preventDefault(),e.stopPropagation();const t=e.currentTarget.parentElement;t.draggable=!0,n&&n.current&&((a=n.current)==null||a.setAttribute("aria-activedescendant",`${t.id}`)),C(e,t),i.current&&(i.current.textContent=`${c("ESelectedBlob")}: ${(p=t==null?void 0:t.querySelector("span"))==null?void 0:p.textContent}`)},onTouchMove:e=>{e.preventDefault(),e.stopPropagation();const t=e.currentTarget.parentElement;t.draggable=!0,g(e,t)},onTouchEnd:e=>{var a;const t=e.currentTarget.parentElement;t.draggable=!1,n&&n.current&&((a=n.current)==null||a.removeAttribute("aria-activedescendant")),d(e,t),i.current&&(i.current.textContent=`${c("ESelectedBlobNone")}`)},onWheel:e=>{const t=e.currentTarget.parentElement;w(t)}}),b.jsxs("span",{className:"scr",children:[c("EBlob")," ",r.number]})]},$)},pt=({layer_:l,className:f,language:D,d:r,items:$,saveDraggables:C,dragUlRef:g,selectedvalue0:d,setFocusedBlob:m,start:w,movement:S,stopMovementCheck:B,stopMoving:i,wheel:y,focused:n,blurred:T,removeBlob:s,mode:v,layerAmount:M,changeBlobLayer:j,changeColor:c})=>{const{t:E}=A.useContext(q),u=r===0?0:1,N={WebkitFilter:`url(#svgGaussian${u}) url(#svgMatrix${u})`,filter:`url(#svgGaussian${u}) url(#svgMatrix${u})`,position:"absolute",top:0,left:0,height:"100%",width:"100%",pointerEvents:"none",minHeight:"420px",minWidth:"100%",margin:"0",padding:"0",overflow:"visible",borderRadius:"0"};return b.jsxs(b.Fragment,{children:[b.jsxs("span",{id:`listbox${r}-layer${l}-label`,className:"scr",children:[E("ELayer")," ",l+1]}),b.jsx("ul",{ref:g,role:"listbox",id:`listbox${r}-layer${l}`,className:`drag-container-layer drag-container${r}-layer drag-container${r}-layer${l} ${f}`,"aria-labelledby":`listbox${r}-layer${l}-label`,"aria-activedescendant":"",style:N,children:$==null?void 0:$.map((h,o)=>{if(h!=null)return b.jsx(V,{layer:l,d:r,language:D,item:h,index:o,start:w,movement:S,stopMovementCheck:B,stopMoving:i,wheel:y,focused:n,blurred:T,selectedvalue0:d,setFocusedBlob:m,dragUlRef:g,removeBlob:s,mode:v,changeBlobLayer:j,layerAmount:M,changeColor:c},o)})})]})};export{pt as default};
