import{r as M,j as o}from"./react-A9DAvxly.js";import{K as lt,S as gt,f3 as At,f4 as Be,W as ue,bd as Ue,c$ as xt,f5 as ft,u as we,bX as $t,f6 as Ct,f7 as _t,f8 as bt,f9 as wt,fa as yt,z as Rt,A as vt,fb as jt,fc as Nt,ap as Tt,fd as Et,fe as It,ff as Ut,fg as Ft,fh as St,fi as Re,fj as Te,fk as ot,fl as X,d9 as Bt,fm as Dt,fn as Gt,ax as Mt,ay as Wt,fo as Lt,fp as kt,fq as zt,fr as Ot,bC as rt,fs as Vt,ft as Ht,fu as ve,br as st,fv as Pt,fw as Jt}from"./index-YonRVXmF.js";import{a2 as nt,a3 as Xt,a4 as Yt}from"./react-icons-BXtkaQB_.js";import"./hoist-non-react-statics-D5aJipOz.js";import"./react-dom-yh0erWL-.js";import"./scheduler-CzFDRTuY.js";import"./react-redux-CHm9GgGE.js";import"./react-is-DUDD-a5e.js";import"./use-sync-external-store-DEc9BFqZ.js";import"./@reduxjs-DhFEcpJw.js";import"./immer-C0GRqQ_d.js";import"./redux-CE3tqztX.js";import"./@babel-DF5_wy6Y.js";import"./redux-thunk-CY0Q9z1Q.js";import"./axios-CCb-kr4I.js";import"./react-router-dom-CYs6befe.js";import"./react-router-S1Hdk0kP.js";import"./@remix-run-DTnHqtaE.js";const qt="_light_xgcdz_39",Kt="_drag_xgcdz_221",Qt="_overflow_xgcdz_235",Zt="_indicator_xgcdz_343",eo="_tooltip_xgcdz_343",to="_form_xgcdz_511",oo="_remove_xgcdz_539",ro="_inputs_xgcdz_569",i={"color-container":"_color-container_xgcdz_1",light:qt,"color-picker":"_color-picker_xgcdz_57","width-wrap":"_width-wrap_xgcdz_109","btn-wrap":"_btn-wrap_xgcdz_123","info-wrap":"_info-wrap_xgcdz_141","color-blocks":"_color-blocks_xgcdz_189",drag:Kt,overflow:Qt,"block-wrap":"_block-wrap_xgcdz_243","color-wrap":"_color-wrap_xgcdz_261","color-block":"_color-block_xgcdz_189","compliance-indicators":"_compliance-indicators_xgcdz_321",indicator:Zt,tooltip:eo,"indicator-aaa":"_indicator-aaa_xgcdz_373","indicator-null":"_indicator-null_xgcdz_381","compliance-info":"_compliance-info_xgcdz_389","toggle-controls":"_toggle-controls_xgcdz_397","color-edit-container":"_color-edit-container_xgcdz_427","color-select":"_color-select_xgcdz_429","mode-container":"_mode-container_xgcdz_485",form:to,"color-format-submit":"_color-format-submit_xgcdz_537",remove:oo,"color-name":"_color-name_xgcdz_553",inputs:ro,"hex-input":"_hex-input_xgcdz_591"},so=({language:m,block:f,fontSize:E,updateColor:z,width:I,hexToRGB:ge,hslToRGB:O,rgbToHex:Y,rgbToHSL:F})=>{const S=lt(),q=/^hsl\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*\)$/i,K=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i,W=/^#([0-9A-F]{3}){1,2}$/i,H=[{value:"hsl",label:"HSL"},{value:"rgb",label:"RGB"},{value:"hex",label:"Hex"}],[R,Ae]=M.useState(H.find(a=>a.value===f.colorFormat)||H[0]),[y,Q]=M.useState(""),[ne,le]=M.useState(0),[ae,ie]=M.useState(0),[te,P]=M.useState(0),[ce,p]=M.useState(0),[Z,L]=M.useState(0),[me,k]=M.useState(0);M.useEffect(()=>{switch(f.colorFormat){case"hex":{Q(f.color);const{r:a,g:x,b:g}=ge(f.color);le(a),ie(x),P(g);const{h:v,s:j,l:U}=F(a,x,g);p(v),L(j),k(U);break}case"rgb":{const a=f.color.match(K);if(a){const x=Number(a[1]),g=Number(a[2]),v=Number(a[3]);le(x),ie(g),P(v);const{h:j,s:U,l:V}=F(x,g,v);p(j),L(U),k(V)}break}case"hsl":{const a=f.color.match(q);if(a){const x=Number(a[1]),g=Number(a[2]),v=Number(a[3]);p(x),L(g),k(v);const{r:j,g:U,b:V}=O(x,g,v);le(j),ie(U),P(V);const oe=Y(j,U,V);Q(oe)}break}}},[]);const xe=a=>{a.preventDefault();const x=R==null?void 0:R.value;try{let g;if(x==="hex")if(W.test(y))g=y.toUpperCase(),z(f.id,g,"hex");else throw new Error("Invalid Hex format.");else if(x==="rgb")if(ne>=0&&ne<=255&&ae>=0&&ae<=255&&te>=0&&te<=255)g=`rgb(${ne}, ${ae}, ${te})`,z(f.id,g,"rgb");else throw new Error("Invalid RGB values.");else if(x==="hsl")if(ce>=0&&ce<=360&&Z>=0&&Z<=100&&me>=0&&me<=100)g=`hsl(${ce}, ${Z}%, ${me}%)`,z(f.id,g,"hsl");else throw new Error("Invalid HSL values.");else throw new Error("Unsupported color format.")}catch(g){console.error(g.message),S(ue(Ue[m]+" "+g.message,!0,4))}},fe=(a,x)=>{a==="h"&&p(x),a==="s"&&L(x),a==="l"&&k(x);const g=a==="h"?x:ce,v=a==="s"?x:Z,j=a==="l"?x:me;if(g>=0&&g<=360&&v>=0&&v<=100&&j>=0&&j<=100){const{r:U,g:V,b:oe}=O(g,v,j);le(U),ie(V),P(oe),z(f.id,`hsl(${g}, ${v}%, ${j}%)`,"hsl"),Q(Y(U,V,oe))}},$e=(a,x)=>{a==="r"&&le(x),a==="g"&&ie(x),a==="b"&&P(x);const g=a==="r"?x:ne,v=a==="g"?x:ae,j=a==="b"?x:te;if([g,v,j].every(U=>U>=0&&U<=255)){const{h:U,s:V,l:oe}=F(g,v,j);p(U),L(V),k(oe),z(f.id,`rgb(${g}, ${v}, ${j})`,"rgb"),Q(Y(g,v,j))}};return o.jsxs(o.Fragment,{children:[o.jsx(gt,{hideDelete:!0,id:"color-select",className:i["color-select"],language:m,instructions:At[m],hide:!0,options:H,value:R,onChange:a=>{Ae(a)}}),(R==null?void 0:R.value)==="hex"&&o.jsxs("form",{className:i.form,onSubmit:xe,children:[o.jsx("div",{className:`${i.inputs} ${i["hex-input"]}`,children:o.jsxs("label",{children:[o.jsx("span",{children:"Hex: "}),o.jsx("input",{name:`hex-input-${f.id}`,type:"text",value:y,onChange:a=>Q(a.target.value),className:i["color-input"],style:{maxWidth:`${I}`,fontSize:E},placeholder:"#FFFFFF"})]})}),o.jsx("button",{style:{minWidth:"calc(100% - 4px)",maxWidth:"calc(100% - 4px)",fontSize:E},type:"submit",className:`${i["color-format-submit"]} small gray`,children:Be[m]})]}),(R==null?void 0:R.value)==="rgb"&&o.jsxs("form",{className:`${i.inputs} ${i["rgb-inputs"]}`,onSubmit:xe,children:[o.jsxs("label",{children:[o.jsx("span",{children:"R: "}),o.jsx("input",{name:`r-input-${f.id}`,type:"number",value:ne,onChange:a=>$e("r",Number(a.target.value)),min:0,max:255,className:i["color-input"],style:{maxWidth:`${I}`,fontSize:E}})]}),o.jsxs("label",{children:[o.jsx("span",{children:"G: "}),o.jsx("input",{name:`g-input-${f.id}`,type:"number",value:ae,onChange:a=>$e("g",Number(a.target.value)),min:0,max:255,className:i["color-input"],style:{maxWidth:`${I}`,fontSize:E}})]}),o.jsxs("label",{children:[o.jsx("span",{children:"B: "}),o.jsx("input",{name:`b-input-${f.id}`,type:"number",value:te,onChange:a=>$e("b",Number(a.target.value)),min:0,max:255,className:i["color-input"],style:{maxWidth:`${I}`,fontSize:E}})]}),o.jsx("button",{style:{minWidth:"calc(100% - 4px)",maxWidth:"calc(100% - 4px)",fontSize:E},type:"submit",className:`${i["color-format-submit"]} small gray`,children:Be[m]})]}),(R==null?void 0:R.value)==="hsl"&&o.jsxs("form",{className:`${i.inputs} ${i["hsl-inputs"]}`,onSubmit:xe,children:[o.jsxs("label",{children:[o.jsx("span",{children:"H: "}),o.jsx("input",{name:`h-input-${f.id}`,type:"number",value:ce,onChange:a=>fe("h",Number(a.target.value)),min:0,max:360,className:i["color-input"],style:{maxWidth:`${I}`,fontSize:E}})," "]}),o.jsxs("label",{children:[o.jsx("span",{children:"S: "}),o.jsx("input",{name:`s-input-${f.id}`,type:"number",value:Z,onChange:a=>fe("s",Number(a.target.value)),min:0,max:100,className:i["color-input"],style:{maxWidth:`${I}`,fontSize:E}})]}),o.jsxs("label",{children:[o.jsx("span",{children:"L: "}),o.jsx("input",{name:`l-input-${f.id}`,type:"number",value:me,onChange:a=>fe("l",Number(a.target.value)),min:0,max:100,className:i["color-input"],style:{maxWidth:`${I}`,fontSize:E}})]}),o.jsx("button",{style:{minWidth:"calc(100% - 4px)",maxWidth:"calc(100% - 4px)",fontSize:E},type:"submit",className:`${i["color-format-submit"]} small gray`,children:Be[m]})]})]})},he=Ot(5),Fe=["analogous","complementary","triad","monochromatic"];let De=Math.floor(Math.random()*Fe.length);const Ee=(m,f)=>{const E=F=>{let S,q,K;if(F.colorFormat==="hex")({r:S,g:q,b:K}=Re(F.color));else if(F.colorFormat==="rgb"){const W=F.color.match(/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i);if(W)S=Number(W[1]),q=Number(W[2]),K=Number(W[3]);else throw new Error("Invalid RGB format")}else if(F.colorFormat==="hsl"){const W=F.color.match(/^hsl\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*\)$/i);if(W){const H=Number(W[1]),R=Number(W[2]),Ae=Number(W[3]);({r:S,g:q,b:K}=X(H,R,Ae))}else throw new Error("Invalid HSL format")}else throw new Error("Unsupported color format");return{r:S,g:q,b:K}},z=E(m),I=E(f),ge=ve(z.r,z.g,z.b),O=ve(I.r,I.g,I.b),Y=Pt(ge,O);return{isAAARegularTextCompliant:Y>=7,isAARegularTextCompliant:Y>=4.5,isAAUIComponentsCompliant:Y>=3}},$="colors",ye="hsl",Ie=[{id:1,color:"hsl(200, 50%, 10%)",luminance:.011540526030345211,status:$,colorFormat:ye,compliantColors:{AAA_RegularText:[4,5],AA_UIComponents:[3,4,5],AA_RegularText:[3,4,5]}},{id:2,color:"hsl(200, 50%, 35%)",luminance:.12179747967530058,status:$,colorFormat:ye,compliantColors:{AAA_RegularText:[],AA_UIComponents:[4,5],AA_RegularText:[5]}},{id:3,color:"hsl(200, 50%, 55%)",luminance:.3071249100459835,status:$,colorFormat:ye,compliantColors:{AAA_RegularText:[],AA_UIComponents:[1],AA_RegularText:[1]}},{id:4,color:"hsl(200, 50%, 75%)",luminance:.5493970089199802,status:$,colorFormat:ye,compliantColors:{AAA_RegularText:[1],AA_UIComponents:[1,2],AA_RegularText:[1]}},{id:5,color:"hsl(200, 50%, 90%)",luminance:.800081557105977,status:$,colorFormat:ye,compliantColors:{AAA_RegularText:[1],AA_UIComponents:[1,2],AA_RegularText:[1,2]}}],yo=({language:m})=>{var Ge,Me,We,Le,ke;const f=lt(),E=xt(),z=ft(),[I,ge]=M.useState(!0),[O,Y]=we("Jenniina-showColorNames",!0),[F,S,q]=we("Jenniina-colorsAccessibility",Ie),[K,W]=we("Jenniina-currentColor","#7D7D7D"),[H,R]=we("Jenniina-idCounter",1),{isDragging:Ae,listItemsByStatus:y,handleDragging:Q,handleUpdate:ne}=$t(F,[$]),le=M.useRef(0),[ae,ie]=M.useState(0),te=8,[P,ce]=we("Jenniina-color-block-width",te),p=`${P}em`,Z=P/te,L={tooltip:`${.7*Z}em`,colorName:`${.7*Z}em`,input:`${.8*Z}em`},me=(e,r)=>{const s=Ee(e,r);return s.isAAARegularTextCompliant&&(e.compliantColors.AAA_RegularText.push(r.id),r.compliantColors.AAA_RegularText.push(e.id)),s.isAARegularTextCompliant&&(e.compliantColors.AA_RegularText.push(r.id),r.compliantColors.AA_RegularText.push(e.id)),s.isAAUIComponentsCompliant&&(e.compliantColors.AA_UIComponents.push(r.id),r.compliantColors.AA_UIComponents.push(e.id)),e.compliantColors.AAA_RegularText=Array.from(new Set(e.compliantColors.AAA_RegularText)),e.compliantColors.AA_RegularText=Array.from(new Set(e.compliantColors.AA_RegularText)),e.compliantColors.AA_UIComponents=Array.from(new Set(e.compliantColors.AA_UIComponents)),r.compliantColors.AAA_RegularText=Array.from(new Set(r.compliantColors.AAA_RegularText)),r.compliantColors.AA_RegularText=Array.from(new Set(r.compliantColors.AA_RegularText)),r.compliantColors.AA_UIComponents=Array.from(new Set(r.compliantColors.AA_UIComponents)),{updatedColor1:e,updatedColor2:r}},k=()=>Math.floor(Math.random()*256),[xe,fe]=M.useState(Fe[De]),$e=(e,r)=>{const s=[];switch(e){case"analogous":for(let u=1;u<=2;u++){const N=[(r.h+30*u)%360,r.s,r.l],_=X(...N);s.push([_.r,_.g,_.b])}break;case"complementary":const t=[(r.h+180)%360,r.s,r.l],l=X(...t);s.push([l.r,l.g,l.b]);break;case"triad":for(let u=1;u<=2;u++){const N=[(r.h+120*u)%360,r.s,r.l],_=X(...N);s.push([_.r,_.g,_.b])}break;case"monochromatic":const d=[r.h,r.s,Math.min(r.l+10,100)],n=[r.h,r.s,Math.max(r.l-10,0)],h=X(...d),A=X(...n);s.push([h.r,h.g,h.b]),s.push([A.r,A.g,A.b]);break;default:for(let u=1;u<=2;u++){const N=[(r.h+30*u)%360,r.s,r.l],_=X(...N);s.push([_.r,_.g,_.b])}break}return s},a=e=>{const r=[];if(e.length===0)for(let s=0;s<5;s++){const t=[k(),k(),k()];r.push(t)}else{const s=e[e.length-1];let t;try{if(s.colorFormat==="hex")t=Re(s.color);else if(s.colorFormat==="rgb"){const n=s.color.match(/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i);if(n)t={r:Number(n[1]),g:Number(n[2]),b:Number(n[3])};else throw new Error("Invalid RGB format")}else if(s.colorFormat==="hsl"){const n=s.color.match(/^hsl\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*\)$/i);if(n){const h=Number(n[1]),A=Number(n[2]),u=Number(n[3]);t=X(h,A,u)}else throw new Error("Invalid HSL format")}else throw new Error("Unsupported color format");const l=Te(t.r,t.g,t.b),d=$e(xe,l);r.push(...d.slice(0,2))}catch(l){console.error("Error generating new colors:",l);for(let d=0;d<2;d++)r.push([k(),k(),k()])}}return r},x=()=>{const r=a(F).map((t,l)=>{const[d,n,h]=t,A=Te(d,n,h),u=ve(d,n,h);return{id:H+l,color:`hsl(${A.h}, ${A.s}%, ${A.l}%)`,luminance:u,status:$,colorFormat:"hsl",compliantColors:{AA_RegularText:[],AAA_RegularText:[],AA_UIComponents:[]}}});let s=[...F,...r];s=s.map(t=>(r.forEach(l=>{const{updatedColor1:d,updatedColor2:n}=me(t,l);t=d,l=n}),t)),S(s),R(H+r.length),De=Math.floor(Math.random()*Fe.length),fe(Fe[De])},g=(e,r)=>{if(r==="hex"){if(/^#([A-Fa-f0-9]{6})$/.test(e))return e.toUpperCase();throw new Error(`Invalid HEX color format: ${e}`)}else if(r==="rgb"){const s=e.match(/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i);if(s){const t=Number(s[1]),l=Number(s[2]),d=Number(s[3]);if([t,l,d].every(n=>n>=0&&n<=255))return ot(t,l,d);throw new Error(`RGB values out of range in color: ${e}`)}else throw new Error(`Invalid RGB color format: ${e}`)}else if(r==="hsl"){const s=e.match(/^hsl\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*\)$/i);if(s){const t=Number(s[1]),l=Number(s[2]),d=Number(s[3]);if([t,l,d].every((n,h)=>h===0?n>=0&&n<=360:n>=0&&n<=100))return Jt(t,l,d);throw new Error(`HSL values out of range in color: ${e}`)}else throw new Error(`Invalid HSL color format: ${e}`)}else throw new Error(`Unsupported color format: ${r}`)},v={AA_RegularText:({xPosition:e,yIndicator:r,blockWidth:s,indicatorSize:t,otherColor:l,blockColor:d,colorFormatBlock:n,colorFormatOther:h})=>{const A=g(d,n),u=g(l,h);return`
 <circle
  cx="${e+s/2}"
  cy="${r+t/2}"
  r="${t*.32}"
  fill="${A}"
  stroke="${u}"
  stroke-width="${t*.1}"
/>
`},AA_UIComponents:({xPosition:e,yIndicator:r,blockWidth:s,indicatorSize:t,otherColor:l,blockColor:d,colorFormatBlock:n,colorFormatOther:h})=>{const A=g(d,n),u=g(l,h);return`
    <rect
  x="${e+s/2-t*.2}"
  y="${r+t/2-t*.15}"
  width="${t*.3}"
  height="${t*.3}"
  fill="${A}"
  stroke="${u}"
  stroke-width="${t*.1}"
/>
`},AAA_RegularText:({xPosition:e,yIndicator:r,blockWidth:s,indicatorSize:t,otherColor:l,blockColor:d,colorFormatBlock:n,colorFormatOther:h})=>{const A=g(l,h);return`
<circle
  cx="${e+s/2}"
  cy="${r+t/2}"
  r="${t/2}"
  fill="${A}"
  stroke="none"
/>
`}},j=()=>{var ze,Oe,Ve,He,Pe,Je,Xe,Ye,qe;const e=P*20,r=e,s=r/3,t=s/1.5,l=e/4,d=s/20,n=r/10,A=((Oe=(ze=y[$])==null?void 0:ze.items)==null?void 0:Oe.length)*(s+t)-t+l*2,u=O?n+l:0,N=((Ve=y[$])==null?void 0:Ve.items.length)*r,_=A+u*1.6,c=(Pe=(He=y[$])==null?void 0:He.items)==null?void 0:Pe.map((G,Ce)=>{const pe=Ce*r;let se;try{se=g(G.color,G.colorFormat)}catch(_e){console.error(_e),f(ue(`${Ue[m]}: ${_e.message}`,!0,4)),se="#000000"}const je=`
        <rect
          x="${pe}"
          y="0"
          width="${r}"
          height="${A}"
          fill="${se}"
          stroke="none"
        />
      `,Ne=O?`
        <!-- Text Background -->
        <rect
          x="${pe}"
          y="${A-.5}"
          width="${r}"
          height="${u}"
          fill="${se}"
          stroke="none"
        />
        <!-- Color Text Label -->
        <text
          x="${pe+r/2}"
          y="${A+u/2+n/3}"
          font-size="${n}"
          font-family="Arial"
          text-anchor="middle"
          dominant-baseline="middle"
          fill="${G.luminance>.179?"#000000":"#FFFFFF"}"
          stroke="none"
        >
          ${G.color}
        </text>
      `:"";return`
        <g>
          <!-- Color Block -->
          ${je}
          <!-- Color Text Label -->
          ${Ne}
        </g>
      `}).join(""),b=(Xe=(Je=y[$])==null?void 0:Je.items)==null?void 0:Xe.map((G,Ce)=>{const se=l+Ce*(s+t)+(s-d)/2,je=g(G.color,G.colorFormat);return`
        <rect
          x="0"
          y="${se}"
          width="${N}"
          height="${d}"
          fill="${je}"
          stroke="none"
        />
      `}).join(""),w=(qe=(Ye=y[$])==null?void 0:Ye.items)==null?void 0:qe.map((G,Ce)=>{var Ne,_e;const pe=Ce*r,se=J=>{var be,Ke,Qe,Ze,et,tt;return(Ke=(be=G.compliantColors)==null?void 0:be.AAA_RegularText)!=null&&Ke.includes(J)?"AAA_RegularText":(Ze=(Qe=G.compliantColors)==null?void 0:Qe.AA_RegularText)!=null&&Ze.includes(J)?"AA_RegularText":(tt=(et=G.compliantColors)==null?void 0:et.AA_UIComponents)!=null&&tt.includes(J)?"AA_UIComponents":null};return`
        <g>
          <!-- Compliance Indicators -->
          ${(_e=(Ne=y[$])==null?void 0:Ne.items)==null?void 0:_e.filter(J=>J.id!==G.id).map(J=>{const be=se(J.id);return be?v[be]({xPosition:pe,yIndicator:l+(J.id-1)*(s+t),blockWidth:r,indicatorSize:s,otherColor:J.color,blockColor:G.color,colorFormatBlock:G.colorFormat,colorFormatOther:J.colorFormat}):""}).join("")}
        </g>
      `}).join(""),C=10,T=N-C,B=_-C*1.5,D="https://colors.jenniina.fi",de=`
      <a href="${D}" target="_blank" rel="noopener noreferrer">
        <text
          x="${T}"
          y="${B}"
          font-size="${n}"
          font-family="Arial"
          text-anchor="end"
          fill="#000000"
          stroke="none"
        >
          ${D}
        </text>
      </a>
    `,re=`
      <a href="${D}" target="_blank" rel="noopener noreferrer">
        <text
          x="${C}"
          y="${B}"
          font-size="${n}"
          font-family="Arial"
          text-anchor="start"
          fill="#FFFFFF"
          stroke="none"
        >
          ${D}
        </text>
      </a>
    `;return{svgContent:`
    <svg xmlns="http://www.w3.org/2000/svg" width="${N}" height="${_}">
      <!-- Color Blocks -->
      <g>
        ${c}
      </g>
      <!-- Lines -->
      <g>
        ${b}
      </g>
      <!-- Compliance Indicators -->
      <g>
        ${w}
      </g>
      <!-- Source Link -->
      <g>
        ${re}
      </g>
      <g>
        ${de}
      </g>
    </svg>
  `,svgWidth:N,svgHeight:_}},U=()=>{const{svgContent:e}=j(),r=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),s=URL.createObjectURL(r),t=document.createElement("a");t.href=s,t.download="color-blocks.svg",document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(s),f(ue(rt[m],!1,5))},V=()=>{const{svgContent:e,svgWidth:r,svgHeight:s}=j(),t=new Image;t.width=r,t.height=s;const l=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),d=URL.createObjectURL(l);t.onload=()=>{const n=document.createElement("canvas");n.width=r,n.height=s;const h=n.getContext("2d");h==null||h.drawImage(t,0,0);const A=n.toDataURL("image/png"),u=document.createElement("a");u.href=A,u.download="color-blocks.png",document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(d),f(ue(rt[m],!1,5))},t.onerror=n=>{console.error("Error loading SVG into image for PNG conversion:",n),URL.revokeObjectURL(d),f(ue(Ue[m],!0,4))},t.src=d},oe=()=>{var u,N,_;const{r:e,g:r,b:s}=Re(K),{h:t,s:l,l:d}=Te(e,r,s),n=ve(e,r,s),h={id:H,color:`hsl(${t}, ${l}%, ${d}%)`,luminance:n,status:$,colorFormat:"hsl",compliantColors:{AA_RegularText:[],AAA_RegularText:[],AA_UIComponents:[]}};(N=(u=y[$])==null?void 0:u.items)==null||N.forEach(c=>{var w,C,T,B,D,de,re,ee;const b=Ee(h,c);b.isAAARegularTextCompliant?((w=h.compliantColors)==null||w.AAA_RegularText.push(c.id),(C=c.compliantColors)==null||C.AAA_RegularText.push(h.id)):b.isAARegularTextCompliant?((T=h.compliantColors)==null||T.AA_RegularText.push(c.id),(B=c.compliantColors)==null||B.AA_RegularText.push(h.id)):b.isAAUIComponentsCompliant&&((de=(D=h.compliantColors)==null?void 0:D.AA_UIComponents)==null||de.push(c.id),(ee=(re=c.compliantColors)==null?void 0:re.AA_UIComponents)==null||ee.push(h.id))});const A=(_=y[$])==null?void 0:_.items.map(c=>{var b,w,C;return{...c,compliantColors:{AAA_RegularText:Array.from(new Set((b=c.compliantColors)==null?void 0:b.AAA_RegularText)),AA_RegularText:Array.from(new Set((w=c.compliantColors)==null?void 0:w.AA_RegularText)),AA_UIComponents:Array.from(new Set((C=c.compliantColors)==null?void 0:C.AA_UIComponents))}}});R(H+1),S([...A,h])},at=e=>{var r;if(window.confirm(Vt[m])){const s=(r=y[$])==null?void 0:r.items.filter(t=>t.id!==e).map(t=>{var l,d,n,h;return{...t,compliantColors:{AAA_RegularText:(l=t.compliantColors)==null?void 0:l.AAA_RegularText.filter(A=>A!==e),AA_RegularText:(d=t.compliantColors)==null?void 0:d.AA_RegularText.filter(A=>A!==e),AA_UIComponents:(h=(n=t.compliantColors)==null?void 0:n.AA_UIComponents)==null?void 0:h.filter(A=>A!==e)}}});S(s),f(ue(Ht[m],!1,5))}},it=(e,r,s)=>{var t;try{let l,d,n,h;if(s==="hsl"){const c=r.match(/^hsl\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*\)$/i);if(!c)throw new Error("Invalid HSL format");const b=Number(c[1]),w=Number(c[2]),C=Number(c[3]);if(b<0||b>360||w<0||w>100||C<0||C>100)throw new Error("HSL values out of range");l=`hsl(${b}, ${w}%, ${C}%)`;const T=X(b,w,C);d=T.r,n=T.g,h=T.b}else if(s==="rgb"){const c=r.match(/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i);if(!c)throw new Error("Invalid RGB format");const b=Number(c[1]),w=Number(c[2]),C=Number(c[3]);if([b,w,C].some(T=>T<0||T>255))throw new Error("RGB values must be between 0 and 255");l=`rgb(${b}, ${w}, ${C})`,d=b,n=w,h=C}else if(s==="hex"){if(!/^#([0-9A-F]{3}){1,2}$/i.test(r))throw new Error("Invalid Hex format");l=r.toUpperCase();const c=Re(l);d=c.r,n=c.g,h=c.b}else throw new Error("Unsupported color format");const A=ve(d,n,h),u=(t=y[$])==null?void 0:t.items.map(c=>{var b,w,C,T,B,D,de;if(c.id===e)return{...c,color:l,colorFormat:s,luminance:A,compliantColors:{AAA_RegularText:[],AA_RegularText:[],AA_UIComponents:[]}};{const re=Ee(c,{id:e,color:l,colorFormat:s,luminance:A,status:c.status,compliantColors:{AAA_RegularText:[],AA_RegularText:[],AA_UIComponents:[]}});return{...c,compliantColors:{AAA_RegularText:re.isAAARegularTextCompliant?[...new Set([...(b=c.compliantColors)==null?void 0:b.AAA_RegularText,e])]:(w=c.compliantColors)==null?void 0:w.AAA_RegularText.filter(ee=>ee!==e),AA_RegularText:re.isAARegularTextCompliant?[...new Set([...(C=c.compliantColors)==null?void 0:C.AA_RegularText,e])]:(T=c.compliantColors)==null?void 0:T.AA_RegularText.filter(ee=>ee!==e),AA_UIComponents:re.isAAUIComponentsCompliant?[...new Set([...(B=c.compliantColors)==null?void 0:B.AA_UIComponents,e])]:(de=(D=c.compliantColors)==null?void 0:D.AA_UIComponents)==null?void 0:de.filter(ee=>ee!==e)}}}}),N=(c,b)=>{let w=[],C=[],T=[];return b.forEach(B=>{if(B.id===c.id)return;const D=Ee(c,B);D.isAAARegularTextCompliant&&w.push(B.id),D.isAARegularTextCompliant&&T.push(B.id),D.isAAUIComponentsCompliant&&C.push(B.id)}),{AAA_RegularText:Array.from(new Set(w)),AA_RegularText:Array.from(new Set(T)),AA_UIComponents:Array.from(new Set(C))}},_=u.findIndex(c=>c.id===e);if(_!==-1){const c=N(u[_],u);u[_]={...u[_],compliantColors:c}}S([...u])}catch(l){console.error("Error updating color:",l),f(ue(`${Ue[m]}: ${l.message}`,!0,4))}},ct=(e,r)=>{e.dataTransfer.setData("text/plain",JSON.stringify({type:"item",id:r}))},mt=(e,r)=>{e.preventDefault(),ie(r),le.current=r},dt=e=>{e.preventDefault(),Q(!0)},ut=e=>{const r=JSON.parse(e.dataTransfer.getData("text/plain"));r.type==="item"&&(ne(r.id,$,ae),Q(!1))};M.useEffect(()=>{var e,r;(!((e=y[$])!=null&&e.items)||((r=y[$])==null?void 0:r.items.length)<1)&&S(Ie)},[]);const pt=()=>{window.confirm(st[m])&&(q(),S([]),R(1))},ht=()=>{window.confirm(st[m])&&(q(),S(Ie),R(Ie.length+1))},Se=.04;return o.jsxs("div",{id:i["color-container"],className:`${i["color-container"]} ${E?i.light:""}`,style:{"--font-size":L.input},children:[o.jsx("div",{id:"info",className:i["info-wrap"],children:o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx("div",{style:{display:"inline-block",backgroundColor:"var(--color-primary-20)",borderRadius:"50%",width:"2em",height:"2em"}}),o.jsx("span",{children:Ct[m]})]}),o.jsxs("li",{children:[o.jsx("div",{style:{display:"inline-block",backgroundColor:"transparent",outline:"0.3em solid var(--color-primary-20)",outlineOffset:"-0.3em",borderRadius:"50%",width:"1.7em",height:"1.7em",margin:"0 0.2em 0 0.2em "}}),o.jsx("span",{children:_t[m]})]}),o.jsxs("li",{children:[o.jsx("div",{style:{display:"inline-block",backgroundColor:"transparent",outline:"0.3em solid var(--color-primary-20)",outlineOffset:"-0.26em",borderRadius:"0",width:"0.9em",height:"0.9em",margin:"0 0.65em 0 0.65em"}}),o.jsx("span",{children:bt[m]})]})]})}),o.jsxs("div",{className:i["btn-wrap"],children:[((Me=(Ge=y[$])==null?void 0:Ge.items)==null?void 0:Me.length)>0&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{type:"button",onClick:V,className:"gray small",children:[wt[m],"  ",o.jsx(nt,{})]}),o.jsxs("button",{type:"button",onClick:U,className:"gray small",children:[yt[m],"  ",o.jsx(nt,{})]})]}),o.jsx("button",{onClick:z,className:"gray small",children:E?o.jsxs(o.Fragment,{children:[Rt[m],"  ",o.jsx(Xt,{})]}):o.jsxs(o.Fragment,{children:[vt[m],"  ",o.jsx(Yt,{})," "]})})]}),o.jsxs("div",{className:i["color-picker"],children:[o.jsxs("label",{htmlFor:"color-input",className:" ",children:[jt[m],":"]}),o.jsx("input",{id:"color-input",type:"color",value:K,onChange:e=>W(e.target.value)}),o.jsx("button",{className:"gray small",type:"button",onClick:oe,children:Nt[m]}),o.jsx("button",{className:"gray small",type:"button",onClick:ht,children:Tt[m]}),o.jsx("button",{className:"gray small",type:"button",onClick:pt,children:Et[m]}),o.jsx("button",{className:"gray small",type:"button",onClick:x,children:It[m]})]}),o.jsx("div",{id:"color-blocks",className:`${i["color-blocks"]} ${!O||!I?i.overflow:""} ${Ae?i.drag:""}`,children:(We=y[$])==null?void 0:We.items.map(e=>{var r,s;return o.jsx("ul",{className:i["block-wrap"],onDrop:ut,children:o.jsxs("li",{className:i["color-wrap"],title:`ID: ${e.id}`,"aria-label":`ID: ${e.id}`,style:{width:`${p}`,maxWidth:`${p}`},children:[o.jsx("ul",{children:o.jsx("li",{draggable:"true",onDragStart:t=>ct(t,e.id),onDragEnter:t=>mt(t,e.id),onDragOver:t=>dt(t),onDragEnd:()=>Q(!1),"data-identity":e.id,className:i["color-block"],style:{"--color":e.color,backgroundColor:e.color,width:`${p}`,maxWidth:`${p}`,height:`calc(calc(${p} * 0.6) * ${(r=y[$])==null?void 0:r.items.length})`},children:o.jsx("div",{className:i["compliance-indicators"],style:{gap:`calc(${p} / 4)`,"--width-full":`${p}`},children:(s=y[$])==null?void 0:s.items.map(t=>{var d,n,h,A,u,N;if(t.id===e.id)return o.jsx("div",{className:`${i["indicator-null"]} ${i.indicator}`,style:{"--color":t.color,"--width":`calc(${p} / 3)`,"--left":`calc(calc(${p} / 3) * -1)`,backgroundColor:"transparent",width:`calc(${p} / 3)`,height:`calc(${p} / 3)`}},`none-${t.color}-${t.id}`);let l=null;return(n=(d=e.compliantColors)==null?void 0:d.AAA_RegularText)!=null&&n.includes(t.id)?l="AAA_RegularText":(A=(h=e.compliantColors)==null?void 0:h.AA_RegularText)!=null&&A.includes(t.id)?l="AA_RegularText":(N=(u=e.compliantColors)==null?void 0:u.AA_UIComponents)!=null&&N.includes(t.id)&&(l="AA_UIComponents"),l==="AAA_RegularText"?o.jsx("div",{tabIndex:0,className:`${i["indicator-aaa"]} ${i.indicator} tooltip-wrap`,style:{"--color":t.color,backgroundColor:t.color,"--left":`calc(calc(${p} / 3) * -1)`,width:`calc(${p} / 3)`,height:`calc(${p} / 3)`},"aria-labelledby":`span-${t.id}-${e.id}-${he}`,children:o.jsx("span",{id:`span-${t.id}-${e.id}-${he}`,className:`tooltip below narrow3 ${i.tooltip}`,style:{fontSize:`clamp(0.7rem, ${L.input}, 0.9rem)`,"--tooltip-max-width":p},children:`${Ut[m]}: ${t.id}`})},`aaa-${t.color}-${t.id}`):l==="AA_RegularText"?o.jsx("div",{tabIndex:0,className:`${i["indicator-aa"]} ${i.indicator} tooltip-wrap`,style:{"--color":t.color,backgroundColor:e.color,outline:`calc(${p} * ${Se*1.1}) solid ${t.color}`,outlineOffset:`calc(${p} * -0.013)`,"--left":`calc(calc(${p} / 5) * -2)`,width:`calc(${p} / 5)`,height:`calc(${p} / 5)`,margin:`calc(${p} / 15)`,borderRadius:"50%"},"aria-labelledby":`span-${t.id}-${e.id}-${he}`,children:o.jsx("span",{id:`span-${t.id}-${e.id}-${he}`,className:"tooltip below narrow3",style:{fontSize:`clamp(0.7rem, ${L.input}, 0.9rem)`,"--tooltip-max-width":p},children:`${Ft[m]}: ${t.id}`})},`aa-${t.color}-${t.id}`):l==="AA_UIComponents"?o.jsx("div",{tabIndex:0,className:`${i["indicator-aa-ui"]} ${i.indicator} tooltip-wrap`,style:{"--color":t.color,"--left":`calc(calc(${p} / 7) * -3)`,backgroundColor:e.color,outline:`calc(${p} * ${Se}) solid ${t.color}`,outlineOffset:`calc(${p} * ${Se} * -1)`,width:`calc(${p} / 7)`,height:`calc(${p} / 7)`,margin:`calc(${p} / 10.5)`},"aria-labelledby":`span-ui-${t.id}-${e.id}-${he}`,children:o.jsx("span",{id:`span-ui-${t.id}-${e.id}-${he}`,className:`tooltip below narrow3 ${i.tooltip}`,style:{fontSize:`clamp(0.7rem, ${L.input}, 0.9rem)`,"--tooltip-max-width":p},children:`${St[m]}: ${t.id}`})},`aa-ui-${t.color}-${t.id}`):o.jsx("div",{"aria-hidden":"true",className:`${i["indicator-null"]} ${i.indicator}`,style:{"--color":t.color,backgroundColor:"transparent","--left":`calc(calc(${p} / 3) * -1)`,width:`calc(${p} / 3)`,height:`calc(${p} / 3)`}},`null-${t.color}-${t.id}`)})})})}),O&&o.jsx("div",{style:{backgroundColor:e.color,width:`${p}`,maxWidth:`${p}`,display:"flex",justifyContent:"center",alignItems:"center",padding:"0.5em 0.1em "},className:i["color-name"],children:o.jsx("span",{style:{color:e.luminance<.179?"white":"black",fontSize:`clamp(0.7rem, ${L.input}, 1.2rem)`,textAlign:"center"},children:e.color})}),I&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:i["color-edit-container"],children:o.jsx(so,{language:m,block:e,updateColor:it,width:p,hexToRGB:Re,rgbToHSL:Te,rgbToHex:ot,hslToRGB:X,fontSize:`clamp(0.75rem, ${L.input}, 1rem)`})}),o.jsx("button",{className:`tooltip-wrap small delete danger gray ${i.remove}`,onClick:()=>at(e.id),style:{margin:"0.8em auto",width:"calc(100% - 4px)",minWidth:"calc(100% - 4px)",fontSize:`clamp(0.75rem, ${L.input}, 2rem)`},children:Bt[m]})]})]})},`${e.color}-${e.id}`)})}),((ke=(Le=y[$])==null?void 0:Le.items)==null?void 0:ke.length)>0&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:i["width-wrap"],children:[o.jsx("label",{htmlFor:"color-block-width",children:Dt[m]}),o.jsx("input",{id:"color-block-width",type:"range",min:6,max:12,step:.5,value:P,onChange:e=>ce(Number(e.target.value))})]}),o.jsxs("div",{className:`${i["toggle-controls"]}`,children:[o.jsxs("div",{children:[o.jsx("strong",{children:Gt[m]}),o.jsx("button",{id:"toggle-controls",type:"button",onClick:()=>ge(!I),className:"gray small",children:I?Mt[m]:Wt[m]})]}),o.jsxs("div",{children:[o.jsx("strong",{children:Lt[m]}),o.jsx("button",{type:"button",onClick:()=>Y(!O),className:"gray small",children:O?kt[m]:zt[m]})]})]})]})]})};export{yo as default};
