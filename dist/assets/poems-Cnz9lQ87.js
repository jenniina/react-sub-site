import{r as i,j as e}from"./react-kX_YxI4E.js";import{L as g}from"./index-B4QZk_fU.js";import{a as f}from"./axios-CCb-kr4I.js";const T=({quote:t,language:u,url:r,title:d})=>{const{t:a}=i.useContext(g),[m,l]=i.useState(!1),n=i.useRef(null),c=()=>{var o,p;const x=`"${t.content}" - ${t.originator.name}`;if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(x).then(()=>{l(!0),setTimeout(()=>l(!1),3e3)},s=>{console.error("Failed to copy:",s)});else{const s=document.createElement("textarea");s.value=x,(o=n.current)==null||o.appendChild(s),s.focus(),s.select();try{document.execCommand("copy"),l(!0),setTimeout(()=>l(!1),3e3)}catch(h){console.error("Failed to copy:",h)}(p=n.current)==null||p.removeChild(s)}};return t.content===""?e.jsx(e.Fragment,{}):e.jsxs(e.Fragment,{children:[e.jsx("p",{ref:n,children:e.jsxs("i",{children:[e.jsxs("big",{style:{display:"inline-block",margin:"0 0 0.5em"},children:['"',t.content,'"']}),"— ",t.originator.name]})}),e.jsxs("div",{className:"flex gap",children:[e.jsx("button",{className:"small",style:{maxWidth:"max-content",marginLeft:"1em"},onClick:c,children:a(m?"CopiedToClipboard":"CopyToClipboard")}),d&&e.jsx("small",{children:r?e.jsx("a",{href:r,target:"_blank",rel:"noreferrer",children:d}):e.jsx(e.Fragment,{children:d})})]})]})},v=({poem:t,language:u})=>{const{t:r}=i.useContext(g),[d,a]=i.useState(!1),m=i.useRef(null),l=()=>{var c,x;const n=`${t.title} 

 ${t.lines.join(`
`)}

 - ${t.author}`;if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(n).then(()=>{a(!0),setTimeout(()=>a(!1),3e3)},o=>{console.error("Failed to copy:",o)});else{const o=document.createElement("textarea");o.value=n,(c=m.current)==null||c.appendChild(o),o.focus(),o.select();try{document.execCommand("copy"),a(!0),setTimeout(()=>a(!1),3e3)}catch(p){console.error("Failed to copy:",p)}(x=m.current)==null||x.removeChild(o)}};return!t||!t.lines||t.lines.length<1?e.jsx(e.Fragment,{}):e.jsxs(e.Fragment,{children:[e.jsx("p",{style:{margin:"0 0 0.5em 0"},children:t.title}),e.jsx("p",{ref:m,children:e.jsxs("i",{children:[e.jsx("big",{style:{display:"block",margin:"0 0 0.5em"},children:t.lines.map((n,c)=>e.jsxs(i.Fragment,{children:[n,t.lines.length===c+1?"":e.jsx("br",{})]},n))}),"— ",t.author]})}),e.jsx("div",{className:"flex gap",children:e.jsx("button",{className:"small",style:{maxWidth:"max-content",marginLeft:"1em"},onClick:l,children:r(d?"CopiedToClipboard":"CopyToClipboard")})})]})},C="https://poetrydb.org",F=async(t,u)=>{try{const r=await f.get(`${C}/random,linecount/1;${u}`);if(r.status===200&&r.data)return r.data;throw new Error("Failed to fetch poem.")}catch(r){return console.error("Error fetching poem:",r),[]}};export{v as P,T as Q,F as g};
