import{r as T,j as o}from"./react-A9DAvxly.js";import{K as mt,S as dt,f3 as vt,f4 as Rt,W as fe,bd as Le,c$ as jt,f5 as Nt,u as ye,bX as Tt,f6 as Et,f7 as It,f8 as St,f9 as Ut,fa as Ft,fb as Re,fc as Lt,fd as Dt,fe as Bt,ff as Mt,fg as kt,z as Gt,A as Wt,fh as Ot,fi as Vt,ap as Ht,fj as Pt,fk as Jt,fl as Xt,fm as zt,fn as Yt,fo as qt,fp as Kt,fq as Qt,fr as je,fs as Se,ft as at,d9 as Zt,fu as eo,fv as to,ax as oo,ay as ro,fw as so,fx as no,fy as lo,fz as ao,fA as Ne,bC as it,fB as io,Y as X}from"./index-DeT80EDC.js";import{a2 as ct,a3 as co,a4 as mo}from"./react-icons-BXtkaQB_.js";import"./hoist-non-react-statics-D5aJipOz.js";import"./react-dom-yh0erWL-.js";import"./scheduler-CzFDRTuY.js";import"./react-redux-CHm9GgGE.js";import"./react-is-DUDD-a5e.js";import"./use-sync-external-store-DEc9BFqZ.js";import"./@reduxjs-DhFEcpJw.js";import"./immer-C0GRqQ_d.js";import"./redux-CE3tqztX.js";import"./@babel-DF5_wy6Y.js";import"./redux-thunk-CY0Q9z1Q.js";import"./axios-CCb-kr4I.js";import"./react-router-dom-CYs6befe.js";import"./react-router-S1Hdk0kP.js";import"./@remix-run-DTnHqtaE.js";const uo="_light_xr4i7_39",po="_drag_xr4i7_221",ho="_overflow_xr4i7_235",Ao="_indicator_xr4i7_343",xo="_tooltip_xr4i7_343",go="_form_xr4i7_511",fo="_remove_xr4i7_539",$o="_inputs_xr4i7_569",c={"color-container":"_color-container_xr4i7_1",light:uo,"color-picker":"_color-picker_xr4i7_57","width-wrap":"_width-wrap_xr4i7_109","btn-wrap":"_btn-wrap_xr4i7_123","info-wrap":"_info-wrap_xr4i7_141","color-blocks":"_color-blocks_xr4i7_189",drag:po,overflow:ho,"block-wrap":"_block-wrap_xr4i7_243","color-wrap":"_color-wrap_xr4i7_261","color-block":"_color-block_xr4i7_189","compliance-indicators":"_compliance-indicators_xr4i7_321",indicator:Ao,tooltip:xo,"indicator-aaa":"_indicator-aaa_xr4i7_373","indicator-null":"_indicator-null_xr4i7_381","compliance-info":"_compliance-info_xr4i7_389","toggle-controls":"_toggle-controls_xr4i7_397","color-edit-container":"_color-edit-container_xr4i7_427","color-select":"_color-select_xr4i7_429","mode-container":"_mode-container_xr4i7_485",form:go,"color-format-submit":"_color-format-submit_xr4i7_537",remove:fo,"color-name":"_color-name_xr4i7_553",inputs:$o,"hex-input":"_hex-input_xr4i7_593"},Co=({language:m,block:A,fontSize:F,updateColor:E,width:S,hexToRGB:he,hslToRGB:z,rgbToHex:Y,rgbToHSL:j})=>{const L=mt(),le=/^hsl\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*\)$/i,ae=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i,W=/^#([0-9A-F]{3}){1,2}$/i,oe=[{value:"hsl",label:"HSL"},{value:"rgb",label:"RGB"},{value:"hex",label:"Hex"}],[N,$e]=T.useState(oe.find(a=>a.value===A.colorFormat)||oe[0]),[y,q]=T.useState(""),[O,re]=T.useState(0),[V,se]=T.useState(0),[D,H]=T.useState(0),[Z,p]=T.useState(0),[P,U]=T.useState(0),[ee,ie]=T.useState(0);T.useEffect(()=>{switch(A.colorFormat){case"hex":{q(A.color);const{r:a,g:h,b:f}=he(A.color);re(a),se(h),H(f);const{h:x,s:C,l:$}=j(a,h,f);p(x),U(C),ie($);break}case"rgb":{const a=A.color.match(ae);if(a){const h=Number(a[1]),f=Number(a[2]),x=Number(a[3]);re(h),se(f),H(x);const{h:C,s:$,l:B}=j(h,f,x);p(C),U($),ie(B)}break}case"hsl":{const a=A.color.match(le);if(a){const h=Number(a[1]),f=Number(a[2]),x=Number(a[3]);p(h),U(f),ie(x);const{r:C,g:$,b:B}=z(h,f,x);re(C),se($),H(B);const J=Y(C,$,B);q(J)}break}}},[]);const Te=a=>{try{let h;if(a==="hex")if(W.test(y)){h=y.toUpperCase(),E(A.id,h,"hex");const{r:f,g:x,b:C}=he(h);re(f),se(x),H(C);const{h:$,s:B,l:J}=j(f,x,C);p($),U(B),ie(J),E(A.id,y,"hex")}else throw new Error("Invalid Hex format.");else if(a==="rgb")if(O>=0&&O<=255&&V>=0&&V<=255&&D>=0&&D<=255){h=`rgb(${O}, ${V}, ${D})`,E(A.id,h,"rgb");const f=Y(O,V,D);q(f);const{h:x,s:C,l:$}=j(O,V,D);p(x),U(C),ie($),E(A.id,`rgb(${O}, ${V}, ${D})`,"rgb")}else throw new Error("Invalid RGB values.");else if(a==="hsl")if(Z>=0&&Z<=360&&P>=0&&P<=100&&ee>=0&&ee<=100){h=`hsl(${Z}, ${P}%, ${ee}%)`,E(A.id,h,"hsl");const{r:f,g:x,b:C}=z(Z,P,ee);re(f),se(x),H(C);const $=Y(f,x,C);q($),E(A.id,`hsl(${Z}, ${P}%, ${ee}%)`,"hsl")}else throw new Error("Invalid HSL values.");else throw new Error("Unsupported color format.")}catch(h){console.error(h.message),L(fe(Le[m]+" "+h.message,!0,4))}},Ce=a=>{a.preventDefault(),Te(N==null?void 0:N.value)},K=(a,h)=>{a==="h"&&p(h),a==="s"&&U(h),a==="l"&&ie(h);const f=a==="h"?h:Z,x=a==="s"?h:P,C=a==="l"?h:ee;if(f>=0&&f<=360&&x>=0&&x<=100&&C>=0&&C<=100){const{r:$,g:B,b:J}=z(f,x,C);re($),se(B),H(J),E(A.id,`hsl(${f}, ${x}%, ${C}%)`,"hsl"),q(Y($,B,J))}},Ae=(a,h)=>{a==="r"&&re(h),a==="g"&&se(h),a==="b"&&H(h);const f=a==="r"?h:O,x=a==="g"?h:V,C=a==="b"?h:D;if([f,x,C].every($=>$>=0&&$<=255)){const{h:$,s:B,l:J}=j(f,x,C);p($),U(B),ie(J),E(A.id,`rgb(${f}, ${x}, ${C})`,"rgb"),q(Y(f,x,C))}};return o.jsxs(o.Fragment,{children:[o.jsx(dt,{hideDelete:!0,id:"color-select",className:c["color-select"],language:m,instructions:vt[m],hide:!0,options:oe,value:N,onChange:a=>{if($e(a),(a==null?void 0:a.value)==="hex"){const h=Y(O,V,D);q(h),E(A.id,h,"hex")}else(a==null?void 0:a.value)==="rgb"?(re(O),se(V),H(D),E(A.id,`rgb(${O}, ${V}, ${D})`,"rgb")):(a==null?void 0:a.value)==="hsl"&&(p(Z),U(P),ie(ee),E(A.id,`hsl(${Z}, ${P}%, ${ee}%)`,"hsl"))}}),(N==null?void 0:N.value)==="hex"&&o.jsxs("form",{className:c.form,onSubmit:Ce,children:[o.jsx("div",{className:`${c.inputs} ${c["hex-input"]}`,children:o.jsxs("label",{children:[o.jsx("span",{children:"Hex: "}),o.jsx("input",{name:`hex-input-${A.id}`,type:"text",value:y,onChange:a=>q(a.target.value),className:c["color-input"],style:{maxWidth:`${S}`,fontSize:F},placeholder:"#FFFFFF"})]})}),o.jsx("button",{style:{minWidth:"calc(100% - 4px)",maxWidth:"calc(100% - 4px)",fontSize:F},type:"submit",className:`${c["color-format-submit"]} small gray`,children:Rt[m]})]}),(N==null?void 0:N.value)==="rgb"&&o.jsxs("form",{className:`${c.inputs} ${c["rgb-inputs"]}`,onSubmit:Ce,children:[o.jsxs("label",{children:[o.jsx("span",{children:"R: "}),o.jsx("input",{name:`r-input-${A.id}`,type:"number",value:O,onChange:a=>Ae("r",Number(a.target.value)),min:0,max:255,className:c["color-input"],style:{maxWidth:`${S}`,fontSize:F}})]}),o.jsxs("label",{children:[o.jsx("span",{children:"G: "}),o.jsx("input",{name:`g-input-${A.id}`,type:"number",value:V,onChange:a=>Ae("g",Number(a.target.value)),min:0,max:255,className:c["color-input"],style:{maxWidth:`${S}`,fontSize:F}})]}),o.jsxs("label",{children:[o.jsx("span",{children:"B: "}),o.jsx("input",{name:`b-input-${A.id}`,type:"number",value:D,onChange:a=>Ae("b",Number(a.target.value)),min:0,max:255,className:c["color-input"],style:{maxWidth:`${S}`,fontSize:F}})]})]}),(N==null?void 0:N.value)==="hsl"&&o.jsxs("form",{className:`${c.inputs} ${c["hsl-inputs"]}`,onSubmit:Ce,children:[o.jsxs("label",{children:[o.jsx("span",{children:"H: "}),o.jsx("input",{name:`h-input-${A.id}`,type:"number",value:Z,onChange:a=>K("h",Number(a.target.value)),min:0,max:360,className:c["color-input"],style:{maxWidth:`${S}`,fontSize:F}})," "]}),o.jsxs("label",{children:[o.jsx("span",{children:"S: "}),o.jsx("input",{name:`s-input-${A.id}`,type:"number",value:P,onChange:a=>K("s",Number(a.target.value)),min:0,max:100,className:c["color-input"],style:{maxWidth:`${S}`,fontSize:F}})]}),o.jsxs("label",{children:[o.jsx("span",{children:"L: "}),o.jsx("input",{name:`l-input-${A.id}`,type:"number",value:ee,onChange:a=>K("l",Number(a.target.value)),min:0,max:100,className:c["color-input"],style:{maxWidth:`${S}`,fontSize:F}})]})]})]})};function Be(m,A){return Math.random()*(A-m)+m}const ge=ao(5),Ue=(m,A)=>{const F=j=>{let L,le,ae;if(j.colorFormat==="hex")({r:L,g:le,b:ae}=je(j.color));else if(j.colorFormat==="rgb"){const W=j.color.match(/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i);if(W)L=Number(W[1]),le=Number(W[2]),ae=Number(W[3]);else throw new Error("Invalid RGB format")}else if(j.colorFormat==="hsl"){const W=j.color.match(/^hsl\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*\)$/i);if(W){const oe=Number(W[1]),N=Number(W[2]),$e=Number(W[3]);({r:L,g:le,b:ae}=Re(oe,N,$e))}else throw new Error("Invalid HSL format")}else throw new Error("Unsupported color format");return{r:L,g:le,b:ae}},E=F(m),S=F(A),he=Ne(E.r,E.g,E.b),z=Ne(S.r,S.g,S.b),Y=io(he,z);return{isAAARegularTextCompliant:Y>=7,isAARegularTextCompliant:Y>=4.5,isAAUIComponentsCompliant:Y>=3}},b="colors",ve="hsl",Fe=[{id:1,color:"hsl(200, 50%, 10%)",luminance:.011540526030345211,status:b,colorFormat:ve,compliantColors:{AAA_RegularText:[4,5],AA_UIComponents:[3,4,5],AA_RegularText:[3,4,5]}},{id:2,color:"hsl(200, 50%, 35%)",luminance:.12179747967530058,status:b,colorFormat:ve,compliantColors:{AAA_RegularText:[],AA_UIComponents:[4,5],AA_RegularText:[5]}},{id:3,color:"hsl(200, 50%, 55%)",luminance:.3071249100459835,status:b,colorFormat:ve,compliantColors:{AAA_RegularText:[],AA_UIComponents:[1],AA_RegularText:[1]}},{id:4,color:"hsl(200, 50%, 75%)",luminance:.5493970089199802,status:b,colorFormat:ve,compliantColors:{AAA_RegularText:[1],AA_UIComponents:[1,2],AA_RegularText:[1]}},{id:5,color:"hsl(200, 50%, 90%)",luminance:.800081557105977,status:b,colorFormat:ve,compliantColors:{AAA_RegularText:[1],AA_UIComponents:[1,2],AA_RegularText:[1,2]}}],ko=({language:m})=>{var Oe,Ve,He,Pe,Je;const A=mt(),F=jt(),E=Nt(),[S,he]=T.useState(!0),[z,Y]=ye("Jenniina-showColorNames",!0),[j,L,le]=ye("Jenniina-colorsAccessibility",Fe),[ae,W]=ye("Jenniina-currentColor","#7D7D7D"),[oe,N]=ye("Jenniina-idCounter",1),{isDragging:$e,listItemsByStatus:y,handleDragging:q,handleUpdate:O}=Tt(j,[b]),re=T.useRef(0),[V,se]=T.useState(0),D=8,[H,Z]=ye("Jenniina-color-block-width",D),p=`${H}em`,P=H/D,U={tooltip:`${.7*P}em`,colorName:`${.7*P}em`,input:`${.8*P}em`},ee=(e,r)=>{const n=Ue(e,r);return n.isAAARegularTextCompliant&&(e.compliantColors.AAA_RegularText.push(r.id),r.compliantColors.AAA_RegularText.push(e.id)),n.isAARegularTextCompliant&&(e.compliantColors.AA_RegularText.push(r.id),r.compliantColors.AA_RegularText.push(e.id)),n.isAAUIComponentsCompliant&&(e.compliantColors.AA_UIComponents.push(r.id),r.compliantColors.AA_UIComponents.push(e.id)),e.compliantColors.AAA_RegularText=Array.from(new Set(e.compliantColors.AAA_RegularText)),e.compliantColors.AA_RegularText=Array.from(new Set(e.compliantColors.AA_RegularText)),e.compliantColors.AA_UIComponents=Array.from(new Set(e.compliantColors.AA_UIComponents)),r.compliantColors.AAA_RegularText=Array.from(new Set(r.compliantColors.AAA_RegularText)),r.compliantColors.AA_RegularText=Array.from(new Set(r.compliantColors.AA_RegularText)),r.compliantColors.AA_UIComponents=Array.from(new Set(r.compliantColors.AA_UIComponents)),{updatedColor1:e,updatedColor2:r}},[ie,Te]=T.useState(!1),Ce=500;T.useEffect(()=>{let e;return j.length<1?e=setTimeout(()=>{Te(!0)},Ce):Te(!1),()=>{e&&clearTimeout(e)}},[j.length]);const K=()=>{const e=Math.ceil(Be(30,100));return X(30,e,100)},Ae=()=>{const e=Math.ceil(Be(5,90));return X(5,e,90)},a=(e="array")=>{if(e==="hsl"){const r=Math.floor(Math.random()*360),n=K(),t=Ae();return`hsl(${r}, ${n}%, ${t}%)`}else{const r=Math.floor(Math.random()*360),n=K(),t=Ae();return[r,n,t]}},h=[{value:"analogous",label:Et[m]},{value:"complementary",label:It[m]},{value:"monochromatic",label:St[m]},{value:"triad",label:Ut[m]},{value:"tetrad",label:Ft[m]}];let f=Math.floor(Math.random()*h.length);const[x,C]=T.useState(h[f]),$=Math.round(Be(15,35)),B=(e,r)=>{const n=[];switch(e){case"analogous":for(let s=1;s<=4;s++){let l=(r.l-$*s+90)%90;l=X(0,l,90);const u=[(r.h+30*s)%360,K(),l];n.push(u)}break;case"complementary":const t=[(r.h+180)%360,r.s,r.l],i=Re(...t);n.push([i.r,i.g,i.b]);for(let s=1;s<=3;s++){let l=(r.l-$*s+90)%90;l=X(0,l,90);const u=[(t[0]+30*s)%360,K(),l];n.push(u)}break;case"triad":for(let s=1;s<=2;s++){let l=(r.l-$*s+90)%90;l=X(0,l,90);const u=[(r.h+120*s)%360,K(),l];n.push(u)}break;case"monochromatic":for(let s=1;s<=4;s++){let l=(r.l-$*s+90)%90;l=X(0,l,90);const u=[r.h,K(),l];n.push(u)}break;case"tetrad":for(let s=1;s<=3;s++){let l=(r.l-$*s+90)%90;l=X(0,l,90);const u=[(r.h+90*s)%360,K(),l];n.push(u)}break;default:for(let s=1;s<=4;s++){let l=(r.l-$*s+90)%90;l=X(0,l,90);const u=[(r.h+30*s)%360,K(),l];n.push(u)}break}return n},[J,Me]=T.useState(!1),ut=e=>{const r=[];if(e.length===0||J){const n=a("array");Array.isArray(n)&&r.push(n);const t=B(x==null?void 0:x.value,{h:n[0],s:n[1],l:n[2]});return r.push(...t),r}else{const n=e[e.length-1];let t;try{if(n.colorFormat==="hex"){const s=je(n.color);t=Se(s.r,s.g,s.b)}else if(n.colorFormat==="rgb"){const s=n.color.match(/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i);if(s){const l=Number(s[1]),u=Number(s[2]),g=Number(s[3]);t=Se(l,u,g)}else throw new Error("Invalid RGB format")}else if(n.colorFormat==="hsl"){const s=n.color.match(/^hsl\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*\)$/i);if(s){const l=Number(s[1]),u=Number(s[2]),g=Number(s[3]);t={h:l,s:u,l:g}}else throw new Error("Invalid HSL format")}else throw new Error("Unsupported color format");const i=B(x==null?void 0:x.value,t);r.push(...i.slice(0,2))}catch(i){console.error("Error generating new colors:",i);for(let s=0;s<2;s++){const l=a("array");Array.isArray(l)&&r.push(l)}}}return!J&&e.length>0?r.slice(0,2):r},ke=()=>{le(),L([]),N(1)},pt=()=>{le(),L(Fe),N(Fe.length+1)},ht=()=>{Me(!0),ke()};T.useEffect(()=>{J&&j.length===0&&Ge()},[J,j]);const Ge=()=>{const r=ut(j).map((t,i)=>{const s=Re(t[0],t[1],t[2]),l=Ne(s.r,s.g,s.b);return{id:oe+i,color:`hsl(${t[0]}, ${t[1]}%, ${t[2]}%)`,luminance:l,status:b,colorFormat:"hsl",compliantColors:{AA_RegularText:[],AAA_RegularText:[],AA_UIComponents:[]}}});let n=[...j,...r];n=n.map(t=>(r.forEach(i=>{const{updatedColor1:s,updatedColor2:l}=ee(t,i);t=s,i=l}),t)),L(n),N(oe+r.length),Me(!1)},ue=(e,r)=>{if(r==="hex"){if(/^#([A-Fa-f0-9]{6})$/.test(e))return e.toUpperCase();throw new Error(`Invalid HEX color format: ${e}`)}else if(r==="rgb"){const n=e.match(/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i);if(n){const t=Number(n[1]),i=Number(n[2]),s=Number(n[3]);if([t,i,s].every(l=>l>=0&&l<=255))return at(t,i,s);throw new Error(`RGB values out of range in color: ${e}`)}else throw new Error(`Invalid RGB color format: ${e}`)}else if(r==="hsl"){const n=e.match(/^hsl\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*\)$/i);if(n){let t=X(0,Number(n[1]),360),i=X(0,Number(n[2]),100),s=X(0,Number(n[3]),100);return t=(t+360)%360,i=X(0,i,100),s=X(0,s,100),`hsl(${t}, ${i}%, ${s}%)`}else throw new Error(`Invalid HSL color format: ${e}`)}else throw new Error(`Unsupported color format: ${r}`)},At={AA_RegularText:({xPosition:e,yIndicator:r,blockWidth:n,indicatorSize:t,otherColor:i,blockColor:s,colorFormatBlock:l,colorFormatOther:u})=>{const g=ue(s,l),_=ue(i,u);return`
 <circle
  cx="${e+n/2}"
  cy="${r+t/2}"
  r="${t*.32}"
  fill="${g}"
  stroke="${_}"
  stroke-width="${t*.1}"
/>
`},AA_UIComponents:({xPosition:e,yIndicator:r,blockWidth:n,indicatorSize:t,otherColor:i,blockColor:s,colorFormatBlock:l,colorFormatOther:u})=>{const g=ue(s,l),_=ue(i,u);return`
    <rect
  x="${e+n/2-t*.2}"
  y="${r+t/2-t*.15}"
  width="${t*.3}"
  height="${t*.3}"
  fill="${g}"
  stroke="${_}"
  stroke-width="${t*.1}"
/>
`},AAA_RegularText:({xPosition:e,yIndicator:r,blockWidth:n,indicatorSize:t,otherColor:i,blockColor:s,colorFormatBlock:l,colorFormatOther:u})=>{const g=ue(i,u);return`
<circle
  cx="${e+n/2}"
  cy="${r+t/2}"
  r="${t/2}"
  fill="${g}"
  stroke="none"
/>
`}},We=()=>{var Xe,ze,Ye,qe,Ke,Qe,Ze,et,tt;const e=H*20,r=e,n=r/3,t=n/1.5,i=e/4,s=n/20,l=r/10,g=((ze=(Xe=y[b])==null?void 0:Xe.items)==null?void 0:ze.length)*(n+t)-t+i*2,_=z?l+i:0,Q=((Ye=y[b])==null?void 0:Ye.items.length)*r,te=g+_*1.6,d=(Ke=(qe=y[b])==null?void 0:qe.items)==null?void 0:Ke.map((G,_e)=>{const xe=_e*r;let de;try{de=ue(G.color,G.colorFormat)}catch(be){console.error(be),A(fe(`${Le[m]}: ${be.message}`,!0,4)),de="#000000"}const Ee=`
        <rect
          x="${xe}"
          y="0"
          width="${r}"
          height="${g}"
          fill="${de}"
          stroke="none"
        />
      `,Ie=z?`
        <!-- Text Background -->
        <rect
          x="${xe}"
          y="${g-.5}"
          width="${r}"
          height="${_}"
          fill="${de}"
          stroke="none"
        />
        <!-- Color Text Label -->
        <text
          x="${xe+r/2}"
          y="${g+_/2+l/3}"
          font-size="${l}"
          font-family="Arial"
          text-anchor="middle"
          dominant-baseline="middle"
          fill="${G.luminance>.179?"#000000":"#FFFFFF"}"
          stroke="none"
        >
          ${G.color}
        </text>
      `:"";return`
        <g>
          <!-- Color Block -->
          ${Ee}
          <!-- Color Text Label -->
          ${Ie}
        </g>
      `}).join(""),v=(Ze=(Qe=y[b])==null?void 0:Qe.items)==null?void 0:Ze.map((G,_e)=>{const de=i+_e*(n+t)+(n-s)/2,Ee=ue(G.color,G.colorFormat);return`
        <rect
          x="0"
          y="${de}"
          width="${Q}"
          height="${s}"
          fill="${Ee}"
          stroke="none"
        />
      `}).join(""),R=(tt=(et=y[b])==null?void 0:et.items)==null?void 0:tt.map((G,_e)=>{var Ie,be;const xe=_e*r,de=ne=>{var we,ot,rt,st,nt,lt;return(ot=(we=G.compliantColors)==null?void 0:we.AAA_RegularText)!=null&&ot.includes(ne)?"AAA_RegularText":(st=(rt=G.compliantColors)==null?void 0:rt.AA_RegularText)!=null&&st.includes(ne)?"AA_RegularText":(lt=(nt=G.compliantColors)==null?void 0:nt.AA_UIComponents)!=null&&lt.includes(ne)?"AA_UIComponents":null};return`
        <g>
          <!-- Compliance Indicators -->
          ${(be=(Ie=y[b])==null?void 0:Ie.items)==null?void 0:be.filter(ne=>ne.id!==G.id).map(ne=>{const we=de(ne.id);return we?At[we]({xPosition:xe,yIndicator:i+(ne.id-1)*(n+t),blockWidth:r,indicatorSize:n,otherColor:ne.color,blockColor:G.color,colorFormatBlock:G.colorFormat,colorFormatOther:ne.colorFormat}):""}).join("")}
        </g>
      `}).join(""),w=10,I=Q-w,M=te-w*1.5,k="https://colors.jenniina.fi",pe=`
      <a href="${k}" target="_blank" rel="noopener noreferrer">
        <text
          x="${I}"
          y="${M}"
          font-size="${l}"
          font-family="Arial"
          text-anchor="end"
          fill="#000000"
          stroke="none"
        >
          ${k}
        </text>
      </a>
    `,me=`
      <a href="${k}" target="_blank" rel="noopener noreferrer">
        <text
          x="${w}"
          y="${M}"
          font-size="${l}"
          font-family="Arial"
          text-anchor="start"
          fill="#FFFFFF"
          stroke="none"
        >
          ${k}
        </text>
      </a>
    `;return{svgContent:`
    <svg xmlns="http://www.w3.org/2000/svg" width="${Q}" height="${te}">
      <!-- Color Blocks -->
      <g>
        ${d}
      </g>
      <!-- Lines -->
      <g>
        ${v}
      </g>
      <!-- Compliance Indicators -->
      <g>
        ${R}
      </g>
      <!-- Source Link -->
      <g>
        ${me}
      </g>
      <g>
        ${pe}
      </g>
    </svg>
  `,svgWidth:Q,svgHeight:te}},xt=()=>{const{svgContent:e}=We(),r=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),n=URL.createObjectURL(r),t=document.createElement("a");t.href=n,t.download="color-blocks.svg",document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(n),A(fe(it[m],!1,5))},gt=()=>{const{svgContent:e,svgWidth:r,svgHeight:n}=We(),t=new Image;t.width=r,t.height=n;const i=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),s=URL.createObjectURL(i);t.onload=()=>{const l=document.createElement("canvas");l.width=r,l.height=n;const u=l.getContext("2d");u==null||u.drawImage(t,0,0);const g=l.toDataURL("image/png"),_=document.createElement("a");_.href=g,_.download="color-blocks.png",document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(s),A(fe(it[m],!1,5))},t.onerror=l=>{console.error("Error loading SVG into image for PNG conversion:",l),URL.revokeObjectURL(s),A(fe(Le[m],!0,4))},t.src=s},ft=()=>{var _,Q,te;const{r:e,g:r,b:n}=je(ae),{h:t,s:i,l:s}=Se(e,r,n),l=Ne(e,r,n),u={id:oe,color:`hsl(${t}, ${i}%, ${s}%)`,luminance:l,status:b,colorFormat:"hsl",compliantColors:{AA_RegularText:[],AAA_RegularText:[],AA_UIComponents:[]}};(Q=(_=y[b])==null?void 0:_.items)==null||Q.forEach(d=>{var R,w,I,M,k,pe,me,ce;const v=Ue(u,d);v.isAAARegularTextCompliant?((R=u.compliantColors)==null||R.AAA_RegularText.push(d.id),(w=d.compliantColors)==null||w.AAA_RegularText.push(u.id)):v.isAARegularTextCompliant?((I=u.compliantColors)==null||I.AA_RegularText.push(d.id),(M=d.compliantColors)==null||M.AA_RegularText.push(u.id)):v.isAAUIComponentsCompliant&&((pe=(k=u.compliantColors)==null?void 0:k.AA_UIComponents)==null||pe.push(d.id),(ce=(me=d.compliantColors)==null?void 0:me.AA_UIComponents)==null||ce.push(u.id))});const g=(te=y[b])==null?void 0:te.items.map(d=>{var v,R,w;return{...d,compliantColors:{AAA_RegularText:Array.from(new Set((v=d.compliantColors)==null?void 0:v.AAA_RegularText)),AA_RegularText:Array.from(new Set((R=d.compliantColors)==null?void 0:R.AA_RegularText)),AA_UIComponents:Array.from(new Set((w=d.compliantColors)==null?void 0:w.AA_UIComponents))}}});N(oe+1),L([...g,u])},$t=e=>{var n;const r=(n=y[b])==null?void 0:n.items.filter(t=>t.id!==e).map(t=>{var i,s,l,u;return{...t,compliantColors:{AAA_RegularText:(i=t.compliantColors)==null?void 0:i.AAA_RegularText.filter(g=>g!==e),AA_RegularText:(s=t.compliantColors)==null?void 0:s.AA_RegularText.filter(g=>g!==e),AA_UIComponents:(u=(l=t.compliantColors)==null?void 0:l.AA_UIComponents)==null?void 0:u.filter(g=>g!==e)}}});L(r)},Ct=(e,r,n)=>{var t;try{let i,s,l,u;if(n==="hsl"){const d=r.match(/^hsl\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*\)$/i);if(!d)throw new Error("Invalid HSL format");const v=Number(d[1]),R=Number(d[2]),w=Number(d[3]);if(v<0||v>360||R<0||R>100||w<0||w>100)throw new Error("HSL values out of range");i=`hsl(${v}, ${R}%, ${w}%)`;const I=Re(v,R,w);s=I.r,l=I.g,u=I.b}else if(n==="rgb"){const d=r.match(/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i);if(!d)throw new Error("Invalid RGB format");const v=Number(d[1]),R=Number(d[2]),w=Number(d[3]);if([v,R,w].some(I=>I<0||I>255))throw new Error("RGB values must be between 0 and 255");i=`rgb(${v}, ${R}, ${w})`,s=v,l=R,u=w}else if(n==="hex"){if(!/^#([0-9A-F]{3}){1,2}$/i.test(r))throw new Error("Invalid Hex format");i=r.toUpperCase();const d=je(i);s=d.r,l=d.g,u=d.b}else throw new Error("Unsupported color format");const g=Ne(s,l,u),_=(t=y[b])==null?void 0:t.items.map(d=>{var v,R,w,I,M,k,pe;if(d.id===e)return{...d,color:i,colorFormat:n,luminance:g,compliantColors:{AAA_RegularText:[],AA_RegularText:[],AA_UIComponents:[]}};{const me=Ue(d,{id:e,color:i,colorFormat:n,luminance:g,status:d.status,compliantColors:{AAA_RegularText:[],AA_RegularText:[],AA_UIComponents:[]}});return{...d,compliantColors:{AAA_RegularText:me.isAAARegularTextCompliant?[...new Set([...(v=d.compliantColors)==null?void 0:v.AAA_RegularText,e])]:(R=d.compliantColors)==null?void 0:R.AAA_RegularText.filter(ce=>ce!==e),AA_RegularText:me.isAARegularTextCompliant?[...new Set([...(w=d.compliantColors)==null?void 0:w.AA_RegularText,e])]:(I=d.compliantColors)==null?void 0:I.AA_RegularText.filter(ce=>ce!==e),AA_UIComponents:me.isAAUIComponentsCompliant?[...new Set([...(M=d.compliantColors)==null?void 0:M.AA_UIComponents,e])]:(pe=(k=d.compliantColors)==null?void 0:k.AA_UIComponents)==null?void 0:pe.filter(ce=>ce!==e)}}}}),Q=(d,v)=>{let R=[],w=[],I=[];return v.forEach(M=>{if(M.id===d.id)return;const k=Ue(d,M);k.isAAARegularTextCompliant&&R.push(M.id),k.isAARegularTextCompliant&&I.push(M.id),k.isAAUIComponentsCompliant&&w.push(M.id)}),{AAA_RegularText:Array.from(new Set(R)),AA_RegularText:Array.from(new Set(I)),AA_UIComponents:Array.from(new Set(w))}},te=_.findIndex(d=>d.id===e);if(te!==-1){const d=Q(_[te],_);_[te]={..._[te],compliantColors:d}}L([..._])}catch(i){console.error("Error updating color:",i),A(fe(`${Le[m]}: ${i.message}`,!0,4))}},_t=(e,r)=>{e.dataTransfer.setData("text/plain",JSON.stringify({type:"item",id:r}))},bt=(e,r)=>{e.preventDefault(),se(r),re.current=r},wt=e=>{e.preventDefault(),q(!0)},yt=e=>{const r=JSON.parse(e.dataTransfer.getData("text/plain"));r.type==="item"&&(O(r.id,b,V),q(!1))};T.useEffect(()=>{var e,r;(!((e=y[b])!=null&&e.items)||((r=y[b])==null?void 0:r.items.length)<1)&&L(Fe)},[]);const De=.04;return o.jsxs("div",{id:c["color-container"],className:`${c["color-container"]} ${F?c.light:""}`,style:{"--font-size":U.input},children:[o.jsx("div",{id:"info",className:c["info-wrap"],children:o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx("div",{style:{display:"inline-block",backgroundColor:"var(--color-primary-20)",borderRadius:"50%",width:"2em",height:"2em"}}),o.jsx("span",{children:Lt[m]})]}),o.jsxs("li",{children:[o.jsx("div",{style:{display:"inline-block",backgroundColor:"transparent",outline:"0.3em solid var(--color-primary-20)",outlineOffset:"-0.3em",borderRadius:"50%",width:"1.7em",height:"1.7em",margin:"0 0.2em 0 0.2em "}}),o.jsx("span",{children:Dt[m]})]}),o.jsxs("li",{children:[o.jsx("div",{style:{display:"inline-block",backgroundColor:"transparent",outline:"0.3em solid var(--color-primary-20)",outlineOffset:"-0.26em",borderRadius:"0",width:"0.9em",height:"0.9em",margin:"0 0.65em 0 0.65em"}}),o.jsx("span",{children:Bt[m]})]})]})}),o.jsxs("div",{className:c["btn-wrap"],children:[((Ve=(Oe=y[b])==null?void 0:Oe.items)==null?void 0:Ve.length)>0&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{type:"button",onClick:gt,className:"gray small",children:[Mt[m],"  ",o.jsx(ct,{})]}),o.jsxs("button",{type:"button",onClick:xt,className:"gray small",children:[kt[m],"  ",o.jsx(ct,{})]})]}),o.jsx("button",{onClick:E,className:"gray small",children:F?o.jsxs(o.Fragment,{children:[Gt[m],"  ",o.jsx(co,{})]}):o.jsxs(o.Fragment,{children:[Wt[m],"  ",o.jsx(mo,{})," "]})})]}),o.jsxs("div",{className:c["color-picker"],children:[o.jsxs("label",{htmlFor:"color-input",className:" ",children:[Ot[m],":"]}),o.jsx("input",{id:"color-input",type:"color",value:ae,onChange:e=>W(e.target.value)}),o.jsx("button",{className:"gray small",type:"button",onClick:ft,children:Vt[m]}),o.jsx("button",{className:"gray small",type:"button",onClick:pt,children:Ht[m]}),o.jsx("button",{className:"gray small",type:"button",onClick:ke,children:Pt[m]}),o.jsxs("div",{className:`${c["color-edit-container"]} ${c["mode-container"]}`,children:[o.jsx(dt,{options:h,value:x,onChange:e=>C(e),id:"color-mode",instructions:Jt[m],className:`${c["color-select"]}`,hide:!0,hideDelete:!0,tooltip:!0,y:"above narrow2"}),o.jsxs("button",{className:"gray small tooltip-wrap",type:"button",onClick:Ge,children:[Xt[m],o.jsx("span",{className:"tooltip above narrow2",children:zt[m]})]}),o.jsx("button",{className:"gray small",type:"button",onClick:ht,children:Yt[m]})]})]}),o.jsx("div",{id:"color-blocks",className:`${c["color-blocks"]} ${!z||!S?c.overflow:""} ${$e?c.drag:""}`,children:(He=y[b])==null?void 0:He.items.map(e=>{var r,n;return o.jsx("ul",{className:c["block-wrap"],onDrop:yt,children:o.jsxs("li",{className:c["color-wrap"],title:`ID: ${e.id}`,"aria-label":`ID: ${e.id}`,style:{width:`${p}`,maxWidth:`${p}`},children:[o.jsx("ul",{children:o.jsx("li",{draggable:"true",onDragStart:t=>_t(t,e.id),onDragEnter:t=>bt(t,e.id),onDragOver:t=>wt(t),onDragEnd:()=>q(!1),"data-identity":e.id,className:c["color-block"],style:{"--color":e.color,backgroundColor:e.color,width:`${p}`,maxWidth:`${p}`,height:`calc(calc(${p} * 0.6) * ${(r=y[b])==null?void 0:r.items.length})`},children:o.jsx("div",{className:c["compliance-indicators"],style:{gap:`calc(${p} / 4)`,"--width-full":`${p}`},children:(n=y[b])==null?void 0:n.items.map(t=>{var s,l,u,g,_,Q;if(t.id===e.id)return o.jsx("div",{className:`${c["indicator-null"]} ${c.indicator}`,style:{"--color":t.color,"--width":`calc(${p} / 3)`,"--left":`calc(calc(${p} / 3) * -1)`,backgroundColor:"transparent",width:`calc(${p} / 3)`,height:`calc(${p} / 3)`}},`none-${t.color}-${t.id}`);let i=null;return(l=(s=e.compliantColors)==null?void 0:s.AAA_RegularText)!=null&&l.includes(t.id)?i="AAA_RegularText":(g=(u=e.compliantColors)==null?void 0:u.AA_RegularText)!=null&&g.includes(t.id)?i="AA_RegularText":(Q=(_=e.compliantColors)==null?void 0:_.AA_UIComponents)!=null&&Q.includes(t.id)&&(i="AA_UIComponents"),i==="AAA_RegularText"?o.jsx("div",{tabIndex:0,className:`${c["indicator-aaa"]} ${c.indicator} tooltip-wrap`,style:{"--color":t.color,backgroundColor:t.color,"--left":`calc(calc(${p} / 3) * -1)`,width:`calc(${p} / 3)`,height:`calc(${p} / 3)`},"aria-labelledby":`span-${t.id}-${e.id}-${ge}`,children:o.jsx("span",{id:`span-${t.id}-${e.id}-${ge}`,className:`tooltip below narrow3 ${c.tooltip}`,style:{fontSize:`clamp(0.7rem, ${U.input}, 0.9rem)`,"--tooltip-max-width":p},children:`${qt[m]}: ${t.id}`})},`aaa-${t.color}-${t.id}`):i==="AA_RegularText"?o.jsx("div",{tabIndex:0,className:`${c["indicator-aa"]} ${c.indicator} tooltip-wrap`,style:{"--color":t.color,backgroundColor:e.color,outline:`calc(${p} * ${De*1.1}) solid ${t.color}`,outlineOffset:`calc(${p} * -0.013)`,"--left":`calc(calc(${p} / 5) * -2)`,width:`calc(${p} / 5)`,height:`calc(${p} / 5)`,margin:`calc(${p} / 15)`,borderRadius:"50%"},"aria-labelledby":`span-${t.id}-${e.id}-${ge}`,children:o.jsx("span",{id:`span-${t.id}-${e.id}-${ge}`,className:"tooltip below narrow3",style:{fontSize:`clamp(0.7rem, ${U.input}, 0.9rem)`,"--tooltip-max-width":p},children:`${Kt[m]}: ${t.id}`})},`aa-${t.color}-${t.id}`):i==="AA_UIComponents"?o.jsx("div",{tabIndex:0,className:`${c["indicator-aa-ui"]} ${c.indicator} tooltip-wrap`,style:{"--color":t.color,"--left":`calc(calc(${p} / 7) * -3)`,backgroundColor:e.color,outline:`calc(${p} * ${De}) solid ${t.color}`,outlineOffset:`calc(${p} * ${De} * -1)`,width:`calc(${p} / 7)`,height:`calc(${p} / 7)`,margin:`calc(${p} / 10.5)`},"aria-labelledby":`span-ui-${t.id}-${e.id}-${ge}`,children:o.jsx("span",{id:`span-ui-${t.id}-${e.id}-${ge}`,className:`tooltip below narrow3 ${c.tooltip}`,style:{fontSize:`clamp(0.7rem, ${U.input}, 0.9rem)`,"--tooltip-max-width":p},children:`${Qt[m]}: ${t.id}`})},`aa-ui-${t.color}-${t.id}`):o.jsx("div",{"aria-hidden":"true",className:`${c["indicator-null"]} ${c.indicator}`,style:{"--color":t.color,backgroundColor:"transparent","--left":`calc(calc(${p} / 3) * -1)`,width:`calc(${p} / 3)`,height:`calc(${p} / 3)`}},`null-${t.color}-${t.id}`)})})})}),z&&o.jsx("div",{style:{backgroundColor:e.color,width:`${p}`,maxWidth:`${p}`,display:"flex",justifyContent:"center",alignItems:"center",padding:"0.5em 0.1em "},className:c["color-name"],children:o.jsx("span",{style:{color:e.luminance<.179?"white":"black",fontSize:`clamp(0.7rem, ${U.input}, 1.2rem)`,textAlign:"center"},children:e.color})}),S&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:c["color-edit-container"],children:o.jsx(Co,{language:m,block:e,updateColor:Ct,width:p,hexToRGB:je,rgbToHSL:Se,rgbToHex:at,hslToRGB:Re,fontSize:`clamp(0.75rem, ${U.input}, 1rem)`})}),o.jsx("button",{className:`tooltip-wrap small delete danger gray ${c.remove}`,onClick:()=>$t(e.id),style:{margin:"0.8em auto",width:"calc(100% - 4px)",minWidth:"calc(100% - 4px)",fontSize:`clamp(0.75rem, ${U.input}, 2rem)`},children:Zt[m]})]})]})},`${e.color}-${e.id}`)})}),((Je=(Pe=y[b])==null?void 0:Pe.items)==null?void 0:Je.length)>0&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:c["width-wrap"],children:[o.jsx("label",{htmlFor:"color-block-width",children:eo[m]}),o.jsx("input",{id:"color-block-width",type:"range",min:6,max:12,step:.5,value:H,onChange:e=>Z(Number(e.target.value))})]}),o.jsxs("div",{className:`${c["toggle-controls"]}`,children:[o.jsxs("div",{children:[o.jsx("strong",{children:to[m]}),o.jsx("button",{id:"toggle-controls",type:"button",onClick:()=>he(!S),className:"gray small",children:S?oo[m]:ro[m]})]}),o.jsxs("div",{children:[o.jsx("strong",{children:so[m]}),o.jsx("button",{type:"button",onClick:()=>Y(!z),className:"gray small",children:z?no[m]:lo[m]})]})]})]})]})};export{ko as default};
