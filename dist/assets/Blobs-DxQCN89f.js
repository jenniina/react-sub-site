import{j as r,X as ze,Y as $e,Z as $o,_ as lt,r as a,$ as ko,a0 as wo,J as ke,a1 as Eo,a2 as jo,a3 as Bo,a4 as No,a5 as So,a6 as Co,a7 as Lo,a8 as Do,K as Po,a9 as tr,aa as To,ab as rr,ac as Mo,V as E,ad as or,ae as Ue,af as Ao,ag as Ro,ah as Io,ai as Fo,aj as Oo,ak as Vo,al as Ho,am as zo,an as Uo,ao as Yo,ap as Wo,aq as Jo,ar as _o,as as Go,at as Xo,au as qo,av as Zo,aw as Qo,ax as Ko,ay as es,az as ts,aA as sr,aB as ar,aC as rs,aD as os,aE as ss,aF as as,aG as ns,aH as ls,aI as cs,aJ as is,aK as ds,aL as us,aM as nr,aN as lr,aO as ms,aP as cr,aQ as hs,aR as fs,aS as bs,aT as ys,aU as ps,aV as vs,aW as xs,aX as gs,aY as $s,aZ as ks,a_ as ws,a$ as Es,b0 as js,b1 as Bs,b2 as Ns,b3 as Ss,b4 as Ye,b5 as Cs,b6 as ir,b7 as Ls,b8 as Ds,b9 as Ps,ba as Ts,bb as Ms,bc as As,bd as Rs,be as Is,bf as dr,bg as ur,bh as K,bi as Fs,bj as Os,bk as Vs,bl as Hs,bm as zs,bn as Us,bo as Ys,bp as mr,bq as hr,br as fr,bs as Ws,bt as br,bu as yr,bv as Js,bw as _s,bx as Gs,by as Xs,bz as qs,bA as Zs,bB as Qs,bC as Ks,bD as ea,bE as ta,bF as ra,bG as oa,bH as pr,bI as sa,bJ as aa,bK as na,bL as la,bM as ca,bN as ia,bO as da,bP as ua,bQ as ma,bR as ha,bS as fa,bT as ba}from"./index-DmCUPrzn.js";function ya(e,t,w){return Math.min(Math.max(t,e),w)}const pa=({d:e,layer:t,language:w,item:i,index:$,start:p,movement:P,stopMovementCheck:O,stopMoving:x,wheel:v,focused:k,blurred:re,selectedvalue0:u,setFocusedBlob:ee,dragUlRef:C})=>{const te=e===0?33:ya(22,i.i*2.6,50),oe={background:`${i.background}`,display:"block",left:`${i.x}`,top:`${i.y}`,zIndex:`${i.z}`,"--i":isNaN(Number(i.i))?"7":`${i.i}`,"--layer":`${t}`,WebkitFilter:`blur(${te}px)`,filter:`blur(${te}px)`},M=e===0?["5.9px","8.2px","9.9px","10.8px","10.7px","10.5px","10px"]:["5.1px","5.4px","6.5px","7px","7.8px","8.4px","8.6px"];return r.jsxs("li",{onFocus:m=>{var f;C&&C.current&&((f=C.current)==null||f.setAttribute("aria-activedescendant",`${m.target.id}`));const y=m.target;y.parentNode,setTimeout(()=>{var h,g;const V=y.getBoundingClientRect(),ne=(h=y.parentNode)==null?void 0:h.getBoundingClientRect(),A=y.closest(".drag-wrap-outer"),n=A==null?void 0:A.scrollLeft,c=A==null?void 0:A.scrollTop;ee({top:V.top-ne.top-c,left:V.left-ne.left-n,width:V.width,height:V.height}),u.current&&(u.current.textContent=`${ze[w]}: ${(g=y.querySelector("span"))==null?void 0:g.textContent}`)},500),k(y)},onBlur:m=>{var y;ee(null),re(m.target),C&&C.current&&((y=C.current)==null||y.removeAttribute("aria-activedescendant")),u.current&&(u.current.textContent=`${$e[w]}`)},className:"dragzone animation",id:i.id,role:"option",tabIndex:0,style:oe,children:[r.jsx("div",{className:"draggable-overlay",style:Number(i.i)<8?{width:`calc(var(--i) * ${M[0]})`,height:`calc(var(--i) * ${M[0]})`}:Number(i.i)<10?{width:`calc(var(--i) * ${M[1]})`,height:`calc(var(--i) * ${M[1]})`}:Number(i.i)<20?{width:`calc(var(--i) * ${M[2]})`,height:`calc(var(--i) * ${M[2]})`}:Number(i.i)<24?{width:`calc(var(--i) * ${M[3]})`,height:`calc(var(--i) * ${M[3]})`}:Number(i.i)<28?{width:`calc(var(--i) * ${M[4]})`,height:`calc(var(--i) * ${M[4]})`}:Number(i.i)<32?{width:`calc(var(--i) * ${M[5]})`,height:`calc(var(--i) * ${M[5]})`}:isNaN(Number(i.i))||i.i===null||i.i===void 0?{width:`7 * ${M[6]})`,height:`7 * ${M[6]})`}:{width:`calc(var(--i) * ${M[6]})`,height:`calc(var(--i) * ${M[6]})`},onMouseDown:m=>{var f,V;m.stopPropagation();const y=m.currentTarget.parentElement;y.draggable=!0,u.current&&(u.current.textContent=`${ze[w]}: ${(f=y==null?void 0:y.querySelector("span"))==null?void 0:f.textContent}`),C&&C.current&&((V=C.current)==null||V.setAttribute("aria-activedescendant",`${y.id}`)),p(m,y)},onMouseMove:m=>{var y;if(m.buttons===1){m.stopPropagation();const f=m.currentTarget.parentElement;f.draggable=!0,P(m,f),u.current&&(u.current.textContent=`${ze[w]}: ${(y=f==null?void 0:f.querySelector("span"))==null?void 0:y.textContent}`)}},onMouseLeave:m=>{var f;m.stopPropagation();const y=m.currentTarget.parentElement;y.draggable=!1,C&&C.current&&((f=C.current)==null||f.removeAttribute("aria-activedescendant")),x(m,y),u.current&&(u.current.textContent=`${$e[w]}`)},onMouseUp:m=>{var f;const y=m.currentTarget.parentElement;y.draggable=!1,O(m,y),C&&C.current&&((f=C.current)==null||f.removeAttribute("aria-activedescendant")),u.current&&(u.current.textContent=`${$e[w]}`)},onTouchStart:m=>{var f,V;m.preventDefault(),m.stopPropagation();const y=m.currentTarget.parentElement;y.draggable=!0,C&&C.current&&((f=C.current)==null||f.setAttribute("aria-activedescendant",`${y.id}`)),p(m,y),u.current&&(u.current.textContent=`${ze[w]}: ${(V=y==null?void 0:y.querySelector("span"))==null?void 0:V.textContent}`)},onTouchMove:m=>{m.preventDefault(),m.stopPropagation();const y=m.currentTarget.parentElement;y.draggable=!0,P(m,y)},onTouchEnd:m=>{var f;const y=m.currentTarget.parentElement;y.draggable=!1,C&&C.current&&((f=C.current)==null||f.removeAttribute("aria-activedescendant")),O(m,y),u.current&&(u.current.textContent=`${$e[w]}`)},onWheel:m=>{const y=m.currentTarget.parentElement;v(y)}}),r.jsxs("span",{className:"scr",children:[$o[w]," ",i.number]})]},$)},va=e=>{var i;const t=e.d===0?0:1,w={WebkitFilter:`url(#svgfilter${t})`,filter:`url(#svgfilter${t})`,backgroundColor:"transparent",position:"absolute",top:0,left:0,height:"100%",width:"100%",pointerEvents:"none"};return r.jsxs(r.Fragment,{children:[r.jsxs("span",{id:`listbox${e.d}-layer${e.layer}-label`,className:"scr",children:[lt[e.language]," ",e.layer+1]}),r.jsx("ul",{ref:e.dragUlRef,role:"listbox",id:`listbox${e.d}-layer${e.layer}`,className:`drag-container-layer drag-container${e.d}-layer drag-container${e.d}-layer${e.layer} ${e.className}`,"aria-labelledby":`listbox${e.d}-layer${e.layer}-label`,"aria-activedescendant":"",style:w,children:(i=e.items)==null?void 0:i.map(($,p)=>{if($!=null)return r.jsx(pa,{layer:e.layer,d:e.d,language:e.language,item:$,index:p,start:e.start,movement:e.movement,stopMovementCheck:e.stopMovementCheck,stopMoving:e.stopMoving,wheel:e.wheel,focused:e.focused,blurred:e.blurred,selectedvalue0:e.selectedvalue0,setFocusedBlob:e.setFocusedBlob,dragUlRef:e.dragUlRef},p)})})]})};let We,S=!0,rt=0,ot=0,ve,Le=0,st=null,Je="90deg",D;const xe=e=>{e.preventDefault(),e.stopImmediatePropagation()},xa=e=>{const w=[...e.items].sort((n,c)=>n.layer-c.layer).reduce((n,c)=>(n[c.layer]||(n[c.layer]=[]),n[c.layer].push(c),n),{}),i=Array.from({length:e.layerAmount},(n,c)=>c),$=a.useRef({});a.useEffect(()=>{const n=i.reduce((c,h)=>(c[h]=a.createRef(),c),{});$.current=n},[e.layerAmount]);const p=()=>{try{return document.createEvent("TouchEvent"),!0}catch{return!1}};a.useEffect(()=>{p()},[]);const P=n=>{let c=n.layer;c<e.layerAmount-1&&(c+=1,e.changeBlobLayer(n,c))},O=n=>{let c=n.layer;c>0&&(c-=1,e.changeBlobLayer(n,c))};function x(n,c){const h=n.getBoundingClientRect(),g=c.getBoundingClientRect();return!(h.top+5>g.bottom-5||h.right<g.left||h.bottom-5<g.top+5||h.left>g.right)}const v=a.useCallback(n=>{S=!0,document.removeEventListener("keydown",m),document.removeEventListener("touchmove",xe)},[m]);ko({ref:e.clickOutsideRef,onOutsideClick:v}),a.useEffect(()=>{p()&&!D&&e.scroll&&(document.body.style.overflowY="auto",document.body.style.overflowX="hidden",document.removeEventListener("keydown",m),document.removeEventListener("touchmove",xe))},[D,e.scroll,p,m]);const k=a.useCallback((n,c)=>{n.stopPropagation(),n.preventDefault(),document.activeElement instanceof HTMLElement&&document.activeElement.blur(),We=!0,D=c,rt=p()?n.touches[0].clientX:n.clientX,ot=p()?n.touches[0].clientY:n.clientY,c.classList.add("drag");const h=e.highestZIndex[e.layer];if(p()){let j=(c==null?void 0:c.style.getPropertyValue("--i"))??"7";ve=parseFloat(j),ve=isNaN(ve)?7:ve}e.dispatch({type:"partialUpdate",payload:{d:e.d,id:c.id,update:{z:`${Math.max(1,h+1)}`}}}),document.addEventListener("keydown",m);const g=c.style.getPropertyValue("--layer");e.setActiveLayer(isNaN(parseInt(g))?1:parseInt(g)),p()&&(document.addEventListener("touchmove",xe,{passive:!1}),document.body.style.overflow="hidden")},[m,p]),re=a.useCallback(n=>{if(n.stopPropagation(),p()&&(n.preventDefault(),document.body.style.overflow="hidden"),We){let c=p()?n.touches[0].clientX:n.clientX,h=p()?n.touches[0].clientY:n.clientY;D.style.top=D.offsetTop-(ot-h)+"px",D.style.left=D.offsetLeft-(rt-c)+"px",rt=c,ot=h,e.dispatch({type:"partialUpdate",payload:{d:e.d,id:D==null?void 0:D.id,update:{x:D.style.left,y:D.style.top}}})}},[p]),u=a.useCallback((n,c)=>{n.stopPropagation(),n.preventDefault(),We=!1,Le++,st&&clearTimeout(st),st=setTimeout(()=>{if(Le===2){let B=ve-.8;B=Math.max(7,B),e.dispatch({type:"partialUpdate",payload:{d:e.d,id:D==null?void 0:D.id,update:{i:B}}})}else if(Le===3){let B=ve+.8;B=Math.min(36,B),e.dispatch({type:"partialUpdate",payload:{d:e.d,id:D==null?void 0:D.id,update:{i:B}}})}Le=0},300),document.removeEventListener("keydown",m);let h=c.style.getPropertyValue("--i")??"7",g=parseFloat(h);g=isNaN(g)?7:g;const j=c.querySelector("div"),Z={layer:parseInt(c.style.getPropertyValue("--layer")),id:c.id,number:parseInt(c.id.replace("blob","").split("-")[0],10),i:g,x:c.style.left,y:c.style.top,z:c.style.zIndex,background:c.style.background||"linear-gradient(90deg, cyan, greenyellow)"};p()&&e.scroll?(document.removeEventListener("touchmove",xe),document.body.style.overflowY="auto",document.body.style.overflowX="hidden"):p()&&!e.scroll&&(document.body.style.overflow="hidden"),e.layerIncrease.current&&x(j,e.layerIncrease.current)&&P(Z),e.layerDecrease.current&&x(j,e.layerDecrease.current)&&O(Z),e.colorPairs[e.d].forEach((B,Y)=>{const H=e.colorBlockProps[e.d][Y];if(H.current&&x(j,H.current)){const{color1:J,color2:Q}=B;c.style.background=`linear-gradient(${Je}, ${J},${Q})`}}),e.makeLarger0.current&&x(j,e.makeLarger0.current)&&(g+=.4,g=Math.min(Math.max(7,g),36),e.dispatch({type:"partialUpdate",payload:{d:e.d,id:c.id,update:{i:g}}})),e.makeSmaller0.current&&x(j,e.makeSmaller0.current)&&(g-=.4,g=Math.min(Math.max(7,g),36),e.dispatch({type:"partialUpdate",payload:{d:e.d,id:c.id,update:{i:g}}})),e.makeMore0.current&&x(j,e.makeMore0.current)&&f(Z),e.deleteBlob0.current&&x(j,e.deleteBlob0.current)&&A(Z),c.classList.remove("drag"),c.blur(),Le===0?D=null:D=c,e.setFocusedBlob(null)},[Je,x,m,f,e.colorBlockProps,e.colorPairs,A,e.scroll]),ee=a.useCallback((n,c)=>{n.stopPropagation(),We=!1,D=null,p()&&e.scroll?(document.removeEventListener("touchmove",xe),document.body.style.overflowY="auto",document.body.style.overflowX="hidden"):p()&&!e.scroll&&(document.body.style.overflow="hidden"),e.getPosition(c),c.classList.remove("drag"),document.removeEventListener("keydown",m),c.blur()},[m]);a.useEffect(()=>{p()&&!D&&e.scroll&&(document.removeEventListener("touchmove",xe),document.body.style.overflowY="auto",document.body.style.overflowX="hidden")},[u,ee,D,e.scroll]);function C(n){n.classList.remove("drag"),document.removeEventListener("keydown",m),e.getPosition(n),n.draggable=!1,D=null}function te(n){D=n,n.classList.add("drag");const c=n.style.getPropertyValue("--layer");e.setActiveLayer(parseInt(c)??2),document.addEventListener("keydown",m),n.draggable=!0}function oe(n){const c=h=>M(h,n);return n.addEventListener("wheel",c,{passive:!1}),()=>{n.removeEventListener("wheel",c)}}function M(n,c){if(S){S=!1;let g=window.getComputedStyle(c).getPropertyValue("--i")??c.style.getPropertyValue("--i")??"7",j=parseFloat(g);j=isNaN(j)?7:j,n.deltaY<0?j*=1.04:j*=.96,j=Math.min(Math.max(7,j),36),e.dispatch({type:"partialUpdate",payload:{d:e.d,id:c.id,update:{i:j}}}),setTimeout(()=>{S=!0},100)}}a.useEffect(()=>{const n=D;if(n){const{color1:c,color2:h}=e.colorPairs[e.d][e.colorIndex],g=`linear-gradient(${Je}, ${c}, ${h})`;e.dispatch({type:"partialUpdate",payload:{d:e.d,id:n.id,update:{background:g}}})}},[e.colorIndex]);function m(n){var F,le;const h=D;if(!h)return;const g=window.getComputedStyle(h),j=T=>{var me;const z=parseFloat(g.marginTop),ce=parseFloat(g.marginLeft),q=T.getBoundingClientRect(),fe=(me=T.parentNode)==null?void 0:me.getBoundingClientRect();e.setFocusedBlob({top:q.top-fe.top-z,left:q.left-fe.left-ce,width:q.width,height:q.height})};let Z=g.getPropertyValue("--i")??h.style.getPropertyValue("--i")??"7",B=parseFloat(Z);B=isNaN(B)?7:B;let Y=parseFloat(g.getPropertyValue("left"))??parseFloat(h.style.getPropertyValue("left"))??0,H=parseFloat(g.getPropertyValue("top"))??parseFloat(h.style.getPropertyValue("top"))??0;const J=h.style.getPropertyValue("--layer"),Q={layer:parseInt(J)??e.layer,id:h.id,number:parseInt(h.id.replace("blob","").split("-")[0],10),i:B,x:h.style.getPropertyValue("left").toString(),y:h.style.getPropertyValue("top").toString(),z:h.style.zIndex??"0",background:h.style.background??"linear-gradient(90deg, cyan, greenyellow)"},ue=(T,z)=>{e.dispatch({type:"partialUpdate",payload:{d:e.d,id:h.id,update:{x:`${T}px`,y:`${z}px`}}}),j(h)},R=()=>{S=!0},Ee=T=>{n.preventDefault(),S&&(S=!1,e.changeBlobLayer(Q,T),setTimeout(R,100))},X=n.key;switch(parseInt(X)>=1&&parseInt(X)<=e.layerAmount&&Ee(parseInt(X)-1),n.key){case"ArrowLeft":n.preventDefault(),S&&(ue(Y-4,H),setTimeout(R,100));break;case"ArrowRight":n.preventDefault(),S&&(ue(Y+4,H),setTimeout(R,100));break;case"ArrowUp":n.preventDefault(),S&&(ue(Y,H-4),setTimeout(R,100));break;case"ArrowDown":n.preventDefault(),S&&(ue(Y,H+4),setTimeout(R,100));break;case"Escape":n.preventDefault(),e.setScroll(!0),document.body.style.overflowY="auto",document.body.style.overflowX="hidden",e.exitApp.current&&(e.exitApp.current.setAttribute("tabindex","0"),e.exitApp.current.addEventListener("blur",y)),h.blur(),(F=e.dragWrap.current)==null||F.blur(),e.exitApp.current&&(e.exitApp.current.textContent=wo[e.language]),(le=e.exitApp.current)==null||le.focus();break;case"Enter":n.preventDefault(),n.stopPropagation(),S&&(S=!1,h.closest(`#drag-wrap${e.d}`)&&e.setColorIndex(T=>(T+1)%e.colorPairs[e.d].length),setTimeout(R,100));break;case"R":case"r":case" ":if(n.preventDefault(),n.stopPropagation(),S){if(S=!1,h.closest(`#drag-wrap${e.d}`)){const T=e.colorswitch();let z=e.colorswitch();z===T&&(z=e.colorswitch());const ce=`linear-gradient(${Je}, ${T}, ${z})`;e.dispatch({type:"partialUpdate",payload:{d:e.d,id:h.id,update:{background:ce}}})}setTimeout(R,100)}break;case"Z":case"z":n.preventDefault(),S&&(S=!1,e.dispatch({type:"partialUpdate",payload:{d:e.d,id:h.id,update:{z:"0"}}}),setTimeout(R,100));break;case"T":case"t":n.preventDefault(),S&&(S=!1,e.dispatch({type:"partialUpdate",payload:{d:e.d,id:h.id,update:{z:`${Math.max(1,e.highestZIndex[e.layer]+1)}`}}}),setTimeout(R,100));break;case"S":case"s":n.preventDefault(),S&&(S=!1,B-=.4,B=Math.min(Math.max(7,B),36),e.dispatch({type:"partialUpdate",payload:{d:e.d,id:h.id,update:{i:B}}}),setTimeout(R,100));break;case"B":case"b":case"L":case"l":n.preventDefault(),S&&(S=!1,B+=.4,B=Math.min(Math.max(7,B),36),e.dispatch({type:"partialUpdate",payload:{d:e.d,id:h.id,update:{i:B}}}),setTimeout(R,100));break;case"C":case"c":case"D":case"d":n.preventDefault(),S&&(S=!1,f(Q),setTimeout(R,100));break;case"+":n.preventDefault(),S&&(S=!1,e.addRandomDraggable(Q.x,Q.y,Q.layer),setTimeout(R,200));break;case"Delete":case"-":n.preventDefault(),S&&(S=!1,A(Q),setTimeout(R,100));break}}function y(){var n,c;e.exitApp.current&&((n=e.exitApp.current)==null||n.removeAttribute("tabindex"),(c=e.exitApp.current)==null||c.removeEventListener("blur",y),e.exitApp.current.textContent="")}function f(n){e.dispatch({type:"duplicateDraggable",payload:{d:e.d,draggable:n}})}const[V,ne]=a.useState("");function A(n){ne(n.id),e.selectedvalue0.current&&(e.selectedvalue0.current.textContent=`${$e[e.language]}`)}return a.useEffect(()=>{V&&(e.dispatch({type:"removeDraggable",payload:{d:e.d,id:V}}),ne(""))},[V,e.d,e.dispatch]),r.jsx(r.Fragment,{children:i.map(n=>r.jsx(va,{layer:n,dragUlRef:$.current[n],items:w[n]||[],className:e.hiddenLayers.has(n)?"hidden":"",language:e.language,d:e.d,saveDraggables:e.saveDraggables,selectedvalue0:e.selectedvalue0,setFocusedBlob:e.setFocusedBlob,start:k,movement:re,stopMovementCheck:u,stopMoving:ee,wheel:oe,focused:te,blurred:C},n))})},ga="http://localhost:4000",we=`${ga}/api/blobs`,$a=async(e,t,w)=>(await ke.get(`${we}/${e}/${t}`,{params:{language:w}})).data,ka=async(e,t,w,i)=>(await ke.get(`${we}/${e}/${t}/${w}/${i}`)).data,wa=async(e,t,w,i,$,p)=>(await ke.post(`${we}/${e}/${t}/${i}/${p}`,{draggables:w,backgroundColor:$})).data,Ea=async(e,t,w,i,$,p,P)=>(await ke.put(`${we}/${e}/${t}/${i}/${p}`,{d:t,versionName:i,draggables:w,backgroundColor:$,newVersionName:P})).data,ja=async(e,t,w,i)=>(await ke.delete(`${we}/${e}/${t}/${w}/${i}`)).data,Ba=async(e,t,w)=>(await ke.post(`${we}/screenshot`,{url:e,selector:t,language:w})).data,De={getAllBlobsByUser:$a,getBlobsVersionByUser:ka,saveBlobsByUser:wa,editBlobsByUser:Ea,deleteBlobsVersionByUser:ja,takeScreenshot:Ba},Na=({d:e,language:t,controlsVisible:w,colorBlockProps:i,colorPairs:$,getRefName:p,map:P})=>r.jsx(r.Fragment,{children:i[e].map((O,x)=>{var v;return r.jsx("div",{ref:O,className:`colorblock ${(v=p(P[e],O))==null?void 0:v.toLowerCase()} tooltip-wrap ${w?"":"hidden"}`,id:`color${x}-${e}`,style:{background:`linear-gradient(45deg, ${$[e][x].color1}, ${$[e][x].color2})`,borderRadius:`${x<4?"5rem 6.7rem 6.7rem 5rem / 0.7rem 8.7rem 8.7rem 0.7rem":"6.7rem 5rem 5rem 6.7rem / 8.7rem 0.7rem 0.7rem 8.7rem"}`},children:r.jsx("span",{className:`tooltip below ${x<4?"right":"left"}`,children:Eo[t]})},`${$[e][x].color1}${x}-${e}`)})}),Sa=({d:e,language:t,sliderLightnessInput:w,setSliderLightVal:i,sliderLightness:$,sliderLightVal:p,defaultLightness:P,sliderLightnessReset:O,sliderSaturationInput:x,setSliderSatVal:v,sliderSaturation:k,sliderSatVal:re,defaultSaturation:u,sliderSaturationReset:ee,sliderHueInput:C,setSliderHueVal:te,sliderHue:oe,sliderHueVal:M,defaultHue:m,sliderHueReset:y})=>r.jsx(r.Fragment,{children:r.jsxs("div",{id:`drag-slider-wrap${e}`,className:"drag-slider-wrap",children:[r.jsxs("div",{className:"drag-slider-single",children:[r.jsx("label",{htmlFor:`drag-slider-hue${e}`,id:`huedescription${e}`,children:jo[t]}),r.jsx("input",{ref:C,onChange:f=>{te(f.target.value),oe()},onMouseUp:f=>{te(f.target.value),oe()},onPointerUp:f=>{te(f.target.value),oe()},type:"range",min:0,max:359,value:M,className:"drag-slider drag-slider-hue",id:`drag-slider-hue${e}`}),r.jsx("span",{children:M}),r.jsx("button",{onClick:()=>{te(m),y()},children:Bo[t]})]}),r.jsxs("div",{className:"drag-slider-single",children:[r.jsx("label",{htmlFor:`drag-slider-saturation${e}`,id:`saturationdescription${e}`,children:No[t]}),r.jsx("input",{ref:x,onChange:f=>{v(f.target.value),k()},onMouseUp:f=>{v(f.target.value),k()},onPointerUp:f=>{v(f.target.value),k()},type:"range",min:0,max:100,value:re,className:"drag-slider drag-slider-saturation",id:`drag-slider-saturation${e}`}),r.jsx("span",{children:re}),r.jsx("button",{onClick:()=>{v(u),ee()},children:So[t]})]}),r.jsxs("div",{className:"drag-slider-single",children:[r.jsx("label",{htmlFor:`drag-slider-lightness${e}`,id:`lightnessdescription${e}`,children:Co[t]}),r.jsx("input",{ref:w,onChange:f=>{i(f.target.value),$()},onMouseUp:f=>{i(f.target.value),$()},onPointerUp:f=>{i(f.target.value),$()},type:"range",min:0,max:100,value:p,className:"drag-slider drag-slider-lightness",id:`drag-slider-lightness${e}`}),r.jsx("span",{children:p}),r.jsx("button",{onClick:()=>{i(P),O()},children:Lo[t]})]})]})}),Ca=[{color1:"darkorange",color2:"orange"},{color1:"orangered",color2:"palevioletred"},{color1:"magenta",color2:"violet"},{color1:"blue",color2:"cyan"},{color1:"greenyellow",color2:"lemonchiffon"},{color1:"cyan",color2:"greenyellow"},{color1:"cyan",color2:"pink"},{color1:"lemonchiffon",color2:"pink"}],La=[{color1:"indianred",color2:"palevioletred"},{color1:"sienna",color2:"peru"},{color1:"chocolate",color2:"burlywood"},{color1:"darkkhaki",color2:"moccasin"},{color1:"slateblue",color2:"mediumpurple"},{color1:"royalblue",color2:"turquoise"},{color1:"cadetblue",color2:"mediumaquamarine"},{color1:"lightslategray",color2:"lightsteelblue"}],Da=[{color1:"indigo",color2:"mediumorchid"},{color1:"darkmagenta",color2:"palevioletred"},{color1:"crimson",color2:"indianred"},{color1:"chocolate",color2:"orangered"},{color1:"darkcyan",color2:"olivedrab"},{color1:"midnightblue",color2:"darkturquoise"},{color1:"mediumblue",color2:"cadetblue"},{color1:"darkblue",color2:"mediumslateblue"}],at=[Ca,La,Da];let vr="90deg";const nt=3,ge=e=>{e.preventDefault()};function Pa({language:e,d:t,ds:w,dragWrapOuter:i}){var Qt,Kt,er;const $="214",p=t===0?"80":t===2?"50":"45",P=t===0?"30":t===2?"5":"25",{state:O,dispatch:x}=a.useContext(Do),v=Po(),k=tr(o=>{var s;return(s=o.auth)==null?void 0:s.user}),re=tr(o=>o.users),u=a.useRef(),ee=a.useRef(),C=a.useRef(),te=a.useRef(),oe=a.useRef(),M=a.useRef(),m=a.useRef(),y=a.useRef(),[f,V]=a.useState(!1),ne=a.useRef(),A=a.useRef(),n=a.useRef(),c=a.useRef(),h=a.useRef(),g=a.useRef(),j=a.useRef(),Z=a.useRef(),B=a.useRef(null),Y=a.useRef(),H=a.useRef(),J=a.useRef(),Q=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",ue=`${Q?"local-":""}BlobLayerAmount${[t]}`,R=`${Q?"local-":""}BackgroundColor${[t]}`,Ee=`${Q?"local-":""}Draggables${[t]}`,X=O.backgroundColor,F=O.draggables,{windowHeight:le,windowWidth:T}=To(),[z,ce]=a.useState(0),[q,fe]=a.useState(new Set),[me,xr]=a.useState({}),[gr,$r]=a.useState(0),[W,ct]=a.useState(null),[_e,it]=a.useState(!1),[je,kr]=a.useState(!0),[_,wr]=a.useState(!0),[se,Pe]=a.useState(!0),[dt,Ge]=a.useState(!1),[ut,Xe]=a.useState(!1),[mt,ht]=a.useState(!1),ft=a.useRef(),bt=a.useRef(),yt=a.useRef(),pt=a.useRef(),vt=a.useRef(),xt=a.useRef(),gt=a.useRef(),$t=a.useRef(),kt=a.useRef(),wt=a.useRef(),Et=a.useRef(),jt=a.useRef(),Bt=a.useRef(),Nt=a.useRef(),St=a.useRef(),Ct=a.useRef(),Lt=a.useRef(),Dt=a.useRef(),Pt=a.useRef(),Tt=a.useRef(),Mt=a.useRef(),At=a.useRef(),Rt=a.useRef(),It=a.useRef(),Er=[new Map([[ft,"colorBlockOrange"],[bt,"colorBlockRed"],[yt,"colorBlockPurple"],[pt,"colorBlockBlue"],[vt,"colorBlockYellowLime"],[xt,"colorBlockCyanYellow"],[gt,"colorBlockCyanPink"],[$t,"colorBlockPinkYellow"]]),new Map([[kt,"colorBlockReddish"],[wt,"colorBlockBrown"],[St,"colorBlockTan"],[Et,"colorBlockKhaki"],[Bt,"colorBlockPurplish"],[jt,"colorBlockBluish"],[Nt,"colorBlockGreenish"],[Ct,"colorBlockGray"]]),new Map([[Lt,"colorBlockDarkPurple"],[Dt,"colorBlockDarkPink"],[Pt,"colorBlockDarkRed"],[Tt,"colorBlockDarkOrange"],[Mt,"colorBlockDarkGreen"],[At,"colorBlockGreenishBlue"],[Rt,"colorBlockDarkBlue"],[It,"colorBlockPurplishBlue"]])],jr=(o,s)=>o.get(s),qe=[[ft,bt,yt,pt,vt,xt,gt,$t],[kt,wt,St,Et,Bt,jt,Nt,Ct],[Lt,Dt,Pt,Tt,Mt,At,Rt,It]],Br=(o,s)=>{const l=me[s]+1;x({type:"partialUpdate",payload:{d:t,id:o.id,update:{layer:s,z:l}}}),ce(s)},Nr=o=>{fe(s=>{const l=new Set(s);return l.has(o)?l.delete(o):l.add(o),l})};a.useEffect(()=>{const o=()=>it(!0),s=()=>{it(!1)},l=()=>{ct(null)};return window.addEventListener("keyup",o),window.addEventListener("mousedown",s),window.addEventListener("mouseup",l),()=>{window.removeEventListener("keyup",o),window.removeEventListener("mousedown",s),window.removeEventListener("mouseup",l)}},[]);function Sr(){return new Promise(o=>{setTimeout(()=>{const s=localStorage.getItem(Ee);if(s==null||s==null||s==="undefined")o(null);else{const l=JSON.parse(s);o(l.map(d=>({...d,layer:d.layer??0})))}},300)})}function Cr(){return new Promise(o=>{setTimeout(()=>{var l;const s=localStorage.getItem(ue);s!=null?o(parseInt(s)):((l=F[t])==null?void 0:l.length)>0?o(Math.max(...F[t].map(d=>d.layer))+1):o(nt)},100)})}function Lr(){return new Promise(o=>{setTimeout(()=>{const s=localStorage.getItem(R);s==null||s==null||s==="undefined"?o(null):o(JSON.parse(s))},300)})}function Te(o=he){localStorage.setItem(ue,JSON.stringify(o))}function ae(o=X[t]){localStorage.setItem(R,JSON.stringify(o))}function Ft(o=F[t]){localStorage.setItem(Ee,JSON.stringify(o))}const[be,Ot]=a.useState(rr[e]),[Me,Vt]=a.useState(be),[Dr,Pr]=a.useState(""),[Tr,Ht]=a.useState(!0),[zt,Mr]=a.useState(!1),[Ae,Ze]=a.useState(!1),[Re,Ar]=a.useState({}),[he,ye]=a.useState(0),Rr=async()=>{Ht(!0);try{k!=null&&k._id&&De.getAllBlobsByUser(k==null?void 0:k._id,t,e).then(o=>{if(o){const s={};o.forEach(l=>{const{d,versionName:b}=l;s[d]||(s[d]={}),s[d][b]=l}),Ar(s),Mr(Object.keys(s).length>0)}}).catch(o=>{v(E(`${K[e]}: ${o.message}`,!0,8))})}catch{v(E(K[e],!0,8))}finally{Ht(!1)}},Ir=o=>{for(const s in Re)if(Re[s][o])return!0;return!1},Ut=/^[\w\s\u00C0-\u024F\u1E00-\u1EFF-_]*$/,Fr=o=>{const s=o.target.value;Ut.test(s)?Ot(s):v(E(mr[e],!0,8))},Or=o=>{const s=o.target.value;Ut.test(s)?Vt(s):v(E(mr[e],!0,8))},Vr=async o=>{o.preventDefault();try{if(be.trim()===""){v(E(Ye[e],!0,8));return}else if(be.trim().length>30){v(E(`${hr[e]}. ${fr[e]}`,!0,8));return}else if(k!=null&&k._id){const s=be.trim();if(Ir(s)&&!window.confirm(Ws[e]))return;De.saveBlobsByUser(k==null?void 0:k._id,t,F[t],be,X[t],e).then(()=>{Ze(!Ae),v(E(br[e],!1,8))}).catch(l=>{v(E(`${K[e]}: ${l.message}`,!0,8))})}else v(E(yr[e],!0,8))}catch{v(E(K[e],!0,8))}},Hr=async(o,s)=>{const l=s.trim();if(s.trim()===""){v(E(Ye[e],!0,8));return}else if(s.trim().length>30){v(E(`${hr[e]}. ${fr[e]}`,!0,8));return}else try{k!=null&&k._id?De.editBlobsByUser(k==null?void 0:k._id,t,F[t],o,X[t],e,l).then(()=>{Ze(!Ae),v(E(br[e],!1,8))}).catch(d=>{v(E(`${K[e]}: ${d.message}`,!0,8))}):v(E(yr[e],!0,8))}catch{v(E(K[e],!0,8))}},zr=(o,s)=>{const l=s.trim();k!=null&&k._id&&window.confirm(Js[e])&&De.getBlobsVersionByUser(k==null?void 0:k._id,o,l,e).then(d=>{const b=Math.max(...d.draggables.map(L=>L.layer));ye(b+1),setTimeout(()=>{Te(b+1)},300),x({type:"setDraggablesAtD",payload:{d:o,draggables:d.draggables}}),x({type:"setBackgroundColor",payload:{d:o,backgroundColor:d.backgroundColor}}),ae(d.backgroundColor),Be(d.backgroundColor[0]),Ne(d.backgroundColor[1]),Se(d.backgroundColor[2]),Ke({[`--hue${o}`]:`${d.backgroundColor[0]}`}),et({[`--saturation${o}`]:`${d.backgroundColor[1]}`}),tt({[`--lightness${o}`]:`${d.backgroundColor[2]}`})}).then(()=>{Ot(l),ho(),setTimeout(()=>{pe()},300)}).catch(d=>{v(E(`${K[e]}: ${d.message}`,!0,8))})},Ur=(o,s)=>{k._id&&window.confirm(_s[e])&&De.deleteBlobsVersionByUser(k._id,o,s,e).then(()=>{v(E(Gs[e],!1,8)),Ze(!Ae)}).catch(l=>{v(E(`${K[e]}: ${l.message}`,!0,8))})};a.useEffect(()=>{(async()=>{await v(Xs()),await v(qs())})()},[v]),a.useEffect(()=>{k&&Rr()},[k,Ae]);function Yr(o){return o.reduce((s,l)=>{const d=parseInt(l.z,10),b=l.layer;return(!s[b]||d>s[b])&&(s[b]=d),s},{})}a.useEffect(()=>{(async()=>{const s=await Sr(),l=await Lr(),d=setTimeout(async()=>{var L,U,I;const b=await Cr();l&&l.length===3?(x({type:"setBackgroundColor",payload:{d:t,backgroundColor:l}}),ae(l),Be(l[0]),Ne(l[1]),Se(l[2]),(L=i.current)==null||L.style.setProperty(`--hue${t}`,`${l[0]}`),(U=i.current)==null||U.style.setProperty(`--saturation${t}`,`${l[1]}`),(I=i.current)==null||I.style.setProperty(`--lightness${t}`,`${l[2]}`)):(x({type:"setBackgroundColor",payload:{d:t,backgroundColor:[$,p,P]}}),ae([$,p,P])),b?ye(b):s&&s.length>0&&ye(Math.max(...s.map(N=>N.layer))+1),s&&s.length>0?(s&&s.length>0&&Wr(s),Ge(!0)):s==null&&!dt&&(_t(Yt,t),Ge(!0))},300);return()=>clearTimeout(d)})()},[]),a.useEffect(()=>{var o;if(F[t]!==void 0&&((o=F[t])==null?void 0:o.length)>0){Ft();const s=Yr(F[t]);xr(s)}},[F[t]]);function Wr(o){if(!dt&&o&&(o==null?void 0:o.length)>0){for(let s=0;s<(o==null?void 0:o.length);s++)if(o[s]!==null&&o[s]!==void 0){const l={layer:o[s].layer,id:`${o[s].id}`,number:o[s].number,i:o[s].i,x:`${o[s].x}`,y:`${o[s].y}`,z:`${o[s].z}`,background:`${o[s].background??"linear-gradient(90deg, cyan, greenyellow)"}`};x({type:"addDraggable",payload:{d:t,draggable:l}})}}Ge(!0)}const Jr=()=>{x({type:"moveDraggablesLeft",payload:{d:t}})},_r=()=>{x({type:"moveDraggablesRight",payload:{d:t}})},Gr=()=>{x({type:"moveDraggablesUp",payload:{d:t}})},Xr=()=>{x({type:"moveDraggablesDown",payload:{d:t}})};function qr(o){var l;o.preventDefault();const s=(l=i.current)==null?void 0:l.querySelectorAll(".dragzone");s&&!ut?(s.forEach(d=>{d.classList.remove("animation"),d.offsetWidth}),Xe(!0)):s&&(s.forEach(d=>{d.classList.add("animation"),d.offsetWidth}),Xe(!1))}a.useEffect(()=>{mt&&u.current&&(u.current.classList.add("paused"),Xe(!0))},[mt]),a.useEffect(()=>{const o=window.matchMedia("(prefers-reduced-motion: reduce)");ht(o.matches);const s=()=>ht(o.matches);return o.addEventListener("change",s),()=>{o.removeEventListener("change",s)}},[]);const Yt=T>700?10:6,Wt=o=>{switch(o.key){case"Escape":Pe(!0),document.body.style.overflowY="auto",document.body.style.overflowX="hidden";break}};a.useEffect(()=>(window.addEventListener("keyup",Wt),()=>{window.removeEventListener("keyup",Wt)}),[]);const Jt=o=>{const s=F[t].some(b=>b.layer===0&&o<0),l=F[t].some(b=>b.layer===he-1&&o>0);if(s){v(E(Zs[e],!0,8));return}if(l){v(E(Qs[e],!0,8));return}const d=F[t].map(b=>{const L=b.layer+o;return L>=0&&L<he?{...b,layer:L}:b});x({type:"setDraggablesAtD",payload:{d:t,draggables:d}})};function Zr(o){o.preventDefault(),window.confirm(`${Ks[e]}?`)&&(window.localStorage.removeItem(Ee),x({type:"resetDraggables",payload:{d:t}}),x({type:"setDraggablesAtD",payload:{d:t,draggables:[]}}),_t(Yt,t),setTimeout(()=>{pe(),Te(nt)},300))}const _t=(o,s)=>{ce(0);for(let l=0;l<o;l++){const d=()=>{const I=at[s],N=Math.floor(Math.random()*I.length);return[I[N].color1,I[N].color2]},[b,L]=d(),U={layer:0,id:`blob${l+1}-${s}`,number:l+1,i:T>400?ie(7,20):ie(7,10),x:T>le?`${T/100*ie(2,70)}px`:`${T/100*ie(2,50)}px`,y:`${le/100*ie(2,60)}px`,z:"1",background:`linear-gradient(${vr}, ${b??"cyan"},${L??"greenyellow"})`};x({type:"addDraggable",payload:{d:s,draggable:U}})}ye(nt)};function ie(o,s){return Math.random()*(s-o)+o}const Qe=()=>{const o=["cyan","lemonchiffon","pink","orangered","magenta","deepskyblue","darkorange","tomato","violet","dodgerblue","greenyellow","orange","silver","darkgray","gray","hotpink","wheat","sandybrown","rosybrown","dimgray","darkkhaki","darkseagreen","slateblue","royalblue","moccasin","burlywood","chocolate","cadetblue","mediumpurple","sienna","peru","indianred","palevioletred","plum","palegreen","mediumaquamarine","lightsteelblue","aquamarine","yellowgreen"],s=Math.floor(Math.random()*o.length);return o[s]};a.useEffect(()=>{},[O.draggables]);const Gt=(o=`${T/100*ie(25,55)}px`,s=`${le/100*ie(2,10)}px`,l=z)=>{if(document.activeElement instanceof HTMLElement&&document.activeElement.id===`make-random${t}`&&document.activeElement.blur(),q.has(z)){v(E(ea[e],!0,8));return}const d=Qe(),b=Qe(),L=Math.max(...O.draggables[t].map(N=>parseInt(N.id.split("-")[0].replace("blob",""),10))),U=isNaN(me[l])?1:me[l]+1,I={layer:l,id:`blob${L+1}-${t}`,number:L+1,i:Math.ceil(ie(6.5,10)),x:o,y:s,z:`${U}`,background:`linear-gradient(${vr}, ${d??"cyan"},${b??"greenyellow"})`};x({type:"duplicateDraggable",payload:{d:t,draggable:I}})},Qr=o=>{const s=o.id,l=window.getComputedStyle(o),d=parseInt(o.id.replace("blob","").split("-")[0],10),b=l.getPropertyValue("--i")??o.style.getPropertyValue("--i")??"7",L=l.getPropertyValue("left")??o.style.getPropertyValue("left"),U=l.getPropertyValue("top")??o.style.getPropertyValue("top"),I=l.getPropertyValue("z-index")??o.style.getPropertyValue("z-index"),N=l.getPropertyValue("background")??o.style.getPropertyValue("background"),de=l.getPropertyValue("--layer")??o.style.getPropertyValue("--layer"),He={layer:de?parseInt(de):z,id:s,number:d,i:isNaN(parseFloat(b))?7:parseFloat(b),x:L,y:U,z:I,background:N??"linear-gradient(90deg, cyan, greenyellow)"};x({type:"updateDraggable",payload:{d:t,draggable:He}})};a.useEffect(()=>{var o,s;return se?se&&(document.body.style.overflowY="auto",document.body.style.overflowX="hidden",document.removeEventListener("touchmove",ge),i.current&&(i.current.style.overflow="auto"),(s=i.current)==null||s.removeEventListener("touchmove",ge)):(document.addEventListener("touchmove",ge,{passive:!1}),document.body.style.overflow="hidden",(o=i.current)==null||o.addEventListener("touchmove",ge,{passive:!1}),i.current&&(i.current.style.overflow="hidden")),()=>{var l;document.removeEventListener("touchmove",ge),(l=i.current)==null||l.removeEventListener("touchmove",ge)}},[se]);function Kr(){Pe(!se)}const[Ie,Be]=a.useState(()=>{const o=localStorage.getItem(R),s=o?JSON.parse(o):null;return(s==null?void 0:s[0])??$}),[Fe,Ne]=a.useState(()=>{const o=localStorage.getItem(R),s=o?JSON.parse(o):null;return(s==null?void 0:s[1])??p}),[Oe,Se]=a.useState(()=>{const o=localStorage.getItem(R),s=o?JSON.parse(o):null;return(s==null?void 0:s[2])??P}),eo={backgroundColor:`hsl(var(--hue${t}), calc(var(--saturation${t}) * 1%), calc(var(--lightness${t}) * 1%))`},[to,Ke]=a.useState(J.current?{[`--hue${t}`]:`${J.current.value}`}:{[`--hue${t}`]:`${Ie}`}),[ro,et]=a.useState(H.current?{[`--saturation${t}`]:`${H.current.value}`}:{[`--saturation${t}`]:`${Fe}`}),[oo,tt]=a.useState(Y.current?{[`--lightness${t}`]:`${Y.current.value}`}:{[`--lightness${t}`]:`${Oe}`});function so(){if(i.current){Ke({[`--hue${t}`]:`${Ie}`});const o=JSON.parse(JSON.stringify(X));o[t][0]=Ie,x({type:"setBackgroundColor",payload:{d:t,backgroundColor:o[t]}}),ae(o[t])}}function ao(){if(i.current){et({[`--saturation${t}`]:`${Fe}`});const o=JSON.parse(JSON.stringify(X));o[t][1]=Fe,x({type:"setBackgroundColor",payload:{d:t,backgroundColor:o[t]}}),ae(o[t])}}function no(){if(i.current){tt({[`--lightness${t}`]:`${Oe}`});const o=JSON.parse(JSON.stringify(X));o[t][2]=Oe,x({type:"setBackgroundColor",payload:{d:t,backgroundColor:o[t]}}),ae(o[t])}}a.useEffect(()=>{Y.current&&Se(Y.current.value)},[(Qt=Y==null?void 0:Y.current)==null?void 0:Qt.value]),a.useEffect(()=>{H.current&&Ne(H.current.value)},[(Kt=H==null?void 0:H.current)==null?void 0:Kt.value]),a.useEffect(()=>{J.current&&Be(J.current.value)},[(er=J==null?void 0:J.current)==null?void 0:er.value]);function lo(){tt({[`--lightness${t}`]:`${P}`}),Y.current&&(Y.current.value=P),Se(P);const o=JSON.parse(JSON.stringify(X));o[t][2]=P,ae(o[t]),x({type:"setBackgroundColor",payload:{d:t,backgroundColor:o[t]}})}function co(){et({[`--saturation${t}`]:`${p}`}),H.current&&(H.current.value=p),Ne(p);const o=JSON.parse(JSON.stringify(X));o[t][1]=p,ae(o[t]),x({type:"setBackgroundColor",payload:{d:t,backgroundColor:o[t]}})}function io(){Ke({[`--hue${t}`]:`${$}`}),J.current&&(J.current.value=$),Be($);const o=JSON.parse(JSON.stringify(X));o[t][0]=$,ae(o[t]),x({type:"setBackgroundColor",payload:{d:t,backgroundColor:o[t]}})}a.useEffect(()=>{pe()},[T,le,se]);const pe=()=>{const l=[12,34,56,78];c.current&&u.current&&T<250?G(c.current,15,0):c.current&&u.current&&G(c.current,23,0),Z.current&&u.current&&G(Z.current,50-Z.current.offsetWidth/u.current.offsetWidth*50,0),n.current&&u.current&&T<250?G(n.current,85-n.current.offsetWidth/u.current.offsetWidth*100,.3):n.current&&u.current&&G(n.current,77-n.current.offsetWidth/u.current.offsetWidth*100,.3),j.current&&u.current&&T<300?G(j.current,27,100-j.current.offsetHeight/u.current.offsetHeight*100):j.current&&u.current&&G(j.current,32,100-j.current.offsetHeight/u.current.offsetHeight*100),g.current&&u.current&&T<300?G(g.current,73-g.current.offsetWidth/u.current.offsetWidth*100,100-g.current.offsetHeight/u.current.offsetHeight*100):g.current&&u.current&&G(g.current,68-g.current.offsetWidth/u.current.offsetWidth*100,100-g.current.offsetHeight/u.current.offsetHeight*100),h.current&&u.current&&T<300?G(h.current,2,100-h.current.offsetHeight/u.current.offsetHeight*100):h.current&&u.current&&G(h.current,10,100-h.current.offsetHeight/u.current.offsetHeight*100),A.current&&u.current&&T<300?G(A.current,98-A.current.offsetWidth/u.current.offsetWidth*100,100-A.current.offsetHeight/u.current.offsetHeight*100):A.current&&u.current&&G(A.current,90-A.current.offsetWidth/u.current.offsetWidth*100,100-A.current.offsetHeight/u.current.offsetHeight*100),qe.forEach(d=>{d.forEach((b,L)=>{if(b.current&&ee.current){const U=L<4?0:100-b.current.offsetWidth/ee.current.offsetWidth*100,I=l[L%4];G(b.current,U,I)}})})};function G(o,s,l){o&&u.current&&(o.style.left=u.current.offsetWidth/100*s+"px",o.style.top=u.current.offsetHeight/100*l+"px")}a.useEffect(()=>{W&&je&&_e&&W&&B.current&&(B.current.style.top=`${W.top+W.width*-.05}px`,B.current.style.left=`${W.left+W.width*-.05}px`,B.current.style.width=`${W.width*1.1}px`,B.current.style.height=`${W.height*1.1}px`)},[W,je,_e]);const Xt=Mo(),uo=()=>{Xt("/portfolio/blob?register=register")},mo=()=>{Xt("/portfolio/blob?login=login")},ho=()=>{const o=document.getElementById(`button-container${t}`);o&&o.scrollIntoView({behavior:"smooth",block:"start"})},fo={width:"100%",height:"auto",margin:"0 auto"},bo=async()=>{if(document.getElementById("drag-wrap"+t)&&!f)try{let s={};for(let N=0;N<localStorage.length;N++){const de=localStorage.key(N);if(de){const He=localStorage.getItem(de);He!==null&&(s[de]=He)}}V(!0);const b=await fetch("http://localhost:4000/api/blobs/screenshot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:window.location.href,selector:`#drag-wrap${t}`,language:e,localStorageData:s,width:T,height:le})});if(!b.ok)throw v(E(K[e],!0,8)),V(!1),new Error(`Error: ${b.statusText}`);const L=await b.json(),U=m.current,I=y.current;U&&I&&(I.src=`data:image/png;base64,${L.screenshot}`,U.style.display="block",I.scrollIntoView({behavior:"smooth",block:"start"}),v(E(`${ta[e]}; ${ra[e]}`,!1,10)),V(!1),Pe(!0))}catch(s){v(E(K[e],!0,8)),console.error(K[e],s)}},qt=()=>{const o=y.current;if(o&&o.src){const s=document.createElement("a");s.href=o.src,s.download="blobs.png",document.body.appendChild(s),s.click(),document.body.removeChild(s),v(E(oa[e],!1,8))}else v(E(pr[e],!0,8)),console.error(pr[e])};a.useEffect(()=>{f&&v(E(`${or[e]}...`,!1,20))},[f]);const[Ce,yo]=a.useState(5),[po,vo]=a.useState({[t]:1}),Ve=(o,s)=>{vo(l=>({...l,[o]:s}))},xo=()=>{if(q.size===0){v(E("Please hide the layers you want to delete.",!0,8));return}if(Array.from(q).filter(b=>F[t].some(L=>L.layer===b)).length>0&&!window.confirm(`${sa[e]}. ${aa[e]}`))return;const s=F[t].filter(b=>!q.has(b.layer)),l=he-q.size;if(l<1){v(E(na[e],!0,8));return}const d=s.map(b=>{const L=b.layer;let U=L;return q.forEach(I=>{L>I&&(U-=1)}),{...b,layer:U}});x({type:"setDraggablesAtD",payload:{d:t,draggables:d}}),ye(l),Te(l),fe(new Set),setTimeout(()=>{pe()},300)},go=o=>{const s=he+o;if(s>9){v(E(la[e],!0,8));return}const l=F[t].map(d=>{const b=d.layer>z?d.layer+o:d.layer;return{...d,layer:b}});x({type:"setDraggablesAtD",payload:{d:t,draggables:l}}),ye(s),Te(s),fe(new Set),setTimeout(()=>{pe()},300)},Zt=(o,s,l)=>{const d=Math.random().toString(36).substr(2,9);return zt?r.jsxs("div",{className:"pagination-controls",children:[s!==1?r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>Ve(Number(o),1),disabled:s===1,className:"btn-small pagination-btn",children:["« ",r.jsx("span",{className:"scr",children:ca[e]})]}),r.jsxs("button",{onClick:()=>Ve(Number(o),Math.max(s-1,1)),disabled:s===1,className:"btn-small pagination-btn",children:[" ‹ ",r.jsx("span",{className:"scr",children:ia[e]})]})]}):r.jsx(r.Fragment,{}),r.jsxs("span",{children:[da[e]," ",s," / ",l]}),s!==l?r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>Ve(Number(o),Math.min(s+1,l)),disabled:s===l,className:"btn-small pagination-btn",children:[r.jsx("span",{className:"scr",children:ua[e]})," › "]}),r.jsxs("button",{onClick:()=>Ve(Number(o),l),disabled:s===l,className:"btn-small pagination-btn",children:[r.jsx("span",{className:"scr",children:ma[e]})," »"]})]}):r.jsx(r.Fragment,{}),r.jsx("div",{className:"input-wrap items-per-page",children:r.jsxs("label",{htmlFor:`items-per-page${t}-${d}`,children:[r.jsx("input",{id:`items-per-page${t}-${d}`,className:"",type:"number",value:Ce,placeholder:Ce.toString(),min:1,max:100,onChange:b=>yo(Number(b.target.value))}),r.jsx("span",{children:ha[e]})]})})]}):r.jsx(r.Fragment,{})};return r.jsx(r.Fragment,{children:r.jsx("section",{className:"card",children:r.jsx("div",{children:r.jsxs("div",{id:`drag-container${t}`,className:`drag-container drag-container${t}`,children:[r.jsxs("div",{className:"blob-title-wrap",children:[r.jsxs("h2",{className:"blob-title",children:[rr[e]," ",t+1]}),t===0?r.jsxs("p",{children:[Ue[e]," "]}):t===1?r.jsxs("p",{children:[Ao[e],"."," ",Ue[e]," "]}):t===2?r.jsxs("p",{children:[Ro[e],"."," ",Ue[e]," "]}):r.jsx("p",{children:Ue[e]})]}),r.jsxs("div",{className:"label-container",children:[r.jsx("span",{id:`blobdescription${t}`,className:"scr",children:Io[e]}),r.jsxs("span",{children:["[",lt[e],": ",z+1,"]"," "]}),r.jsx("span",{ref:C,id:`selectedvalue${t}`,className:"selectedvalue",children:$e[e]})]}),r.jsxs("div",{id:`button-container${t}`,className:"button-container",children:[r.jsxs("button",{ref:te,id:`stop-blobs${t}`,className:"stop-blobs tooltip-wrap ",onClick:o=>{qr(o)},"aria-labelledby":`stop-blobs${t}-span`,children:[r.jsx("span",{id:`stop-blobs${t}-span`,className:"tooltip above space",children:Fo[e]}),ut?Oo[e]:Vo[e]]}),r.jsxs("button",{ref:M,id:`reset-blobs${t}`,"aria-labelledby":`reset-blobs${t}-span`,className:"reset-blobs tooltip-wrap",onClick:o=>{Zr(o)},children:[r.jsx("span",{id:`reset-blobs${t}-span`,className:"tooltip above space",children:Ho[e]})," ",zo[e]]}),r.jsxs("button",{id:`toggle-marker${t}`,"aria-labelledby":`toggle-marker${t}-span`,className:"toggle-marker tooltip-wrap",onClick:()=>kr(!je),children:[r.jsx("span",{id:`toggle-marker${t}-span`,className:"tooltip above space",children:`${Uo[e]}`}),je?Yo[e]:Wo[e]]}),r.jsxs("button",{ref:oe,id:`disable-scroll${t}`,"aria-labelledby":`disable-scroll${t}-span`,className:`disable-scroll tooltip-wrap ${se?"":"active"}`,onClick:()=>{Kr()},children:[r.jsx("span",{id:`disable-scroll${t}-span`,className:"tooltip above space",children:se?Jo[e]:_o[e]}),se?Go[e]:Xo[e]]}),r.jsx("button",{id:`toggle-controls${t}`,"aria-labelledby":`toggle-controls${t}-span`,className:`toggle-controls ${_?"":"active"}`,onClick:()=>{wr(!_),_||setTimeout(()=>{pe()},200)},children:r.jsxs("span",{id:`toggle-controls${t}-span`,children:[" ",_?qo[e]:Zo[e]]})}),r.jsxs("button",{id:`take-screenshot${t}`,"aria-labelledby":`take-screenshot${t}-span`,disabled:f,onClick:bo,className:"reset screenshot tooltip-wrap",children:[r.jsx(Qo,{}),r.jsx("span",{id:`take-screenshot${t}-span`,className:"tooltip left below space",children:f?or[e]:Ko[e]})]})]}),r.jsxs("div",{ref:ee,className:`drag-wrap-outest drag-wrap-outest${t}`,children:[r.jsxs("div",{ref:i,id:`drag-wrap-outer${t}`,className:"drag-wrap-outer",style:{...oo,...ro,...to,...eo},children:[r.jsxs("div",{tabIndex:0,ref:n,className:`make-smaller tooltip-wrap reset ${_?"":"hidden"}`,id:`make-smaller${t}`,children:[r.jsx(es,{}),r.jsx("span",{id:`make-smaller${t}-span`,className:"tooltip left below",children:`${ts[e]}. ${sr[e]}: ${ar[e]}`})]}),r.jsxs("div",{ref:A,className:`make-larger tooltip-wrap reset ${_?"":"hidden"}`,id:`make-larger${t}`,children:[r.jsx(rs,{}),r.jsx("span",{id:`make-larger${t}-span`,className:"tooltip left above",children:`${os[e]}. ${sr[e]}: ${ar[e]}`})]}),r.jsxs("div",{ref:c,className:`make-more tooltip-wrap reset ${_?"":"hidden"}`,id:`make-more${t}`,children:[r.jsx(ss,{}),r.jsx("span",{id:`make-more${t}-span`,className:"tooltip right below",children:as[e]})]}),r.jsxs("button",{ref:Z,className:`make-random tooltip-wrap ${_?"":"hidden"}`,id:`make-random${t}`,"aria-labelledby":`make-random${t}-span`,onClick:()=>Gt(),children:[r.jsx(ns,{}),r.jsx("span",{id:`make-random${t}-span`,className:"tooltip below",children:`${ls[e]}. ${cs[e]}!`})]}),r.jsxs("div",{ref:h,className:`delete-blob tooltip-wrap reset ${_?"":"hidden"}`,id:`delete-blob${t}`,children:[r.jsx(is,{}),r.jsx("span",{id:`delete-blob${t}-span`,className:"tooltip right above",children:ds[e]})]}),r.jsxs("div",{ref:j,id:`layer-decrease${t}`,className:`layer-adjust layer-decrease tooltip-wrap ${_?"":"hidden"}`,children:[r.jsx("span",{id:`layer-decrease${t}-span`,className:"tooltip above",children:`${us[e]} ${nr[e]}`}),r.jsx(lr,{})]}),r.jsxs("div",{ref:g,id:`layer-increase${t}`,className:`layer-adjust layer-increase tooltip-wrap ${_?"":"hidden"}`,children:[r.jsx("span",{id:`layer-increase${t}-span`,className:"tooltip above",children:`${ms[e]} ${nr[e]}`}),r.jsx(cr,{})]}),je&&_e&&W&&r.jsx("div",{ref:B,style:{position:"absolute",top:`${W.top+W.width*-.05}px`,left:`${W.left+W.width*-.05}px`,width:`${W.width*1.1}px`,height:`${W.height*1.1}px`,outline:"3px dashed black",outlineOffset:"2px",border:"3px dashed white",borderRadius:"50%",zIndex:999}}),r.jsx("div",{ref:u,id:`drag-wrap${t}`,className:"drag-wrap",children:r.jsx(xa,{layerAmount:he,layer:z,hiddenLayers:q,changeBlobLayer:Br,setActiveLayer:ce,highestZIndex:me,language:e,dispatch:x,d:t,items:F[t]??[],saveDraggables:Ft,getPosition:Qr,colorBlockProps:qe,makeLarger0:A,makeSmaller0:n,makeMore0:c,deleteBlob0:h,layerIncrease:g,layerDecrease:j,dragWrap:u,exitApp:ne,selectedvalue0:C,setFocusedBlob:ct,colorIndex:gr,setColorIndex:$r,colorPairs:at,colorswitch:Qe,scroll:se,setScroll:Pe,clickOutsideRef:u,addRandomDraggable:Gt})})]}),r.jsx(Na,{d:t,language:e,getRefName:jr,map:Er,colorBlockProps:qe,colorPairs:at,controlsVisible:_})]}),r.jsxs("div",{className:"layer-mover-control-wrap",children:[r.jsxs("div",{className:`movers-wrap movers-wrap1 ${_?"":"hidden"}`,children:[r.jsxs("button",{id:`moveleft${t}`,"aria-labelledby":`moveleft${t}-span`,className:"moveleft mover tooltip-wrap narrow2",onClick:_r,children:[r.jsx(hs,{}),r.jsx("span",{id:`moveleft${t}-span`,className:"tooltip above",children:fs[e]})]}),r.jsxs("button",{id:`moveright${t}`,"aria-labelledby":`moveright${t}-span`,className:"moveright mover tooltip-wrap narrow2",onClick:Jr,children:[r.jsx(bs,{}),r.jsx("span",{id:`moveright${t}-span`,className:"tooltip above",children:ys[e]})]})]}),r.jsxs("div",{className:"layer-btn-wrap layer-tools layer-tools1",children:[r.jsxs("button",{id:`decrease-layer-amount${t}`,"aria-labelledby":`decrease-layer-amount${t}-span`,className:"layer-tool layer-amount decrease-layer-amount tooltip-wrap narrow2",onClick:xo,children:[r.jsx("span",{id:`decrease-layer-amount${t}-span`,className:"tooltip above",children:ps[e]}),r.jsx(vs,{})]}),r.jsxs("button",{id:`every-layer-minus${t}`,"aria-labelledby":`every-layer-minus${t}-span`,className:"layer-tool every-layer tooltip-wrap narrow2",onClick:()=>Jt(-1),children:[r.jsx("span",{id:`every-layer-minus${t}-span`,className:"tooltip above",children:xs[e]}),r.jsx(lr,{})]})]}),r.jsx("div",{className:"layer-btn-wrap layers",children:Array.from({length:he},(o,s)=>s).map((o,s)=>r.jsx("button",{id:`layer-button${o}`,"aria-labelledby":`layer-button${o}-span`,onClick:()=>{z===o?Nr(o):ce(o)},className:`layer-button tooltip-wrap narrow2 ${z===o?"active":""} ${q.has(o)?"dim":""}`,children:r.jsxs("span",{id:`layer-button${o}-span`,children:[r.jsx("span",{className:"scr",children:lt[e]})," ",o+1," ",r.jsx("span",{className:"tooltip above",children:z===o?gs[e]:$s[e]})]})},`${o}*${s}`))}),r.jsxs("div",{className:"layer-btn-wrap layer-tools layer-tools2",children:[r.jsxs("button",{id:`every-layer-plus${t}`,"aria-labelledby":`every-layer-plus${t}-span`,className:"layer-tool every-layer tooltip-wrap narrow2",onClick:()=>Jt(1),children:[r.jsx("span",{id:`every-layer-plus${t}-span`,className:"tooltip above",children:ks[e]}),r.jsx(cr,{})]}),r.jsxs("button",{id:`increase-layer-amount${t}`,"aria-labelledby":`increase-layer-amount${t}-span`,className:"layer-tool layer-amount increase-layer-amount tooltip-wrap narrow2",onClick:()=>go(1),children:[r.jsx("span",{id:`increase-layer-amount${t}-span`,className:"tooltip above",children:ws[e]}),r.jsx(Es,{})]})]}),r.jsxs("div",{className:`movers-wrap movers-wrap2 ${_?"":"hidden"}`,children:[r.jsxs("button",{id:`moveup${t}`,"aria-labelledby":`moveup${t}-span`,className:"moveup mover tooltip-wrap narrow2",onClick:Xr,children:[r.jsx(js,{}),r.jsx("span",{id:`moveup${t}-span`,className:"tooltip above",children:Bs[e]})]}),r.jsxs("button",{id:`movedown${t}`,"aria-labelledby":`movedown${t}-span`,className:"movedown mover tooltip-wrap narrow2",onClick:Gr,children:[r.jsx(Ns,{}),r.jsx("span",{id:`movedown${t}-span`,className:"tooltip above",children:Ss[e]})]})]})]}),r.jsx(Sa,{d:t,defaultHue:$,defaultSaturation:p,defaultLightness:P,setSliderHueVal:Be,setSliderSatVal:Ne,setSliderLightVal:Se,language:e,sliderLightness:no,sliderSaturation:ao,sliderHue:so,sliderLightnessReset:lo,sliderSaturationReset:co,sliderHueReset:io,sliderLightVal:Oe,sliderSatVal:Fe,sliderHueVal:Ie,sliderLightnessInput:Y,sliderSaturationInput:H,sliderHueInput:J}),r.jsx("div",{ref:ne,id:`exitblob${t}`,className:"exitblob"}),k?r.jsxs("div",{className:"blob-handling",children:[r.jsx("div",{className:"full wide flex column center gap",children:r.jsxs("form",{onSubmit:o=>Vr(o),children:[r.jsx("div",{className:"input-wrap",children:r.jsxs("label",{htmlFor:`blobname${t}`,children:[r.jsx("input",{id:`blobname${t}`,type:"text",value:be,onChange:Fr,placeholder:Ye[e],maxLength:30}),r.jsxs("span",{children:[Ye[e],":"]})]})}),r.jsx("button",{type:"submit",children:Cs[e]})]})}),r.jsxs("div",{ref:m,id:`blob-screenshot${t}`,style:{display:"none"},children:[r.jsx("button",{onClick:qt,children:ir[e]}),r.jsx("img",{src:"",ref:y,alt:Ls[e],style:fo}),r.jsx("button",{onClick:qt,children:ir[e]})]}),r.jsx("h3",{children:Ds[e]}),Tr?r.jsx("p",{children:Ps[e]}):!re||re.length<1?r.jsx("p",{children:Ts[e]}):zt?Object.keys(Re).map((o,s)=>{const l=Object.keys(Re[Number(o)]),d=Math.ceil(l.length/Ce),b=po[Number(o)]??1,L=(b-1)*Ce,U=L+Ce,I=l.slice(L,U);return r.jsxs("div",{className:"flex center margin0auto",children:[Zt(o,b,d),r.jsx("ul",{className:"blob-versions-wrap",children:I.map((N,de)=>r.jsxs("li",{className:"blob-version-item",children:[r.jsx("span",{children:N}),r.jsxs("div",{className:"button-wrap",children:[r.jsxs("button",{onClick:()=>zr(Number(o),N),children:[As[e]," ",r.jsx("span",{className:"scr",children:N})]}),r.jsxs("button",{onClick:()=>Ur(Number(o),N),children:[Rs[e]," ",r.jsx("span",{className:"scr",children:N})]}),r.jsxs(Is,{language:e,id:`accordion-blobnewname-${N.replace(/\s/g,"-")}`,className:"blobnewname",text:dr[e],hideBrackets:!0,onClick:()=>{Vt(N),Pr(N)},isOpen:Dr===N,children:[r.jsx("div",{className:"input-wrap",children:r.jsxs("label",{htmlFor:`blobnewname-${N.replace(/\s/g,"-")}`,children:[r.jsx("input",{id:`blobnewname-${N.replace(/\s/g,"-")}`,type:"text",value:Me,onChange:Or,placeholder:ur[e],maxLength:30}),r.jsxs("span",{children:[dr[e],":"]})," ",r.jsx("span",{className:"scr",children:N})]})}),r.jsxs("button",{onClick:()=>{N!==Me?Hr(N,Me):v(E(`${K[e]}: ${ur[e]}`,!0,5))},children:[Fs[e]," ",r.jsxs("span",{className:"scr",children:[N,": ",Os[e]," ",Me]})]})]})]})]},`${N}+${de}`))},`${o}+${s}`),Zt(o,b,d)]},`${o}:${s}`)}):r.jsx("p",{children:Ms[e]})]}):r.jsxs("div",{className:"wide flex column center gap",children:[r.jsxs("div",{className:"login-to-save wide flex column center gap-half",children:[r.jsx(Vs,{}),Hs[e]]}),r.jsxs("div",{className:"blob-register-login-wrap",children:[r.jsx("button",{onClick:mo,children:zs[e]}),r.jsx("big",{children:Us[e]}),r.jsx("button",{onClick:uo,children:Ys[e]})]})]}),r.jsx("svg",{className:"filter",children:r.jsxs("filter",{id:"svgfilter0",children:[r.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"7"}),r.jsx("feColorMatrix",{values:`\r
1 0 0 0 0\r
0 1 0 0 0\r
0 0 1 0 0\r
0 0 0 50 -18\r
`})]})}),r.jsx("svg",{className:"filter",children:r.jsxs("filter",{id:"svgfilter1",children:[r.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"8"}),r.jsx("feColorMatrix",{values:`\r
1 0 0 0 0\r
0 1 0 0 0\r
0 0 1 0 0\r
0 0 0 46 -28\r
`})]})})]})})})})}const Va=({language:e})=>{const t=Array.from({length:3},($,p)=>p),w=a.useRef(t.reduce(($,p)=>($[p]=a.createRef(),$),{})),i=$=>r.jsx("div",{className:"to-blob-art-btn-wrap flex center gap-half",children:t.map((p,P)=>$===P?r.jsx(a.Fragment,{},P):r.jsxs("button",{style:{borderRadius:"1rem",flex:"0 0 auto"},className:"to-blob-art-btn grayer",onClick:()=>{const O=document.getElementById(`drag-container${P}`);O&&O.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},children:[fa[e]," ",ba[e]," ",P+1]},P))});return r.jsxs(r.Fragment,{children:[t.map(($,p)=>r.jsxs(a.Fragment,{children:[i(p),r.jsx(Pa,{language:e,d:$,ds:t.length,dragWrapOuter:w.current[$]})]},$)),i(-1)]})};export{Va as default};
