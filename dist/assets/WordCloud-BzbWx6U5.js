import{r as E,j as $}from"./react-kX_YxI4E.js";import{L as O,u as q,l as G,j as J,e as T,aK as Q}from"./index-De2CRixK.js";import"./dom-to-image-more-CfDXlNbO.js";import"./react-dom-B5MLDbn_.js";import"./scheduler-CzFDRTuY.js";import"./react-redux-BEmJlIGA.js";import"./hoist-non-react-statics-DQogQWOa.js";import"./react-is-DUDD-a5e.js";import"./use-sync-external-store-BPp6CH6k.js";import"./@reduxjs-DhFEcpJw.js";import"./immer-C0GRqQ_d.js";import"./redux-CE3tqztX.js";import"./@babel-DF5_wy6Y.js";import"./redux-thunk-CY0Q9z1Q.js";import"./axios-CCb-kr4I.js";import"./react-icons-DhcENkY1.js";import"./react-router-dom-StiqOUIT.js";import"./react-router-DUuhLvki.js";import"./@remix-run-DTnHqtaE.js";const U="_cloud_1ami1_1",V="_word_1ami1_29",v={"cloud-wrap":"_cloud-wrap_1ami1_1",cloud:U,word:V},yt=({language:K,title:A,onClick:F,words:b,width:f=600,height:g=400})=>{const{t:u}=E.useContext(O),y=q(),[M,N]=E.useState([]),j=G(),{windowWidth:x}=J(),_=E.useRef(null),R=(t,n)=>{const e=document.createElement("canvas").getContext("2d");if(e){e.font=`${n}px Arial`;const s=e.measureText(t).width+2,c=n*.65,r=n*.2,l=c+r;return{width:s,height:l,ascent:c,descent:r}}return{width:0,height:0,ascent:0,descent:0}},I=(t,n)=>{const{width:i,height:e,ascent:h}=R(t.text,n);return{width:i,height:e,ascent:h}},L=(t,n)=>{const i=[],e=n.width*Q(.2,.4),h=n.height*.2;return i.push({x:t.x+e,y:t.y-n.height}),i.push({x:t.x+e,y:t.y+t.height}),i.push({x:t.x+t.width,y:t.y+h}),i.push({x:t.x+t.width-e,y:t.y-n.height}),i.push({x:t.x+t.width-e,y:t.y+t.height}),i.push({x:t.x-n.width,y:t.y+h}),i.push({x:t.x-n.width,y:t.y+t.height}),x<500&&i.push({x:t.x-n.width,y:t.y-n.height}),x<500&&i.push({x:t.x-e,y:t.y+t.height*2}),x<500&&i.push({x:t.x-e,y:t.y-t.height*2}),x<500&&i.push({x:t.x+e,y:t.y+t.height*3}),x<500&&i.push({x:t.x+e,y:t.y-t.height*3}),x<500&&i.push({x:t.x-e,y:t.y+t.height*3}),x<500&&i.push({x:t.x-e,y:t.y-t.height*3}),i},S=(t,n,i,e,h)=>h.some(s=>t<s.x+s.width&&t+i>s.x&&n<s.y+s.height&&n+e>s.y),p=async t=>{var i,e;const n=t;if(F)F(t);else if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(n).then(()=>{y(T(u("ECopiedToClipboard"),!1,3))},h=>{y(T(`${u("EFailedToCopy")}`,!0,3)),console.error("Failed to copy:",h)});else{const h=document.createElement("textarea");h.value=n,(i=_.current)==null||i.appendChild(h),h.focus(),h.select();try{document.execCommand("copy"),y(T(u("ECopiedToClipboard"),!1,3))}catch(s){console.error("Failed to copy:",s),y(T(`${u("EFailedToCopy")}`,!0,3))}(e=_.current)==null||e.removeChild(h)}};return E.useEffect(()=>{if(b.length===0){N([]);return}const t=[...b].sort((e,h)=>h.weight!==e.weight?h.weight-e.weight:e.text.length-h.text.length),n=[],i=[];t.forEach((e,h)=>{const s=e.weight,{width:c,height:r,ascent:l}=I(e,s);let m=!1;const z=30;let k=0;if(h===0){const o=(f-c)/2,w=(g+l-r)/2;n.push({x:o,y:w,width:c,height:r}),i.push($.jsx("text",{x:o,y:w+l,fontSize:s,fontFamily:"Arial, sans-serif",fill:`hsl(${h*110%360}, 100%, ${j?"20":"70"}%)`,className:v.word,style:{cursor:"pointer"},onClick:()=>{p(e.text)},tabIndex:0,onKeyDown:C=>{(C.key==="Enter"||C.key===" ")&&p(e.text)},"aria-label":A??`${u("ECopyToClipboard")}: ${e.text}`,children:e.text},e.text)),m=!0}for(;!m&&k<z;){for(let o=0;o<n.length&&!m;o++){const w=n[o],C=L(w,{width:c,height:r});for(let D of C){const a={x:D.x,y:D.y,width:c,height:r};if(!(a.x<0||a.y<0||a.x+a.width>f||a.y+a.height>g)&&!S(a.x,a.y,a.width,a.height,n)){n.push(a),i.push($.jsx("text",{x:a.x,y:a.y+l,fontSize:s,fontFamily:"Arial, sans-serif",fill:`hsl(${h*110%360}, 100%, ${j?"20":"70"}%)`,style:{cursor:"pointer"},className:v.word,onClick:()=>p(e.text),tabIndex:0,onKeyDown:H=>{(H.key==="Enter"||H.key===" ")&&p(e.text)},"aria-label":A??`${u("ECopyToClipboard")}: ${e.text}`,children:e.text},e.text)),m=!0;break}}}k++}m||console.warn(`Could not place word after ${k} attempts:: ${e.text}`)}),N(i)},[b,f,g,K,j,y]),$.jsx("div",{ref:_,className:v["cloud-wrap"],children:$.jsx("svg",{width:f,height:g,className:v.cloud,children:M})})};export{yt as default};
