const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TodoList-BrMidf2m.js","assets/react-A9DAvxly.js","assets/hoist-non-react-statics-D5aJipOz.js","assets/index-BNHP9xTd.js","assets/react-dom-CxfJ6lHP.js","assets/scheduler-CzFDRTuY.js","assets/react-redux-C4cSaZU-.js","assets/react-is-DUDD-a5e.js","assets/use-sync-external-store-DEc9BFqZ.js","assets/@reduxjs-DhFEcpJw.js","assets/immer-C0GRqQ_d.js","assets/redux-CE3tqztX.js","assets/@babel-DF5_wy6Y.js","assets/redux-thunk-CY0Q9z1Q.js","assets/axios-CCb-kr4I.js","assets/react-icons-RHjzyHVQ.js","assets/react-router-dom-CYs6befe.js","assets/react-router-S1Hdk0kP.js","assets/@remix-run-DTnHqtaE.js","assets/index-C_uU-J1O.css"])))=>i.map(i=>d[i]);
import{K as le,bu as fe,bQ as pe,bR as _,W as u,bS as me,bT as z,bU as p,bV as ue,bW as R,bX as ye,S as C,bY as he,bZ as Te,b_ as Se,b$ as we,c0 as xe,c1 as Ee,c2 as Ne,c3 as ge,ag as L,c4 as be,c5 as K,c6 as M,c7 as U,c8 as Y,c9 as je,ca as ve,cb as _e,cc as Ce,cd as P,ce as ke,cf as Oe,cg as Ae}from"./index-BNHP9xTd.js";import{r as d,j as n}from"./react-A9DAvxly.js";import{a as k}from"./react-redux-C4cSaZU-.js";import{W as Ie}from"./react-icons-RHjzyHVQ.js";import{v as $e}from"./uuid-Dv1xt2bl.js";import"./react-dom-CxfJ6lHP.js";import"./hoist-non-react-statics-D5aJipOz.js";import"./scheduler-CzFDRTuY.js";import"./@reduxjs-DhFEcpJw.js";import"./immer-C0GRqQ_d.js";import"./redux-CE3tqztX.js";import"./@babel-DF5_wy6Y.js";import"./redux-thunk-CY0Q9z1Q.js";import"./axios-CCb-kr4I.js";import"./react-router-dom-CYs6befe.js";import"./react-router-S1Hdk0kP.js";import"./@remix-run-DTnHqtaE.js";import"./react-is-DUDD-a5e.js";import"./use-sync-external-store-DEc9BFqZ.js";const De=d.lazy(()=>be(()=>import("./TodoList-BrMidf2m.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19])));function tt({language:i}){const o=le(),r=k(e=>{var t;return(t=e.auth)==null?void 0:t.user});d.useEffect(()=>{o(fe())},[]);const a=k(e=>e.todos.todos),O=k(e=>e.todos.status),F=k(e=>e.todos.error),[g,q]=d.useState("low"),[J,Pe]=d.useState(""),[A,B]=d.useState("other"),[x,V]=d.useState("all"),[E,H]=d.useState("all"),T="ReactTodos",Q=a==null?void 0:a.some(e=>e.complete);d.useEffect(()=>{if(a.length===0&&!r){const e=JSON.parse(window.localStorage.getItem(T)||"[]"),t=new Set(a.map(s=>s.key));e.forEach(s=>{t.has(s.key)||o(pe(s))})}},[o,a,r]),d.useEffect(()=>{window.localStorage.setItem(T,JSON.stringify(a))},[a]);const X=e=>{const t=new Set,s=[];return e.forEach(c=>{t.has(c.key)?s.push(c):t.add(c.key)}),s},Z=e=>{if(!e){o(u("Error: no key",!0,8));return}if(r!=null&&r._id)o(K(r._id,e));else{o(M(e));const t=a.filter(s=>s.key!==e);window.localStorage.setItem(T,JSON.stringify(t))}};d.useEffect(()=>{const e=X(a),t=new Set;e.forEach(s=>{t.has(s.key)||(Z(s.key),t.add(s.key))})},[a]);const[N,G]=d.useState([]),I=a.filter(e=>{const t=x==="all"||e.priority===x,s=E==="all"||e.category===E;return t&&s});d.useEffect(()=>{const e=I==null?void 0:I.slice().sort((t,s)=>(t.order??0)-(s.order??0)).map(t=>({...t,id:t.order,status:"todos"}));G(e)},[a,x,E]);const ee=["all","low","medium","high"],te=["all","work","personal","shopping","other"],se=["low","medium","high"],oe=["work","personal","shopping","other"],$=_(ee,i),D=_(te,i),b=_(se,i),j=_(oe,i);d.useEffect(()=>{O==="failed"&&o(u(`There was an error: ${F}`,!0,8))},[O,F,o]);const[W,h]=d.useState(!1);d.useEffect(()=>{r!=null&&r._id&&o(me(r._id)).then(()=>{o(z(r._id))}).catch(e=>{var t,s;console.error(e),(s=(t=e.response)==null?void 0:t.data)!=null&&s.message?o(u(e.response.data.message,!0,8)):o(u(`${e.message}`,!0,8))})},[r==null?void 0:r._id]);function re(e){const t=a.find(s=>s.key===e);if(t){const s={...t,complete:!t.complete};o(r?U(r._id,e,s):Y(s))}}const ie=async(e,t,s,c,S)=>{if(h(!0),!e){o(u("Error: no key",!0,8)),h(!1);return}const y=a.find(m=>m.key===e);if(y){const m={...y,name:t,priority:s,deadline:c,category:S};if(r)await o(U(r._id,e,m)).then(()=>{o(u(`${je[i]}`,!1,3)),h(!1)}).catch(l=>{var f,w;console.error(l),(w=(f=l.response)==null?void 0:f.data)!=null&&w.message?o(u(l.response.data.message,!0,8)):o(u(`${l}`,!0,8)),h(!1)});else{o(Y(m));const l=a.map(f=>f.key===e?m:f);window.localStorage.setItem(T,JSON.stringify(l)),h(!1)}}},ae=e=>{var t,s;if(r)o(async c=>{var S,y;try{await ve(r._id,e).then(()=>{c(z(r._id))})}catch(m){console.error(m),(y=(S=m.response)==null?void 0:S.data)!=null&&y.message?c(u(m.response.data.message,!0,8)):c(u(`${m}`,!0,8))}});else try{o(_e(e))}catch(c){console.error(c),(s=(t=c.response)==null?void 0:t.data)!=null&&s.message?o(u(c.response.data.message,!0,8)):o(u(`${c}`,!0,8))}finally{window.localStorage.setItem(T,JSON.stringify(a))}},v=d.useRef(null),ne=e=>{var m;e.preventDefault(),h(!0);const t=((m=v.current)==null?void 0:m.value)??"";if(t===""){h(!1);return}const s=$e(),c=a.reduce((l,f)=>f.order>l?f.order:l,0),S=a.reduce((l,f)=>f.order<l?f.order:l,0);let y;if(g==="high"?y={key:s,name:t,complete:!1,order:S-1,priority:g,deadline:J,category:A}:y={key:s,name:t,complete:!1,order:c+1,priority:g,deadline:J,category:A},r)o(Ce(r._id,y)),h(!1);else{const l=[...a,y].sort((f,w)=>f.order-w.order).map((f,w)=>({...f,order:w}));o(P(l)),window.localStorage.setItem(T,JSON.stringify(l)),P(l),h(!1)}v.current&&(v.current.value="")};async function ce(e){if(e.preventDefault(),window.confirm(ke[i]))if(r)await o(Oe(r._id));else{o(Ae());const t=a.filter(s=>!s.complete);window.localStorage.setItem(T,JSON.stringify(t))}}function de(e){if(!e){o(u("Error: no key",!0,8));return}if(r!=null&&r._id)o(K(r._id,e));else{o(M(e));let t=a.filter(s=>s.key!==e);t=t.map((s,c)=>({...s,order:c+1})),o(P(t)),window.localStorage.setItem(T,JSON.stringify(t))}}return n.jsxs(n.Fragment,{children:[n.jsx("form",{onSubmit:ne,className:p.form,children:n.jsxs("fieldset",{children:[n.jsx("legend",{className:"scr",children:ue[i]}),n.jsxs("div",{className:p["todo-input-area"],children:[n.jsx("label",{htmlFor:"taskinput",children:R[i]}),n.jsx("textarea",{ref:v,id:"taskinput",className:"bg",rows:3,name:"task",required:!0,autoComplete:"off",placeholder:`${ye[i]}...`}),n.jsx(C,{z:N.length+5,id:"category",className:`${p.select} ${p["category-select"]}`,hideDelete:!0,instructions:he[i],value:j.find(e=>e.value===A)||j[0],onChange:e=>B(e==null?void 0:e.value),options:j,language:i}),n.jsx(C,{id:"priority",className:p.select,hideDelete:!0,instructions:Te[i],value:b.find(e=>e.value===g)||b[0],onChange:e=>q(e==null?void 0:e.value),options:b,language:i,z:N.length+4}),n.jsxs("button",{id:p["submit-todo"],className:p["submit-todo"],type:"submit",disabled:W,children:[R[i]," ",n.jsx(Ie,{})]})]})]})}),n.jsxs("div",{className:p["controls-wrap"],children:[n.jsx(C,{id:"category-filter",className:`${p.select} ${p["category-select"]}`,hideDelete:!0,instructions:Se[i],value:D.find(e=>e.value===E)||D[0],onChange:e=>H(e==null?void 0:e.value),options:D,language:i,z:N.length+3}),n.jsx(C,{id:"priority-filter",className:p.select,hideDelete:!0,instructions:we[i],value:$.find(e=>e.value===x)||$[0],onChange:e=>V(e==null?void 0:e.value),options:$,language:i,z:N.length+2}),n.jsx("button",{className:`danger ${p["clear-completed"]}`,disabled:!Q,onClick:e=>ce(e),children:xe[i]})]}),n.jsxs("div",{className:p["list-wrap"],children:[n.jsxs("p",{className:p["left-to-do"],children:[a==null?void 0:a.filter(e=>!(e!=null&&e.complete)).length," ",Ee[i]]}),(x!=="all"||E!=="all")&&n.jsxs("p",{className:p["filter-notification"],children:[Ne[i]," ",ge[i]]}),n.jsx(d.Suspense,{fallback:n.jsxs("p",{className:"flex center margin0auto textcenter",children:[L[i],"..."]}),children:n.jsx(De,{sending:W,todosWithIdAndStatus:N,toggleTodo:re,deleteTodo:de,language:i,modifyTodo:ie,modifyTodoOrder:ae,priorityOptions:b,categoryOptions:j})}),O==="loading"&&n.jsxs("p",{className:"flex center margin0auto textcenter",children:[L[i],"..."]})]})]})}export{tt as default};
