import{r as b,j as e}from"./react-A9DAvxly.js";import{io as E,ip as y,K as R,gx as j,iq as k,ir as v,i0 as P,b0 as U,ba as L,W as $,bd as C}from"./index-Bhl207lb.js";import{u as I}from"./Images-BS9-bflH.js";import{Q,P as g,g as M}from"./poems-CyKotpPB.js";import"./hoist-non-react-statics-D5aJipOz.js";import"./react-dom-yh0erWL-.js";import"./scheduler-CzFDRTuY.js";import"./react-redux-CHm9GgGE.js";import"./react-is-DUDD-a5e.js";import"./use-sync-external-store-DEc9BFqZ.js";import"./@reduxjs-DhFEcpJw.js";import"./immer-C0GRqQ_d.js";import"./redux-CE3tqztX.js";import"./@babel-DF5_wy6Y.js";import"./redux-thunk-CY0Q9z1Q.js";import"./axios-CCb-kr4I.js";import"./react-icons-CrVlm7qW.js";import"./react-router-dom-CYs6befe.js";import"./react-router-S1Hdk0kP.js";import"./@remix-run-DTnHqtaE.js";const q=({image:o,language:t,handleDownload:u,searchTerm:l,textType:i})=>{const{tooltip:p,handleMouseMove:f,handleMouseLeave:d}=I(),c=r=>{const a=r.currentTarget.getBoundingClientRect(),n=r.clientX-a.left+10,x=r.clientY-a.top+10;f(n,x)},[h,m]=b.useState({quote:"",category:"",author:""}),[w,s]=b.useState({title:"",author:"",lines:[],linecount:"0"});return b.useEffect(()=>{if(i==="poem"){const r=Math.floor(Math.random()*5)+1;(async()=>{const n=await M(t,r);s(n[0])})()}else i==="quote"?(async()=>{const a=await y(t,l);m(a)})():Math.floor(Math.random()*2)+1===1?(async()=>{const n=Math.floor(Math.random()*5)+1,x=await M(t,n);s(x[0])})():(async()=>{const n=await y(t,l);m(n)})()},[t,l,i]),e.jsxs("div",{onMouseMove:c,onMouseLeave:d,children:[e.jsxs("div",{className:"tooltip-wrap",children:[e.jsx("img",{src:o.largeImageURL,alt:o.tags,loading:"lazy",style:{width:"100%",height:"auto",borderRadius:"8px",cursor:"pointer",position:"relative"},onClick:u})," ",p.visible&&e.jsx("span",{className:"tooltip narrow",style:{top:p.y,left:p.x,right:"unset"},children:E[t]})]}),i==="quote"?e.jsx(Q,{quote:h,language:t}):e.jsx(g,{poem:w,language:t})]})},to=({image:o,language:t,show:u,searchTerm:l,textType:i})=>{const p=R(),f=async()=>{if(window.confirm(U[t]+"?")){const d=await fetch(o.largeImageURL,{mode:"cors"});if(!d.ok)throw new Error("Network response was not ok");try{const c=await d.blob(),h=window.URL.createObjectURL(c),m=o.largeImageURL.match(/\.(jpg|jpeg|png|gif|bmp|webp)$/i),w=m?m[1].toLowerCase():"jpg",s=document.createElement("a");s.href=h,s.download=`${L(`${o.id}`)}-${L(o.user)}.${w}`,s.target="_blank",s.rel="noreferrer",document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(h)}catch(c){console.error("Download failed:",c),p($(`${C[t]}: ${c}`,!0,5))}}};return e.jsxs("div",{className:`tooltip-wrap ${j["image-wrap"]}`,children:[e.jsx("img",{src:o.webformatURL,alt:o.tags,title:o.tags,loading:"lazy",className:`${j["image-small"]}`,style:{width:"100%",height:"auto",borderRadius:"8px",cursor:"pointer"},onClick:()=>{u({title:o.tags,className:j["image-modal"],children:e.jsx(q,{image:o,language:t,handleDownload:f,searchTerm:l,textType:i})})}}),e.jsx("span",{className:"tooltip above narrow2",children:k[t]}),e.jsx("p",{children:e.jsx("small",{children:e.jsxs("a",{href:o.pageURL,target:"_blank",rel:"noreferrer",children:[v[t]," (",P[t],": ",o.user,")"]})})})]},o.id)};export{to as default};
