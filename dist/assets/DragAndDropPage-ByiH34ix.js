import{r as p,j as e}from"./react-A9DAvxly.js";import{z as re}from"./react-icons-CMyplLKx.js";import{aP as ae,dw as Ee,dx as de,aZ as he,dy as Ce,dz as ye,dA as De,ax as ue,bS as we,dB as me,dC as Se,b0 as D,dD as ve,dE as Ne,dF as Te,dG as _e,dH as Ae,dI as $e,u as Oe,b9 as ke,dJ as ne,dK as X,dL as Ie,dM as pe,dN as xe,dO as ge,dP as qe,dQ as Le,dR as We,c3 as Re,bZ as ie,dS as ce,dT as le,dU as Fe,dV as Me,dW as z,dX as Pe,dY as Be,cg as Ye,H as Ue,au as He,cr as Ke,cs as Ve,dZ as Je,d_ as Ge,d$ as Ze,e0 as Qe,e1 as Xe,e2 as ze,c$ as et,e3 as tt,e4 as rt,e5 as st,e6 as ot,d7 as nt,e7 as it,e8 as ct,e9 as lt,ea as at,eb as dt,a0 as ht,ec as ut}from"./index-nWW9Io9b.js";import"./react-redux-CHm9GgGE.js";import{u as mt}from"./useDragAndDrop-CFENP5_-.js";import{E as ee}from"./form-C1vuQpLD.js";import"./hoist-non-react-statics-D5aJipOz.js";import"./react-dom-yh0erWL-.js";import"./scheduler-CzFDRTuY.js";import"./@reduxjs-DTZ4pglK.js";import"./immer-BNrqi0cU.js";import"./redux-CE3tqztX.js";import"./@babel-DF5_wy6Y.js";import"./redux-thunk-CY0Q9z1Q.js";import"./axios-BimPEqV4.js";import"./react-router-dom-BQMcumiI.js";import"./react-router-344DmMNz.js";import"./@remix-run-DTnHqtaE.js";import"./react-is-DUDD-a5e.js";import"./use-sync-external-store-DEc9BFqZ.js";const pt="_grid_90hcq_1",xt="_light_90hcq_29",ft="_card_90hcq_22",jt="_text_90hcq_154",bt="_blur_90hcq_186",Et="_open_90hcq_189",Ct="_one_90hcq_283",yt="_two_90hcq_286",Dt="_three_90hcq_289",wt="_four_90hcq_292",x={grid:pt,"container-main":"_container-main_90hcq_18","cards-container":"_cards-container_90hcq_22",light:xt,"change-status":"_change-status_90hcq_98","area-dragging":"_area-dragging_90hcq_118",card:ft,text:jt,blur:bt,open:Et,"add-color":"_add-color_90hcq_224","change-status-form":"_change-status-form_90hcq_259",delete:"_delete_90hcq_269",one:Ct,two:yt,three:Dt,four:wt};function St({language:r,status:h,statuses:j,id:o,index:b,data:c,handleDragging:d,handleUpdate:f,handleRemoveColor:F,setTheTarget:E,sanitize:S,focusedCard:v,setFocusedCard:N}){const g={backgroundColor:c==null?void 0:c.color,padding:"0.3em 5%",color:(c==null?void 0:c.lightness)=="dark"?"white":"black",borderColor:(c==null?void 0:c.lightness)=="dark"?"var(--color-gray-lighter)":"var(--color-gray-dark)",textShadow:(c==null?void 0:c.lightness)=="dark"?"1px 1px 1px black":"-8px 0 12px rgba(255,255,255,0.5), 8px 0 12px rgba(255,255,255,0.5)"},M={color:"var(--color-primary-20)",textShadow:"none"},P={margin:"0 auto 0.3em",display:"block",width:"max-content",fontSize:"0.9em"},B=j.reduce((n,i)=>(n[i]=i,n),{}),[T,w]=p.useState(!1);function Y(){w(n=>!n)}function U(){w(!1)}const k=p.useRef(null);ae({ref:k,onOutsideClick:U}),p.useRef(0);const q=p.useRef(0),J=(n,i)=>{n.preventDefault(),E(i),q.current=i},_=n=>{d(!0),n.preventDefault()},L=(n,i)=>{n.dataTransfer.setData("text/plain",JSON.stringify({type:"item",id:c==null?void 0:c.id}))};function H(n){c&&f(c.id,n.target.textContent)}function W(n){switch(n.code){case"Enter":case"Space":n.stopPropagation(),n.preventDefault(),c&&f(c.id,n.target.textContent),w(i=>!i);break;case"Escape":n.stopPropagation(),n.preventDefault(),w(!1);break}}const K=(n,i)=>{var R,G;const u=n.target.closest("li");let C;u?C=u:C=n.target;const A=Number((R=C==null?void 0:C.previousElementSibling)==null?void 0:R.dataset.identity),I=Number((G=C==null?void 0:C.nextElementSibling)==null?void 0:G.dataset.identity);switch(n.key){case"ArrowUp":c&&A!==null&&(n.preventDefault(),f(i,c.status,A),N(i));break;case"ArrowDown":c&&I!==null&&(n.preventDefault(),f(i,c.status,I),N(i));break;case"Tab":N(null)}};return p.useEffect(()=>{var n;v===o&&((n=k.current)==null||n.focus())},[v,o]),e.jsx("li",{ref:k,draggable:"true",onDragStart:n=>L(n),onDragEnter:n=>J(n,o),onDragOver:n=>_(n),onDragEnd:()=>d(!1),role:"listitem",title:c==null?void 0:c.status,tabIndex:0,onKeyDown:n=>K(n,o),"data-identity":o,children:e.jsxs("div",{style:g,className:`${x.card}`,children:[e.jsx("span",{className:x.text,children:c==null?void 0:c.content}),e.jsxs("b",{children:[e.jsx("button",{onClick:()=>F(c.content),children:"Ã—"}),e.jsxs("button",{"aria-haspopup":"true",onClick:Y,children:[e.jsx(re,{"aria-hidden":"true"}),e.jsx("span",{className:"scr",id:`instructions${o}`,children:Ee[r]})]})]}),e.jsxs("nav",{className:T?`${x.open} ${x.blur}`:`${x.blur}`,style:M,children:[e.jsxs("span",{style:P,children:[de[r],":"]}),e.jsx("ul",{role:"listbox","aria-describedby":`instructions${o}`,"aria-expanded":T?"true":"false",className:S(h),children:j.map((n,i)=>e.jsx("li",{role:"option",className:S(n),children:e.jsx("a",{className:S(n),onClick:u=>H(u),onKeyDown:u=>W(u),tabIndex:0,children:B[n]})},`${S(n)}-${i}-${b}`))})]})]})})}const vt=({language:r,status:h,statuses:j,isDragging:o,handleDragging:b,handleUpdate:c,handleRemoveColor:d,itemsByStatus:f,lightTheme:F,sanitize:E,updateStatus:S,reorderStatuses:v,deleteStatus:N})=>{const g=he(),[M,P]=p.useState(0),[B,T]=p.useState(!1),[w,Y]=p.useState(""),[U,k]=p.useState(null),q=p.useRef(null),J=/^[\w\u00C0-\u024F\u1E00-\u1EFF-_]*$/,_=i=>{const u=i.target.value;J.test(u)?Y(u):g(D(ve[r],!0,6))};ae({ref:q,onOutsideClick:()=>T(!1)});const L=i=>{const u=JSON.parse(i.dataTransfer.getData("text/plain"));u.type==="item"&&(c(u.id,h,M),b(!1))},H=i=>i.preventDefault(),W=(i,u)=>{i.dataTransfer.setData("text/plain",JSON.stringify({type:"span",id:u.toString()})),b(!0)},K=i=>{i.stopPropagation(),i.preventDefault()},n=(i,u)=>{i.preventDefault();const C=JSON.parse(i.dataTransfer.getData("text/plain"));if(C.type==="span"){const A=C.id;if(A!==u){const I=Array.from(j),[R]=I.splice(A,1);I.splice(u,0,R),v(A,u)}b(!1)}};return e.jsxs("div",{className:`${x["cards-container"]} ${o?x["area-dragging"]:""} ${F?x.light:""}`,onDrop:i=>n(i,j.indexOf(h)),onDragEnd:()=>b(!1),children:[e.jsxs("span",{ref:q,id:`label-${E(h)}`,className:x["status-label"],draggable:!0,onDragStart:i=>W(i,j.indexOf(h)),onDragOver:K,children:[e.jsx("b",{children:(()=>{switch(h.toLowerCase()){case"good":return De[r];case"bad":return ye[r];case"neutral":return Ce[r];default:return h}})()}),e.jsx(ue,{isOpen:B,setIsFormOpen:T,language:r,text:"*",hideBrackets:!0,className:`narrow2 ${x["change-status"]} change-status`,tooltip:we[r],x:"left",y:"below",children:e.jsxs("form",{className:x["change-status-form"],onSubmit:i=>{i.preventDefault(),S(j.indexOf(h),w)},children:[e.jsx("div",{className:"input-wrap",children:e.jsxs("label",{htmlFor:`${E(h)}-status`,children:[e.jsx("input",{type:"text",required:!0,id:`${E(h)}-status`,value:w,onChange:i=>_(i)}),e.jsx("span",{children:de[r]})]})}),e.jsx("button",{type:"submit",children:me[r]}),e.jsx("button",{type:"button",className:"danger delete",onClick:()=>{N(h)},children:Se[r]})]})})]}),e.jsx("ul",{"aria-labelledby":`label-${E(h)}`,id:E(h),className:E(h),role:"list",onDrop:L,onDragOver:H,children:f==null?void 0:f.map((i,u)=>e.jsx(St,{language:r,id:i.id,index:u,data:i,status:h,statuses:j,handleDragging:b,handleUpdate:c,handleRemoveColor:d,setTheTarget:P,sanitize:E,focusedCard:U,setFocusedCard:k},`${E(h)}-item-${i.id}-${u}`))})]})},te=["good","neutral","bad"],Nt=({language:r})=>{const h=he(),[j,o]=p.useState([]),b=[{content:"orchid",color:"orchid"},{content:"lightgreen",color:"lightgreen"},{content:"lightsalmon",color:"lightsalmon"},{content:"lightblue",color:"lightblue"},{content:"pink",color:"pink"},{content:"turquoise",color:"turquoise"},{content:"blue",color:"blue"},{content:"crimson",color:"crimson"},{content:"yellow",color:"yellow"},{content:Ne[r],color:"purple"},{content:Te[r],color:"orange"},{content:_e[r],color:"lightgray"},{content:Ae[r],color:"lightgray"}],c=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",[d,f,F]=$e(`${c?"local-":""}DnD-statuses`,te),[E,S]=p.useState(""),v=p.useRef(null),N=d.map(t=>{const s=window.localStorage.getItem(`${c?"local-":""}DnD-${t}`);return s?JSON.parse(s):[]}).flat(),g=t=>t.replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_]/g,"-");p.useEffect(()=>{const t=document.createElement("style");t.id="dnd-styles",document.head.appendChild(t);const l=(a=>a.map(m=>{const y=g(m);return`
          ul.${y} li.${y} a.${y} {
            cursor: auto;
            pointer-events: none;
            color: var(--color-primary-20);
          }
        `}).join(`
`))(d);return t.innerHTML=l,()=>{document.head.removeChild(t)}},[d]);const M=t=>{const s=document.createElement("canvas").getContext("2d");if(!s)throw new Error("Canvas context not available");return s.fillStyle=t,s.fillStyle},P=t=>{let s=parseInt(t.slice(1,3),16),l=parseInt(t.slice(3,5),16),a=parseInt(t.slice(5,7),16);return{r:s,g:l,b:a}},B=(t,s,l)=>{const a=[t,s,l].map(m=>(m/=255,m<=.03928?m/12.92:Math.pow((m+.055)/1.055,2.4)));return a[0]*.2126+a[1]*.7152+a[2]*.0722},T=t=>{const s=t.startsWith("#")?t:M(t),{r:l,g:a,b:m}=P(s);return B(l,a,m)>.179?"light":"dark"},w=()=>{window.confirm(Re[r])&&(F(),f(te),_(b),setTimeout(()=>{o(L())},400))},Y=t=>{const s=t.trim();if(s.length>20){h(D(`${ie[r]}: ${ce[r]}`,!0,9));return}if(t.trim()===""){h(D(ee[r],!0,6));return}if(d.includes(s)){h(D(le[r],!0,6));return}if(d.length===8){h(D(Fe[r],!0,8));return}f(l=>s===""||l.includes(s)?l:[...l,s])},U=(t,s)=>{f(l=>{const a=[...l],[m]=a.splice(t,1);return a.splice(s,0,m),a})},k=(t,s)=>{f(l=>{const a=s.trim();if(a.length>20)return h(D(`${ie[r]}: ${ce[r]}`,!0,9)),l;if(a==="")return h(D(ee[r],!0,6)),l;if(l.includes(a))return h(D(le[r],!0,6)),l;const m=[...l],y=m[t];return m[t]=a,o(Z=>Z.map($=>$.status===y?{...$,status:a}:$)),je(y,a),m})},q=t=>{if(d.length===1){h(D(Me[r],!0,8));return}else if(j.some(s=>s.status===t))h(D(`${z[r]} ${Pe[r]}`,!0,8)),f(s=>s.filter(l=>l!==t)),o(s=>s.filter(l=>l.status!==t));else if(window.confirm(`${z[r]} (${t})`))f(s=>s.filter(l=>l!==t)),o(s=>s.filter(l=>l.status!==t));else return};p.useEffect(()=>{o(H)},[]);const[J,_]=p.useState(b),L=()=>{const t=[];let s=te[1],l;for(let a=0;a<b.length;a++){const m=b[a].color||"white",y=b[a].content||"white";l=T(m);const Z=Math.floor(Math.random()*d.length);s=d[Z];const $={id:a,content:y,color:m,status:s,lightness:l};t.push($)}return t},H=p.useMemo(()=>{if(N.length>0)return N;const t=L();return o(t),t},[]),[W,K]=p.useState(""),[n,i]=p.useState({label:d[0],value:d[0]}),u=(t,s,l)=>{var $,se;if(t.preventDefault(),s.trim()===""){h(D(ee[r],!0,6));return}const a=s.trim().split(" "),m=a.length===1?s:a.slice(0,-1).join(" "),y=a.length===1?s:a[a.length-1];if(A(y)){const Q={id:j.reduce((O,V)=>V.id>O?V.id:O,0)+1,content:m,color:y,status:l,lightness:T(s)};o(O=>[...O,Q]),_(O=>[...O,{content:m,color:y}]),($=v.current)==null||$.scrollIntoView({behavior:"smooth"})}else window.confirm(`${Be[r]}: ${Ye[r]}`)&&(_(oe=>{const Q=[...oe,{content:s,color:"lightgray"}],O={id:Q.length-1,content:s,color:"lightgray",status:l,lightness:"light"};return o(V=>[...V,O]),Q}),(se=v.current)==null||se.scrollIntoView({behavior:"smooth"}))},C=t=>{if(window.confirm(`${z[r]} (${t})`))_(s=>{const l=s.filter(a=>a.content!==t);return o(a=>a.filter(m=>m.content!==t)),l});else return},A=t=>{const s=document.createElement("canvas").getContext("2d");if(!s)throw new Error("Canvas context not available");return s.fillStyle=t,s.fillStyle!=="#000000"||t.toLowerCase()==="black"},I=Oe(),{isDragging:R,listItemsByStatus:G,handleDragging:fe,handleRenameStatus:je,handleUpdate:be}=mt(j,d);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`${x.grid} ${d.length<2?x.one:d.length<3?x.two:(d==null?void 0:d.length)<4||(d==null?void 0:d.length)===5||(d==null?void 0:d.length)===6?x.three:x.four}`,ref:v,children:d.map(t=>{var s;return e.jsx(vt,{language:r,itemsByStatus:(s=G[t])==null?void 0:s.items,status:t,statuses:d,isDragging:R,handleDragging:fe,handleUpdate:be,handleRemoveColor:C,lightTheme:I,sanitize:g,updateStatus:k,reorderStatuses:U,deleteStatus:q},t)})}),e.jsx("button",{onClick:w,children:ke[r]}),e.jsxs("div",{className:x["add-status"],children:[e.jsx("h2",{children:ne[r]}),e.jsxs("form",{onSubmit:t=>{t.preventDefault(),Y(E)},children:[e.jsx("div",{className:"input-wrap",children:e.jsxs("label",{htmlFor:"dnd-status-add",children:[e.jsx("input",{required:!0,type:"text",id:"dnd-status-add",value:E,onChange:t=>S(t.target.value)}),e.jsx("span",{children:ne[r]})]})}),e.jsx("button",{type:"submit",children:me[r]})]})]}),e.jsxs("div",{className:x["add-color"],children:[e.jsx("h2",{children:X[r]}),e.jsxs("p",{children:[Ie[r]," darkblue or lightslategray."," ",pe[r],"."," ",xe[r]]}),e.jsxs("form",{onSubmit:t=>u(t,W,n.label),children:[e.jsx("div",{className:"input-wrap",children:e.jsxs("label",{htmlFor:"dnd-color-add",children:[e.jsx("input",{required:!0,type:"text",id:"dnd-color-add",value:W,onChange:t=>K(t.target.value)}),e.jsx("span",{children:X[r]})]})}),e.jsx(ge,{language:r,id:"dnd-color-status",className:"color",instructions:qe[r],hide:!0,options:d.map(t=>({label:t,value:t})),value:n,onChange:t=>i(t||{label:d[0],value:d[0]})}),e.jsx("button",{type:"submit",children:X[r]})]}),e.jsxs("p",{children:[e.jsxs("span",{children:[Le[r]," "]})," ",e.jsx("a",{href:"https://htmlcolorcodes.com/color-names/",target:"_blank",children:We[r]})]})]})]})};function Vt({heading:r,text:h,type:j,language:o}){return e.jsxs("div",{className:`draganddrop ${j}`,children:[e.jsx(Ue,{language:o,address:"draganddrop",heading:r,text:h,instructions:He[o]}),e.jsx("div",{className:"inner-wrap",children:e.jsx("section",{className:"card",children:e.jsxs("div",{children:[e.jsx("div",{className:"medium",children:e.jsxs(ue,{language:o,text:Ke[o],className:"features",children:[e.jsx("h2",{children:Ve[o]}),e.jsxs("ul",{className:"ul",children:[e.jsx("li",{children:Je[o]}),e.jsx("li",{children:Ge[o]}),e.jsx("li",{children:Ze[o]}),e.jsx("li",{children:Qe[o]}),e.jsx("li",{children:Xe[o]}),e.jsx("li",{children:ze[o]}),e.jsxs("li",{children:[pe[o],"."," ",xe[o]]})]}),e.jsx("h3",{children:et[o]}),e.jsx("h4",{children:tt[o]}),e.jsxs("ul",{className:"ul",children:[e.jsx("li",{children:rt[o]}),e.jsx("li",{children:st[o]}),e.jsxs("li",{children:[ot[o],":"," ",e.jsx(re,{"aria-hidden":"true",style:{display:"inline-block",marginBottom:"-0.15em"}})," "]})]}),e.jsx("h4",{children:nt[o]}),e.jsxs("ul",{className:"ul",children:[e.jsx("li",{children:it[o]}),e.jsxs("li",{children:[ct[o],e.jsxs("ul",{children:[e.jsxs("li",{children:[lt[o]," ",e.jsx(re,{"aria-hidden":"true",style:{display:"inline-block",marginBottom:"-0.15em"}})," ",at[o]]}),e.jsx("li",{children:dt[o]})]})]})]})]})}),e.jsx("h2",{children:ht[o]}),e.jsx("p",{children:ut[o]}),e.jsx(Nt,{language:o})]})})})]})}export{Vt as default};
