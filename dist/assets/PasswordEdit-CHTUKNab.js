import{a as d,j as s}from"./react-B26j9x-B.js";import{L as S,u as U,e as a,av as N}from"./index-KrAkqBQ5.js";import{s as _}from"./edit.module-3NLXhYEv.js";import"./dom-to-image-more-sr33WCep.js";import"./react-dom-C5TvV5XQ.js";import"./scheduler-C323NY8X.js";import"./react-redux-EG6qnwNo.js";import"./hoist-non-react-statics-C-Qo8PK8.js";import"./react-is-BwqtTtay.js";import"./use-sync-external-store-BqPSEvA7.js";import"./@reduxjs-D09xkNSb.js";import"./immer-C0GRqQ_d.js";import"./redux-D9aXM7rm.js";import"./@babel-CYk816RD.js";import"./redux-thunk-CY0Q9z1Q.js";import"./axios-ngrFHoWO.js";import"./react-icons-Dr2CAAEL.js";import"./react-router-dom-Dghs3TPc.js";import"./react-router-vPOY4muN.js";import"./@remix-run-ox1qIyJK.js";import"./react-helmet-async-CnDSc5Ri.js";import"./react-fast-compare-BHbKlhN4.js";import"./invariant-B_pwkeTo.js";import"./shallowequal-C7ef0Lra.js";const ss=({user:m,language:C})=>{const{t}=d.useContext(S),r=U(),[l,u]=d.useState(""),[n,c]=d.useState(""),[f,h]=d.useState(""),[E,i]=d.useState(!1),b=async o=>{var w,x;o.preventDefault(),i(!0);try{if(n.trim()!==f.trim()){r(a(t("PasswordsDoNotMatch"),!0,5)),i(!1);return}else if(n.length<10){r(a(t("PasswordMustBeAtLeastTenCharacters"),!0,5)),i(!1);return}const y={_id:m._id,passwordOld:l,password:n,language:C};m&&r(N(y)).then(e=>{e&&(e.success===!1?r(a(`${e.message||t("Error")}`,!0,5)):(r(a(`${e.message||t("UserUpdated")}`,!1,5)),u(""),c(""),h(""))),i(!1)}).catch(e=>{var j,g,P,v;console.error(e),(g=(j=e.response)==null?void 0:j.data)!=null&&g.message?r(a(e.response.data.message,!0,8)):e.code==="ERR_BAD_REQUEST"&&((v=(P=e.response)==null?void 0:P.data)!=null&&v.message)?r(a(`${e.response.data.message}`,!0,5)):setTimeout(()=>{r(a(t("UserNotUpdated"),!0,5))},2e3),i(!1)})}catch(p){(x=(w=p.response)==null?void 0:w.data)!=null&&x.message?r(a(p.response.data.message,!0,8)):console.error("error",p)}};return s.jsx(s.Fragment,{children:m?s.jsxs(s.Fragment,{children:[s.jsx("h2",{children:t("EditPassword")}),s.jsxs("form",{onSubmit:b,className:_["edit-user"],children:[s.jsx("div",{className:"input-wrap",children:s.jsxs("label",{children:[s.jsx("input",{required:!0,type:"password",name:"old-password",id:"old-password",value:l,onChange:({target:o})=>u(o.value.trim())}),s.jsx("span",{children:t("CurrentPassword")})]})}),s.jsx("div",{className:"input-wrap",children:s.jsxs("label",{children:[s.jsx("input",{required:!0,type:"password",name:"password",id:"password-edit",value:n,onChange:({target:o})=>c(o.value.trim())}),s.jsx("span",{children:t("Password")})]})}),s.jsx("div",{className:"input-wrap",children:s.jsxs("label",{children:[s.jsx("input",{required:!0,type:"password",name:"confirmPassword",id:"confirmPassword",value:f,onChange:({target:o})=>h(o.value.trim())}),s.jsx("span",{children:t("ConfirmPassword")})]})}),s.jsx("button",{type:"submit",disabled:E,children:t("Edit")})]})]}):s.jsx(s.Fragment,{})})};export{ss as default};
