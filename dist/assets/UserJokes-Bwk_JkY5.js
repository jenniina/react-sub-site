import{r,j as s}from"./react-kX_YxI4E.js";import{a$ as Ns,b0 as $s,b1 as As,b2 as Js,b3 as Bs,b4 as Fs,b5 as Os,b6 as Ts,b7 as Ms,b8 as Ps,b9 as ks,ba as Es,bb as Is,z as Ve,w as qe,bc as Rs,bd as Us,x as _s,y as Ds}from"./react-icons-CzVo0GbG.js";import{L as Vs,E as T,Q as Y,u as qs,aQ as he,i as zs,W as Ys,X as ze,ab as ue,S as K,aR as Le,aa as Hs,R as J,A as Ws,Y as Qs,aP as ee,e as H,a8 as Xs}from"./index-Clfw_fQ4.js";import{B as Ye}from"./ButtonToggle-BytgBvDJ.js";import{a as He}from"./react-redux-BEmJlIGA.js";import{n as Gs,d as Zs}from"./Jokes-C7DHLnlz.js";import"./dom-to-image-more-CfDXlNbO.js";import"./react-dom-B5MLDbn_.js";import"./scheduler-CzFDRTuY.js";import"./@reduxjs-DhFEcpJw.js";import"./immer-C0GRqQ_d.js";import"./redux-CE3tqztX.js";import"./@babel-DF5_wy6Y.js";import"./redux-thunk-CY0Q9z1Q.js";import"./axios-CCb-kr4I.js";import"./react-router-dom-StiqOUIT.js";import"./react-router-DUuhLvki.js";import"./@remix-run-DTnHqtaE.js";import"./hoist-non-react-statics-DQogQWOa.js";import"./react-is-DUDD-a5e.js";import"./use-sync-external-store-BPp6CH6k.js";var Ks=(o=>(o.newest="newest",o.oldest="oldest",o))(Ks||{});const jt=({user:o,handleDelete:Ne,handleUpdate:We,language:h,isCheckedSafemode:se,setIsCheckedSafemode:Qe,handleToggleChangeSafemode:Xe,translateWordLanguage:Ge,optionsSortBy:Ze,getKeyofEnum:le,options:Ke,norrisCategories:es,getCategoryInLanguage:te,setIsEditOpen:ss,editId:ts,setEditId:as,handleRemoveJokeFromBlacklisted:ls,handleBlacklistUpdate:is,sending:pe})=>{var Ie;const{t}=r.useContext(Vs),ae=He(e=>e.users),x=o==null?void 0:o._id,v=He(e=>{var a;return(a=e.jokes)==null?void 0:a.jokes}),[B,ns]=r.useState([]),[xe,rs]=r.useState({}),[m,W]=r.useState(!1),[Q,fe]=r.useState(B),[y,F]=r.useState(!1),[ge,cs]=r.useState([]),[X,ie]=r.useState(!1),[os,$e]=r.useState(0),[O,ve]=r.useState("popularity"),[f,Ae]=r.useState(""),[M,ne]=r.useState(""),[_,Je]=r.useState(""),[Be,ds]=r.useState(!1),[L,me]=r.useState(es[0]),[hs,j]=r.useState(void 0),[ye,Fe]=r.useState(T.en),[Oe,Te]=r.useState(Y.Misc),[be,Me]=r.useState("newest"),[re,us]=r.useState(!0),[S,ps]=r.useState(3),[ce,je]=r.useState(!1),C=qs();r.useEffect(()=>{if(Array.isArray(v)&&v.length>0&&Array.isArray(ae)&&(ae==null?void 0:ae.length)>0){let e=v==null?void 0:v.map(a=>{const l=o==null?void 0:o.name,i=he[h][le(T,a.language)];return{...a,visible:!1,translatedLanguage:i??"",name:a.anonymous?"ÖÖÖ_Anonymous":l??""}});e=se?se?e.filter(a=>a.safe).sort((a,l)=>{var i,d;return((i=l.user)==null?void 0:i.length)-((d=a.user)==null?void 0:d.length)}):[]:e.filter(a=>a.safe===!1).sort((a,l)=>{var i,d;return((i=l.user)==null?void 0:i.length)-((d=a.user)==null?void 0:d.length)}),ns(e)}},[v,ae,h,se,O,be,re]),r.useEffect(()=>{Me(re?"newest":"oldest")},[re]);const xs=()=>{us(e=>!e)};r.useEffect(()=>{C(zs()),C(Ys()),C(ze())},[]),r.useEffect(()=>{const e=M===Y.ChuckNorris;ds(e)},[M]);const Pe=e=>{V(1),Ae(e.target.value)},fs=()=>{ne(""),Je(""),me(D[0]),Ae(""),ie(!1),$e(e=>e+1),ve("popularity"),V(1),Qe(!0)},gs=e=>{ne(e.value)};r.useEffect(()=>{setTimeout(()=>{const e=document.querySelectorAll(".select-container"),a=(e==null?void 0:e.length)+2;e==null||e.forEach((l,i)=>{const d=a-i;l.style.zIndex=`${d}`})},500)},[y]),r.useEffect(()=>{W(!x)},[x]);const vs=e=>{rs(a=>({...a,[e]:!a[e]}))};r.useEffect(()=>{V(1);let e=[...B];O==="age"&&(e=[...B].sort((l,i)=>{const d=l.createdAt?new Date(l.createdAt).getTime():0,p=i.createdAt?new Date(i.createdAt).getTime():0;return be==="newest"?p-d:d-p})),e=e==null?void 0:e.filter(l=>{var i,d,p,b,N,$,P,k,E;if(l){const I=("joke"in l?(i=l.joke)==null?void 0:i.toLowerCase().includes(f.toLowerCase()):!1)||("setup"in l?(d=l.setup)==null?void 0:d.toLowerCase().includes(f.toLowerCase()):!1)||("delivery"in l?(p=l.delivery)==null?void 0:p.toLowerCase().includes(f.toLowerCase()):!1)||((b=l.name)==null?void 0:b.toLowerCase().includes(f.toLowerCase()))||((N=l.category)==null?void 0:N.toLowerCase().includes(f.toLowerCase()))||(($=l.subCategories)==null?void 0:$.includes(f==null?void 0:f.toLowerCase()))||((P=l.translatedLanguage)==null?void 0:P.toLowerCase().includes(f.toLowerCase())),R=M?l.category===M:!0,U=_!==""?l.language===_:!0,c=(L==null?void 0:L.value)!==""&&(L==null?void 0:L.value)!=="any"?(k=l.subCategories)==null?void 0:k.includes(L==null?void 0:L.value):!0;return m&&l.private===!1&&l.verified===!0||m&&l.private===void 0||!m&&((E=l.user)!=null&&E.includes(x))?U&&R&&c&&I:!1}}),e=e==null?void 0:e.filter(l=>{var d;return!((d=o==null?void 0:o.blacklistedJokes)==null?void 0:d.some(p=>p.jokeId===l.jokeId&&p.language===l.language))}),O==="popularity"&&(e=e==null?void 0:e.sort((l,i)=>{var d,p;return((d=i.user)==null?void 0:d.length)-((p=l.user)==null?void 0:p.length)})),O==="category"&&(e=e==null?void 0:e.sort((l,i)=>l.category>i.category?1:-1)),O==="language"&&(e=e==null?void 0:e.sort((l,i)=>l.translatedLanguage>i.translatedLanguage?1:-1)),O==="name"&&(e=e==null?void 0:e.sort((l,i)=>l.name>i.name?1:-1));const a=e.slice(0,S);if(X&&e.length>0){const l=e[Math.floor(Math.random()*e.length)];fe([l])}else fe(ce?a:e)},[m,B,M,_,L,f,X,os,be,O,ce,S]);const ms=e=>{let a=e;e==="Chuck Norris"?a="ChuckNorris":e==="Dad Joke"&&(a="DadJoke"),ne(a)},ys=e=>{var l;const a=v==null?void 0:v.find(i=>i._id===e);if(!a){C(H(`${t("NoJokeFound")}`,!0,8));return}if(a){if((l=a.user)!=null&&l.includes(x==null?void 0:x.toString())){C(H(`${t("JokeAlreadySaved")}`,!1,8));return}C(Xs({...a,user:[...a.user,x]})).then(()=>{C(ze()),C(H(`${t("SavedJoke")}`,!1,8))})}};let D=Array.from(new Set((Ie=B==null?void 0:B.filter(e=>e.private===!1&&e.verified===!0||e.private===void 0))==null?void 0:Ie.flatMap(e=>e.subCategories))).map(e=>{const a=e?ue[e][h]||e:"",l=(a==null?void 0:a.charAt(0).toUpperCase())??e??"",i=(a==null?void 0:a.slice(1))??e??"";return{label:l+i,value:e}});D=D.filter(e=>e.value!=="any"),D.unshift({label:ue.any[h].charAt(0).toUpperCase()+ue.any[h].slice(1),value:"any"}),r.useEffect(()=>{me(D[0])},[h]),r.useEffect(()=>{(async()=>{var a;if(Array.isArray(v)&&v.length>0&&o&&(o!=null&&o.blacklistedJokes)){const l=await Promise.all(((a=o==null?void 0:o.blacklistedJokes)==null?void 0:a.map(async i=>{let d=i.value;return(v==null?void 0:v.find(b=>{var N,$;return((N=b.jokeId)==null?void 0:N.toString())===(($=i.jokeId)==null?void 0:$.toString())&&b.language===i.language}))??await bs(i.jokeId,i.language,d??void 0)}))||[]);cs(l)}})()},[o==null?void 0:o.blacklistedJokes,v]);const G=ge==null?void 0:ge.filter(e=>{var a,l,i,d,p;if(e)return("joke"in e?(a=e.joke)==null?void 0:a.toLowerCase().includes(f.toLowerCase()):!1)||("setup"in e?(l=e.setup)==null?void 0:l.toLowerCase().includes(f.toLowerCase()):!1)||("delivery"in e?(i=e.delivery)==null?void 0:i.toLowerCase().includes(f.toLowerCase()):!1)||((d=e.category)==null?void 0:d.toLowerCase().includes(f.toLowerCase()))||((p=e.subCategories)==null?void 0:p.includes(f==null?void 0:f.toLowerCase()))}),bs=async(e,a,l)=>{var i,d,p,b,N,$,P,k,E,I,R,U,c,w,z,de,Re,Ue,_e;try{if(l){let A;try{A=await Gs.searchNorrisJoke(l)}catch(u){return(d=(i=u.response)==null?void 0:i.data)!=null&&d.message&&C(H(u.response.data.message,!0,8)),console.error(u),null}finally{return{jokeId:A.id,joke:A.value,category:Y.ChuckNorris,language:T.en,type:J.single,safe:!((p=A.categories)!=null&&p.includes("explicit")||(b=A.categories)!=null&&b.includes("political")||(N=A.categories)!=null&&N.includes("religion"))}}}else{const u=await(await fetch(`https://v2.jokeapi.dev/joke/Any?idRange=${e}&lang=${a}&format=json`)).json();if(u.error){const De=await Zs.getDadJokeById(e);return{jokeId:De.id,joke:De.joke,category:Y.DadJoke,language:T.en,type:J.single,safe:!0}}else return u.type==="twopart"?{jokeId:u.id,setup:u.setup,delivery:u.delivery,category:u.category,language:u.lang,type:J.twopart,safe:!(($=u.flags)!=null&&$.nsfw||(P=u.flags)!=null&&P.religious||(k=u.flags)!=null&&k.political||(E=u.flags)!=null&&E.racist||(I=u.flags)!=null&&I.sexist||(R=u.flags)!=null&&R.explicit||!u.safe)}:{jokeId:u.id,joke:u.joke,category:u.category,language:u.lang,type:J.single,safe:!((U=u.flags)!=null&&U.nsfw||(c=u.flags)!=null&&c.religious||(w=u.flags)!=null&&w.political||(z=u.flags)!=null&&z.racist||(de=u.flags)!=null&&de.sexist||(Re=u.flags)!=null&&Re.explicit||!u.safe)}}}catch(A){return(_e=(Ue=A.response)==null?void 0:Ue.data)!=null&&_e.message&&C(H(A.response.data.message,!0,8)),console.error(A),null}};r.useEffect(()=>{x||F(!1)},[x]);const[g,V]=r.useState(1),[oe,js]=r.useState(10),[Cs,Ce]=r.useState(1),[ws,we]=r.useState(3),Z=e=>{V(e),e<=2?(Ce(1),we(3)):e>=n.length-1?(Ce(n.length-2),we(n.length)):(Ce(e-1),we(e+1))};r.useEffect(()=>{g||V(1)},[g]),r.useEffect(()=>{Z(1),F(!1)},[m]);const ke=g*oe,Ss=ke-oe,q=Q==null?void 0:Q.slice(Ss,ke),n=[];for(let e=1;e<=Math.ceil((Q==null?void 0:Q.length)/oe);e++)n==null||n.push(e);const Se=n==null?void 0:n.slice(Cs-1,ws);r.useEffect(()=>{g>n.length&&V(1)},[n]);const Ls=e=>{navigator.clipboard.writeText(e).then(function(){C(H(`${t("JokeCopiedToClipboard")}`,!1,3))},function(){C(H(`${t("FailedToCopyJokeToClipboard")}`,!0,3))})},Ee=e=>s.jsxs("div",{className:"pagination",children:[(n==null?void 0:n.length)>1&&s.jsx("div",{children:s.jsxs("span",{children:[g," / ",n==null?void 0:n.length]})}),s.jsxs("div",{children:[s.jsxs("div",{className:"chevrons-wrap back",children:[s.jsxs("button",{className:`inner-nav-btn first tooltip-wrap ${g===1?"disabled":""} ${(n==null?void 0:n.length)<=3?"hidden":""}`,disabled:g===1,onClick:()=>Z(1),children:[s.jsx(qe,{})," ",s.jsx("span",{className:"tooltip narrow2 below right",children:t("FirstPage")})]}),s.jsxs("button",{className:`inner-nav-btn back tooltip-wrap ${g===1?"disabled":""} ${(n==null?void 0:n.length)<=3?"hidden":""}`,disabled:g===1,onClick:()=>Z(g-1),children:[s.jsx(_s,{})," ",s.jsx("span",{className:"tooltip narrow2 below right",children:t("Back")})]})]}),s.jsx("div",{className:`numbers${(n==null?void 0:n.length)===1?" hidden":""}`,children:Se==null?void 0:Se.map(a=>s.jsx("button",{className:`${a>9?"over9":a>99?"over99":a>999?"over999":""} ${a===g?"active":""}`,onClick:()=>Z(a),children:a},a))}),s.jsxs("div",{className:"chevrons-wrap forward",children:[s.jsxs("button",{className:`inner-nav-btn forward tooltip-wrap ${g===(n==null?void 0:n.length)?"disabled":""} ${(n==null?void 0:n.length)<=3?"hidden":""}`,disabled:g===(n==null?void 0:n.length),onClick:()=>Z(g+1),children:[s.jsx(Ds,{})," ",s.jsx("span",{className:"tooltip narrow2 below left",children:t("Next")})]}),s.jsxs("button",{className:`inner-nav-btn last tooltip-wrap ${g===(n==null?void 0:n.length)?"disabled":""} ${(n==null?void 0:n.length)<=3?"hidden":""}`,disabled:g===(n==null?void 0:n.length),onClick:()=>Z(n==null?void 0:n.length),children:[s.jsx(Ve,{}),s.jsxs("span",{className:"tooltip narrow2 left below",children:[t("LastPage"),": ",n==null?void 0:n.length]})]})]})]}),s.jsxs("div",{children:[s.jsx("input",{"aria-labelledby":"items-per-page",className:"items-per-page narrow",name:"items-per-page",id:`items-per-page-input-${e}`,type:"number",min:"1",max:"100",defaultValue:oe,onChange:a=>js(a.target.valueAsNumber>0?a.target.valueAsNumber:1)})," ",s.jsx("span",{id:"items-per-page",children:t("PerPage")})," "]})]});return s.jsxs("div",{className:"saved",id:"saved",children:[x&&s.jsxs("div",{className:"local-saved-wrap",children:[s.jsx("button",{className:`btn${m&&!y?" active":""}`,onClick:()=>{W(!0),F(!1)},children:t(m?"LocalJokes":"SeeLocalJokes")}),s.jsx("button",{className:`btn${!m&&!y?" active":""}`,onClick:()=>{W(!1),F(!1)},children:t("YourSavedJokes")})]}),s.jsxs("div",{className:"saved-inner",children:[s.jsx("div",{className:"filler"}),s.jsxs("div",{children:[!y&&s.jsxs(s.Fragment,{children:[s.jsx("h3",{children:t(m?"LocalJokes":"YourSavedJokes")}),m&&s.jsxs("p",{className:"mb3 flex center textcenter",children:[" ",t("UserSubmittedJokes")]}),s.jsxs("div",{className:"toggle-wrap",children:[s.jsxs("div",{className:"toggle-inner-wrap",children:[s.jsxs("div",{className:"safemode-wrap",children:[s.jsx(Ye,{isChecked:se,name:"safemode",id:"safemode2",className:`${h} ${se?"":"unsafe"} userjokes safemode`,label:`${t("Filter")}: `,hideLabel:!1,on:t("SafeTitle"),off:t("UnsafeTitle"),handleToggleChange:Xe}),O==="age"&&s.jsx(Ye,{isChecked:re,name:"age",id:"age",className:`${h} age`,label:`${t("Age")}: `,hideLabel:!1,on:t("Newest"),off:t("Oldest"),handleToggleChange:()=>{xs()},equal:!0})]}),s.jsx("div",{className:"sortby-wrap",children:s.jsx(K,{language:h,id:"sortby",className:"sortby",instructions:`${t("OrderBy")}:`,options:Ze(Le),value:{label:Le[O][T[h]],value:Le[O][T[h]]},onChange:e=>{ve(e==null?void 0:e.value)}})})]}),s.jsxs("div",{className:"toggle-inner-wrap",children:[s.jsx("div",{children:s.jsx(K,{language:h,id:"joke-languages",className:"language-filter",instructions:`${t("FilterByLanguage")}:`,options:[{label:t("All"),value:""},...Array.from(new Set(B==null?void 0:B.map(e=>e.language))).map(e=>({label:he[e][le(T,e)],value:e}))],value:_?{label:he[_][le(T,_)],value:_}:{label:t("All"),value:""},onChange:e=>{Je(e==null?void 0:e.value)}})}),s.jsx("div",{children:s.jsx(K,{language:h,id:"single-category-select",className:"single-category-select",instructions:`${t("FilterByCategory")}:`,options:[{label:t("SelectACategory"),value:""},...Object.values(Y).map(e=>({label:te(e,h),value:e}))],value:M?{label:te(M,h),value:M}:{label:t("SelectACategory"),value:""},onChange:e=>{ne(e==null?void 0:e.value),gs(e),ms(e==null?void 0:e.value)}})})]}),s.jsxs("div",{className:"toggle-inner-wrap",children:[s.jsx("div",{children:s.jsx(K,{language:h,id:"userNorrisCategories",className:`category extras ${Be?"":"hidden"}`,instructions:`${t("FilterFurther")}:`,selectAnOption:D[0].label,value:L,options:D,onChange:e=>{me(e)}})}),s.jsx("div",{className:Be?"search-jokes-wrap":"full search-jokes-wrap",children:s.jsx("div",{className:"search-jokes input-wrap",children:s.jsxs("label",{htmlFor:"search-jokes",children:[s.jsx("input",{type:"text",id:"search-jokes",value:f,onChange:Pe,placeholder:t("Search")}),s.jsx("span",{children:t("SearchByKeyword")})]})})})]})]}),s.jsx("div",{className:"reset-btn-wrap mb3",children:s.jsxs("button",{className:"reset-btn delete danger",onClick:()=>fs(),children:[s.jsx(Ns,{})," ",s.jsx("span",{children:t("Reset")})]})})]}),s.jsxs("div",{className:"button-wrap",children:[!y&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{className:`icontext random-btn ${X?"active":""}`,onClick:()=>{V(1),F(!1),ie(!0),$e(e=>e+1),je(!1)},children:[t("Random")," ",s.jsx($s,{})]})," ",s.jsxs("button",{className:`icontext all-or-latest-btn ${!X&&!ce?"active":""}`,onClick:()=>{ie(!1),F(!1),je(!1)},children:[t("AllJokes")," ",s.jsx(As,{})]}),s.jsxs("div",{className:"flex center",children:[s.jsxs("button",{className:`icontext all-or-latest-btn ${ce?"active":""}`,onClick:()=>{ie(!1),F(!1),Me("newest"),ve("age"),je(!0)},children:[t("Latest"),s.jsx("span",{className:"scr",children:S})," ",S===3&&s.jsx(Js,{}),S===4&&s.jsx(Bs,{}),S===5&&s.jsx(Fs,{}),S===6&&s.jsx(Os,{}),S===7&&s.jsx(Ts,{}),S===8&&s.jsx(Ms,{}),S===9&&s.jsx(Ps,{}),S>9&&s.jsx(ks,{})]}),s.jsxs("div",{children:[s.jsx("input",{type:"number",min:3,max:100,id:"number-of-latest",defaultValue:S,className:"narrow",onChange:e=>{ps(e.target.valueAsNumber)}}),s.jsx("label",{htmlFor:"number-of-latest",className:"scr",children:s.jsx("span",{children:t("HowMany")})})]})]})]}),o&&s.jsx("button",{className:`blocked-btn danger ${y?"active":""}`,onClick:()=>F(e=>!e),children:y?s.jsxs(s.Fragment,{children:[t("HideBlockedJokes")," ",s.jsx(Es,{})]}):s.jsxs(s.Fragment,{children:[t("Blocked")," ",s.jsx(Is,{})]})})]}),!X&&!y&&Ee(1),o&&y&&(G==null?void 0:G.length)>0?s.jsx("div",{className:"blocked-controls-wrap",children:s.jsx("div",{className:"input-wrap search-blacklist",children:s.jsxs("label",{htmlFor:"searchBlacklistedJokes",children:[s.jsx("input",{id:"searchBlacklistedJokes",type:"text",onChange:Pe}),s.jsx("span",{children:t("SearchByKeyword")})]})})}):y?s.jsx("p",{className:"textcenter",children:t("NoJokesYet")}):"",s.jsx("ul",{className:`userjokeslist ${y?"blockedJokes":""}`,children:o&&y?G==null?void 0:G.map((e,a)=>{var l,i;return s.jsxs("li",{children:[s.jsx("form",{onSubmit:d=>{var p,b;C(Hs(e)),ls(d,e,(b=(p=o==null?void 0:o.blacklistedJokes)==null?void 0:p[a])==null?void 0:b._id)},children:s.jsx("button",{className:"",type:"submit",disabled:pe,children:t("Restore")})}),e?e.type===J.single?s.jsx("p",{children:e.joke}):s.jsxs("div",{children:[s.jsx("p",{children:e.setup}),s.jsx("p",{children:e.delivery})]}):""]},((i=(l=o==null?void 0:o.blacklistedJokes)==null?void 0:l[a])==null?void 0:i.jokeId)??a)}):q&&(q==null?void 0:q.length)>0?q==null?void 0:q.map(e=>{var d,p,b,N,$,P,k,E,I,R,U;const{visible:a,translatedLanguage:l,...i}=e;return s.jsxs("li",{children:[s.jsx("div",{className:"primary-wrap",children:e.type===J.single?s.jsx("p",{className:"",children:e.joke}):s.jsxs("div",{children:[s.jsx("p",{className:"",children:e.setup}),s.jsx("p",{children:e.delivery?s.jsxs("button",{type:"button",onClick:()=>vs(e.jokeId),className:`${xe[e.jokeId]?"reveal":""} delivery`,children:[s.jsxs("span",{...xe[e.jokeId]?{"aria-hidden":!0}:{"aria-hidden":!1},children:[s.jsx(Ve,{})," ",t("ClickToReveal")," ",s.jsx(qe,{})]}),s.jsx("p",{"aria-live":"assertive",children:xe[e.jokeId]?e.delivery:""})]}):""})]})}),s.jsxs("div",{className:"secondary-wrap",children:[s.jsxs("div",{children:[s.jsxs("span",{children:[t("CategoryTitle"),":"," ",te(e.category,h)," ",e.subCategories&&((d=e.subCategories)==null?void 0:d.length)>0&&((p=e.subCategories)!=null&&p.find(c=>c!=="any"))?s.jsxs(s.Fragment,{children:["(",(N=(b=e.subCategories)==null?void 0:b.filter(c=>c!=="any"))==null?void 0:N.map(c=>ue[c][h].toLowerCase()??c).join(", "),")"]}):""]}),s.jsxs("span",{children:[Ge,": ",e.translatedLanguage]}),e.anonymous?s.jsxs("span",{children:[t("Anonymous")," "]}):e.anonymous===!1?s.jsxs("span",{children:[t("Author"),": ",e.name??""]}):"",!m&&x&&e.private?s.jsx("span",{children:t("Private")}):!m&&x&&e.private===!1?s.jsx("span",{children:t("Public")}):"",e.private===!1&&e.verified===!1&&s.jsx("span",{children:t("PendingVerification")}),(($=e.user)==null?void 0:$.length)>1&&s.jsxs("span",{children:[t("SavedBy")," ",(P=e.user)==null?void 0:P.length]})]}),s.jsxs("div",{children:[x&&((k=e.user)==null?void 0:k.includes(x))&&s.jsx("form",{onSubmit:e.type===J.single?Ne(e==null?void 0:e._id,e==null?void 0:e.joke):Ne(e==null?void 0:e._id,e==null?void 0:e.setup),className:"button-wrap",children:s.jsx("button",{type:"submit",disabled:pe,className:"delete danger",children:((E=e.user)==null?void 0:E.length)>1?t("Remove"):t("Delete")})}),e.author!==x&&!((I=e.user)!=null&&I.includes(x))&&s.jsx("button",{onClick:()=>is(e.jokeId,e.language,e.category===Y.ChuckNorris&&e.type===J.single?e.joke:void 0),className:"delete danger",children:t("Block")}),!((R=e.user)!=null&&R.includes(x))&&s.jsxs("button",{onClick:()=>ys(e._id),className:"save",children:[t("SaveJoke")," ",s.jsx(Rs,{})]}),s.jsxs("button",{onClick:()=>Ls(e.type===J.single?e.joke:e.setup+` 
`+e.delivery),children:[t("Copy")," ",s.jsx(Us,{})]}),x&&((U=e.user)==null?void 0:U.includes(x))&&e.author===x&&s.jsx(Ws,{language:h,id:`joke-edit-${e.jokeId}`,className:"joke-edit",wrapperClass:"joke-edit-wrap",text:t("Edit"),onClick:()=>{Fe(e.language),Te(e.category),j(i),as(e.jokeId)},isOpen:ts===e.jokeId,setIsFormOpen:ss,children:s.jsxs("form",{onSubmit:We(e==null?void 0:e._id,hs??e),className:"joke-edit",children:[s.jsx("div",{className:"edit-wrap",children:e.private===!0&&e.type===J.twopart?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"input-wrap",children:s.jsxs("label",{htmlFor:"edit-setup",children:[s.jsx("input",{required:!0,type:"text",name:"edit-setup",id:"setup",defaultValue:e.setup,onChange:c=>{j(w=>({...w,setup:c.target.value}))}}),s.jsx("span",{children:t("JokeSetup")})]})}),s.jsx("div",{className:"input-wrap",children:s.jsxs("label",{htmlFor:"edit-delivery",children:[s.jsx("input",{required:!0,type:"text",name:"delivery",id:"edit-delivery",defaultValue:e.delivery,onChange:c=>{j(w=>({...w,delivery:c.target.value}))}}),s.jsx("span",{children:t("JokeDelivery")})," "]})})]}):e.private===!0&&e.type===J.single?s.jsx("div",{className:"input-wrap",children:s.jsxs("label",{htmlFor:"edit-joke",children:[s.jsx("input",{required:!0,type:"text",name:"joke",id:"edit-joke",defaultValue:e.joke,onChange:c=>{j(w=>({...w,joke:c.target.value}))}}),s.jsx("span",{children:t("Joke")})]})}):s.jsxs("div",{children:[t("OnlyPrivateJokesCanBeEdited"),". ",t("Note")," ",t("RepublishingWillRequireVerificationFromAnAdministrator")]})}),e.private===!0&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex column center gap",children:[s.jsx(K,{language:h,id:"edit-language",className:"edit-language",instructions:`${t("LanguageTitle")}:`,hide:!0,options:Ke(Qs),value:{label:he[ye][le(T,ye)],value:ye},onChange:c=>{Fe(c==null?void 0:c.value),j(w=>({...w,language:c==null?void 0:c.value}))}}),s.jsx(K,{language:h,id:"edit-category",className:"edit-category",instructions:`${t("SelectCategory")}:`,hide:!0,options:[{label:t("Any"),value:""},...Object.values(Y).map(c=>({label:te(c,h),value:c}))],value:{label:te(Oe,h),value:Oe},onChange:c=>{const{visible:w,translatedLanguage:z,...de}=e;Te(c==null?void 0:c.value),j(()=>({...de,category:c==null?void 0:c.value}))}})]}),s.jsxs("fieldset",{children:[s.jsx("legend",{children:t("AddWarningTitle")}),s.jsxs("div",{className:"checkbox-wrap",children:[s.jsxs("div",{children:[s.jsx("input",{type:"checkbox",id:"flag-nsfw",name:"nsfw",value:"nsfw",onChange:()=>{j(()=>({...i,nsfw:!e.flags.nsfw}))}}),s.jsx("label",{htmlFor:"flag-nsfw",children:ee[h].nsfw})]}),s.jsxs("div",{children:[s.jsx("input",{type:"checkbox",id:"flag-religious",name:"religious",value:"religious",onChange:()=>{j(()=>({...i,religious:!e.flags.religious}))}}),s.jsx("label",{htmlFor:"flag-religious",children:ee[h].religious})]}),s.jsxs("div",{children:[s.jsx("input",{type:"checkbox",id:"flag-political",name:"political",value:"political",onChange:()=>{j(()=>({...i,political:!e.flags.political}))}}),s.jsx("label",{htmlFor:"flag-political",children:ee[h].political})]}),s.jsxs("div",{children:[s.jsx("input",{type:"checkbox",id:"flag-racist",name:"racist",value:"racist",onChange:()=>{j(()=>({...i,racist:!e.flags.racist}))}}),s.jsx("label",{htmlFor:"flag-racist",children:ee[h].racist})]}),s.jsxs("div",{children:[s.jsx("input",{type:"checkbox",id:"flag-sexist",name:"sexist",value:"sexist",onChange:()=>{j(()=>({...i,sexist:!e.flags.sexist}))}}),s.jsx("label",{htmlFor:"flag-sexist",children:ee[h].sexist})]}),s.jsxs("div",{children:[s.jsx("input",{type:"checkbox",id:"flag-explicit",name:"explicit",value:"explicit",onChange:()=>{j(()=>({...i,explicit:!e.flags.explicit}))}}),s.jsx("label",{htmlFor:"flag-explicit",children:ee[h].explicit})]})]})]})]}),s.jsxs("fieldset",{className:"flex center gap margin0auto",children:[s.jsxs("div",{children:[s.jsx("input",{type:"checkbox",name:"anonymous",id:"edit-anonymous",defaultChecked:e.anonymous,onChange:()=>{const{visible:c,translatedLanguage:w,...z}=e;j(()=>({...z,anonymous:!e.anonymous}))}}),s.jsx("label",{htmlFor:"edit-anonymous",children:"Anonymous:"})]}),s.jsxs("div",{children:[s.jsx("input",{type:"checkbox",name:"private",id:"edit-private",defaultChecked:e.private,onChange:()=>{const{visible:c,translatedLanguage:w,...z}=e;j(()=>({...z,private:!e.private}))}}),s.jsx("label",{htmlFor:"edit-private",children:"Private:"})]})]}),s.jsx("button",{type:"submit",disabled:pe,className:"save",children:t("SaveJoke")})]})})]})]})]},e._id)}):s.jsxs("li",{className:"margin0auto max-content",children:[t("LoadingJokes"),s.jsx("br",{}),s.jsx("br",{}),"(",t("ThisMayTakeUpToAMinute"),")"]})}),!X&&!y&&Ee(2)]}),s.jsx("div",{className:"filler below"})]}),x&&s.jsxs("div",{className:"local-saved-wrap below",children:[s.jsx("button",{className:`btn${m&&!y?" active":""}`,onClick:()=>{W(!0),F(!1)},children:t(m?"LocalJokes":"SeeLocalJokes")}),s.jsx("button",{className:`btn${!m&&!y?" active":""}`,onClick:()=>{W(!1),F(!1)},children:t("YourSavedJokes")})]})]})};export{Ks as EOrderByAge,jt as default};
