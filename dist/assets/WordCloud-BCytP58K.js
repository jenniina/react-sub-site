import{r as k,j as $}from"./react-A9DAvxly.js";import{u as J,N as L,r as Q,h8 as M,p as v,hb as R,hc as I,k9 as U}from"./index-ewQ3yapg.js";import"./hoist-non-react-statics-D5aJipOz.js";import"./react-dom-CxfJ6lHP.js";import"./scheduler-CzFDRTuY.js";import"./react-redux-C4cSaZU-.js";import"./react-is-DUDD-a5e.js";import"./use-sync-external-store-DEc9BFqZ.js";import"./@reduxjs-DhFEcpJw.js";import"./immer-C0GRqQ_d.js";import"./redux-CE3tqztX.js";import"./@babel-DF5_wy6Y.js";import"./redux-thunk-CY0Q9z1Q.js";import"./axios-CCb-kr4I.js";import"./react-icons-yVutJqMS.js";import"./react-router-dom-j9Ns2JNj.js";import"./react-router-BoqxkIr7.js";import"./@remix-run-DTnHqtaE.js";const V="_cloud_1ami1_1",X="_word_1ami1_29",E={"cloud-wrap":"_cloud-wrap_1ami1_1",cloud:V,word:X},ot=({language:x,title:A,onClick:F,words:b,width:l=600,height:g=400})=>{const o=J(),[K,N]=k.useState([]),T=L(),{windowWidth:r}=Q(),_=k.useRef(null),S=(t,h)=>{const e=document.createElement("canvas").getContext("2d");if(e){e.font=`${h}px Arial`;const s=e.measureText(t).width+2,u=h*.65,y=h*.2,m=u+y;return{width:s,height:m,ascent:u,descent:y}}return{width:0,height:0,ascent:0,descent:0}},z=(t,h)=>{const{width:i,height:e,ascent:n}=S(t.text,h);return{width:i,height:e,ascent:n}},O=(t,h)=>{const i=[],e=h.width*U(.2,.4),n=h.height*.2;return i.push({x:t.x+e,y:t.y-h.height}),i.push({x:t.x+e,y:t.y+t.height}),i.push({x:t.x+t.width,y:t.y+n}),i.push({x:t.x+t.width-e,y:t.y-h.height}),i.push({x:t.x+t.width-e,y:t.y+t.height}),i.push({x:t.x-h.width,y:t.y+n}),i.push({x:t.x-h.width,y:t.y+t.height}),r<500&&i.push({x:t.x-h.width,y:t.y-h.height}),r<500&&i.push({x:t.x-e,y:t.y+t.height*2}),r<500&&i.push({x:t.x-e,y:t.y-t.height*2}),r<500&&i.push({x:t.x+e,y:t.y+t.height*3}),r<500&&i.push({x:t.x+e,y:t.y-t.height*3}),r<500&&i.push({x:t.x-e,y:t.y+t.height*3}),r<500&&i.push({x:t.x-e,y:t.y-t.height*3}),i},q=(t,h,i,e,n)=>n.some(s=>t<s.x+s.width&&t+i>s.x&&h<s.y+s.height&&h+e>s.y),p=async t=>{var i,e;const h=t;if(F)F(t);else if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(h).then(()=>{o(v(R[x],!1,3))},n=>{o(v(`${I[x]}`,!0,3)),console.error("Failed to copy:",n)});else{const n=document.createElement("textarea");n.value=h,(i=_.current)==null||i.appendChild(n),n.focus(),n.select();try{document.execCommand("copy"),o(v(R[x],!1,3))}catch(s){console.error("Failed to copy:",s),o(v(`${I[x]}`,!0,3))}(e=_.current)==null||e.removeChild(n)}};return k.useEffect(()=>{if(b.length===0){N([]);return}const t=[...b].sort((e,n)=>n.weight!==e.weight?n.weight-e.weight:e.text.length-n.text.length),h=[],i=[];t.forEach((e,n)=>{const s=e.weight,{width:u,height:y,ascent:m}=z(e,s);let f=!1;const G=30;let j=0;if(n===0){const a=(l-u)/2,w=(g+m-y)/2;h.push({x:a,y:w,width:u,height:y}),i.push($.jsx("text",{x:a,y:w+m,fontSize:s,fontFamily:"Arial, sans-serif",fill:`hsl(${n*110%360}, 100%, ${T?"20":"70"}%)`,className:E.word,style:{cursor:"pointer"},onClick:()=>{p(e.text)},tabIndex:0,onKeyDown:C=>{(C.key==="Enter"||C.key===" ")&&p(e.text)},"aria-label":A??`${M[x]}: ${e.text}`,children:e.text},e.text)),f=!0}for(;!f&&j<G;){for(let a=0;a<h.length&&!f;a++){const w=h[a],C=O(w,{width:u,height:y});for(let D of C){const c={x:D.x,y:D.y,width:u,height:y};if(!(c.x<0||c.y<0||c.x+c.width>l||c.y+c.height>g)&&!q(c.x,c.y,c.width,c.height,h)){h.push(c),i.push($.jsx("text",{x:c.x,y:c.y+m,fontSize:s,fontFamily:"Arial, sans-serif",fill:`hsl(${n*110%360}, 100%, ${T?"20":"70"}%)`,style:{cursor:"pointer"},className:E.word,onClick:()=>p(e.text),tabIndex:0,onKeyDown:H=>{(H.key==="Enter"||H.key===" ")&&p(e.text)},"aria-label":A??`${M[x]}: ${e.text}`,children:e.text},e.text)),f=!0;break}}}j++}f||console.warn(`Could not place word after ${j} attempts:: ${e.text}`)}),N(i)},[b,l,g,x,T,o]),$.jsx("div",{ref:_,className:E["cloud-wrap"],children:$.jsx("svg",{width:l,height:g,className:E.cloud,children:K})})};export{ot as default};
