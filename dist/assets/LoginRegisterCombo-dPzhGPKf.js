import{r as n,j as s}from"./react-A9DAvxly.js";import{aa as y,cq as M,cr as x,cs as z,ct as D,cu as H,cv as O,cw as U,cx as $,cy as q,cz as A,K as C,cA as I,bj as P,cB as _,b3 as k,cC as W,a$ as B,cD as L,cE as K,c5 as T,b6 as Q,cF as G,W as m,cG as J,cH as Y,b2 as F,cI as V,c7 as X,cJ as Z,cK as ss}from"./index-uFuhXg81.js";import{a as es}from"./react-redux-CHm9GgGE.js";import{L as ts}from"./react-router-dom-CYs6befe.js";import"./hoist-non-react-statics-D5aJipOz.js";import"./react-dom-yh0erWL-.js";import"./scheduler-CzFDRTuY.js";import"./@reduxjs-DhFEcpJw.js";import"./immer-C0GRqQ_d.js";import"./redux-CE3tqztX.js";import"./@babel-DF5_wy6Y.js";import"./redux-thunk-CY0Q9z1Q.js";import"./axios-CCb-kr4I.js";import"./react-icons-DfNghVim.js";import"./react-is-DUDD-a5e.js";import"./react-router-S1Hdk0kP.js";import"./@remix-run-DTnHqtaE.js";import"./uuid-Dv1xt2bl.js";import"./use-sync-external-store-DEc9BFqZ.js";const rs=({easy:r,medium:a,hard:i,language:t})=>{const{windowWidth:d}=y(),[o,h]=n.useState(!0);return n.useEffect(()=>{d<M?h(!1):h(!0)},[d]),s.jsxs("table",{className:x.highscores,children:[s.jsx("caption",{children:z[t]}),s.jsx("thead",{children:s.jsxs("tr",{className:x.th,children:[s.jsx("th",{children:D[t]}),s.jsx("th",{className:x.score,children:H[t]}),o&&s.jsx("th",{className:x.percentage,children:"%"}),s.jsx("th",{children:O[t]})]})}),s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("th",{children:U[t]}),s.jsxs("td",{children:[r?r.score:0,"/300"]}),o&&s.jsxs("td",{children:[+(r.score*100/300).toFixed(1),"%"]}),s.jsx("td",{children:r.score===0||r.time===0?$[t]:s.jsxs(s.Fragment,{children:[Math.floor(r.time/60)<10&&"0",Math.floor(r.time/60),":",r.time%60<10&&"0",r.time%60]})})]}),s.jsxs("tr",{children:[s.jsx("th",{children:q[t]}),s.jsxs("td",{children:[a?a.score:0,"/300"]}),o&&s.jsxs("td",{children:[+(a.score*100/300).toFixed(1),"%"]}),s.jsx("td",{children:a.score===0||a.time===0?$[t]:s.jsxs(s.Fragment,{children:[Math.floor(a.time/60)<10&&"0",Math.floor(a.time/60),":",a.time%60<10&&"0",a.time%60]})})]}),s.jsxs("tr",{children:[s.jsx("th",{children:A[t]}),s.jsxs("td",{children:[i?i.score:0,"/300"]}),o&&s.jsxs("td",{children:[+(i.score*100/300).toFixed(1),"%"]}),s.jsx("td",{children:i.score===0||i.time===0?$[t]:s.jsxs(s.Fragment,{children:[Math.floor(i.time/60)<10&&"0",Math.floor(i.time/60),":",i.time%60<10&&"0",i.time%60]})})]})]})]})},is=({easy:r,medium:a,hard:i,language:t,setIsFormOpen:d})=>{const o=C(),[h,E]=n.useState(""),[w,u]=n.useState(""),S=n.useRef(null),[p,N]=n.useState({easy:r??{score:0,time:210},medium:a??{score:0,time:210},hard:i??{score:0,time:210}}),[j,v]=n.useState(!1),e=es(l=>{var c;return(c=l.auth)==null?void 0:c.user});n.useEffect(()=>{e!=null&&e._id&&o(I(e._id)).then(l=>{l!==null&&N(l.highscores)})},[e==null?void 0:e._id]),n.useEffect(()=>{o(P())},[]);const b=()=>{o(G())},R=async l=>{l.preventDefault(),o(m(J[t],!1,8)),await o(Y(h,w,"en")).then(()=>{E(""),u("")}).catch(c=>{var f,g;(g=(f=c.response)==null?void 0:f.data)!=null&&g.message?o(m(c.response.data.message,!0,8)):c.code==="ERR_BAD_REQUEST"?o(m(`${F.en}: ${c.response.data.message}`,!0,8)):c.code==="ERR_NETWORK"&&o(m(`${F.en}: ${c.message}`,!0,8))})};return s.jsx("div",{className:"login-wrap",children:e?s.jsxs(s.Fragment,{children:[s.jsxs("p",{children:[s.jsxs("span",{children:[_[(e==null?void 0:e.language)??"en"]," ",e!=null&&e.name?e==null?void 0:e.name:e.username," "]}),s.jsx(ts,{to:"/edit",children:`${k[e==null?void 0:e.language]}`}),s.jsxs("button",{onClick:b,id:"logout",className:"logout danger",children:[W[(e==null?void 0:e.language)??"en"]," Ã—"]})]}),s.jsx("button",{onClick:()=>v(!j),className:x.showHighscores,children:`${j?"hide":"show"} highscores`}),j&&s.jsx(rs,{language:t,easy:p.easy,medium:p.medium,hard:p.hard})]}):s.jsx(s.Fragment,{children:s.jsxs(B,{language:t,className:"accordion-login login-to-save",wrapperClass:"login-to-save-wrap",text:L[t],ref:S,setIsFormOpen:d,hideBrackets:!0,children:[s.jsx("h2",{children:L[t]}),s.jsxs("form",{onSubmit:R,className:`login ${x.login}`,children:[s.jsx("div",{className:"input-wrap",children:s.jsxs("label",{htmlFor:"quiz-username",children:[s.jsx("input",{id:"quiz-username",name:"username",type:"text",value:h,required:!0,autoComplete:"email",onChange:({target:l})=>E(l.value.trim())}),s.jsxs("span",{children:[K[t],": "]})]})}),s.jsx("div",{className:"input-wrap",children:s.jsxs("label",{children:[s.jsx("input",{name:"password",type:"password",required:!0,autoComplete:"current-password",value:w,onChange:({target:l})=>u(l.value.trim())}),s.jsxs("span",{children:[T[t],": "]})]})}),s.jsx("button",{type:"submit",id:"login",className:"login",children:Q[t]})]})]})})})},bs=({language:r,user:a,highscoresLocal:i,text:t})=>{const d=C(),[o,h]=n.useState(!1),[E,w]=n.useState(!1),[u,S]=n.useState(""),[p,N]=n.useState(""),[j,v]=n.useState(""),[e,b]=n.useState(""),R=l=>{if(l.preventDefault(),p.trim()!==j.trim()){d(m(X[r],!0,8));return}d(Z({name:e,username:u,password:p,language:"en"})).then(async()=>{d(m(ss[r],!1,8))}).catch(c=>{var f,g;console.error(c),(g=(f=c.response)==null?void 0:f.data)!=null&&g.message?d(m(c.response.data.message,!0,8)):d(m(`${F[r]}: ${c.message}`,!0,8))})};return s.jsxs("div",{className:`quiz-register-login-wrap register-login-wrap ${x["register-login-wrap"]}`,children:[s.jsx("div",{className:`${o?"open":""} ${a?"logged":""}`,children:s.jsx(is,{setIsFormOpen:h,language:r,easy:i.easy,medium:i.medium,hard:i.hard})}),s.jsx("div",{className:`${E?"open":""}`,children:s.jsx(V,{setIsFormOpen:w,language:r,handleRegister:R,username:u,setUsername:S,password:p,setPassword:N,confirmPassword:j,setConfirmPassword:v,name:e,setName:b,text:t})})]})};export{bs as default};
