import{r as g,j as o}from"./react-A9DAvxly.js";import{p as $e,q as Se,r as Ne}from"./react-icons-5ULj0WcV.js";import{u as Ee}from"./Blob-DEVQxHac.js";import{u as le,bk as Ie,bl as Oe,an as R,bm as Te,bn as ke,bo as Ae,n as k,bp as he,bq as fe,ar as qe,br as me,bs as Le,ax as ce,bt as Re,bu as Me,bv as We,b2 as oe,bw as Fe,bx as Je,by as Ye,bz as Pe,a$ as Ue,D as ze,bA as ue,bB as re,bC as Ke,av as Ve,bD as Ge,bE as He,bF as Qe,bG as Ze,bH as Xe,bI as pe,bJ as Be,ay as xe,bK as be,bL as ge,bM as et,bN as tt,bO as ne,bP as ot,bQ as Ce,aE as ye,bR as rt,aQ as nt}from"./AccessibleColors-CRBQVtI_.js";import{A as st}from"./Accordion-DsZcHxu2.js";import{S as ct}from"./Select-BZ5uqlR9.js";import{a as lt}from"./Jokes-CqqEXrgz.js";import{E as se}from"./Cart-DyrMmj7e.js";import"./react-redux-CHm9GgGE.js";const at="_grid_1q3ca_1",it="_light_1q3ca_85",dt="_card_1q3ca_22",ht="_text_1q3ca_154",ft="_blur_1q3ca_186",mt="_open_1q3ca_189",ut="_one_1q3ca_327",pt="_two_1q3ca_330",xt="_three_1q3ca_333",bt="_four_1q3ca_336",_={grid:at,"container-main":"_container-main_1q3ca_18","cards-container":"_cards-container_1q3ca_22",light:it,"change-status":"_change-status_1q3ca_98","area-dragging":"_area-dragging_1q3ca_118",card:dt,text:ht,blur:ft,open:mt,"add-color":"_add-color_1q3ca_226","change-status-form":"_change-status-form_1q3ca_261",delete:"_delete_1q3ca_270","add-status":"_add-status_1q3ca_291","input-wrap":"_input-wrap_1q3ca_303","color-select":"_color-select_1q3ca_306",one:ut,two:pt,three:xt,four:bt};function gt({language:e,status:n,statuses:q,id:w,index:v,data:d,handleDragging:M,handleUpdate:b,handleRemoveColor:Y,setTheTarget:K,focusedCard:f,setFocusedCard:y,translateStatus:i}){const N=le(),P={backgroundColor:d==null?void 0:d.color,padding:"0.3em 5%",color:(d==null?void 0:d.lightness)=="dark"?"white":"black",borderColor:(d==null?void 0:d.lightness)=="dark"?"var(--color-gray-7)":"var(--color-gray-5)",textShadow:(d==null?void 0:d.lightness)=="dark"?"1px 1px 1px black":"1px -1px 3px rgba(255,255,255,0.6), -1px 1px 3px rgba(255,255,255,0.6)"},V={color:"var(--color-primary-20)",textShadow:"none"},Z={margin:"0 auto 0.3em",display:"block",width:"max-content",fontSize:"0.9em"},[u,h]=g.useState(!1);function $(){h(s=>!s)}function j(){h(!1)}const p=g.useRef(null);Ee({ref:p,onOutsideClick:j});const I=g.useRef(0),S=(s,x)=>{s.preventDefault(),K(x),I.current=x},O=s=>{M(!0),s.preventDefault()},W=(s,x)=>{s.dataTransfer.setData("text/plain",JSON.stringify({type:"item",id:d==null?void 0:d.id}))};function A(s){const x=s.target.closest("a[data-status]"),c=x==null?void 0:x.dataset.status;d&&c&&b(d.id,c)}function F(s){switch(s.code){case"Enter":case"Space":s.stopPropagation(),s.preventDefault();const x=s.target.closest("a[data-status]"),c=(x==null?void 0:x.dataset.status)??n;d&&b(d.id,c),h(m=>!m);break;case"Escape":s.stopPropagation(),s.preventDefault(),h(!1);break}}const U=(s,x)=>{var J,z;const c=s.target.closest("li");let m;c?m=c:m=s.target;const T=Number((J=m==null?void 0:m.previousElementSibling)==null?void 0:J.dataset.identity),C=Number((z=m==null?void 0:m.nextElementSibling)==null?void 0:z.dataset.identity);switch(s.key){case"ArrowUp":d&&T!==null&&(s.preventDefault(),b(x,d.status,T),y(x));break;case"ArrowDown":d&&C!==null&&(s.preventDefault(),b(x,d.status,C),y(x));break;case"Tab":y(null)}};g.useEffect(()=>{var s;f===w&&((s=p.current)==null||s.focus())},[f,w]);const G=s=>{var x,c,m;if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(s).then(()=>{N(k(he[e],!1,3))},T=>{N(k(`${fe[e]}`,!0,3))});else{const T=document.createElement("textarea");T.value=s,(x=p.current)==null||x.appendChild(T),T.focus(),T.select();try{document.execCommand("copy"),N(k(he[e],!1,3))}catch(C){(m=(c=C.response)==null?void 0:c.data)!=null&&m.message?N(k(C.response.data.message,!0,8)):N(k(`${fe[e]}`,!0,3))}document.body.removeChild(T)}};return o.jsx("li",{ref:p,draggable:"true",onDragStart:s=>W(s),onDragEnter:s=>S(s,w),onDragOver:s=>O(s),onDragEnd:()=>M(!1),role:"listitem",tabIndex:0,onKeyDown:s=>U(s,w),"data-identity":w,children:o.jsxs("div",{style:P,className:`${_.card}`,children:[o.jsx("span",{className:_.text,children:d==null?void 0:d.content}),o.jsxs("b",{children:[o.jsx("button",{onClick:()=>Y(d.content),children:"Ã—"}),o.jsxs("button",{"aria-haspopup":"true",onClick:$,children:[o.jsx($e,{"aria-hidden":"true"}),o.jsx("span",{className:"scr",id:`instructions${w}`,children:Ie[e]})]})]}),o.jsxs("nav",{className:u?`${_.open} ${_.blur}`:`${_.blur}`,style:V,children:[o.jsxs("span",{style:Z,children:[Oe[e],":"]}),o.jsxs("ul",{role:"listbox","aria-describedby":`instructions${w}`,"aria-expanded":u?"true":"false",className:R(n),children:[o.jsx("li",{role:"option",className:_.copy,children:o.jsxs("a",{className:_.copy,onClick:()=>G(d.content),tabIndex:0,title:Te[e],children:[o.jsx(Se,{}),o.jsx("i",{children:ke[e]})]})}),q.map((s,x)=>o.jsx("li",{role:"option",className:R(s),children:o.jsxs("a",{className:R(s),"data-status":s,onClick:c=>A(c),onKeyDown:c=>F(c),tabIndex:0,title:`${Ae[e]}: ${i(s).toLowerCase()}`,children:[o.jsx(Ne,{}),o.jsx("i",{children:i(s)})]})},`${R(s)}-${x}-${v}`))]})]})]})})}const Ct=({language:e,status:n,statuses:q,isDragging:w,handleDragging:v,handleUpdate:d,handleRemoveColor:M,itemsByStatus:b,lightTheme:Y,updateStatus:K,reorderStatuses:f,deleteStatus:y,regex:i})=>{const N=le(),[P,V]=g.useState(0),[Z,u]=g.useState(!1),[h,$]=g.useState(""),[j,p]=g.useState(null),I=g.useRef(null),[S,O]=g.useState(!1),W=c=>{O(!0);const m=c.target.value;i.test(m)?($(m),O(!1)):(N(k(ce[e],!0,6)),O(!1))};Ee({ref:I,onOutsideClick:()=>u(!1)});const A=c=>{const m=JSON.parse(c.dataTransfer.getData("text/plain"));m.type==="item"&&(d(m.id,n,P),v(!1))},F=c=>c.preventDefault(),U=(c,m)=>{c.dataTransfer.setData("text/plain",JSON.stringify({type:"span",id:m.toString()})),v(!0)},G=c=>{c.stopPropagation(),c.preventDefault()},s=(c,m)=>{c.preventDefault();const T=JSON.parse(c.dataTransfer.getData("text/plain"));if(T.type==="span"){const C=T.id;if(C!==m){const J=Array.from(q),[z]=J.splice(C,1);J.splice(m,0,z),f(C,m)}v(!1)}},x=c=>{switch(c.toLowerCase()){case"good":return We[e];case"bad":return Me[e];case"neutral":return Re[e];default:return c.replace(/_/g," ")}};return o.jsxs("div",{className:`${_["cards-container"]} ${w?_["area-dragging"]:""} ${Y?_.light:""}`,onDrop:c=>s(c,q.indexOf(n)),onDragEnd:()=>v(!1),children:[o.jsxs("span",{ref:I,id:`label-${R(n)}`,className:_["status-label"],draggable:!0,onDragStart:c=>U(c,q.indexOf(n)),onDragOver:G,children:[o.jsx("b",{children:x(n)}),o.jsx(st,{isOpen:Z,setIsFormOpen:u,language:e,text:"*",hideBrackets:!0,onClick:()=>$(n),className:`narrow2 ${_["change-status"]} change-status`,wrapperClass:"change-status-wrap",tooltip:qe[e],x:"left",y:"below",children:o.jsxs(o.Fragment,{children:[o.jsx("i",{children:x(n)}),o.jsxs("form",{className:_["change-status-form"],onSubmit:c=>{c.preventDefault(),K(q.indexOf(n),h)},children:[o.jsx("div",{className:"input-wrap",children:o.jsxs("label",{htmlFor:`${R(n)}-status`,children:[o.jsx("input",{type:"text",required:!0,id:`${R(n)}-status`,value:h,onChange:c=>W(c)}),o.jsxs("span",{children:[me[e],":"]})]})}),o.jsx("button",{type:"submit",disabled:S,children:me[e]}),o.jsx("button",{type:"button",className:"danger delete",onClick:()=>{y(n)},children:Le[e]})]})]})})]}),o.jsx("ul",{"aria-labelledby":`label-${R(n)}`,id:R(n),className:R(n),role:"list",onDrop:A,onDragOver:F,children:b==null?void 0:b.map((c,m)=>o.jsx(gt,{language:e,id:c.id,index:m,data:c,status:n,statuses:q,handleDragging:v,handleUpdate:d,handleRemoveColor:M,setTheTarget:V,focusedCard:j,setFocusedCard:p,translateStatus:x},`${R(n)}-item-${c.id}-${m}`))})]})},yt=(e,n)=>{const[q,w]=g.useState(!1),[v,d]=g.useState(e);g.useEffect(()=>{d(e)},[e]);const M=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",b=g.useMemo(()=>n==null?void 0:n.map(u=>`${M?"local-":""}DnD-${u}`),[n,M]),Y=g.useCallback(()=>n==null?void 0:n.reduce((u,h,$)=>{const j=JSON.parse(localStorage.getItem(b[$])||"[]");return u[h]={items:j.length>0?j:e.filter(p=>p.status===h),setItems:p=>{localStorage.setItem(b[$],JSON.stringify(p)),y(I=>({...I,[h]:{...I[h],items:p}}))},removeItems:()=>{localStorage.removeItem(b[$]),y(p=>({...p,[h]:{...p[h],items:[]}}))}},u},{}),[n,b]),K=(u,h)=>JSON.stringify(u)===JSON.stringify(h),[f,y]=g.useState(Y),i=g.useRef(v),N=g.useRef(n);g.useEffect(()=>{const u=i.current,h=N.current;if(!K(u,v)||!K(h,n)){const $=n==null?void 0:n.reduce((j,p,I)=>{var O,W;const S=v.filter(A=>A.status===p);return j[p]={items:S,setItems:((O=f[p])==null?void 0:O.setItems)||(A=>{localStorage.setItem(b[I],JSON.stringify(A)),y(F=>({...F,[p]:{...F[p],items:A}}))}),removeItems:((W=f[p])==null?void 0:W.removeItems)||(()=>{localStorage.removeItem(b[I]),y(A=>({...A,[p]:{...A[p],items:[]}}))})},j},{});y($),i.current=v,N.current=n}},[v,n,b]),g.useEffect(()=>{n==null||n.forEach((u,h)=>{const $=v==null?void 0:v.filter(j=>j.status===u);localStorage.setItem(b[h],JSON.stringify($))})},[v,n,b]);const P=g.useCallback((u,h,$)=>{var W,A,F,U,G,s,x,c,m,T;const j=(W=Object.keys(f))==null?void 0:W.find(C=>{var J,z;return(z=(J=f==null?void 0:f[C])==null?void 0:J.items)==null?void 0:z.find(X=>(X==null?void 0:X.id)===u)});if(!j)return;const p=(F=(A=f==null?void 0:f[j])==null?void 0:A.items)==null?void 0:F.find(C=>(C==null?void 0:C.id)===u),I=(G=(U=f==null?void 0:f[h])==null?void 0:U.items)==null?void 0:G.findIndex(C=>(C==null?void 0:C.id)===$);if(!p)return;p.status=h;const S=(x=(s=f==null?void 0:f[j])==null?void 0:s.items)==null?void 0:x.filter(C=>C.id!==u);(c=f==null?void 0:f[j])==null||c.setItems(S);let O=[...(m=f==null?void 0:f[h])==null?void 0:m.items];return O=O.filter(C=>C.id!==p.id),O.splice(I>=0?I:O.length,0,p),(T=f==null?void 0:f[h])==null||T.setItems(O),y(C=>({...C,[j]:{...C[j],items:S},[h]:{...C[h],items:O}})),O},[f,y]),V=g.useCallback((u,h)=>{if(u===h)return;const $=n==null?void 0:n.indexOf(u);if($===-1){console.error(`Old status "${u}" not found in statuses array`);return}const j=b[$],p=`${M?"local-":""}DnD-${h}`,I=f[u].items.map(S=>({...S,status:h}));y(S=>({...S,[u]:{...S[u],items:[]},[h]:{...S[h],items:I}})),localStorage.setItem(p,JSON.stringify(I)),localStorage.removeItem(j)},[f,b,n]);return{isDragging:q,listItemsByStatus:f,handleUpdate:P,handleRenameStatus:V,handleDragging:u=>w(u)}},ee=["good","neutral","bad"],It=({language:e})=>{const n=le(),[q,w,v]=oe("DnD-data",[]),d=[{content:"orchid",color:"orchid"},{content:"lightgreen",color:"lightgreen"},{content:"lightsalmon",color:"lightsalmon"},{content:"lightblue",color:"lightblue"},{content:"pink",color:"pink"},{content:"turquoise",color:"turquoise"},{content:"blue",color:"blue"},{content:"crimson",color:"crimson"},{content:"yellow",color:"yellow"},{content:Fe[e],color:"purple"},{content:Je[e],color:"orange"},{content:Ye[e],color:"lightgray"},{content:Pe[e],color:"lightgray"}],M=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",[b,Y,K]=oe("DnD-userColors",[]),[f,y]=g.useState(!1),[i,N,P]=oe(`${M?"local-":""}DnD-statuses`,ee),[V,Z]=g.useState(""),u=g.useRef(null),h=/^[a-zA-Z\u00C0-\u024F\u1E00-\u1EFF- ]*$/,$=i.map(t=>{const r=window.localStorage.getItem(`${M?"local-":""}DnD-${t}`);return r?JSON.parse(r):[]}).flat();g.useEffect(()=>{const t=document.createElement("style");t.id="dnd-styles",document.head.appendChild(t);const a=(l=>l.map(E=>{const D=R(E);return`
          ul.${D} li.${D} a.${D}, 
          ul.${D} li.${D} a.${D} i, 
          ul.${D} li.${D} a.${D} svg {
            cursor: auto;
            pointer-events: none;
            color: var(--color-primary-20);
          } 
          ul.${D} li a {
            padding: 0.4em 0;
            display: flex;
            flex-flow: row nowrap;
            justify-content: flex-start;
            align-items: center;
            flex: 0 1 auto;
          }
          ul.${D} li a > i {
            line-height: 1;
          }
          ul.${D} li a svg {
            font-size: 0.7rem;
            min-width: 1rem;
            max-width: 1rem;
          }
        `}).join(`
`))(i);return t.innerHTML=a,()=>{document.head.removeChild(t)}},[i]);const j=t=>{const r=document.createElement("canvas").getContext("2d");if(!r)throw new Error("Canvas context not available");return r.fillStyle=t,r.fillStyle},p=t=>{let r=parseInt(t.slice(1,3),16),a=parseInt(t.slice(3,5),16),l=parseInt(t.slice(5,7),16);return{r,g:a,b:l}},I=(t,r,a)=>{const l=[t,r,a].map(E=>(E/=255,E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4)));return l[0]*.2126+l[1]*.7152+l[2]*.0722},S=t=>{const r=t.startsWith("#")?t:j(t),{r:a,g:l,b:E}=p(r);return I(a,l,E)>.179?"light":"dark"},O=t=>{if(y(!0),h.test(t)){const r=t.trim().replace(/ /g,"_");if(r.length>20){n(k(`${xe[e]}: ${be[e]}`,!0,9)),y(!1);return}if(t.trim()===""){n(k(se[e],!0,6)),y(!1);return}if(i.includes(r)){n(k(ge[e],!0,6)),y(!1);return}if(i.length===8){n(k(et[e],!0,8)),y(!1);return}N(a=>r===""||a.includes(r)?(y(!1),a):(y(!1),[...a,r]))}else n(k(ce[e],!0,6)),y(!1)},W=(t,r)=>{N(a=>{const l=[...a],[E]=l.splice(t,1);return l.splice(r,0,E),l})},A=(t,r)=>{if(!h.test(r)){n(k(ce[e],!0,6));return}N(a=>{const l=r.trim().replace(/ /g,"_");if(l.length>20)return n(k(`${xe[e]}: ${be[e]}`,!0,9)),a;if(l==="")return n(k(se[e],!0,6)),a;if(a.includes(l))return n(k(ge[e],!0,6)),a;const E=[...a],D=E[t];return E[t]=l,w(H=>H.map(L=>L.status===D?{...L,status:l}:L)),je(D,l),E})},F=t=>{if(i.length===1){n(k(tt[e],!0,8));return}else if(q.some(r=>r.status===t))n(k(`${ne[e]} ${ot[e]}`,!0,8)),N(r=>r.filter(a=>a!==t)),w(r=>r.filter(a=>a.status!==t));else if(window.confirm(`${ne[e]} (${t})`))N(r=>r.filter(a=>a!==t)),w(r=>r.filter(a=>a.status!==t));else return},U=()=>{const t=[];let r=ee[1],a;if(b&&b.length>0&&window.confirm(Ce[e])){v(),w([]),K();for(let l=0;l<d.length;l++){const E=d[l].color||"lightgray",D=d[l].content||"lightgray";a=S(E);const H=Math.floor(Math.random()*i.length);r=i[H];const L={id:l,content:D,color:E,status:r,lightness:a};t.push(L)}return t}else{v(),w([]);for(let l=0;l<b.length;l++){const E=b[l].color||"lightgray",D=b[l].content||"lightgray";a=S(E);const H=Math.floor(Math.random()*i.length);r=i[H];const L={id:l,content:D,color:E,status:r,lightness:a};t.push(L)}for(let l=b.length;l<d.length;l++){const E=d[l].color||"lightgray",D=d[l].content||"lightgray";a=S(E);const H=Math.floor(Math.random()*i.length);r=i[H];const L={id:l,content:D,color:E,status:r,lightness:a};t.push(L)}return t}},G=()=>{window.confirm(ye[e])&&(P(),N(ee),w(U()))},s=()=>{window.confirm(`${ye[e]} (${ue[e]})`)&&(b&&b.length>0&&window.confirm(Ce[e])?(i.forEach(t=>{ae[t].removeItems()}),P(),N(ee),v(),w([])):(P(),N(ee),v(),w([]),w(b.map((t,r)=>{const a=t.color||"lightgray",l=t.content||"lightgray",E=S(a),D=i[Math.floor(Math.random()*i.length)];return{id:r,content:l,color:a,status:D,lightness:E}}))))},x=g.useMemo(()=>$.length>0?$:U(),[]);g.useEffect(()=>{w(x)},[x]);const[c,m]=g.useState(""),[T,C]=g.useState({label:i[0],value:i[0]}),J=(t,r,a)=>{var L,ie;if(t.preventDefault(),y(!0),r.trim()===""){n(k(se[e],!0,6)),y(!1);return}const l=r.trim().split(" "),E=l.length===1?r:l.slice(0,-1).join(" "),D=l.length===1?r:l[l.length-1];if(X(D)){const te={id:q.reduce((Q,B)=>B.id>Q?B.id:Q,0)+1,content:E,color:D,status:a,lightness:S(r)};w(Q=>[...Q,te]),Y(Q=>[...Q,{content:E,color:D}]),(L=u.current)==null||L.scrollIntoView({behavior:"smooth"}),y(!1)}else window.confirm(`${rt[e]}: ${nt[e]}`)&&(Y(de=>{const te=[...de,{content:r,color:"lightgray"}],Q={id:te.length-1,content:r,color:"lightgray",status:a,lightness:"light"};return w(B=>[...B,Q]),te}),(ie=u.current)==null||ie.scrollIntoView({behavior:"smooth"}),y(!1))},z=t=>{if(window.confirm(`${ne[e]} (${t})`))w(r=>r.filter(a=>a.content!==t)),Y(r=>r.filter(l=>l.content!==t));else return},X=t=>{const r=document.createElement("canvas").getContext("2d");if(!r)throw new Error("Canvas context not available");return r.fillStyle=t,r.fillStyle!=="#000000"||t.toLowerCase()==="black"},De=Ue(),{isDragging:we,listItemsByStatus:ae,handleDragging:ve,handleRenameStatus:je,handleUpdate:_e}=yt(q,i);return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:`${_.grid} ${i.length<2?_.one:i.length<3?_.two:(i==null?void 0:i.length)<4||(i==null?void 0:i.length)===5||(i==null?void 0:i.length)===6?_.three:_.four}`,ref:u,children:i.map(t=>{var r;return o.jsx(Ct,{language:e,itemsByStatus:(r=ae[t])==null?void 0:r.items,status:t,statuses:i,isDragging:we,handleDragging:ve,handleUpdate:_e,handleRemoveColor:z,lightTheme:De,updateStatus:A,reorderStatuses:W,deleteStatus:F,regex:h},t)})}),o.jsxs("div",{className:"flex center gap max-content margin0auto",children:[o.jsx("button",{onClick:G,children:ze[e]}),o.jsx("button",{onClick:s,children:ue[e]})]}),o.jsxs("div",{className:_["add-color"],children:[o.jsx("h2",{children:re[e]}),o.jsxs("p",{children:[Ke[e],' "darkblue" ',Ve[e],' "slategray".'," ",Ge[e],"."," ",He[e],"."," ",Qe[e],"."]}),o.jsxs("form",{onSubmit:t=>J(t,c,T.label),children:[o.jsx("div",{className:`input-wrap ${_["input-wrap"]}`,children:o.jsxs("label",{htmlFor:"dnd-color-add",children:[o.jsx("input",{required:!0,type:"text",id:"dnd-color-add",value:c,onChange:t=>m(t.target.value)}),o.jsx("span",{children:re[e]})]})}),o.jsx(ct,{language:e,id:"dnd-color-status",className:`${_["color-select"]} color`,instructions:lt[e],hide:!0,options:i.map(t=>({label:t,value:t})),value:T,onChange:t=>C(t||{label:i[0],value:i[0]})}),o.jsx("button",{type:"submit",disabled:f,children:re[e]})]}),o.jsxs("p",{className:"textcenter",children:[o.jsxs("span",{children:[Ze[e]," "]})," ",o.jsx("a",{href:"https://htmlcolorcodes.com/color-names/",target:"_blank",children:Xe[e]})]})]}),o.jsxs("div",{className:_["add-status"],children:[o.jsx("h2",{children:pe[e]}),o.jsxs("form",{onSubmit:t=>{t.preventDefault(),O(V)},children:[o.jsx("div",{className:"input-wrap",children:o.jsxs("label",{htmlFor:"dnd-status-add",children:[o.jsx("input",{required:!0,type:"text",id:"dnd-status-add",value:V,onChange:t=>Z(t.target.value)}),o.jsx("span",{children:pe[e]})]})}),o.jsx("button",{type:"submit",disabled:f,children:Be[e]})]})]})]})};export{It as D,yt as u};
