import{r as w,j as t}from"./react-A9DAvxly.js";import{kK as C,kL as j,ko as y,kH as N,h5 as x,kM as k,j7 as R}from"./index-DdJzb_U7.js";import{u as v}from"./Images-C-9fqN8T.js";import{Q as g,P as O,g as P}from"./poems-vVThmiDk.js";import"./hoist-non-react-statics-D5aJipOz.js";import"./react-dom-CxfJ6lHP.js";import"./scheduler-CzFDRTuY.js";import"./react-redux-C4cSaZU-.js";import"./react-is-DUDD-a5e.js";import"./use-sync-external-store-DEc9BFqZ.js";import"./@reduxjs-DhFEcpJw.js";import"./immer-C0GRqQ_d.js";import"./redux-CE3tqztX.js";import"./@babel-DF5_wy6Y.js";import"./redux-thunk-CY0Q9z1Q.js";import"./axios-CCb-kr4I.js";import"./react-icons-yVutJqMS.js";import"./react-router-dom-j9Ns2JNj.js";import"./react-router-BoqxkIr7.js";import"./@remix-run-DTnHqtaE.js";const $=({video:o,language:e,searchTerm:c,textType:i,handleDownload:m})=>{const{tooltip:a,handleMouseMove:d,handleMouseLeave:n}=v(),[u,h]=w.useState({quote:"",category:"",author:""}),[p,f]=w.useState({title:"",author:"",lines:[],linecount:"0"}),s=async r=>{const l=await P(e,r);f(l[0])},b=async()=>{const r=await N(e,c);h(r)};w.useEffect(()=>{const r=Math.floor(Math.random()*5)+2;i==="poem"?s(r):i==="quote"?b():Math.floor(Math.random()*2)+1===1?s(r):b()},[e,c,i]);const M=r=>{const l=r.currentTarget.getBoundingClientRect(),E=r.clientX-l.left+10,L=r.clientY-l.top+10;d(E,L)};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"tooltip-wrap",onMouseMove:M,onMouseLeave:n,children:[t.jsx("video",{src:Number(o.videos.large.size)>0?o.videos.large.url:o.videos.medium.url,title:o.tags,style:{width:"100%",height:"auto",maxHeight:"100%",borderRadius:"8px",cursor:"pointer"},onClick:m,tabIndex:0,onKeyDown:r=>{(r.key==="Enter"||r.key===" ")&&m()},controls:!0}),a.visible&&t.jsx("span",{className:"tooltip center narrow",style:{top:a.y,left:a.x,right:"unset"},children:C[e]})]}),i==="quote"?t.jsx(g,{quote:u,language:e,url:o.pageURL,title:t.jsxs(t.Fragment,{children:[j[e]," (",y[e],": ",o.user,")"]})}):t.jsx(O,{poem:p,language:e})]})},Z=({video:o,language:e,show:c,searchTerm:i,textType:m})=>{const a=async()=>{if(window.confirm(R[e]+"?")){const n=await fetch(o.videos.large.url,{mode:"cors"});if(!n.ok)throw new Error("Network response was not ok");const u=await n.blob(),h=window.URL.createObjectURL(u),p=o.videos.large.url?o.videos.large.url.match(/\.(mp4)$/i):o.videos.medium.url.match(/\.(mp4)$/i),f=p?p[1].toLowerCase():"mp4",s=document.createElement("a");s.href=h,s.download=`video_${o.id}.${f}`,s.target="_blank",s.rel="noreferrer",document.body.appendChild(s),s.click(),document.body.removeChild(s)}},d=()=>{c({title:o.tags,className:x["video-modal"],children:t.jsx($,{video:o,language:e,searchTerm:i,textType:m,handleDownload:a})})};return t.jsxs("div",{className:`tooltip-wrap ${x["video-wrap"]}`,children:[t.jsx("button",{type:"button",style:{background:"none",border:"none",padding:0,cursor:"pointer",width:"100%"},"aria-label":k[e],onClick:d,onKeyDown:n=>{(n.key==="Enter"||n.key===" ")&&(n.preventDefault(),d())},children:t.jsx("img",{src:o.videos.small.thumbnail,alt:o.tags,className:`${x["video-small"]}`,style:{width:"100%",height:"auto",borderRadius:"8px",cursor:"pointer"}})}),t.jsx("span",{className:"tooltip above narrow2",children:k[e]}),t.jsx("p",{children:t.jsx("small",{children:t.jsxs("a",{href:o.pageURL,target:"_blank",rel:"noreferrer",children:[j[e]," (",y[e],": ",o.user,")"]})})})]},o.id)};export{Z as default};
