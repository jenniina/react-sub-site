import{j as t,r as a}from"./react-A9DAvxly.js";import{Y as Do,Z as ut,_ as Ae,$ as Lo,a0 as Pt,a1 as To,a2 as Mo,a3 as Po,a4 as Ro,a5 as Io,a6 as Ao,a7 as Fo,a8 as Oo,a9 as Vo,aa as Ho,K as zo,ab as Uo,ac as pr,W as g,ad as mr,ae as dt,af as Yo,ag as Wo,ah as Jo,ai as Go,aj as Xo,ak as qo,al as _o,am as Zo,an as Qo,ao as Ko,ap as es,aq as ts,ar as rs,as as os,at as ss,au as as,av as ns,aw as ls,ax as cs,ay as fr,az as hr,aA as is,aB as us,aC as ds,aD as ps,aE as ms,aF as fs,aG as hs,aH as br,aI as bs,aJ as ys,aK as vs,aL as $s,aM as xs,aN as ks,aO as gs,aP as ws,aQ as Es,aR as js,aS as Ns,aT as pt,aU as Bs,aV as yr,aW as Cs,aX as Ss,aY as Ds,aZ as Ls,a_ as Ts,a$ as Ms,b0 as Ps,b1 as Rs,b2 as Ct,b3 as vr,b4 as $r,b5 as ce,b6 as Is,b7 as As,b8 as Fs,b9 as Os,ba as Vs,bb as Hs,bc as xr,bd as kr,be as gr,bf as zs,bg as wr,bh as Er,bi as Us,bj as Ys,bk as Ws,bl as Js,bm as Gs,bn as Xs,bo as qs,bp as _s,bq as Zs,br as ke,bs as Qs,bt as Ks,bu as ea,bv as jr,bw as ta,bx as ra,by as oa,bz as sa,bA as aa,bB as na,bC as la,bD as ca,bE as ia,bF as ua,bG as da,bH as pa}from"./index-BImyNIkH.js";import{U as ma,V as fa,W as ha,X as ba,Y as ya,Z as va,_ as Nr,$ as Br,a0 as $a,a1 as xa,a2 as ka,a3 as ga,v as wa,x as Ea,a4 as ja}from"./react-icons-Bhw_1Ed6.js";import{a as Cr}from"./react-redux-CHm9GgGE.js";import{a as Fe}from"./axios-CCb-kr4I.js";import{a as Na}from"./react-router-S1Hdk0kP.js";import"./hoist-non-react-statics-D5aJipOz.js";import"./react-dom-yh0erWL-.js";import"./scheduler-CzFDRTuY.js";import"./@reduxjs-DhFEcpJw.js";import"./immer-C0GRqQ_d.js";import"./redux-CE3tqztX.js";import"./@babel-DF5_wy6Y.js";import"./redux-thunk-CY0Q9z1Q.js";import"./react-router-dom-CYs6befe.js";import"./@remix-run-DTnHqtaE.js";import"./react-is-DUDD-a5e.js";import"./use-sync-external-store-DEc9BFqZ.js";const Ba=({d:o,layer:e,language:N,item:d,index:x,start:B,movement:S,stopMovementCheck:j,stopMoving:i,wheel:h,focused:w,blurred:te,selectedvalue0:m,setFocusedBlob:re,dragUlRef:k,removeBlob:Q,isDeleteMode:G})=>{const oe=o===0?33:Do(22,d.i*2.6,50),se={background:`${d.background}`,display:"block",left:`${d.x}`,top:`${d.y}`,zIndex:`${d.z}`,"--i":isNaN(Number(d.i))?"7":`${d.i}`,"--layer":`${e}`,WebkitFilter:`blur(${oe}px)`,filter:`blur(${oe}px)`},M=o===0?["5.9px","8.2px","9.9px","10.8px","10.7px","10.5px","10px"]:["5.1px","5.4px","6.5px","7px","7.8px","8.4px","8.6px"],C=f=>{G&&Q(d)};return t.jsxs("li",{onFocus:f=>{var E;k&&k.current&&((E=k.current)==null||E.setAttribute("aria-activedescendant",`${f.target.id}`));const b=f.target;b.parentNode,setTimeout(()=>{var z,ie;const A=b.getBoundingClientRect(),K=(z=b.parentNode)==null?void 0:z.getBoundingClientRect(),H=b.closest(".drag-wrap-outer"),X=H==null?void 0:H.scrollLeft,ae=H==null?void 0:H.scrollTop;re({top:A.top-K.top-ae,left:A.left-K.left-X,width:A.width,height:A.height}),m.current&&(m.current.textContent=`${ut[N]}: ${(ie=b.querySelector("span"))==null?void 0:ie.textContent}`)},500),w(b)},onBlur:f=>{var b;re(null),te(f.target),k&&k.current&&((b=k.current)==null||b.removeAttribute("aria-activedescendant")),m.current&&(m.current.textContent=`${Ae[N]}`)},className:`dragzone animation ${G?"del":""}`,id:d.id,role:"option",tabIndex:0,style:se,onClick:C,children:[t.jsx("div",{className:"draggable-overlay",style:Number(d.i)<8?{width:`calc(var(--i) * ${M[0]})`,height:`calc(var(--i) * ${M[0]})`}:Number(d.i)<10?{width:`calc(var(--i) * ${M[1]})`,height:`calc(var(--i) * ${M[1]})`}:Number(d.i)<20?{width:`calc(var(--i) * ${M[2]})`,height:`calc(var(--i) * ${M[2]})`}:Number(d.i)<24?{width:`calc(var(--i) * ${M[3]})`,height:`calc(var(--i) * ${M[3]})`}:Number(d.i)<28?{width:`calc(var(--i) * ${M[4]})`,height:`calc(var(--i) * ${M[4]})`}:Number(d.i)<32?{width:`calc(var(--i) * ${M[5]})`,height:`calc(var(--i) * ${M[5]})`}:isNaN(Number(d.i))||d.i===null||d.i===void 0?{width:`7 * ${M[6]})`,height:`7 * ${M[6]})`}:{width:`calc(var(--i) * ${M[6]})`,height:`calc(var(--i) * ${M[6]})`},onMouseDown:f=>{var E,A;f.stopPropagation();const b=f.currentTarget.parentElement;b.draggable=!0,m.current&&(m.current.textContent=`${ut[N]}: ${(E=b==null?void 0:b.querySelector("span"))==null?void 0:E.textContent}`),k&&k.current&&((A=k.current)==null||A.setAttribute("aria-activedescendant",`${b.id}`)),B(f,b)},onMouseMove:f=>{var b;if(f.buttons===1){f.stopPropagation();const E=f.currentTarget.parentElement;E.draggable=!0,S(f,E),m.current&&(m.current.textContent=`${ut[N]}: ${(b=E==null?void 0:E.querySelector("span"))==null?void 0:b.textContent}`)}},onMouseLeave:f=>{var E;f.stopPropagation();const b=f.currentTarget.parentElement;b.draggable=!1,k&&k.current&&((E=k.current)==null||E.removeAttribute("aria-activedescendant")),i(f,b),m.current&&(m.current.textContent=`${Ae[N]}`)},onMouseUp:f=>{var E;const b=f.currentTarget.parentElement;b.draggable=!1,j(f,b),k&&k.current&&((E=k.current)==null||E.removeAttribute("aria-activedescendant")),m.current&&(m.current.textContent=`${Ae[N]}`)},onTouchStart:f=>{var E,A;f.preventDefault(),f.stopPropagation();const b=f.currentTarget.parentElement;b.draggable=!0,k&&k.current&&((E=k.current)==null||E.setAttribute("aria-activedescendant",`${b.id}`)),B(f,b),m.current&&(m.current.textContent=`${ut[N]}: ${(A=b==null?void 0:b.querySelector("span"))==null?void 0:A.textContent}`)},onTouchMove:f=>{f.preventDefault(),f.stopPropagation();const b=f.currentTarget.parentElement;b.draggable=!0,S(f,b)},onTouchEnd:f=>{var E;const b=f.currentTarget.parentElement;b.draggable=!1,k&&k.current&&((E=k.current)==null||E.removeAttribute("aria-activedescendant")),j(f,b),m.current&&(m.current.textContent=`${Ae[N]}`)},onWheel:f=>{const b=f.currentTarget.parentElement;h(b)}}),t.jsxs("span",{className:"scr",children:[Lo[N]," ",d.number]})]},x)},Ca=({layer_:o,className:e,language:N,d,items:x,saveDraggables:B,dragUlRef:S,selectedvalue0:j,setFocusedBlob:i,start:h,movement:w,stopMovementCheck:te,stopMoving:m,wheel:re,focused:k,blurred:Q,removeBlob:G,isDeleteMode:oe})=>{const se=d===0?0:1,M={WebkitFilter:`url(#svgfilter${se})`,filter:`url(#svgfilter${se})`,backgroundColor:"transparent",position:"absolute",top:0,left:0,height:"100%",width:"100%",pointerEvents:"none"};return t.jsxs(t.Fragment,{children:[t.jsxs("span",{id:`listbox${d}-layer${o}-label`,className:"scr",children:[Pt[N]," ",o+1]}),t.jsx("ul",{ref:S,role:"listbox",id:`listbox${d}-layer${o}`,className:`drag-container-layer drag-container${d}-layer drag-container${d}-layer${o} ${e}`,"aria-labelledby":`listbox${d}-layer${o}-label`,"aria-activedescendant":"",style:M,children:x==null?void 0:x.map((C,f)=>{if(C!=null)return t.jsx(Ba,{layer:o,d,language:N,item:C,index:f,start:h,movement:w,stopMovementCheck:te,stopMoving:m,wheel:re,focused:k,blurred:Q,selectedvalue0:j,setFocusedBlob:i,dragUlRef:S,removeBlob:G,isDeleteMode:oe},f)})})]})};let mt,L=!0,St=0,Dt=0,Pe,Qe=0,Lt=null,ft="90deg",I;const Re=o=>{o.preventDefault(),o.stopImmediatePropagation()},Sa=({layer_:o,layerAmount:e,hiddenLayers:N,setActiveLayer:d,changeBlobLayer:x,highestZIndex:B,language:S,dispatch:j,d:i,items:h,saveDraggables:w,getPosition:te,dragWrap:m,selectedvalue0:re,exitApp:k,colorBlockProps:Q,colorPairs:G,makeLarger0:oe,makeSmaller0:se,makeMore0:M,deleteBlob0:C,removeBlob:f,isDeleteMode:b,layerIncrease:E,layerDecrease:A,setFocusedBlob:K,colorIndex:H,setColorIndex:X,setScroll:ae,scroll:z,clickOutsideRef:ie,colorswitch:q,addRandomDraggable:ne})=>{const Ve=[...h].sort((l,u)=>l.layer-u.layer).reduce((l,u)=>(l[u.layer]||(l[u.layer]=[]),l[u.layer].push(u),l),{}),He=Array.from({length:e},(l,u)=>u),ve=a.useRef({});a.useEffect(()=>{const l=He.reduce((u,$)=>(u[$]=a.createRef(),u),{});ve.current=l},[e]);const F=()=>{try{return document.createEvent("TouchEvent"),!0}catch{return!1}};a.useEffect(()=>{F()},[]);const de=l=>{let u=l.layer;u<e-1&&(u+=1,x(l,u))},U=l=>{let u=l.layer;u>0&&(u-=1,x(l,u))};function ee(l,u){const $=l.getBoundingClientRect(),y=u.getBoundingClientRect();return!($.top+5>y.bottom-5||$.right<y.left||$.bottom-5<y.top+5||$.left>y.right)}const W=a.useCallback(l=>{L=!0,document.removeEventListener("keydown",D),document.removeEventListener("touchmove",Re)},[D]);To({ref:ie,onOutsideClick:W}),a.useEffect(()=>{F()&&!I&&z&&(document.body.style.overflowY="auto",document.body.style.overflowX="hidden",document.removeEventListener("keydown",D),document.removeEventListener("touchmove",Re))},[I,z,F,D]);const pe=a.useCallback((l,u)=>{l.stopPropagation(),l.preventDefault(),document.activeElement instanceof HTMLElement&&document.activeElement.blur(),mt=!0,I=u,St=F()?l.touches[0].clientX:l.clientX,Dt=F()?l.touches[0].clientY:l.clientY,u.classList.add("drag");const $=B[o];if(F()){let O=(u==null?void 0:u.style.getPropertyValue("--i"))??"7";Pe=parseFloat(O),Pe=isNaN(Pe)?7:Pe}j({type:"partialUpdate",payload:{d:i,id:u.id,update:{z:`${Math.max(1,$+1)}`}}}),document.addEventListener("keydown",D);const y=u.style.getPropertyValue("--layer");d(isNaN(parseInt(y))?1:parseInt(y)),F()&&(document.addEventListener("touchmove",Re,{passive:!1}),document.body.style.overflow="hidden")},[D,F]),ge=a.useCallback(l=>{if(l.stopPropagation(),F()&&(l.preventDefault(),document.body.style.overflow="hidden"),mt){let u=F()?l.touches[0].clientX:l.clientX,$=F()?l.touches[0].clientY:l.clientY;I.style.top=I.offsetTop-(Dt-$)+"px",I.style.left=I.offsetLeft-(St-u)+"px",St=u,Dt=$,j({type:"partialUpdate",payload:{d:i,id:I==null?void 0:I.id,update:{x:I.style.left,y:I.style.top}}})}},[F]),me=a.useCallback((l,u)=>{l.stopPropagation(),l.preventDefault(),mt=!1,Qe++,Lt&&clearTimeout(Lt),Lt=setTimeout(()=>{if(Qe===2){let P=Pe-.8;P=Math.max(7,P),j({type:"partialUpdate",payload:{d:i,id:I==null?void 0:I.id,update:{i:P}}})}else if(Qe===3){let P=Pe+.8;P=Math.min(36,P),j({type:"partialUpdate",payload:{d:i,id:I==null?void 0:I.id,update:{i:P}}})}Qe=0},300),document.removeEventListener("keydown",D);let $=u.style.getPropertyValue("--i")??"7",y=parseFloat($);y=isNaN(y)?7:y;const O=u.querySelector("div"),J={layer:parseInt(u.style.getPropertyValue("--layer")),id:u.id,number:parseInt(u.id.replace("blob","").split("-")[0],10),i:y,x:u.style.left,y:u.style.top,z:u.style.zIndex,background:u.style.background||"linear-gradient(90deg, cyan, greenyellow)"};F()&&z?(document.removeEventListener("touchmove",Re),document.body.style.overflowY="auto",document.body.style.overflowX="hidden"):F()&&!z&&(document.body.style.overflow="hidden"),E.current&&ee(O,E.current)&&de(J),A.current&&ee(O,A.current)&&U(J),G[i].forEach((P,be)=>{const fe=Q[i][be];if(fe.current&&ee(O,fe.current)){const{color1:Ce,color2:le}=P;u.style.background=`linear-gradient(${ft}, ${Ce},${le})`}}),oe.current&&ee(O,oe.current)&&(y+=.4,y=Math.min(Math.max(7,y),36),j({type:"partialUpdate",payload:{d:i,id:u.id,update:{i:y}}})),se.current&&ee(O,se.current)&&(y-=.4,y=Math.min(Math.max(7,y),36),j({type:"partialUpdate",payload:{d:i,id:u.id,update:{i:y}}})),M.current&&ee(O,M.current)&&we(J),u.classList.remove("drag"),u.blur(),Qe===0?I=null:I=u,K(null)},[ft,ee,D,we,Q,G,f,z]),Ne=a.useCallback((l,u)=>{l.stopPropagation(),mt=!1,I=null,F()&&z?(document.removeEventListener("touchmove",Re),document.body.style.overflowY="auto",document.body.style.overflowX="hidden"):F()&&!z&&(document.body.style.overflow="hidden"),te(u),u.classList.remove("drag"),document.removeEventListener("keydown",D),u.blur()},[D]);a.useEffect(()=>{F()&&!I&&z&&(document.removeEventListener("touchmove",Re),document.body.style.overflowY="auto",document.body.style.overflowX="hidden")},[me,Ne,I,z]);function Be(l){l.classList.remove("drag"),document.removeEventListener("keydown",D),te(l),l.draggable=!1,I=null}function ht(l){I=l,l.classList.add("drag");const u=l.style.getPropertyValue("--layer");d(parseInt(u)??2),document.addEventListener("keydown",D),l.draggable=!0}function bt(l){const u=$=>yt($,l);return z||l.addEventListener("wheel",u,{passive:!1}),()=>{l.removeEventListener("wheel",u)}}function yt(l,u){if(L){L=!1;let y=window.getComputedStyle(u).getPropertyValue("--i")??u.style.getPropertyValue("--i")??"7",O=parseFloat(y);O=isNaN(O)?7:O,l.deltaY<0?O*=1.04:O*=.96,O=Math.min(Math.max(7,O),36),j({type:"partialUpdate",payload:{d:i,id:u.id,update:{i:O}}}),setTimeout(()=>{L=!0},100)}}a.useEffect(()=>{const l=I;if(l){const{color1:u,color2:$}=G[i][H],y=`linear-gradient(${ft}, ${u}, ${$})`;j({type:"partialUpdate",payload:{d:i,id:l.id,update:{background:y}}})}},[H]);function D(l){var Ue,Ye;const $=I;if(!$)return;const y=window.getComputedStyle($),O=_=>{var Je;const he=parseFloat(y.marginTop),De=parseFloat(y.marginLeft),je=_.getBoundingClientRect(),We=(Je=_.parentNode)==null?void 0:Je.getBoundingClientRect();K({top:je.top-We.top-he,left:je.left-We.left-De,width:je.width,height:je.height})};let J=y.getPropertyValue("--i")??$.style.getPropertyValue("--i")??"7",P=parseFloat(J);P=isNaN(P)?7:P;let be=parseFloat(y.getPropertyValue("left"))??parseFloat($.style.getPropertyValue("left"))??0,fe=parseFloat(y.getPropertyValue("top"))??parseFloat($.style.getPropertyValue("top"))??0;const Ce=$.style.getPropertyValue("--layer"),le={layer:parseInt(Ce)??o,id:$.id,number:parseInt($.id.replace("blob","").split("-")[0],10),i:P,x:$.style.getPropertyValue("left").toString(),y:$.style.getPropertyValue("top").toString(),z:$.style.zIndex??"0",background:$.style.background??"linear-gradient(90deg, cyan, greenyellow)"},Ee=(_,he)=>{j({type:"partialUpdate",payload:{d:i,id:$.id,update:{x:`${_}px`,y:`${he}px`}}}),O($)},Y=()=>{L=!0},et=_=>{l.preventDefault(),L&&(L=!1,x(le,_),setTimeout(Y,100))},Se=l.key;switch(parseInt(Se)>=1&&parseInt(Se)<=e&&et(parseInt(Se)-1),l.key){case"ArrowLeft":l.preventDefault(),L&&(Ee(be-4,fe),setTimeout(Y,100));break;case"ArrowRight":l.preventDefault(),L&&(Ee(be+4,fe),setTimeout(Y,100));break;case"ArrowUp":l.preventDefault(),L&&(Ee(be,fe-4),setTimeout(Y,100));break;case"ArrowDown":l.preventDefault(),L&&(Ee(be,fe+4),setTimeout(Y,100));break;case"Escape":l.preventDefault(),ae(!0),document.body.style.overflowY="auto",document.body.style.overflowX="hidden",k.current&&(k.current.setAttribute("tabindex","0"),k.current.addEventListener("blur",ze)),$.blur(),(Ue=m.current)==null||Ue.blur(),k.current&&(k.current.textContent=Mo[S]),(Ye=k.current)==null||Ye.focus();break;case"Enter":l.preventDefault(),l.stopPropagation(),L&&(L=!1,$.closest(`#drag-wrap${i}`)&&X(_=>(_+1)%G[i].length),setTimeout(Y,100));break;case"R":case"r":case" ":if(l.preventDefault(),l.stopPropagation(),L){if(L=!1,$.closest(`#drag-wrap${i}`)){const _=q();let he=q();he===_&&(he=q());const De=`linear-gradient(${ft}, ${_}, ${he})`;j({type:"partialUpdate",payload:{d:i,id:$.id,update:{background:De}}})}setTimeout(Y,100)}break;case"Z":case"z":l.preventDefault(),L&&(L=!1,j({type:"partialUpdate",payload:{d:i,id:$.id,update:{z:"0"}}}),setTimeout(Y,100));break;case"T":case"t":l.preventDefault(),L&&(L=!1,j({type:"partialUpdate",payload:{d:i,id:$.id,update:{z:`${Math.max(1,B[o]+1)}`}}}),setTimeout(Y,100));break;case"S":case"s":l.preventDefault(),L&&(L=!1,P-=.4,P=Math.min(Math.max(7,P),36),j({type:"partialUpdate",payload:{d:i,id:$.id,update:{i:P}}}),setTimeout(Y,100));break;case"B":case"b":case"L":case"l":l.preventDefault(),L&&(L=!1,P+=.4,P=Math.min(Math.max(7,P),36),j({type:"partialUpdate",payload:{d:i,id:$.id,update:{i:P}}}),setTimeout(Y,100));break;case"C":case"c":case"D":case"d":l.preventDefault(),L&&(L=!1,we(le),setTimeout(Y,100));break;case"+":l.preventDefault(),L&&(L=!1,ne(le.x,le.y,le.layer),setTimeout(Y,200));break;case"Delete":case"-":l.preventDefault(),L&&(L=!1,f(le),setTimeout(Y,100));break}}function ze(){var l,u;k.current&&((l=k.current)==null||l.removeAttribute("tabindex"),(u=k.current)==null||u.removeEventListener("blur",ze),k.current.textContent="")}function we(l){j({type:"duplicateDraggable",payload:{d:i,draggable:l}})}return t.jsx(t.Fragment,{children:He.map(l=>t.jsx(Ca,{layer_:l,dragUlRef:ve.current[l],items:Ve[l]||[],className:N.has(l)?"hidden":"",language:S,d:i,saveDraggables:w,selectedvalue0:re,setFocusedBlob:K,start:pe,movement:ge,stopMovementCheck:me,stopMoving:Ne,wheel:bt,focused:ht,blurred:Be,removeBlob:f,isDeleteMode:b},l))})},Da="http://localhost:4000",Oe=`${Da}/api/blobs`,La=async(o,e,N)=>(await Fe.get(`${Oe}/${o}/${e}`,{params:{language:N}})).data,Ta=async(o,e,N,d)=>(await Fe.get(`${Oe}/${o}/${e}/${N}/${d}`)).data,Ma=async(o,e,N,d,x,B)=>(await Fe.post(`${Oe}/${o}/${e}/${d}/${B}`,{draggables:N,backgroundColor:x})).data,Pa=async(o,e,N,d,x,B,S)=>(await Fe.put(`${Oe}/${o}/${e}/${d}/${B}`,{d:e,versionName:d,draggables:N,backgroundColor:x,newVersionName:S})).data,Ra=async(o,e,N,d)=>(await Fe.delete(`${Oe}/${o}/${e}/${N}/${d}`)).data,Ia=async(o,e,N)=>(await Fe.post(`${Oe}/screenshot`,{url:o,selector:e,language:N})).data,Ke={getAllBlobsByUser:La,getBlobsVersionByUser:Ta,saveBlobsByUser:Ma,editBlobsByUser:Pa,deleteBlobsVersionByUser:Ra,takeScreenshot:Ia},Aa=({d:o,language:e,controlsVisible:N,colorBlockProps:d,colorPairs:x,getRefName:B,map:S})=>t.jsx(t.Fragment,{children:d[o].map((j,i)=>{var h;return t.jsx("div",{ref:j,className:`colorblock ${(h=B(S[o],j))==null?void 0:h.toLowerCase()} tooltip-wrap ${N?"":"hidden"}`,id:`color${i}-${o}`,style:{background:`linear-gradient(45deg, ${x[o][i].color1}, ${x[o][i].color2})`,borderRadius:`${i<4?"5rem 6.7rem 6.7rem 5rem / 0.7rem 8.7rem 8.7rem 0.7rem":"6.7rem 5rem 5rem 6.7rem / 8.7rem 0.7rem 0.7rem 8.7rem"}`},children:t.jsx("span",{className:`tooltip below ${i<4?"right":"left"}`,children:Po[e]})},`${x[o][i].color1}${i}-${o}`)})}),Fa=({d:o,language:e,sliderLightnessInput:N,setSliderLightVal:d,sliderLightness:x,sliderLightVal:B,defaultLightness:S,sliderLightnessReset:j,sliderSaturationInput:i,setSliderSatVal:h,sliderSaturation:w,sliderSatVal:te,defaultSaturation:m,sliderSaturationReset:re,sliderHueInput:k,setSliderHueVal:Q,sliderHue:G,sliderHueVal:oe,defaultHue:se,sliderHueReset:M})=>t.jsx(t.Fragment,{children:t.jsxs("div",{id:`drag-slider-wrap${o}`,className:"drag-slider-wrap",children:[t.jsxs("div",{className:"drag-slider-single",children:[t.jsx("label",{htmlFor:`drag-slider-hue${o}`,id:`huedescription${o}`,children:Ro[e]}),t.jsx("input",{ref:k,onChange:C=>{Q(C.target.value),G()},onMouseUp:C=>{Q(C.target.value),G()},onPointerUp:C=>{Q(C.target.value),G()},type:"range",min:0,max:359,value:oe,className:"drag-slider drag-slider-hue",id:`drag-slider-hue${o}`}),t.jsx("span",{children:oe}),t.jsx("button",{onClick:()=>{Q(se),M()},children:Io[e]})]}),t.jsxs("div",{className:"drag-slider-single",children:[t.jsx("label",{htmlFor:`drag-slider-saturation${o}`,id:`saturationdescription${o}`,children:Ao[e]}),t.jsx("input",{ref:i,onChange:C=>{h(C.target.value),w()},onMouseUp:C=>{h(C.target.value),w()},onPointerUp:C=>{h(C.target.value),w()},type:"range",min:0,max:100,value:te,className:"drag-slider drag-slider-saturation",id:`drag-slider-saturation${o}`}),t.jsx("span",{children:te}),t.jsx("button",{onClick:()=>{h(m),re()},children:Fo[e]})]}),t.jsxs("div",{className:"drag-slider-single",children:[t.jsx("label",{htmlFor:`drag-slider-lightness${o}`,id:`lightnessdescription${o}`,children:Oo[e]}),t.jsx("input",{ref:N,onChange:C=>{d(C.target.value),x()},onMouseUp:C=>{d(C.target.value),x()},onPointerUp:C=>{d(C.target.value),x()},type:"range",min:0,max:100,value:B,className:"drag-slider drag-slider-lightness",id:`drag-slider-lightness${o}`}),t.jsx("span",{children:B}),t.jsx("button",{onClick:()=>{d(S),j()},children:Vo[e]})]})]})}),Oa=[{color1:"darkorange",color2:"orange"},{color1:"orangered",color2:"palevioletred"},{color1:"magenta",color2:"violet"},{color1:"blue",color2:"cyan"},{color1:"greenyellow",color2:"lemonchiffon"},{color1:"cyan",color2:"greenyellow"},{color1:"cyan",color2:"pink"},{color1:"lemonchiffon",color2:"pink"}],Va=[{color1:"indianred",color2:"palevioletred"},{color1:"sienna",color2:"peru"},{color1:"chocolate",color2:"burlywood"},{color1:"darkkhaki",color2:"moccasin"},{color1:"slateblue",color2:"mediumpurple"},{color1:"royalblue",color2:"turquoise"},{color1:"cadetblue",color2:"mediumaquamarine"},{color1:"lightslategray",color2:"lightsteelblue"}],Ha=[{color1:"indigo",color2:"mediumorchid"},{color1:"darkmagenta",color2:"palevioletred"},{color1:"crimson",color2:"indianred"},{color1:"chocolate",color2:"orangered"},{color1:"darkcyan",color2:"olivedrab"},{color1:"midnightblue",color2:"darkturquoise"},{color1:"mediumblue",color2:"cadetblue"},{color1:"darkblue",color2:"mediumslateblue"}],Tt=[Oa,Va,Ha];let Sr="90deg";const Mt=3,Ie=o=>{o.preventDefault()};function za({language:o,d:e,ds:N,dragWrapOuter:d}){var cr,ir,ur;const x="214",B=e===0?"80":e===2?"50":"45",S=e===0?"30":e===2?"5":"25",{state:j,dispatch:i}=a.useContext(Ho),h=zo(),w=Cr(r=>{var s;return(s=r.auth)==null?void 0:s.user}),te=Cr(r=>r.users),m=a.useRef(),re=a.useRef(),k=a.useRef(),Q=a.useRef(),G=a.useRef(),oe=a.useRef(),se=a.useRef(),M=a.useRef(),[C,f]=a.useState(!1),b=a.useRef(),E=a.useRef(),A=a.useRef(),K=a.useRef(),H=a.useRef(),X=a.useRef(),ae=a.useRef(),z=a.useRef(),ie=a.useRef(null),q=a.useRef(),ne=a.useRef(),ue=a.useRef(),Ve=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",He=`${Ve?"local-":""}BlobLayerAmount${[e]}`,ve=`${Ve?"local-":""}BackgroundColor${[e]}`,F=`${Ve?"local-":""}Draggables${[e]}`,de=j.backgroundColor,U=j.draggables,{windowHeight:ee,windowWidth:W}=Uo(),[pe,ge]=a.useState(0),[me,Ne]=a.useState(new Set),[Be,ht]=a.useState({}),[bt,yt]=a.useState(0),[D,ze]=a.useState(null),[we,l]=a.useState(!1),[u,$]=a.useState(!0),[y,O]=a.useState(!0),[J,P]=a.useState(!0),[be,fe]=a.useState(!1),[Ce,le]=a.useState(!1),[Ee,Y]=a.useState(!1),et=a.useRef(),Se=a.useRef(),Ue=a.useRef(),Ye=a.useRef(),_=a.useRef(),he=a.useRef(),De=a.useRef(),je=a.useRef(),We=a.useRef(),Je=a.useRef(),Rt=a.useRef(),It=a.useRef(),At=a.useRef(),Ft=a.useRef(),Ot=a.useRef(),Vt=a.useRef(),Ht=a.useRef(),zt=a.useRef(),Ut=a.useRef(),Yt=a.useRef(),Wt=a.useRef(),Jt=a.useRef(),Gt=a.useRef(),Xt=a.useRef(),Dr=[new Map([[et,"colorBlockOrange"],[Se,"colorBlockRed"],[Ue,"colorBlockPurple"],[Ye,"colorBlockBlue"],[_,"colorBlockYellowLime"],[he,"colorBlockCyanYellow"],[De,"colorBlockCyanPink"],[je,"colorBlockPinkYellow"]]),new Map([[We,"colorBlockReddish"],[Je,"colorBlockBrown"],[Ot,"colorBlockTan"],[Rt,"colorBlockKhaki"],[At,"colorBlockPurplish"],[It,"colorBlockBluish"],[Ft,"colorBlockGreenish"],[Vt,"colorBlockGray"]]),new Map([[Ht,"colorBlockDarkPurple"],[zt,"colorBlockDarkPink"],[Ut,"colorBlockDarkRed"],[Yt,"colorBlockDarkOrange"],[Wt,"colorBlockDarkGreen"],[Jt,"colorBlockGreenishBlue"],[Gt,"colorBlockDarkBlue"],[Xt,"colorBlockPurplishBlue"]])],Lr=(r,s)=>r.get(s),vt=[[et,Se,Ue,Ye,_,he,De,je],[We,Je,Ot,Rt,At,It,Ft,Vt],[Ht,zt,Ut,Yt,Wt,Jt,Gt,Xt]],Tr=(r,s)=>{const n=Be[s]+1;i({type:"partialUpdate",payload:{d:e,id:r.id,update:{layer:s,z:n}}}),ge(s)},Mr=r=>{Ne(s=>{var c;const n=new Set(s);return n.has(r)?n.delete(r):(n.add(r),ge(r!==0?r-1:r),(c=document.activeElement)==null||c.blur()),n})};a.useEffect(()=>{const r=()=>l(!0),s=()=>{l(!1)},n=()=>{ze(null)};return window.addEventListener("keyup",r),window.addEventListener("mousedown",s),window.addEventListener("mouseup",n),()=>{window.removeEventListener("keyup",r),window.removeEventListener("mousedown",s),window.removeEventListener("mouseup",n)}},[]);function Pr(){return new Promise(r=>{setTimeout(()=>{const s=localStorage.getItem(F);if(s==null||s==null||s==="undefined")r(null);else{const n=JSON.parse(s);r(n.map(c=>({...c,layer:c.layer??0})))}},300)})}function Rr(){return new Promise(r=>{setTimeout(()=>{var n;const s=localStorage.getItem(He);s!=null?r(parseInt(s)):((n=U[e])==null?void 0:n.length)>0?r(Math.max(...U[e].map(c=>c.layer))+1):r(Mt)},100)})}function Ir(){return new Promise(r=>{setTimeout(()=>{const s=localStorage.getItem(ve);s==null||s==null||s==="undefined"?r(null):r(JSON.parse(s))},300)})}function tt(r=$e){localStorage.setItem(He,JSON.stringify(r))}function ye(r=de[e]){localStorage.setItem(ve,JSON.stringify(r))}function qt(r=U[e]){localStorage.setItem(F,JSON.stringify(r))}const[Le,_t]=a.useState(pr[o]),[rt,Zt]=a.useState(Le),[Ar,Fr]=a.useState(""),[Or,ot]=a.useState(!0),[Qt,Vr]=a.useState(!1),[st,$t]=a.useState(!1),[at,Hr]=a.useState({}),[$e,Te]=a.useState(0),zr=async()=>{var r,s;ot(!0);try{w!=null&&w._id&&Ke.getAllBlobsByUser(w==null?void 0:w._id,e,o).then(n=>{if(n){const c={};n.forEach(p=>{const{d:v,versionName:R}=p;c[v]||(c[v]={}),c[v][R]=p}),Hr(c),Vr(Object.keys(c).length>0),ot(!1)}}).catch(n=>{var c,p;(p=(c=n.response)==null?void 0:c.data)!=null&&p.message?i(g(n.response.data.message,!0,8)):h(g(`${ce[o]}: ${n.message}`,!0,8)),ot(!1)})}catch(n){(s=(r=n.response)==null?void 0:r.data)!=null&&s.message?i(g(n.response.data.message,!0,8)):h(g(ce[o],!0,8)),ot(!1)}},Ur=r=>{for(const s in at)if(at[s][r])return!0;return!1},Kt=/^[\w\s\u00C0-\u024F\u1E00-\u1EFF-_]*$/,Yr=r=>{const s=r.target.value;Kt.test(s)?_t(s):h(g(xr[o],!0,8))},Wr=r=>{const s=r.target.value;Kt.test(s)?Zt(s):h(g(xr[o],!0,8))},Jr=async r=>{var s,n;f(!0),r.preventDefault();try{if(Le.trim()===""){h(g(pt[o],!0,8)),f(!1);return}else if(Le.trim().length>30){f(!1),h(g(`${kr[o]}. ${gr[o]}`,!0,8));return}else if(w!=null&&w._id){const c=Le.trim();if(Ur(c)&&!window.confirm(zs[o]))return;Ke.saveBlobsByUser(w==null?void 0:w._id,e,U[e],Le,de[e],o).then(()=>{$t(!st),f(!1),h(g(wr[o],!1,8))}).catch(p=>{var v,R;(R=(v=p.response)==null?void 0:v.data)!=null&&R.message?i(g(p.response.data.message,!0,8)):h(g(`${ce[o]}: ${p.message}`,!0,8))})}else h(g(Er[o],!0,8)),f(!1)}catch(c){(n=(s=c.response)==null?void 0:s.data)!=null&&n.message?i(g(c.response.data.message,!0,8)):h(g(ce[o],!0,8)),f(!1)}},Gr=async(r,s)=>{var c,p;const n=s.trim();if(s.trim()===""){h(g(pt[o],!0,8));return}else if(s.trim().length>30){h(g(`${kr[o]}. ${gr[o]}`,!0,8));return}else try{w!=null&&w._id?Ke.editBlobsByUser(w==null?void 0:w._id,e,U[e],r,de[e],o,n).then(()=>{$t(!st),h(g(wr[o],!1,8))}).catch(v=>{var R,V;(V=(R=v.response)==null?void 0:R.data)!=null&&V.message?i(g(v.response.data.message,!0,8)):h(g(`${ce[o]}: ${v.message}`,!0,8))}):h(g(Er[o],!0,8))}catch(v){(p=(c=v.response)==null?void 0:c.data)!=null&&p.message?i(g(v.response.data.message,!0,8)):h(g(ce[o],!0,8))}},Xr=(r,s)=>{const n=s.trim();w!=null&&w._id&&window.confirm(Us[o])&&Ke.getBlobsVersionByUser(w==null?void 0:w._id,r,n,o).then(c=>{const p=Math.max(...c.draggables.map(v=>v.layer));Te(p+1),setTimeout(()=>{tt(p+1)},300),i({type:"setDraggablesAtD",payload:{d:r,draggables:c.draggables}}),i({type:"setBackgroundColor",payload:{d:r,backgroundColor:c.backgroundColor}}),ye(c.backgroundColor),Ge(c.backgroundColor[0]),Xe(c.backgroundColor[1]),qe(c.backgroundColor[2]),kt({[`--hue${r}`]:`${c.backgroundColor[0]}`}),gt({[`--saturation${r}`]:`${c.backgroundColor[1]}`}),wt({[`--lightness${r}`]:`${c.backgroundColor[2]}`})}).then(()=>{_t(n),$o(),setTimeout(()=>{Me()},300)}).catch(c=>{var p,v;(v=(p=c.response)==null?void 0:p.data)!=null&&v.message?i(g(c.response.data.message,!0,8)):h(g(`${ce[o]}: ${c.message}`,!0,8))})},qr=(r,s)=>{w._id&&window.confirm(Ys[o])&&Ke.deleteBlobsVersionByUser(w._id,r,s,o).then(()=>{h(g(Ws[o],!1,8)),$t(!st)}).catch(n=>{var c,p;(p=(c=n.response)==null?void 0:c.data)!=null&&p.message?i(g(n.response.data.message,!0,8)):h(g(`${ce[o]}: ${n.message}`,!0,8))})};a.useEffect(()=>{(async()=>{await h(Js()),await h(Gs())})()},[h]),a.useEffect(()=>{w&&zr()},[w,st]);function _r(r){return r.reduce((s,n)=>{const c=parseInt(n.z,10),p=n.layer;return(!s[p]||c>s[p])&&(s[p]=c),s},{})}a.useEffect(()=>{(async()=>{const s=await Pr(),n=await Ir(),c=setTimeout(async()=>{var v,R,V;const p=await Rr();n&&n.length===3?(i({type:"setBackgroundColor",payload:{d:e,backgroundColor:n}}),ye(n),Ge(n[0]),Xe(n[1]),qe(n[2]),(v=d.current)==null||v.style.setProperty(`--hue${e}`,`${n[0]}`),(R=d.current)==null||R.style.setProperty(`--saturation${e}`,`${n[1]}`),(V=d.current)==null||V.style.setProperty(`--lightness${e}`,`${n[2]}`)):(i({type:"setBackgroundColor",payload:{d:e,backgroundColor:[x,B,S]}}),ye([x,B,S])),p?Te(p):s&&s.length>0&&Te(Math.max(...s.map(T=>T.layer))+1),s&&s.length>0?(s&&s.length>0&&Zr(s),fe(!0)):s==null&&!be&&(or(er,e),fe(!0))},300);return()=>clearTimeout(c)})()},[]),a.useEffect(()=>{var r;if(U[e]!==void 0&&((r=U[e])==null?void 0:r.length)>0){qt();const s=_r(U[e]);ht(s)}},[U[e]]);function Zr(r){if(!be&&r&&(r==null?void 0:r.length)>0){for(let s=0;s<(r==null?void 0:r.length);s++)if(r[s]!==null&&r[s]!==void 0){const n={layer:r[s].layer,id:`${r[s].id}`,number:r[s].number,i:r[s].i,x:`${r[s].x}`,y:`${r[s].y}`,z:`${r[s].z}`,background:`${r[s].background??"linear-gradient(90deg, cyan, greenyellow)"}`};i({type:"addDraggable",payload:{d:e,draggable:n}})}}fe(!0)}const Qr=()=>{i({type:"moveDraggablesLeft",payload:{d:e}})},Kr=()=>{i({type:"moveDraggablesRight",payload:{d:e}})},eo=()=>{i({type:"moveDraggablesUp",payload:{d:e}})},to=()=>{i({type:"moveDraggablesDown",payload:{d:e}})};function ro(r){var n;r.preventDefault();const s=(n=d.current)==null?void 0:n.querySelectorAll(".dragzone");s&&!Ce?(s.forEach(c=>{c.classList.remove("animation"),c.offsetWidth}),le(!0)):s&&(s.forEach(c=>{c.classList.add("animation"),c.offsetWidth}),le(!1))}a.useEffect(()=>{Ee&&m.current&&(m.current.classList.add("paused"),le(!0))},[Ee]),a.useEffect(()=>{const r=window.matchMedia("(prefers-reduced-motion: reduce)");Y(r.matches);const s=()=>Y(r.matches);return r.addEventListener("change",s),()=>{r.removeEventListener("change",s)}},[]);const er=W>700?10:6,tr=r=>{switch(r.key){case"Escape":P(!0),document.body.style.overflowY="auto",document.body.style.overflowX="hidden";break}};a.useEffect(()=>(window.addEventListener("keyup",tr),()=>{window.removeEventListener("keyup",tr)}),[]);const rr=r=>{const s=U[e].some(p=>p.layer===0&&r<0),n=U[e].some(p=>p.layer===$e-1&&r>0);if(s){h(g(Xs[o],!0,8));return}if(n){h(g(qs[o],!0,8));return}const c=U[e].map(p=>{const v=p.layer+r;return v>=0&&v<$e?{...p,layer:v}:p});i({type:"setDraggablesAtD",payload:{d:e,draggables:c}})};function oo(r){r.preventDefault(),window.confirm(`${_s[o]}?`)&&(window.localStorage.removeItem(F),i({type:"resetDraggables",payload:{d:e}}),i({type:"setDraggablesAtD",payload:{d:e,draggables:[]}}),or(er,e),setTimeout(()=>{Me(),tt(Mt)},300))}const or=(r,s)=>{ge(0);for(let n=0;n<r;n++){const c=()=>{const V=Tt[s],T=Math.floor(Math.random()*V.length);return[V[T].color1,V[T].color2]},[p,v]=c(),R={layer:0,id:`blob${n+1}-${s}`,number:n+1,i:W>400?Math.round(ke(7,20)):Math.round(ke(7,10)),x:W>ee?`${W/100*Math.round(ke(2,70))}px`:`${W/100*Math.round(ke(2,50))}px`,y:`${ee/100*Math.round(ke(2,60))}px`,z:"1",background:`linear-gradient(${Sr}, ${p??"cyan"},${v??"greenyellow"})`};i({type:"addDraggable",payload:{d:s,draggable:R}})}Te(Mt)},xt=()=>{const r=["cyan","lemonchiffon","pink","orangered","magenta","deepskyblue","darkorange","tomato","violet","dodgerblue","greenyellow","orange","silver","darkgray","gray","hotpink","wheat","sandybrown","rosybrown","dimgray","darkkhaki","darkseagreen","slateblue","royalblue","moccasin","burlywood","chocolate","cadetblue","mediumpurple","sienna","peru","indianred","palevioletred","plum","palegreen","mediumaquamarine","lightsteelblue","aquamarine","yellowgreen"],s=Math.floor(Math.random()*r.length);return r[s]};a.useEffect(()=>{},[j.draggables]);const sr=(r=`${W/100*Math.round(ke(25,55))}px`,s=`${ee/100*Math.round(ke(2,10))}px`,n=pe)=>{if(document.activeElement instanceof HTMLElement&&document.activeElement.id===`make-random${e}`&&document.activeElement.blur(),me.has(pe)){h(g(Zs[o],!0,8));return}const c=xt(),p=xt(),v=Math.max(...j.draggables[e].map(T=>parseInt(T.id.split("-")[0].replace("blob",""),10))),R=isNaN(Be[n])?1:Be[n]+1,V={layer:n,id:`blob${v+1}-${e}`,number:v+1,i:Math.ceil(ke(6.5,10)),x:r,y:s,z:`${R}`,background:`linear-gradient(${Sr}, ${c??"cyan"},${p??"greenyellow"})`};i({type:"duplicateDraggable",payload:{d:e,draggable:V}})},so=r=>{const s=r.id,n=window.getComputedStyle(r),c=parseInt(r.id.replace("blob","").split("-")[0],10),p=n.getPropertyValue("--i")??r.style.getPropertyValue("--i")??"7",v=n.getPropertyValue("left")??r.style.getPropertyValue("left"),R=n.getPropertyValue("top")??r.style.getPropertyValue("top"),V=n.getPropertyValue("z-index")??r.style.getPropertyValue("z-index"),T=n.getPropertyValue("background")??r.style.getPropertyValue("background"),xe=n.getPropertyValue("--layer")??r.style.getPropertyValue("--layer"),Ze={layer:xe?parseInt(xe):pe,id:s,number:c,i:isNaN(parseFloat(p))?7:parseFloat(p),x:v,y:R,z:V,background:T??"linear-gradient(90deg, cyan, greenyellow)"};i({type:"updateDraggable",payload:{d:e,draggable:Ze}})};a.useEffect(()=>{var r,s;return J?J&&(document.body.style.overflowY="auto",document.body.style.overflowX="hidden",document.removeEventListener("touchmove",Ie),d.current&&(d.current.style.overflow="auto"),(s=d.current)==null||s.removeEventListener("touchmove",Ie)):(document.addEventListener("touchmove",Ie,{passive:!1}),document.body.style.overflow="hidden",(r=d.current)==null||r.addEventListener("touchmove",Ie,{passive:!1}),d.current&&(d.current.style.overflow="hidden")),()=>{var n;document.removeEventListener("touchmove",Ie),(n=d.current)==null||n.removeEventListener("touchmove",Ie)}},[J]);function ao(){P(!J)}const[nt,Ge]=a.useState(()=>{const r=localStorage.getItem(ve),s=r?JSON.parse(r):null;return(s==null?void 0:s[0])??x}),[lt,Xe]=a.useState(()=>{const r=localStorage.getItem(ve),s=r?JSON.parse(r):null;return(s==null?void 0:s[1])??B}),[ct,qe]=a.useState(()=>{const r=localStorage.getItem(ve),s=r?JSON.parse(r):null;return(s==null?void 0:s[2])??S}),no={backgroundColor:`hsl(var(--hue${e}), calc(var(--saturation${e}) * 1%), calc(var(--lightness${e}) * 1%))`},[lo,kt]=a.useState(ue.current?{[`--hue${e}`]:`${ue.current.value}`}:{[`--hue${e}`]:`${nt}`}),[co,gt]=a.useState(ne.current?{[`--saturation${e}`]:`${ne.current.value}`}:{[`--saturation${e}`]:`${lt}`}),[io,wt]=a.useState(q.current?{[`--lightness${e}`]:`${q.current.value}`}:{[`--lightness${e}`]:`${ct}`});function uo(){if(d.current){kt({[`--hue${e}`]:`${nt}`});const r=JSON.parse(JSON.stringify(de));r[e][0]=nt,i({type:"setBackgroundColor",payload:{d:e,backgroundColor:r[e]}}),ye(r[e])}}function po(){if(d.current){gt({[`--saturation${e}`]:`${lt}`});const r=JSON.parse(JSON.stringify(de));r[e][1]=lt,i({type:"setBackgroundColor",payload:{d:e,backgroundColor:r[e]}}),ye(r[e])}}function mo(){if(d.current){wt({[`--lightness${e}`]:`${ct}`});const r=JSON.parse(JSON.stringify(de));r[e][2]=ct,i({type:"setBackgroundColor",payload:{d:e,backgroundColor:r[e]}}),ye(r[e])}}a.useEffect(()=>{q.current&&qe(q.current.value)},[(cr=q==null?void 0:q.current)==null?void 0:cr.value]),a.useEffect(()=>{ne.current&&Xe(ne.current.value)},[(ir=ne==null?void 0:ne.current)==null?void 0:ir.value]),a.useEffect(()=>{ue.current&&Ge(ue.current.value)},[(ur=ue==null?void 0:ue.current)==null?void 0:ur.value]);function fo(){wt({[`--lightness${e}`]:`${S}`}),q.current&&(q.current.value=S),qe(S);const r=JSON.parse(JSON.stringify(de));r[e][2]=S,ye(r[e]),i({type:"setBackgroundColor",payload:{d:e,backgroundColor:r[e]}})}function ho(){gt({[`--saturation${e}`]:`${B}`}),ne.current&&(ne.current.value=B),Xe(B);const r=JSON.parse(JSON.stringify(de));r[e][1]=B,ye(r[e]),i({type:"setBackgroundColor",payload:{d:e,backgroundColor:r[e]}})}function bo(){kt({[`--hue${e}`]:`${x}`}),ue.current&&(ue.current.value=x),Ge(x);const r=JSON.parse(JSON.stringify(de));r[e][0]=x,ye(r[e]),i({type:"setBackgroundColor",payload:{d:e,backgroundColor:r[e]}})}a.useEffect(()=>{Me()},[W,ee,J]);const Me=()=>{const n=[12,34,56,78];K.current&&m.current&&W<250?Z(K.current,15,0):K.current&&m.current&&Z(K.current,23,0),z.current&&m.current&&Z(z.current,50-z.current.offsetWidth/m.current.offsetWidth*50,0),A.current&&m.current&&W<250?Z(A.current,85-A.current.offsetWidth/m.current.offsetWidth*100,.3):A.current&&m.current&&Z(A.current,77-A.current.offsetWidth/m.current.offsetWidth*100,.3),ae.current&&m.current&&W<300?Z(ae.current,27,100-ae.current.offsetHeight/m.current.offsetHeight*100):ae.current&&m.current&&Z(ae.current,32,100-ae.current.offsetHeight/m.current.offsetHeight*100),X.current&&m.current&&W<300?Z(X.current,73-X.current.offsetWidth/m.current.offsetWidth*100,100-X.current.offsetHeight/m.current.offsetHeight*100):X.current&&m.current&&Z(X.current,68-X.current.offsetWidth/m.current.offsetWidth*100,100-X.current.offsetHeight/m.current.offsetHeight*100),H.current&&m.current&&W<300?Z(H.current,2,100-H.current.offsetHeight/m.current.offsetHeight*100):H.current&&m.current&&Z(H.current,10,100-H.current.offsetHeight/m.current.offsetHeight*100),E.current&&m.current&&W<300?Z(E.current,98-E.current.offsetWidth/m.current.offsetWidth*100,100-E.current.offsetHeight/m.current.offsetHeight*100):E.current&&m.current&&Z(E.current,90-E.current.offsetWidth/m.current.offsetWidth*100,100-E.current.offsetHeight/m.current.offsetHeight*100),vt.forEach(c=>{c.forEach((p,v)=>{if(p.current&&re.current){const R=v<4?0:100-p.current.offsetWidth/re.current.offsetWidth*100,V=n[v%4];Z(p.current,R,V)}})})};function Z(r,s,n){r&&m.current&&(r.style.left=m.current.offsetWidth/100*s+"px",r.style.top=m.current.offsetHeight/100*n+"px")}a.useEffect(()=>{D&&u&&we&&D&&ie.current&&(ie.current.style.top=`${D.top+D.width*-.05}px`,ie.current.style.left=`${D.left+D.width*-.05}px`,ie.current.style.width=`${D.width*1.1}px`,ie.current.style.height=`${D.height*1.1}px`)},[D,u,we]);const ar=Na(),yo=()=>{ar("/portfolio/blob?register=register")},vo=()=>{ar("/portfolio/blob?login=login")},$o=()=>{const r=document.getElementById(`button-container${e}`);r&&r.scrollIntoView({behavior:"smooth",block:"start"})},xo={width:"100%",height:"auto",margin:"0 auto"},ko=async()=>{var s,n;if(document.getElementById("drag-wrap"+e)&&!C)try{let c={};for(let Ze=0;Ze<localStorage.length;Ze++){const Bt=localStorage.key(Ze);if(Bt){const dr=localStorage.getItem(Bt);dr!==null&&(c[Bt]=dr)}}f(!0);const R=await fetch("http://localhost:4000/api/blobs/screenshot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:window.location.href,selector:`#drag-wrap${e}`,language:o,localStorageData:c,width:W,height:ee})});if(!R.ok)throw h(g(ce[o],!0,8)),f(!1),new Error(`Error: ${R.statusText}`);const V=await R.json(),T=se.current,xe=M.current;T&&xe&&(xe.src=`data:image/png;base64,${V.screenshot}`,T.style.display="block",xe.scrollIntoView({behavior:"smooth",block:"start"}),h(g(`${Qs[o]}; ${Ks[o]}`,!1,10)),f(!1),P(!0))}catch(c){(n=(s=c.response)==null?void 0:s.data)!=null&&n.message?i(g(c.response.data.message,!0,8)):h(g(ce[o],!0,8)),console.error(ce[o],c)}},nr=()=>{const r=M.current;if(r&&r.src){const s=document.createElement("a");s.href=r.src,s.download="blobs.png",document.body.appendChild(s),s.click(),document.body.removeChild(s),h(g(ea[o],!1,8))}else h(g(jr[o],!0,8)),console.error(jr[o])};a.useEffect(()=>{C&&h(g(`${mr[o]}...`,!1,20))},[C]);const[_e,go]=a.useState(5),[wo,Eo]=a.useState({[e]:1}),it=(r,s)=>{Eo(n=>({...n,[r]:s}))},jo=()=>{if(me.size===0){h(g("Please hide the layers you want to delete.",!0,8));return}if(Array.from(me).filter(p=>U[e].some(v=>v.layer===p)).length>0&&!window.confirm(`${ta[o]}. ${ra[o]}`))return;const s=U[e].filter(p=>!me.has(p.layer)),n=$e-me.size;if(n<1){h(g(oa[o],!0,8));return}const c=s.map(p=>{const v=p.layer;let R=v;return me.forEach(V=>{v>V&&(R-=1)}),{...p,layer:R}});i({type:"setDraggablesAtD",payload:{d:e,draggables:c}}),Te(n),tt(n),Ne(new Set),setTimeout(()=>{Me()},300)},No=r=>{const s=$e+r;if(s>9){h(g(sa[o],!0,8));return}const n=U[e].map(c=>{const p=c.layer>pe?c.layer+r:c.layer;return{...c,layer:p}});i({type:"setDraggablesAtD",payload:{d:e,draggables:n}}),Te(s),tt(s),Ne(new Set),setTimeout(()=>{Me()},300)},[Et,jt]=a.useState(""),[Nt,Bo]=a.useState(!1),Co=()=>{Bo(r=>!r),Nt&&jt("")};function So(r){jt(r.id),k.current&&(k.current.textContent=`${Ae[o]}`)}a.useEffect(()=>{Et&&(i({type:"removeDraggable",payload:{d:e,id:Et}}),jt(""))},[Et,e,i]);const lr=(r,s,n)=>{const c=Math.random().toString(36).substr(2,9);return Qt?t.jsxs("div",{className:"pagination-controls",children:[s!==1?t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>it(Number(r),1),disabled:s===1,className:"btn-small pagination-btn",children:["« ",t.jsx("span",{className:"scr",children:aa[o]})]}),t.jsxs("button",{onClick:()=>it(Number(r),Math.max(s-1,1)),disabled:s===1,className:"btn-small pagination-btn",children:[" ‹ ",t.jsx("span",{className:"scr",children:na[o]})]})]}):t.jsx(t.Fragment,{}),t.jsxs("span",{children:[la[o]," ",s," / ",n]}),s!==n?t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>it(Number(r),Math.min(s+1,n)),disabled:s===n,className:"btn-small pagination-btn",children:[t.jsx("span",{className:"scr",children:ca[o]})," › "]}),t.jsxs("button",{onClick:()=>it(Number(r),n),disabled:s===n,className:"btn-small pagination-btn",children:[t.jsx("span",{className:"scr",children:ia[o]})," »"]})]}):t.jsx(t.Fragment,{}),t.jsx("div",{className:"input-wrap items-per-page",children:t.jsxs("label",{htmlFor:`items-per-page${e}-${c}`,children:[t.jsx("input",{id:`items-per-page${e}-${c}`,className:"",type:"number",value:_e,placeholder:_e.toString(),min:1,max:100,onChange:p=>go(Number(p.target.value))}),t.jsx("span",{children:ua[o]})]})})]}):t.jsx(t.Fragment,{})};return t.jsx(t.Fragment,{children:t.jsx("section",{className:"card",children:t.jsx("div",{children:t.jsxs("div",{id:`drag-container${e}`,className:`drag-container drag-container${e}`,children:[t.jsxs("div",{className:"blob-title-wrap",children:[t.jsxs("h2",{className:"blob-title",children:[pr[o]," ",e+1]}),e===0?t.jsxs("p",{children:[dt[o]," "]}):e===1?t.jsxs("p",{children:[Yo[o],"."," ",dt[o]," "]}):e===2?t.jsxs("p",{children:[Wo[o],"."," ",dt[o]," "]}):t.jsx("p",{children:dt[o]})]}),t.jsxs("div",{className:"label-container",children:[t.jsx("span",{id:`blobdescription${e}`,className:"scr",children:Jo[o]}),t.jsxs("span",{children:["[",Pt[o],": ",pe+1,"]"," "]}),t.jsx("span",{ref:k,id:`selectedvalue${e}`,className:"selectedvalue",children:Ae[o]})]}),t.jsxs("div",{id:`button-container${e}`,className:"button-container",children:[t.jsxs("button",{ref:Q,id:`stop-blobs${e}`,className:"stop-blobs tooltip-wrap ",onClick:r=>{ro(r)},"aria-labelledby":`stop-blobs${e}-span`,children:[t.jsx("span",{id:`stop-blobs${e}-span`,className:"tooltip above space",children:Go[o]}),Ce?Xo[o]:qo[o]]}),t.jsxs("button",{ref:oe,id:`reset-blobs${e}`,"aria-labelledby":`reset-blobs${e}-span`,className:"reset-blobs tooltip-wrap",onClick:r=>{oo(r)},children:[t.jsx("span",{id:`reset-blobs${e}-span`,className:"tooltip above space",children:_o[o]})," ",Zo[o]]}),t.jsxs("button",{id:`toggle-marker${e}`,"aria-labelledby":`toggle-marker${e}-span`,className:"toggle-marker tooltip-wrap",onClick:()=>$(!u),children:[t.jsx("span",{id:`toggle-marker${e}-span`,className:"tooltip above space",children:`${Qo[o]}`}),u?Ko[o]:es[o]]}),t.jsxs("button",{ref:G,id:`disable-scroll${e}`,"aria-labelledby":`disable-scroll${e}-span`,className:`disable-scroll tooltip-wrap ${J?"":"active"}`,onClick:()=>{ao()},children:[t.jsx("span",{id:`disable-scroll${e}-span`,className:"tooltip above space",children:J?ts[o]:rs[o]}),J?os[o]:ss[o]]}),t.jsx("button",{id:`toggle-controls${e}`,"aria-labelledby":`toggle-controls${e}-span`,className:`toggle-controls ${y?"":"active"}`,onClick:()=>{O(!y),y||setTimeout(()=>{Me()},200)},children:t.jsxs("span",{id:`toggle-controls${e}-span`,children:[" ",y?as[o]:ns[o]]})}),t.jsxs("button",{type:"button",id:`take-screenshot${e}`,"aria-labelledby":`take-screenshot${e}-span`,disabled:C,onClick:ko,className:"screenshot tooltip-wrap",children:[t.jsx(ma,{}),t.jsx("span",{id:`take-screenshot${e}-span`,className:"tooltip left below space",children:C?mr[o]:ls[o]})]})]}),t.jsxs("div",{ref:re,className:`drag-wrap-outest drag-wrap-outest${e}`,children:[t.jsxs("div",{ref:d,id:`drag-wrap-outer${e}`,className:"drag-wrap-outer",style:{...io,...co,...lo,...no},children:[t.jsxs("div",{tabIndex:0,ref:A,className:`make-smaller tooltip-wrap reset ${y?"":"hidden"}`,id:`make-smaller${e}`,children:[t.jsx(fa,{}),t.jsx("span",{id:`make-smaller${e}-span`,className:"tooltip left below",children:`${cs[o]}. ${fr[o]}: ${hr[o]}`})]}),t.jsxs("div",{ref:E,className:`make-larger tooltip-wrap reset ${y?"":"hidden"}`,id:`make-larger${e}`,children:[t.jsx(ha,{}),t.jsx("span",{id:`make-larger${e}-span`,className:"tooltip left above",children:`${is[o]}. ${fr[o]}: ${hr[o]}`})]}),t.jsxs("div",{ref:K,className:`make-more tooltip-wrap reset ${y?"":"hidden"}`,id:`make-more${e}`,children:[t.jsx(ba,{}),t.jsx("span",{id:`make-more${e}-span`,className:"tooltip right below",children:us[o]})]}),t.jsxs("button",{ref:z,className:`make-random tooltip-wrap ${y?"":"hidden"}`,id:`make-random${e}`,"aria-labelledby":`make-random${e}-span`,onClick:()=>sr(),children:[t.jsx(ya,{}),t.jsx("span",{id:`make-random${e}-span`,className:"tooltip below",children:`${ds[o]}. ${ps[o]}!`})]}),t.jsxs("button",{ref:H,className:`delete-blob tooltip-wrap restore ${y?"":"hidden"}`,id:`delete-blob${e}`,onClick:Co,children:[t.jsx(va,{}),Nt&&t.jsx("span",{className:"delete-alert",children:ms[o]}),t.jsx("span",{id:`delete-blob${e}-span`,className:"tooltip right above",children:fs[o]})]}),t.jsxs("div",{ref:ae,id:`layer-decrease${e}`,className:`layer-adjust layer-decrease tooltip-wrap ${y?"":"hidden"}`,children:[t.jsx("span",{id:`layer-decrease${e}-span`,className:"tooltip above",children:`${hs[o]} ${br[o]}`}),t.jsx(Nr,{})]}),t.jsxs("div",{ref:X,id:`layer-increase${e}`,className:`layer-adjust layer-increase tooltip-wrap ${y?"":"hidden"}`,children:[t.jsx("span",{id:`layer-increase${e}-span`,className:"tooltip above",children:`${bs[o]} ${br[o]}`}),t.jsx(Br,{})]}),u&&we&&D&&t.jsx("div",{ref:ie,style:{position:"absolute",top:`${D.top+D.width*-.05}px`,left:`${D.left+D.width*-.05}px`,width:`${D.width*1.1}px`,height:`${D.height*1.1}px`,outline:"3px dashed black",outlineOffset:"2px",border:"3px dashed white",borderRadius:"50%",zIndex:999}}),t.jsx("div",{ref:m,id:`drag-wrap${e}`,className:"drag-wrap",children:t.jsx(Sa,{layerAmount:$e,layer_:pe,hiddenLayers:me,changeBlobLayer:Tr,setActiveLayer:ge,highestZIndex:Be,language:o,dispatch:i,d:e,items:U[e]??[],saveDraggables:qt,getPosition:so,colorBlockProps:vt,makeLarger0:E,makeSmaller0:A,makeMore0:K,deleteBlob0:H,removeBlob:So,isDeleteMode:Nt,layerIncrease:X,layerDecrease:ae,dragWrap:m,exitApp:b,selectedvalue0:k,setFocusedBlob:ze,colorIndex:bt,setColorIndex:yt,colorPairs:Tt,colorswitch:xt,scroll:J,setScroll:P,clickOutsideRef:m,addRandomDraggable:sr})})]}),t.jsx(Aa,{d:e,language:o,getRefName:Lr,map:Dr,colorBlockProps:vt,colorPairs:Tt,controlsVisible:y})]}),t.jsxs("div",{className:"layer-mover-control-wrap",children:[t.jsxs("div",{className:`movers-wrap movers-wrap1 ${y?"":"hidden"}`,children:[t.jsxs("button",{id:`moveleft${e}`,"aria-labelledby":`moveleft${e}-span`,className:"moveleft mover tooltip-wrap narrow2",onClick:Kr,children:[t.jsx($a,{}),t.jsx("span",{id:`moveleft${e}-span`,className:"tooltip above",children:ys[o]})]}),t.jsxs("button",{id:`moveright${e}`,"aria-labelledby":`moveright${e}-span`,className:"moveright mover tooltip-wrap narrow2",onClick:Qr,children:[t.jsx(xa,{}),t.jsx("span",{id:`moveright${e}-span`,className:"tooltip above",children:vs[o]})]})]}),t.jsxs("div",{className:"layer-btn-wrap layer-tools layer-tools1",children:[t.jsxs("button",{id:`decrease-layer-amount${e}`,"aria-labelledby":`decrease-layer-amount${e}-span`,className:"layer-tool layer-amount decrease-layer-amount tooltip-wrap narrow2 danger",onClick:jo,children:[t.jsx("span",{id:`decrease-layer-amount${e}-span`,className:"tooltip above",children:$s[o]}),t.jsx(ka,{style:{fontSize:"0.8em"}})]}),t.jsxs("button",{id:`every-layer-minus${e}`,"aria-labelledby":`every-layer-minus${e}-span`,className:"layer-tool every-layer tooltip-wrap narrow2",onClick:()=>rr(-1),children:[t.jsx("span",{id:`every-layer-minus${e}-span`,className:"tooltip above",children:xs[o]}),t.jsx(Nr,{})]})]}),t.jsx("div",{className:"layer-btn-wrap layers",children:Array.from({length:$e},(r,s)=>s).map((r,s)=>t.jsx("button",{id:`layer-button-${e}-${r}`,"aria-labelledby":`layer-button-${e}-${r}-span`,onClick:()=>{pe===r?Mr(r):ge(r)},className:`layer-button tooltip-wrap narrow2 ${pe===r?"active":""} ${me.has(r)?"dim":""}`,children:t.jsxs("span",{id:`layer-button-${e}-${r}-span`,children:[t.jsx("span",{className:"scr",children:Pt[o]})," ",r+1," ",t.jsx("span",{className:"tooltip above",children:pe===r?ks[o]:gs[o]})]})},`${r}*${s}`))}),t.jsxs("div",{className:"layer-btn-wrap layer-tools layer-tools2",children:[t.jsxs("button",{id:`every-layer-plus${e}`,"aria-labelledby":`every-layer-plus${e}-span`,className:"layer-tool every-layer tooltip-wrap narrow2",onClick:()=>rr(1),children:[t.jsx("span",{id:`every-layer-plus${e}-span`,className:"tooltip above",children:ws[o]}),t.jsx(Br,{})]}),t.jsxs("button",{id:`increase-layer-amount${e}`,disabled:$e>=9,"aria-labelledby":`increase-layer-amount${e}-span`,className:"layer-tool layer-amount increase-layer-amount tooltip-wrap narrow2",onClick:()=>No(1),children:[t.jsx("span",{id:`increase-layer-amount${e}-span`,className:"tooltip above",children:Es[o]}),t.jsx(ga,{})]})]}),t.jsxs("div",{className:`movers-wrap movers-wrap2 ${y?"":"hidden"}`,children:[t.jsxs("button",{id:`moveup${e}`,"aria-labelledby":`moveup${e}-span`,className:"moveup mover tooltip-wrap narrow2",onClick:to,children:[t.jsx(wa,{}),t.jsx("span",{id:`moveup${e}-span`,className:"tooltip above",children:js[o]})]}),t.jsxs("button",{id:`movedown${e}`,"aria-labelledby":`movedown${e}-span`,className:"movedown mover tooltip-wrap narrow2",onClick:eo,children:[t.jsx(Ea,{}),t.jsx("span",{id:`movedown${e}-span`,className:"tooltip above",children:Ns[o]})]})]})]}),t.jsx(Fa,{d:e,defaultHue:x,defaultSaturation:B,defaultLightness:S,setSliderHueVal:Ge,setSliderSatVal:Xe,setSliderLightVal:qe,language:o,sliderLightness:mo,sliderSaturation:po,sliderHue:uo,sliderLightnessReset:fo,sliderSaturationReset:ho,sliderHueReset:bo,sliderLightVal:ct,sliderSatVal:lt,sliderHueVal:nt,sliderLightnessInput:q,sliderSaturationInput:ne,sliderHueInput:ue}),t.jsx("div",{ref:b,id:`exitblob${e}`,className:"exitblob"}),w?t.jsxs("div",{className:"blob-handling",children:[t.jsx("div",{className:"full wide flex column center gap",children:t.jsxs("form",{onSubmit:r=>Jr(r),children:[t.jsx("div",{className:"input-wrap",children:t.jsxs("label",{htmlFor:`blobname${e}`,children:[t.jsx("input",{id:`blobname${e}`,type:"text",value:Le,onChange:Yr,placeholder:pt[o],maxLength:30}),t.jsxs("span",{children:[pt[o],":"]})]})}),t.jsx("button",{type:"submit",disabled:C,children:Bs[o]})]})}),t.jsxs("div",{ref:se,id:`blob-screenshot${e}`,style:{display:"none"},children:[t.jsx("button",{onClick:nr,children:yr[o]}),t.jsx("img",{src:"",ref:M,alt:Cs[o],style:xo}),t.jsx("button",{onClick:nr,children:yr[o]})]}),t.jsx("h3",{children:Ss[o]}),Or?t.jsx("p",{children:Ds[o]}):!te||te.length<1?t.jsx("p",{children:Ls[o]}):Qt?Object.keys(at).map((r,s)=>{const n=Object.keys(at[Number(r)]),c=Math.ceil(n.length/_e),p=wo[Number(r)]??1,v=(p-1)*_e,R=v+_e,V=n.slice(v,R);return t.jsxs("div",{className:"flex center margin0auto",children:[lr(r,p,c),t.jsx("ul",{className:"blob-versions-wrap",children:V.map((T,xe)=>t.jsxs("li",{className:"blob-version-item",children:[t.jsx("span",{children:T}),t.jsxs("div",{className:"button-wrap",children:[t.jsxs("button",{onClick:()=>Xr(Number(r),T),children:[Ms[o]," ",t.jsx("span",{className:"scr",children:T})]}),t.jsxs("button",{onClick:()=>qr(Number(r),T),children:[Ps[o]," ",t.jsx("span",{className:"scr",children:T})]}),t.jsx(Rs,{language:o,id:`accordion-blobnewname-${Ct(T)}`,className:"blobnewname",wrapperClass:"blobnewname-wrap",text:vr[o],hideBrackets:!0,onClick:()=>{Zt(T),Fr(T)},isOpen:Ar===T,children:t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"input-wrap",children:t.jsxs("label",{htmlFor:`blobnewname-${Ct(T)}`,children:[t.jsx("input",{id:`blobnewname-${Ct(T)}`,type:"text",value:rt,onChange:Wr,placeholder:$r[o],maxLength:30}),t.jsxs("span",{children:[vr[o],":"]})," ",t.jsx("span",{className:"scr",children:T})]})}),t.jsxs("button",{onClick:()=>{T!==rt?Gr(T,rt):h(g(`${ce[o]}: ${$r[o]}`,!0,5))},children:[Is[o]," ",t.jsxs("span",{className:"scr",children:[T,": ",As[o]," ",rt]})]})]})})]})]},`${T}+${xe}`))},`${r}+${s}`),lr(r,p,c)]},`${r}:${s}`)}):t.jsx("p",{children:Ts[o]})]}):t.jsxs("div",{className:"wide flex column center gap",children:[t.jsxs("div",{className:"login-to-save wide flex column center gap-half",children:[t.jsx(ja,{}),Fs[o]]}),t.jsxs("div",{className:"blob-register-login-wrap",children:[t.jsx("button",{onClick:vo,children:Os[o]}),t.jsx("big",{children:Vs[o]}),t.jsx("button",{onClick:yo,children:Hs[o]})]})]}),t.jsx("svg",{className:"filter",children:t.jsxs("filter",{id:"svgfilter0",children:[t.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"7"}),t.jsx("feColorMatrix",{values:`\r
1 0 0 0 0\r
0 1 0 0 0\r
0 0 1 0 0\r
0 0 0 50 -18\r
`})]})}),t.jsx("svg",{className:"filter",children:t.jsxs("filter",{id:"svgfilter1",children:[t.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"8"}),t.jsx("feColorMatrix",{values:`\r
1 0 0 0 0\r
0 1 0 0 0\r
0 0 1 0 0\r
0 0 0 46 -28\r
`})]})})]})})})})}const fn=({language:o})=>{const e=Array.from({length:3},(x,B)=>B),N=a.useRef(e.reduce((x,B)=>(x[B]=a.createRef(),x),{})),d=x=>t.jsx("div",{className:"to-blob-art-btn-wrap flex center gap-half",children:e.map((B,S)=>x===S?t.jsx(a.Fragment,{},S):t.jsxs("button",{style:{borderRadius:"1rem",flex:"0 0 auto"},className:"to-blob-art-btn grayer",onClick:()=>{const j=document.getElementById(`drag-container${S}`);j&&j.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},children:[da[o]," ",pa[o]," ",S+1]},S))});return t.jsxs(t.Fragment,{children:[e.map((x,B)=>t.jsxs(a.Fragment,{children:[d(B),t.jsx(za,{language:o,d:x,ds:e.length,dragWrapOuter:N.current[x]})]},x)),d(-1)]})};export{fn as default};
