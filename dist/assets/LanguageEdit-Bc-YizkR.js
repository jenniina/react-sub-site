import{K as y,r as h,j as e,cy as w,S,cz as u,ck as _,bi as $,cA as L,V as d,bh as g,cq as C,cB as N,cC as R,bz as z,cr as A}from"./index-DmCUPrzn.js";import{s as E}from"./edit.module-Tb44_we2.js";const F=({user:s,language:t,setLanguage:f,options:x,getKeyByValue:j})=>{const n=y(),[c,o]=h.useState(""),[i,U]=h.useState((s==null?void 0:s.language)??t),b=async r=>{r.preventDefault();try{const v={_id:s._id,name:s.name,passwordOld:c,language:i};s&&n(L(v)).then(a=>{a&&(a.success===!1?n(d(`${g[t]}: ${a.message}`,!0,5)):(n(d(`${a.message??C[i]}`,!1,5)),n(N(a.user)).then(()=>{n(R(s==null?void 0:s._id)).then(()=>n(z())),f(i)}),o("")))}).catch(a=>{var p,m;console.error(a),a.code==="ERR_BAD_REQUEST"&&((m=(p=a.response)==null?void 0:p.data)!=null&&m.message)?n(d(`${g[t]}: ${a.response.data.message}`,!0,5)):setTimeout(()=>{n(d(A[t],!0,5))},2e3)})}catch(l){console.error("error",l)}};return e.jsx(e.Fragment,{children:s?e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:w[t]}),e.jsxs("form",{onSubmit:b,className:E["edit-user"],children:[e.jsx(S,{language:t,id:"language-register",className:`language ${E.language}`,instructions:"Language",hide:!0,options:x(u),value:i?{value:i,label:j(u,i)}:void 0,onChange:r=>{U(r==null?void 0:r.value)}}),e.jsx("div",{className:"input-wrap",children:e.jsxs("label",{children:[e.jsx("input",{required:!0,type:"password",name:"old-password",id:"old-password-user-language",value:c,onChange:({target:r})=>o(r.value.trim())}),e.jsx("span",{children:_[t]})]})}),e.jsx("button",{type:"submit",children:$[t]})]})]}):e.jsx(e.Fragment,{})})};export{F as default};
