import{a as m,j as e}from"./react-B26j9x-B.js";import{L as v,u as C,ax as S,e as r,ay as $,a7 as _,i as k}from"./index-C0uTZr51.js";import{s as p}from"./edit.module-3NLXhYEv.js";import"./dom-to-image-more-sr33WCep.js";import"./react-dom-C5TvV5XQ.js";import"./scheduler-C323NY8X.js";import"./react-redux-EG6qnwNo.js";import"./hoist-non-react-statics-C-Qo8PK8.js";import"./react-is-BwqtTtay.js";import"./use-sync-external-store-BqPSEvA7.js";import"./@reduxjs-D09xkNSb.js";import"./immer-C0GRqQ_d.js";import"./redux-D9aXM7rm.js";import"./@babel-CYk816RD.js";import"./redux-thunk-CY0Q9z1Q.js";import"./axios-ngrFHoWO.js";import"./react-icons-BjZ8OXEo.js";import"./react-router-dom-Dghs3TPc.js";import"./react-router-vPOY4muN.js";import"./@remix-run-ox1qIyJK.js";import"./react-helmet-async-CnDSc5Ri.js";import"./react-fast-compare-BHbKlhN4.js";import"./invariant-B_pwkeTo.js";import"./shallowequal-C7ef0Lra.js";const se=({user:s,language:U})=>{const{t:a}=m.useContext(v),i=C(),[l,E]=m.useState((s==null?void 0:s.name)||""),[c,h]=m.useState(""),[y,o]=m.useState(!1),w=async n=>{var u,x;n.preventDefault(),o(!0);try{const b={_id:s._id,name:l,passwordOld:c,language:U};s&&i(S(b)).then(t=>{t&&(t.success===!1?i(r(`${a("Error")}: ${t.message}`,!0,5)):(i(r(`${t.message??a("UserUpdated")}`,!1,5)),i($(t.user)).then(()=>{i(_(s==null?void 0:s._id)).then(()=>i(k()))}),h(""))),o(!1)}).catch(t=>{var f,g,j,N;console.error(t),(g=(f=t.response)==null?void 0:f.data)!=null&&g.message?i(r(t.response.data.message,!0,8)):t.code==="ERR_BAD_REQUEST"&&((N=(j=t.response)==null?void 0:j.data)!=null&&N.message)?i(r(`${a("Error")}: ${t.response.data.message}`,!0,5)):setTimeout(()=>{i(r(a("UserNotUpdated"),!0,5))},2e3),o(!1)})}catch(d){(x=(u=d.response)==null?void 0:u.data)!=null&&x.message?i(r(d.response.data.message,!0,8)):console.error("error",d),o(!1)}};return e.jsx(e.Fragment,{children:s?e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:a("EditPreferredNickname")}),e.jsxs("p",{className:p.p,children:[a("CurrentNickname"),": ",e.jsx("strong",{children:s==null?void 0:s.name})]}),e.jsx("p",{className:`${p.p} ${p["p-last"]}`,children:a("PleaseUseGoodTasteWhenChoosingYourNickname")}),e.jsxs("form",{onSubmit:w,className:p["edit-user"],children:[e.jsx("div",{className:"input-wrap",children:e.jsxs("label",{children:[e.jsx("input",{required:!0,type:"text",name:"name",id:"name-edit",value:l,onChange:({target:n})=>E(n.value)}),e.jsx("span",{children:a("Nickname")})]})}),e.jsx("div",{className:"input-wrap",children:e.jsxs("label",{children:[e.jsx("input",{required:!0,type:"password",name:"old-password",id:"old-password-user",value:c,onChange:({target:n})=>h(n.value.trim())}),e.jsx("span",{children:a("CurrentPassword")})]})}),e.jsx("button",{type:"submit",disabled:y,children:a("Edit")})]})]}):e.jsx(e.Fragment,{})})};export{se as default};
