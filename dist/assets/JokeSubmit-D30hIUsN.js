import{r as i,j as e}from"./react-kX_YxI4E.js";import{L as ce,E as q,R as c,aN as D,aO as R,a0 as B,Q as v,u as ue,A as de,S as y,Y as W,aP as d,a9 as me,ac as pe,i as he,X as xe,e as b}from"./index-DX4_KnN1.js";import{B as T}from"./ButtonToggle-DzU975XO.js";import{v as ge}from"./uuid-Dv1xt2bl.js";import"./dom-to-image-more-CfDXlNbO.js";import"./react-dom-B5MLDbn_.js";import"./scheduler-CzFDRTuY.js";import"./react-redux-BEmJlIGA.js";import"./hoist-non-react-statics-DQogQWOa.js";import"./react-is-DUDD-a5e.js";import"./use-sync-external-store-BPp6CH6k.js";import"./@reduxjs-DhFEcpJw.js";import"./immer-C0GRqQ_d.js";import"./redux-CE3tqztX.js";import"./@babel-DF5_wy6Y.js";import"./redux-thunk-CY0Q9z1Q.js";import"./axios-CCb-kr4I.js";import"./react-icons-CzVo0GbG.js";import"./react-router-dom-StiqOUIT.js";import"./react-router-DUuhLvki.js";import"./@remix-run-DTnHqtaE.js";const Re=({userId:f,language:a,optionsCategory:z,categoryByLanguages:S,jokeCategoryByLanguage:M,options:V,getKeyByValue:be,norrisCategories:N})=>{const{t}=i.useContext(ce),[k,Y]=i.useState(q[a]),[C,A]=i.useState(c.single),[_,H]=i.useState(D.en),[U,K]=i.useState(R.en),[w,E]=i.useState(""),[J,$]=i.useState(""),[P,F]=i.useState(""),[m,Q]=i.useState(!0),[u,X]=i.useState(!0),[p,G]=i.useState(!1),[r,Z]=i.useState({label:M[a].Misc,value:B.Misc}),ee=t("SelectAnOption"),[I,se]=i.useState(""),[h,te]=i.useState(N[0]),[ie,ae]=i.useState(!1),[L,x]=i.useState(!1);i.useEffect(()=>{const s=I===v.ChuckNorris;ae(s)},[I]);const n=ue(),re=s=>{s.preventDefault(),x(!0);const j=s.currentTarget.nsfw.checked||s.currentTarget.religious.checked||s.currentTarget.political.checked||s.currentTarget.racist.checked||s.currentTarget.sexist.checked||s.currentTarget.explicit.checked;let o;o={jokeId:ge(),category:(r==null?void 0:r.value)??v.Misc,subCategories:(r==null?void 0:r.label)===v.ChuckNorris?[h==null?void 0:h.value]:[],language:k,type:c.single,user:[f],private:u,verified:!!u,anonymous:p,author:f,safe:!((r==null?void 0:r.value)===B.Dark||j),flags:{nsfw:s.currentTarget.nsfw.checked,religious:s.currentTarget.religious.checked,political:s.currentTarget.political.checked,racist:s.currentTarget.racist.checked,sexist:s.currentTarget.sexist.checked,explicit:s.currentTarget.explicit.checked}},C===c.single?o={...o,joke:w,type:c.single}:o={...o,setup:J,delivery:P,type:c.twopart},n(me(o)).then(l=>{n(pe(f)).then(()=>n(he())).then(()=>{n(xe()),E(""),$(""),F(""),x(!1)}),n(b(`${t("SavedJoke")}. ${l.message??""}`,!1,8))}).catch(l=>{var g,O;console.error(l),x(!1),l.code==="ERR_BAD_RESPONSE"?n(b(`${t("Error")}: ${l.response.data.message}. ${t("ReportErrorToAdmin")}`,!0,8)):(x(!1),(O=(g=l.response)==null?void 0:g.data)!=null&&O.message?n(b(l.response.data.message,!0,8)):n(b(`${t("Error")}: ${l.message}. ${t("ReportErrorToAdmin")}`,!0,8)))})};i.useEffect(()=>{A(m?c.twopart:c.single)},[m]);const le=()=>{Q(!m)},ne=()=>{X(!u)},oe=()=>{G(!p)};return i.useEffect(()=>{H(D[a]),K(R[a])},[a]),i.useEffect(()=>{setTimeout(()=>{const s=document.querySelectorAll(".select-container"),j=(s==null?void 0:s.length)+2;s==null||s.forEach((o,l)=>{const g=j-l;o.style.zIndex=`${g}`})},500)},[]),e.jsx(de,{language:a,text:t("ClickHereToWriteYourOwnJoke"),className:"submit",wrapperClass:"submit-wrap",children:e.jsxs("div",{className:"submit-inner",children:[e.jsx("h3",{children:t("SubmitAJoke")}),e.jsxs("p",{className:"textcenter",children:[t("SubmitAJokeTo")," jenniina.fi"]}),e.jsx("p",{className:"textcenter mb3",children:t("IfTheJokeIsNotPrivateVerificationIsNeeded")}),e.jsxs("form",{onSubmit:re,className:"form-submit-new",children:[e.jsxs("div",{className:"toggle-wrap",children:[e.jsx(T,{isChecked:m,name:"submit-joketype",id:"submit-joketype",hideLabel:!1,label:`${t("JokeTypeTitle")}: `,className:`${a} submit joketype`,on:t("TwoPart"),off:t("Single"),handleToggleChange:le,equal:!0}),e.jsx(T,{isChecked:u,name:"submit-private",id:"submit-private",hideLabel:!1,label:`${t("Privacy")}: `,className:`${a} submit private`,on:t("Private"),off:t("Public"),handleToggleChange:ne,equal:!1}),e.jsx(T,{isChecked:p,name:"submit-anonymous",id:"submit-anonymous",hideLabel:!1,label:`${t("PublishWithNickname")}: `,className:`${a} submit anonymous`,on:t("Anonymous"),off:t("Nickname"),handleToggleChange:oe,equal:!1})]}),C===c.single?e.jsxs("label",{htmlFor:"submit-joke-single-input",className:"textarea-wrap",children:[e.jsx("span",{children:t("Joke")}),e.jsx("textarea",{name:"joke",id:"submit-joke-single-input",required:!0,rows:4,value:w,onChange:s=>{E(s.target.value)}})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"input-wrap",children:e.jsxs("label",{htmlFor:"submit-setup-input",children:[e.jsx("input",{type:"text",id:"submit-setup-input",name:"setup",required:!0,value:J,onChange:s=>{$(s.target.value)}}),e.jsx("span",{children:_})]})}),e.jsx("div",{className:"input-wrap",children:e.jsxs("label",{htmlFor:"submit-delivery-input",children:[e.jsx("input",{type:"text",id:"submit-delivery-input",name:"delivery",value:P,onChange:s=>{F(s.target.value)},required:!0}),e.jsx("span",{children:U})]})})]}),S?e.jsxs(e.Fragment,{children:[e.jsx(y,{language:a,id:"submit-category-select",className:"submit",instructions:`${t("CategoryTitle")}:`,selectAnOption:ee,value:r,options:z(S),onChange:s=>{Z(s),se(s==null?void 0:s.label)}}),e.jsx(y,{language:a,id:"jokeCategoryNorrisCategories-submit",className:`category extras narrow ${ie?"":"hidden"}`,instructions:"Chuck Norris Category:",selectAnOption:t("Any"),value:h,options:N,onChange:s=>{te(s)}})]}):"",e.jsx(y,{language:a,id:"submit-language",className:"submit narrow",instructions:`${t("JokeLanguage")}:`,options:V(W),value:a?{value:q[k],label:W[k]}:void 0,onChange:s=>{Y(s==null?void 0:s.value)}}),e.jsxs("fieldset",{children:[e.jsx("legend",{children:t("AddWarningTitle")}),e.jsxs("div",{className:"checkbox-wrap",children:[e.jsxs("div",{children:[e.jsx("input",{type:"checkbox",id:"flag-nsfw",name:"nsfw",value:"nsfw"}),e.jsx("label",{htmlFor:"flag-nsfw",children:d[a].nsfw})]}),e.jsxs("div",{children:[e.jsx("input",{type:"checkbox",id:"flag-religious",name:"religious",value:"religious"}),e.jsx("label",{htmlFor:"flag-religious",children:d[a].religious})]}),e.jsxs("div",{children:[e.jsx("input",{type:"checkbox",id:"flag-political",name:"political",value:"political"}),e.jsx("label",{htmlFor:"flag-political",children:d[a].political})]}),e.jsxs("div",{children:[e.jsx("input",{type:"checkbox",id:"flag-racist",name:"racist",value:"racist"}),e.jsx("label",{htmlFor:"flag-racist",children:d[a].racist})]}),e.jsxs("div",{children:[e.jsx("input",{type:"checkbox",id:"flag-sexist",name:"sexist",value:"sexist"}),e.jsx("label",{htmlFor:"flag-sexist",children:d[a].sexist})]}),e.jsxs("div",{children:[e.jsx("input",{type:"checkbox",id:"flag-explicit",name:"explicit",value:"explicit"}),e.jsx("label",{htmlFor:"flag-explicit",children:d[a].explicit})]})]})]}),e.jsxs("p",{children:[t(u?"JokeIsSetToPrivateAndWillOnlyBeSeenByYouAndTheAdministrator":"JokeIsSetToPublicAndWillNeedVerificationFromAnAdministrator"),e.jsx("br",{}),e.jsx("br",{}),t(p?"PublishAnonymously":"PublishWithNickname")]}),e.jsx("button",{type:"submit",className:"small",disabled:L,id:"submit-new-joke",children:t(L?"Saving":u?"Publish":"Send")})]})]})})};export{Re as default};
