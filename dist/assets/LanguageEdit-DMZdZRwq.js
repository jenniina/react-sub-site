import{r as E,j as e}from"./react-A9DAvxly.js";import{K as _,cj as $,S as N,L as x,c5 as R,b5 as C,ck as D,W as o,b4 as j,cb as F,cl as P,cm as A,bl as B,cc as O}from"./index-CKGjDRr5.js";import{s as U}from"./edit.module-Tb44_we2.js";import"./hoist-non-react-statics-D5aJipOz.js";import"./react-dom-yh0erWL-.js";import"./scheduler-CzFDRTuY.js";import"./react-redux-CHm9GgGE.js";import"./react-is-DUDD-a5e.js";import"./use-sync-external-store-DEc9BFqZ.js";import"./@reduxjs-DhFEcpJw.js";import"./immer-C0GRqQ_d.js";import"./redux-CE3tqztX.js";import"./@babel-DF5_wy6Y.js";import"./redux-thunk-CY0Q9z1Q.js";import"./axios-CCb-kr4I.js";import"./react-icons-BGZR1ov-.js";import"./react-router-dom-CYs6befe.js";import"./react-router-S1Hdk0kP.js";import"./@remix-run-DTnHqtaE.js";const ae=({user:t,language:r,setLanguage:b,options:v,getKeyByValue:w})=>{const a=_(),[m,p]=E.useState(""),[n,y]=E.useState((t==null?void 0:t.language)??r),S=async i=>{var c,l;i.preventDefault();try{const L={_id:t._id,name:t.name,passwordOld:m,language:n};t&&a(D(L)).then(s=>{s&&(s.success===!1?a(o(`${j[r]}: ${s.message}`,!0,5)):(a(o(`${s.message??F[n]}`,!1,5)),a(P(s.user)).then(()=>{a(A(t==null?void 0:t._id)).then(()=>a(B())),b(n)}),p("")))}).catch(s=>{var u,g,h,f;console.error(s),(g=(u=s.response)==null?void 0:u.data)!=null&&g.message?a(o(s.response.data.message,!0,8)):s.code==="ERR_BAD_REQUEST"&&((f=(h=s.response)==null?void 0:h.data)!=null&&f.message)?a(o(`${j[r]}: ${s.response.data.message}`,!0,5)):setTimeout(()=>{a(o(O[r],!0,5))},2e3)})}catch(d){(l=(c=d.response)==null?void 0:c.data)!=null&&l.message?a(o(d.response.data.message,!0,8)):console.error("error",d)}};return e.jsx(e.Fragment,{children:t?e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:$[r]}),e.jsxs("form",{onSubmit:S,className:U["edit-user"],children:[e.jsx(N,{language:r,id:"language-register",className:`language ${U.language}`,instructions:"Language",hide:!0,options:v(x),value:n?{value:n,label:w(x,n)}:void 0,onChange:i=>{y(i==null?void 0:i.value)}}),e.jsx("div",{className:"input-wrap",children:e.jsxs("label",{children:[e.jsx("input",{required:!0,type:"password",name:"old-password",id:"old-password-user-language",value:m,onChange:({target:i})=>p(i.value.trim())}),e.jsx("span",{children:R[r]})]})}),e.jsx("button",{type:"submit",children:C[r]})]})]}):e.jsx(e.Fragment,{})})};export{ae as default};
