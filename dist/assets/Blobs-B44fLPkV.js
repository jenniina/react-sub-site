import{r as a,j as t}from"./react-A9DAvxly.js";import{Y as Lo,Z as Lr,_ as dt,$ as Ie,a0 as To,a1 as Mt,a2 as Mo,a3 as Po,a4 as Ro,a5 as Io,a6 as Ao,a7 as Fo,a8 as Oo,a9 as Vo,aa as Ho,K as zo,ab as Uo,ac as mr,W as g,ad as fr,ae as pt,af as Yo,ag as Wo,ah as Jo,ai as Go,aj as Xo,ak as qo,al as _o,am as Zo,an as Qo,ao as Ko,ap as es,aq as ts,ar as rs,as as os,at as ss,au as as,av as ns,aw as ls,ax as cs,ay as hr,az as br,aA as is,aB as us,aC as ds,aD as ps,aE as ms,aF as fs,aG as hs,aH as bs,aI as yr,aJ as ys,aK as vs,aL as $s,aM as xs,aN as ks,aO as gs,aP as ws,aQ as Es,aR as js,aS as Ns,aT as Bs,aU as mt,aV as Cs,aW as vr,aX as Ss,aY as Ds,aZ as Ls,a_ as Ts,a$ as Ms,b0 as Ps,b1 as Rs,b2 as Is,b3 as Bt,b4 as $r,b5 as xr,b6 as ae,b7 as As,b8 as Fs,b9 as Os,ba as Vs,bb as Hs,bc as zs,bd as kr,be as gr,bf as wr,bg as Us,bh as Er,bi as jr,bj as Ys,bk as Ws,bl as Js,bm as Gs,bn as Xs,bo as qs,bp as _s,bq as Zs,br as Qs,bs as xe,bt as Ks,bu as ea,bv as ta,bw as Nr,bx as ra,by as oa,bz as sa,bA as aa,bB as na,bC as la,bD as ca,bE as ia,bF as ua,bG as da,bH as pa,bI as ma}from"./index-DrH4mJZy.js";import{U as fa,V as ha,W as ba,X as ya,Y as va,Z as $a,_ as Br,$ as Cr,a0 as xa,a1 as ka,a2 as ga,a3 as wa,v as Ea,x as ja,a4 as Na}from"./react-icons-Bhw_1Ed6.js";import{a as Sr}from"./react-redux-CHm9GgGE.js";import{a as Ae}from"./axios-CCb-kr4I.js";import{a as Ba}from"./react-router-S1Hdk0kP.js";import"./hoist-non-react-statics-D5aJipOz.js";import"./react-dom-yh0erWL-.js";import"./scheduler-CzFDRTuY.js";import"./@reduxjs-DhFEcpJw.js";import"./immer-C0GRqQ_d.js";import"./redux-CE3tqztX.js";import"./@babel-DF5_wy6Y.js";import"./redux-thunk-CY0Q9z1Q.js";import"./react-router-dom-CYs6befe.js";import"./@remix-run-DTnHqtaE.js";import"./react-is-DUDD-a5e.js";import"./use-sync-external-store-DEc9BFqZ.js";const Ca=({d:o,layer:e,language:j,item:d,index:x,start:D,movement:L,stopMovementCheck:E,stopMoving:i,wheel:b,focused:w,blurred:K,selectedvalue0:m,setFocusedBlob:ee,dragUlRef:k,removeBlob:Q,mode:z})=>{const te=o===0?33:Lo(22,d.i*2.6,50),{dispatch:re}=a.useContext(Lr),pe={background:`${d.background}`,display:"block",left:`${d.x}`,top:`${d.y}`,zIndex:`${d.z}`,"--i":isNaN(Number(d.i))?"7":`${d.i}`,"--layer":`${e}`,WebkitFilter:`blur(${te}px)`,filter:`blur(${te}px)`},y=o===0?["5.9px","8.2px","9.9px","10.8px","10.7px","10.5px","10px"]:["5.1px","5.4px","6.5px","7px","7.8px","8.4px","8.6px"],Y=f=>{re({type:"duplicateDraggable",payload:{d:o,draggable:f}})},ke=f=>{z==="delete"?Q(d):z==="clone"&&Y(d)};return t.jsxs("li",{onFocus:f=>{var N;k&&k.current&&((N=k.current)==null||N.setAttribute("aria-activedescendant",`${f.target.id}`));const h=f.target;setTimeout(()=>{var G,X;const V=h.getBoundingClientRect(),J=(G=h.parentNode)==null?void 0:G.getBoundingClientRect(),I=h.closest(".drag-wrap-outer"),he=I==null?void 0:I.scrollLeft,oe=I==null?void 0:I.scrollTop;ee({top:V.top-J.top-oe,left:V.left-J.left-he,width:V.width,height:V.height}),m.current&&(m.current.textContent=`${dt[j]}: ${(X=h.querySelector("span"))==null?void 0:X.textContent}`)},500),w(h)},onBlur:f=>{var h;ee(null),K(f.target),k&&k.current&&((h=k.current)==null||h.removeAttribute("aria-activedescendant")),m.current&&(m.current.textContent=`${Ie[j]}`)},className:`dragzone animation ${z==="delete"?"del":z==="clone"?"copy":""}`,id:d.id,role:"option",tabIndex:0,style:pe,onClick:ke,children:[t.jsx("div",{className:"draggable-overlay",style:Number(d.i)<8?{width:`calc(var(--i) * ${y[0]})`,height:`calc(var(--i) * ${y[0]})`}:Number(d.i)<10?{width:`calc(var(--i) * ${y[1]})`,height:`calc(var(--i) * ${y[1]})`}:Number(d.i)<20?{width:`calc(var(--i) * ${y[2]})`,height:`calc(var(--i) * ${y[2]})`}:Number(d.i)<24?{width:`calc(var(--i) * ${y[3]})`,height:`calc(var(--i) * ${y[3]})`}:Number(d.i)<28?{width:`calc(var(--i) * ${y[4]})`,height:`calc(var(--i) * ${y[4]})`}:Number(d.i)<32?{width:`calc(var(--i) * ${y[5]})`,height:`calc(var(--i) * ${y[5]})`}:isNaN(Number(d.i))||d.i===null||d.i===void 0?{width:`7 * ${y[6]})`,height:`7 * ${y[6]})`}:{width:`calc(var(--i) * ${y[6]})`,height:`calc(var(--i) * ${y[6]})`},onMouseDown:f=>{var N,V;f.stopPropagation();const h=f.currentTarget.parentElement;h.draggable=!0,m.current&&(m.current.textContent=`${dt[j]}: ${(N=h==null?void 0:h.querySelector("span"))==null?void 0:N.textContent}`),k&&k.current&&((V=k.current)==null||V.setAttribute("aria-activedescendant",`${h.id}`)),D(f,h)},onMouseMove:f=>{var h;if(f.buttons===1){f.stopPropagation();const N=f.currentTarget.parentElement;N.draggable=!0,L(f,N),m.current&&(m.current.textContent=`${dt[j]}: ${(h=N==null?void 0:N.querySelector("span"))==null?void 0:h.textContent}`)}},onMouseLeave:f=>{var N;f.stopPropagation();const h=f.currentTarget.parentElement;h.draggable=!1,k&&k.current&&((N=k.current)==null||N.removeAttribute("aria-activedescendant")),i(f,h),m.current&&(m.current.textContent=`${Ie[j]}`)},onMouseUp:f=>{var N;const h=f.currentTarget.parentElement;h.draggable=!1,E(f,h),k&&k.current&&((N=k.current)==null||N.removeAttribute("aria-activedescendant")),m.current&&(m.current.textContent=`${Ie[j]}`)},onTouchStart:f=>{var N,V;f.preventDefault(),f.stopPropagation();const h=f.currentTarget.parentElement;h.draggable=!0,k&&k.current&&((N=k.current)==null||N.setAttribute("aria-activedescendant",`${h.id}`)),D(f,h),m.current&&(m.current.textContent=`${dt[j]}: ${(V=h==null?void 0:h.querySelector("span"))==null?void 0:V.textContent}`)},onTouchMove:f=>{f.preventDefault(),f.stopPropagation();const h=f.currentTarget.parentElement;h.draggable=!0,L(f,h)},onTouchEnd:f=>{var N;const h=f.currentTarget.parentElement;h.draggable=!1,k&&k.current&&((N=k.current)==null||N.removeAttribute("aria-activedescendant")),E(f,h),m.current&&(m.current.textContent=`${Ie[j]}`)},onWheel:f=>{const h=f.currentTarget.parentElement;b(h)}}),t.jsxs("span",{className:"scr",children:[To[j]," ",d.number]})]},x)},Sa=({layer_:o,className:e,language:j,d,items:x,saveDraggables:D,dragUlRef:L,selectedvalue0:E,setFocusedBlob:i,start:b,movement:w,stopMovementCheck:K,stopMoving:m,wheel:ee,focused:k,blurred:Q,removeBlob:z,mode:te})=>{const re=d===0?0:1,pe={WebkitFilter:`url(#svgfilter${re})`,filter:`url(#svgfilter${re})`,backgroundColor:"transparent",position:"absolute",top:0,left:0,height:"100%",width:"100%",pointerEvents:"none"};return t.jsxs(t.Fragment,{children:[t.jsxs("span",{id:`listbox${d}-layer${o}-label`,className:"scr",children:[Mt[j]," ",o+1]}),t.jsx("ul",{ref:L,role:"listbox",id:`listbox${d}-layer${o}`,className:`drag-container-layer drag-container${d}-layer drag-container${d}-layer${o} ${e}`,"aria-labelledby":`listbox${d}-layer${o}-label`,"aria-activedescendant":"",style:pe,children:x==null?void 0:x.map((y,Y)=>{if(y!=null)return t.jsx(Ca,{layer:o,d,language:j,item:y,index:Y,start:b,movement:w,stopMovementCheck:K,stopMoving:m,wheel:ee,focused:k,blurred:Q,selectedvalue0:E,setFocusedBlob:i,dragUlRef:L,removeBlob:z,mode:te},Y)})})]})};let ft,T=!0,Ct=0,St=0,Me,Ze=0,Dt=null,ht="90deg",R;const Pe=o=>{o.preventDefault(),o.stopImmediatePropagation()},Da=({layer_:o,layerAmount:e,hiddenLayers:j,setActiveLayer:d,changeBlobLayer:x,highestZIndex:D,language:L,dispatch:E,d:i,items:b,saveDraggables:w,getPosition:K,dragWrap:m,selectedvalue0:ee,exitApp:k,colorBlockProps:Q,colorPairs:z,makeLarger0:te,makeSmaller0:re,makeMore0:pe,removeBlob:y,mode:Y,layerIncrease:ke,layerDecrease:f,setFocusedBlob:h,colorIndex:N,setColorIndex:V,setScroll:J,scroll:I,clickOutsideRef:he,colorswitch:oe,addRandomDraggable:G})=>{const se=[...b].sort((l,u)=>l.layer-u.layer).reduce((l,u)=>(l[u.layer]||(l[u.layer]=[]),l[u.layer].push(u),l),{}),Ne=Array.from({length:e},(l,u)=>u),Oe=a.useRef({});a.useEffect(()=>{const l=Ne.reduce((u,v)=>(u[v]=a.createRef(),u),{});Oe.current=l},[e]);const A=()=>{try{return document.createEvent("TouchEvent"),!0}catch{return!1}};a.useEffect(()=>{A()},[]);const Ve=l=>{let u=l.layer;u<e-1&&(u+=1,x(l,u))},ne=l=>{let u=l.layer;u>0&&(u-=1,x(l,u))};function F(l,u){const v=l.getBoundingClientRect(),C=u.getBoundingClientRect();return!(v.top+5>C.bottom-5||v.right<C.left||v.bottom-5<C.top+5||v.left>C.right)}const ge=a.useCallback(l=>{T=!0,document.removeEventListener("keydown",q),document.removeEventListener("touchmove",Pe)},[q]);Mo({ref:he,onOutsideClick:ge}),a.useEffect(()=>{A()&&!R&&I&&(document.body.style.overflowY="auto",document.body.style.overflowX="hidden",document.removeEventListener("keydown",q),document.removeEventListener("touchmove",Pe))},[R,I,A,q]);const W=a.useCallback((l,u)=>{l.stopPropagation(),l.preventDefault(),document.activeElement instanceof HTMLElement&&document.activeElement.blur(),ft=!0,R=u,Ct=A()?l.touches[0].clientX:l.clientX,St=A()?l.touches[0].clientY:l.clientY,u.classList.add("drag");const v=D[o];if(A()){let B=(u==null?void 0:u.style.getPropertyValue("--i"))??"7";Me=parseFloat(B),Me=isNaN(Me)?7:Me}E({type:"partialUpdate",payload:{d:i,id:u.id,update:{z:`${Math.max(1,v+1)}`}}}),document.addEventListener("keydown",q);const C=u.style.getPropertyValue("--layer");d(isNaN(parseInt(C))?1:parseInt(C)),A()&&(document.addEventListener("touchmove",Pe,{passive:!1}),document.body.style.overflow="hidden")},[q,A]),le=a.useCallback(l=>{if(l.stopPropagation(),A()&&(l.preventDefault(),document.body.style.overflow="hidden"),ft){let u=A()?l.touches[0].clientX:l.clientX,v=A()?l.touches[0].clientY:l.clientY;R.style.top=R.offsetTop-(St-v)+"px",R.style.left=R.offsetLeft-(Ct-u)+"px",Ct=u,St=v,E({type:"partialUpdate",payload:{d:i,id:R==null?void 0:R.id,update:{x:R.style.left,y:R.style.top}}})}},[A]),be=a.useCallback((l,u)=>{l.stopPropagation(),l.preventDefault(),ft=!1,Ze++,Dt&&clearTimeout(Dt),Dt=setTimeout(()=>{if(Ze===2){let S=Me-.8;S=Math.max(7,S),E({type:"partialUpdate",payload:{d:i,id:R==null?void 0:R.id,update:{i:S}}})}else if(Ze===3){let S=Me+.8;S=Math.min(36,S),E({type:"partialUpdate",payload:{d:i,id:R==null?void 0:R.id,update:{i:S}}})}Ze=0},300),document.removeEventListener("keydown",q);let v=u.style.getPropertyValue("--i")??"7",C=parseFloat(v);C=isNaN(C)?7:C;const B=u.querySelector("div"),we={layer:parseInt(u.style.getPropertyValue("--layer")),id:u.id,number:parseInt(u.id.replace("blob","").split("-")[0],10),i:C,x:u.style.left,y:u.style.top,z:u.style.zIndex,background:u.style.background||"linear-gradient(90deg, cyan, greenyellow)"};A()&&I?(document.removeEventListener("touchmove",Pe),document.body.style.overflowY="auto",document.body.style.overflowX="hidden"):A()&&!I&&(document.body.style.overflow="hidden"),ke.current&&F(B,ke.current)&&Ve(we),f.current&&F(B,f.current)&&ne(we),z[i].forEach((S,ie)=>{const me=Q[i][ie];if(me.current&&F(B,me.current)){const{color1:Ee,color2:ue}=S;u.style.background=`linear-gradient(${ht}, ${Ee},${ue})`}}),te.current&&F(B,te.current)&&(C+=.4,C=Math.min(Math.max(7,C),36),E({type:"partialUpdate",payload:{d:i,id:u.id,update:{i:C}}})),re.current&&F(B,re.current)&&(C-=.4,C=Math.min(Math.max(7,C),36),E({type:"partialUpdate",payload:{d:i,id:u.id,update:{i:C}}})),u.classList.remove("drag"),u.blur(),Ze===0?R=null:R=u,h(null)},[ht,F,q,Q,z,I]),ce=a.useCallback((l,u)=>{l.stopPropagation(),ft=!1,R=null,A()&&I?(document.removeEventListener("touchmove",Pe),document.body.style.overflowY="auto",document.body.style.overflowX="hidden"):A()&&!I&&(document.body.style.overflow="hidden"),K(u),u.classList.remove("drag"),document.removeEventListener("keydown",q),u.blur()},[q]);a.useEffect(()=>{A()&&!R&&I&&(document.removeEventListener("touchmove",Pe),document.body.style.overflowY="auto",document.body.style.overflowX="hidden")},[be,ce,R,I]);function He(l){l.classList.remove("drag"),document.removeEventListener("keydown",q),K(l),l.draggable=!1,R=null}function Be(l){R=l,l.classList.add("drag");const u=l.style.getPropertyValue("--layer");d(parseInt(u)??2),document.addEventListener("keydown",q),l.draggable=!0}function bt(l){const u=v=>yt(v,l);return I||l.addEventListener("wheel",u,{passive:!1}),()=>{l.removeEventListener("wheel",u)}}function yt(l,u){if(T){T=!1;let C=window.getComputedStyle(u).getPropertyValue("--i")??u.style.getPropertyValue("--i")??"7",B=parseFloat(C);B=isNaN(B)?7:B,l.deltaY<0?B*=1.04:B*=.96,B=Math.min(Math.max(7,B),36),E({type:"partialUpdate",payload:{d:i,id:u.id,update:{i:B}}}),setTimeout(()=>{T=!0},100)}}a.useEffect(()=>{const l=R;if(l){const{color1:u,color2:v}=z[i][N],C=`linear-gradient(${ht}, ${u}, ${v})`;E({type:"partialUpdate",payload:{d:i,id:l.id,update:{background:C}}})}},[N]);function q(l){var ze,Ue;const v=R;if(!v)return;const C=window.getComputedStyle(v),B=_=>{var We;const de=parseFloat(C.marginTop),Se=parseFloat(C.marginLeft),je=_.getBoundingClientRect(),Ye=(We=_.parentNode)==null?void 0:We.getBoundingClientRect();h({top:je.top-Ye.top-de,left:je.left-Ye.left-Se,width:je.width,height:je.height})};let we=C.getPropertyValue("--i")??v.style.getPropertyValue("--i")??"7",S=parseFloat(we);S=isNaN(S)?7:S;let ie=parseFloat(C.getPropertyValue("left"))??parseFloat(v.style.getPropertyValue("left"))??0,me=parseFloat(C.getPropertyValue("top"))??parseFloat(v.style.getPropertyValue("top"))??0;const Ee=v.style.getPropertyValue("--layer"),ue={layer:parseInt(Ee)??o,id:v.id,number:parseInt(v.id.replace("blob","").split("-")[0],10),i:S,x:v.style.getPropertyValue("left").toString(),y:v.style.getPropertyValue("top").toString(),z:v.style.zIndex??"0",background:v.style.background??"linear-gradient(90deg, cyan, greenyellow)"},ye=(_,de)=>{E({type:"partialUpdate",payload:{d:i,id:v.id,update:{x:`${_}px`,y:`${de}px`}}}),B(v)},U=()=>{T=!0},et=_=>{l.preventDefault(),T&&(T=!1,x(ue,_),setTimeout(U,100))},Ce=l.key;switch(parseInt(Ce)>=1&&parseInt(Ce)<=e&&et(parseInt(Ce)-1),l.key){case"ArrowLeft":l.preventDefault(),T&&(ye(ie-4,me),setTimeout(U,100));break;case"ArrowRight":l.preventDefault(),T&&(ye(ie+4,me),setTimeout(U,100));break;case"ArrowUp":l.preventDefault(),T&&(ye(ie,me-4),setTimeout(U,100));break;case"ArrowDown":l.preventDefault(),T&&(ye(ie,me+4),setTimeout(U,100));break;case"Escape":l.preventDefault(),J(!0),document.body.style.overflowY="auto",document.body.style.overflowX="hidden",k.current&&(k.current.setAttribute("tabindex","0"),k.current.addEventListener("blur",H)),v.blur(),(ze=m.current)==null||ze.blur(),k.current&&(k.current.textContent=Po[L]),(Ue=k.current)==null||Ue.focus();break;case"Enter":l.preventDefault(),l.stopPropagation(),T&&(T=!1,v.closest(`#drag-wrap${i}`)&&V(_=>(_+1)%z[i].length),setTimeout(U,100));break;case"R":case"r":case" ":if(l.preventDefault(),l.stopPropagation(),T){if(T=!1,v.closest(`#drag-wrap${i}`)){const _=oe();let de=oe();de===_&&(de=oe());const Se=`linear-gradient(${ht}, ${_}, ${de})`;E({type:"partialUpdate",payload:{d:i,id:v.id,update:{background:Se}}})}setTimeout(U,100)}break;case"Z":case"z":l.preventDefault(),T&&(T=!1,E({type:"partialUpdate",payload:{d:i,id:v.id,update:{z:"0"}}}),setTimeout(U,100));break;case"T":case"t":l.preventDefault(),T&&(T=!1,E({type:"partialUpdate",payload:{d:i,id:v.id,update:{z:`${Math.max(1,D[o]+1)}`}}}),setTimeout(U,100));break;case"S":case"s":l.preventDefault(),T&&(T=!1,S-=.4,S=Math.min(Math.max(7,S),36),E({type:"partialUpdate",payload:{d:i,id:v.id,update:{i:S}}}),setTimeout(U,100));break;case"B":case"b":case"L":case"l":l.preventDefault(),T&&(T=!1,S+=.4,S=Math.min(Math.max(7,S),36),E({type:"partialUpdate",payload:{d:i,id:v.id,update:{i:S}}}),setTimeout(U,100));break;case"C":case"c":case"D":case"d":l.preventDefault(),T&&(T=!1,Ke(ue),setTimeout(U,100));break;case"+":l.preventDefault(),T&&(T=!1,G(ue.x,ue.y,ue.layer),setTimeout(U,200));break;case"Delete":case"-":l.preventDefault(),T&&(T=!1,y(ue),setTimeout(U,100));break}}function H(){var l,u;k.current&&((l=k.current)==null||l.removeAttribute("tabindex"),(u=k.current)==null||u.removeEventListener("blur",H),k.current.textContent="")}function Ke(l){E({type:"duplicateDraggable",payload:{d:i,draggable:l}})}return t.jsx(t.Fragment,{children:Ne.map(l=>t.jsx(Sa,{layer_:l,dragUlRef:Oe.current[l],items:se[l]||[],className:j.has(l)?"hidden":"",language:L,d:i,saveDraggables:w,selectedvalue0:ee,setFocusedBlob:h,start:W,movement:le,stopMovementCheck:be,stopMoving:ce,wheel:bt,focused:Be,blurred:He,removeBlob:y,mode:Y},l))})},La="http://localhost:4000",Fe=`${La}/api/blobs`,Ta=async(o,e,j)=>(await Ae.get(`${Fe}/${o}/${e}`,{params:{language:j}})).data,Ma=async(o,e,j,d)=>(await Ae.get(`${Fe}/${o}/${e}/${j}/${d}`)).data,Pa=async(o,e,j,d,x,D)=>(await Ae.post(`${Fe}/${o}/${e}/${d}/${D}`,{draggables:j,backgroundColor:x})).data,Ra=async(o,e,j,d,x,D,L)=>(await Ae.put(`${Fe}/${o}/${e}/${d}/${D}`,{d:e,versionName:d,draggables:j,backgroundColor:x,newVersionName:L})).data,Ia=async(o,e,j,d)=>(await Ae.delete(`${Fe}/${o}/${e}/${j}/${d}`)).data,Aa=async(o,e,j)=>(await Ae.post(`${Fe}/screenshot`,{url:o,selector:e,language:j})).data,Qe={getAllBlobsByUser:Ta,getBlobsVersionByUser:Ma,saveBlobsByUser:Pa,editBlobsByUser:Ra,deleteBlobsVersionByUser:Ia,takeScreenshot:Aa},Fa=({d:o,language:e,controlsVisible:j,colorBlockProps:d,colorPairs:x,getRefName:D,map:L})=>t.jsx(t.Fragment,{children:d[o].map((E,i)=>{var b;return t.jsx("div",{ref:E,className:`colorblock ${(b=D(L[o],E))==null?void 0:b.toLowerCase()} tooltip-wrap ${j?"":"hidden"}`,id:`color${i}-${o}`,style:{background:`linear-gradient(45deg, ${x[o][i].color1}, ${x[o][i].color2})`,borderRadius:`${i<4?"5rem 6.7rem 6.7rem 5rem / 0.7rem 8.7rem 8.7rem 0.7rem":"6.7rem 5rem 5rem 6.7rem / 8.7rem 0.7rem 0.7rem 8.7rem"}`},children:t.jsx("span",{className:`tooltip below ${i<4?"right":"left"}`,children:Ro[e]})},`${x[o][i].color1}${i}-${o}`)})}),Oa=({d:o,language:e,sliderLightnessInput:j,setSliderLightVal:d,sliderLightness:x,sliderLightVal:D,defaultLightness:L,sliderLightnessReset:E,sliderSaturationInput:i,setSliderSatVal:b,sliderSaturation:w,sliderSatVal:K,defaultSaturation:m,sliderSaturationReset:ee,sliderHueInput:k,setSliderHueVal:Q,sliderHue:z,sliderHueVal:te,defaultHue:re,sliderHueReset:pe})=>t.jsx(t.Fragment,{children:t.jsxs("div",{id:`drag-slider-wrap${o}`,className:"drag-slider-wrap",children:[t.jsxs("div",{className:"drag-slider-single",children:[t.jsx("label",{htmlFor:`drag-slider-hue${o}`,id:`huedescription${o}`,children:Io[e]}),t.jsx("input",{ref:k,onChange:y=>{Q(y.target.value),z()},onMouseUp:y=>{Q(y.target.value),z()},onPointerUp:y=>{Q(y.target.value),z()},type:"range",min:0,max:359,value:te,className:"drag-slider drag-slider-hue",id:`drag-slider-hue${o}`}),t.jsx("span",{children:te}),t.jsx("button",{onClick:()=>{Q(re),pe()},children:Ao[e]})]}),t.jsxs("div",{className:"drag-slider-single",children:[t.jsx("label",{htmlFor:`drag-slider-saturation${o}`,id:`saturationdescription${o}`,children:Fo[e]}),t.jsx("input",{ref:i,onChange:y=>{b(y.target.value),w()},onMouseUp:y=>{b(y.target.value),w()},onPointerUp:y=>{b(y.target.value),w()},type:"range",min:0,max:100,value:K,className:"drag-slider drag-slider-saturation",id:`drag-slider-saturation${o}`}),t.jsx("span",{children:K}),t.jsx("button",{onClick:()=>{b(m),ee()},children:Oo[e]})]}),t.jsxs("div",{className:"drag-slider-single",children:[t.jsx("label",{htmlFor:`drag-slider-lightness${o}`,id:`lightnessdescription${o}`,children:Vo[e]}),t.jsx("input",{ref:j,onChange:y=>{d(y.target.value),x()},onMouseUp:y=>{d(y.target.value),x()},onPointerUp:y=>{d(y.target.value),x()},type:"range",min:0,max:100,value:D,className:"drag-slider drag-slider-lightness",id:`drag-slider-lightness${o}`}),t.jsx("span",{children:D}),t.jsx("button",{onClick:()=>{d(L),E()},children:Ho[e]})]})]})}),Va=[{color1:"darkorange",color2:"orange"},{color1:"orangered",color2:"palevioletred"},{color1:"magenta",color2:"violet"},{color1:"blue",color2:"cyan"},{color1:"greenyellow",color2:"lemonchiffon"},{color1:"cyan",color2:"greenyellow"},{color1:"cyan",color2:"pink"},{color1:"lemonchiffon",color2:"pink"}],Ha=[{color1:"indianred",color2:"palevioletred"},{color1:"sienna",color2:"peru"},{color1:"chocolate",color2:"burlywood"},{color1:"darkkhaki",color2:"moccasin"},{color1:"slateblue",color2:"mediumpurple"},{color1:"royalblue",color2:"turquoise"},{color1:"cadetblue",color2:"mediumaquamarine"},{color1:"lightslategray",color2:"lightsteelblue"}],za=[{color1:"indigo",color2:"mediumorchid"},{color1:"darkmagenta",color2:"palevioletred"},{color1:"crimson",color2:"indianred"},{color1:"chocolate",color2:"orangered"},{color1:"darkcyan",color2:"olivedrab"},{color1:"midnightblue",color2:"darkturquoise"},{color1:"mediumblue",color2:"cadetblue"},{color1:"darkblue",color2:"mediumslateblue"}],Lt=[Va,Ha,za];let Dr="90deg";const Tt=3,Re=o=>{o.preventDefault()};function Ua({language:o,d:e,ds:j,dragWrapOuter:d}){var ir,ur,dr;const x="214",D=e===0?"80":e===2?"50":"45",L=e===0?"30":e===2?"5":"25",{state:E,dispatch:i}=a.useContext(Lr),b=zo(),w=Sr(r=>{var s;return(s=r.auth)==null?void 0:s.user}),K=Sr(r=>r.users),m=a.useRef(),ee=a.useRef(),k=a.useRef(),Q=a.useRef(),z=a.useRef(),te=a.useRef(),re=a.useRef(),pe=a.useRef(),[y,Y]=a.useState(!1),ke=a.useRef(),f=a.useRef(),h=a.useRef(),N=a.useRef(),V=a.useRef(),J=a.useRef(),I=a.useRef(),he=a.useRef(),oe=a.useRef(null),G=a.useRef(),X=a.useRef(),se=a.useRef(),Ne=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",Oe=`${Ne?"local-":""}BlobLayerAmount${[e]}`,A=`${Ne?"local-":""}BackgroundColor${[e]}`,Ve=`${Ne?"local-":""}Draggables${[e]}`,ne=E.backgroundColor,F=E.draggables,{windowHeight:ge,windowWidth:W}=Uo(),[le,be]=a.useState(0),[ce,He]=a.useState(new Set),[Be,bt]=a.useState({}),[yt,q]=a.useState(0),[H,Ke]=a.useState(null),[l,u]=a.useState(!1),[v,C]=a.useState(!0),[B,we]=a.useState(!0),[S,ie]=a.useState(!0),[me,Ee]=a.useState(!1),[ue,ye]=a.useState(!1),[U,et]=a.useState(!1),Ce=a.useRef(),ze=a.useRef(),Ue=a.useRef(),_=a.useRef(),de=a.useRef(),Se=a.useRef(),je=a.useRef(),Ye=a.useRef(),We=a.useRef(),Pt=a.useRef(),Rt=a.useRef(),It=a.useRef(),At=a.useRef(),Ft=a.useRef(),Ot=a.useRef(),Vt=a.useRef(),Ht=a.useRef(),zt=a.useRef(),Ut=a.useRef(),Yt=a.useRef(),Wt=a.useRef(),Jt=a.useRef(),Gt=a.useRef(),Xt=a.useRef(),Tr=[new Map([[Ce,"colorBlockOrange"],[ze,"colorBlockRed"],[Ue,"colorBlockPurple"],[_,"colorBlockBlue"],[de,"colorBlockYellowLime"],[Se,"colorBlockCyanYellow"],[je,"colorBlockCyanPink"],[Ye,"colorBlockPinkYellow"]]),new Map([[We,"colorBlockReddish"],[Pt,"colorBlockBrown"],[Ot,"colorBlockTan"],[Rt,"colorBlockKhaki"],[At,"colorBlockPurplish"],[It,"colorBlockBluish"],[Ft,"colorBlockGreenish"],[Vt,"colorBlockGray"]]),new Map([[Ht,"colorBlockDarkPurple"],[zt,"colorBlockDarkPink"],[Ut,"colorBlockDarkRed"],[Yt,"colorBlockDarkOrange"],[Wt,"colorBlockDarkGreen"],[Jt,"colorBlockGreenishBlue"],[Gt,"colorBlockDarkBlue"],[Xt,"colorBlockPurplishBlue"]])],Mr=(r,s)=>r.get(s),vt=[[Ce,ze,Ue,_,de,Se,je,Ye],[We,Pt,Ot,Rt,At,It,Ft,Vt],[Ht,zt,Ut,Yt,Wt,Jt,Gt,Xt]],Pr=(r,s)=>{const n=Be[s]+1;i({type:"partialUpdate",payload:{d:e,id:r.id,update:{layer:s,z:n}}}),be(s)},Rr=r=>{He(s=>{var c;const n=new Set(s);return n.has(r)?n.delete(r):(n.add(r),be(r!==0?r-1:r),(c=document.activeElement)==null||c.blur()),n})};a.useEffect(()=>{const r=()=>u(!0),s=()=>{u(!1)},n=()=>{Ke(null)};return window.addEventListener("keyup",r),window.addEventListener("mousedown",s),window.addEventListener("mouseup",n),()=>{window.removeEventListener("keyup",r),window.removeEventListener("mousedown",s),window.removeEventListener("mouseup",n)}},[]);function Ir(){return new Promise(r=>{setTimeout(()=>{const s=localStorage.getItem(Ve);if(s==null||s==null||s==="undefined")r(null);else{const n=JSON.parse(s);r(n.map(c=>({...c,layer:c.layer??0})))}},300)})}function Ar(){return new Promise(r=>{setTimeout(()=>{var n;const s=localStorage.getItem(Oe);s!=null?r(parseInt(s)):((n=F[e])==null?void 0:n.length)>0?r(Math.max(...F[e].map(c=>c.layer))+1):r(Tt)},100)})}function Fr(){return new Promise(r=>{setTimeout(()=>{const s=localStorage.getItem(A);s==null||s==null||s==="undefined"?r(null):r(JSON.parse(s))},300)})}function tt(r=ve){localStorage.setItem(Oe,JSON.stringify(r))}function fe(r=ne[e]){localStorage.setItem(A,JSON.stringify(r))}function qt(r=F[e]){localStorage.setItem(Ve,JSON.stringify(r))}const[De,_t]=a.useState(mr[o]),[rt,Zt]=a.useState(De),[Or,Vr]=a.useState(""),[Hr,ot]=a.useState(!0),[Qt,zr]=a.useState(!1),[st,$t]=a.useState(!1),[at,Ur]=a.useState({}),[ve,Le]=a.useState(0),Yr=async()=>{var r,s;ot(!0);try{w!=null&&w._id&&Qe.getAllBlobsByUser(w==null?void 0:w._id,e,o).then(n=>{if(n){const c={};n.forEach(p=>{const{d:$,versionName:P}=p;c[$]||(c[$]={}),c[$][P]=p}),Ur(c),zr(Object.keys(c).length>0),ot(!1)}}).catch(n=>{var c,p;(p=(c=n.response)==null?void 0:c.data)!=null&&p.message?i(g(n.response.data.message,!0,8)):b(g(`${ae[o]}: ${n.message}`,!0,8)),ot(!1)})}catch(n){(s=(r=n.response)==null?void 0:r.data)!=null&&s.message?i(g(n.response.data.message,!0,8)):b(g(ae[o],!0,8)),ot(!1)}},Wr=r=>{for(const s in at)if(at[s][r])return!0;return!1},Kt=/^[\w\s\u00C0-\u024F\u1E00-\u1EFF-_]*$/,Jr=r=>{const s=r.target.value;Kt.test(s)?_t(s):b(g(kr[o],!0,8))},Gr=r=>{const s=r.target.value;Kt.test(s)?Zt(s):b(g(kr[o],!0,8))},Xr=async r=>{var s,n;Y(!0),r.preventDefault();try{if(De.trim()===""){b(g(mt[o],!0,8)),Y(!1);return}else if(De.trim().length>30){Y(!1),b(g(`${gr[o]}. ${wr[o]}`,!0,8));return}else if(w!=null&&w._id){const c=De.trim();if(Wr(c)&&!window.confirm(Us[o]))return;Qe.saveBlobsByUser(w==null?void 0:w._id,e,F[e],De,ne[e],o).then(()=>{$t(!st),Y(!1),b(g(Er[o],!1,8))}).catch(p=>{var $,P;(P=($=p.response)==null?void 0:$.data)!=null&&P.message?i(g(p.response.data.message,!0,8)):b(g(`${ae[o]}: ${p.message}`,!0,8))})}else b(g(jr[o],!0,8)),Y(!1)}catch(c){(n=(s=c.response)==null?void 0:s.data)!=null&&n.message?i(g(c.response.data.message,!0,8)):b(g(ae[o],!0,8)),Y(!1)}},qr=async(r,s)=>{var c,p;const n=s.trim();if(s.trim()===""){b(g(mt[o],!0,8));return}else if(s.trim().length>30){b(g(`${gr[o]}. ${wr[o]}`,!0,8));return}else try{w!=null&&w._id?Qe.editBlobsByUser(w==null?void 0:w._id,e,F[e],r,ne[e],o,n).then(()=>{$t(!st),b(g(Er[o],!1,8))}).catch($=>{var P,O;(O=(P=$.response)==null?void 0:P.data)!=null&&O.message?i(g($.response.data.message,!0,8)):b(g(`${ae[o]}: ${$.message}`,!0,8))}):b(g(jr[o],!0,8))}catch($){(p=(c=$.response)==null?void 0:c.data)!=null&&p.message?i(g($.response.data.message,!0,8)):b(g(ae[o],!0,8))}},_r=(r,s)=>{const n=s.trim();w!=null&&w._id&&window.confirm(Ys[o])&&Qe.getBlobsVersionByUser(w==null?void 0:w._id,r,n,o).then(c=>{const p=Math.max(...c.draggables.map($=>$.layer));Le(p+1),setTimeout(()=>{tt(p+1)},300),i({type:"setDraggablesAtD",payload:{d:r,draggables:c.draggables}}),i({type:"setBackgroundColor",payload:{d:r,backgroundColor:c.backgroundColor}}),fe(c.backgroundColor),Je(c.backgroundColor[0]),Ge(c.backgroundColor[1]),Xe(c.backgroundColor[2]),kt({[`--hue${r}`]:`${c.backgroundColor[0]}`}),gt({[`--saturation${r}`]:`${c.backgroundColor[1]}`}),wt({[`--lightness${r}`]:`${c.backgroundColor[2]}`})}).then(()=>{_t(n),ko(),setTimeout(()=>{Te()},300)}).catch(c=>{var p,$;($=(p=c.response)==null?void 0:p.data)!=null&&$.message?i(g(c.response.data.message,!0,8)):b(g(`${ae[o]}: ${c.message}`,!0,8))})},Zr=(r,s)=>{w._id&&window.confirm(Ws[o])&&Qe.deleteBlobsVersionByUser(w._id,r,s,o).then(()=>{b(g(Js[o],!1,8)),$t(!st)}).catch(n=>{var c,p;(p=(c=n.response)==null?void 0:c.data)!=null&&p.message?i(g(n.response.data.message,!0,8)):b(g(`${ae[o]}: ${n.message}`,!0,8))})};a.useEffect(()=>{(async()=>{await b(Gs()),await b(Xs())})()},[b]),a.useEffect(()=>{w&&Yr()},[w,st]);function Qr(r){return r.reduce((s,n)=>{const c=parseInt(n.z,10),p=n.layer;return(!s[p]||c>s[p])&&(s[p]=c),s},{})}a.useEffect(()=>{(async()=>{const s=await Ir(),n=await Fr(),c=setTimeout(async()=>{var $,P,O;const p=await Ar();n&&n.length===3?(i({type:"setBackgroundColor",payload:{d:e,backgroundColor:n}}),fe(n),Je(n[0]),Ge(n[1]),Xe(n[2]),($=d.current)==null||$.style.setProperty(`--hue${e}`,`${n[0]}`),(P=d.current)==null||P.style.setProperty(`--saturation${e}`,`${n[1]}`),(O=d.current)==null||O.style.setProperty(`--lightness${e}`,`${n[2]}`)):(i({type:"setBackgroundColor",payload:{d:e,backgroundColor:[x,D,L]}}),fe([x,D,L])),p?Le(p):s&&s.length>0&&Le(Math.max(...s.map(M=>M.layer))+1),s&&s.length>0?(s&&s.length>0&&Kr(s),Ee(!0)):s==null&&!me&&(or(er,e),Ee(!0))},300);return()=>clearTimeout(c)})()},[]),a.useEffect(()=>{var r;if(F[e]!==void 0&&((r=F[e])==null?void 0:r.length)>0){qt();const s=Qr(F[e]);bt(s)}},[F[e]]);function Kr(r){if(!me&&r&&(r==null?void 0:r.length)>0){for(let s=0;s<(r==null?void 0:r.length);s++)if(r[s]!==null&&r[s]!==void 0){const n={layer:r[s].layer,id:`${r[s].id}`,number:r[s].number,i:r[s].i,x:`${r[s].x}`,y:`${r[s].y}`,z:`${r[s].z}`,background:`${r[s].background??"linear-gradient(90deg, cyan, greenyellow)"}`};i({type:"addDraggable",payload:{d:e,draggable:n}})}}Ee(!0)}const eo=()=>{i({type:"moveDraggablesLeft",payload:{d:e}})},to=()=>{i({type:"moveDraggablesRight",payload:{d:e}})},ro=()=>{i({type:"moveDraggablesUp",payload:{d:e}})},oo=()=>{i({type:"moveDraggablesDown",payload:{d:e}})};function so(r){var n;r.preventDefault();const s=(n=d.current)==null?void 0:n.querySelectorAll(".dragzone");s&&!ue?(s.forEach(c=>{c.classList.remove("animation"),c.offsetWidth}),ye(!0)):s&&(s.forEach(c=>{c.classList.add("animation"),c.offsetWidth}),ye(!1))}a.useEffect(()=>{U&&m.current&&(m.current.classList.add("paused"),ye(!0))},[U]),a.useEffect(()=>{const r=window.matchMedia("(prefers-reduced-motion: reduce)");et(r.matches);const s=()=>et(r.matches);return r.addEventListener("change",s),()=>{r.removeEventListener("change",s)}},[]);const er=W>700?10:6,tr=r=>{switch(r.key){case"Escape":ie(!0),document.body.style.overflowY="auto",document.body.style.overflowX="hidden";break}};a.useEffect(()=>(window.addEventListener("keyup",tr),()=>{window.removeEventListener("keyup",tr)}),[]);const rr=r=>{const s=F[e].some(p=>p.layer===0&&r<0),n=F[e].some(p=>p.layer===ve-1&&r>0);if(s){b(g(qs[o],!0,8));return}if(n){b(g(_s[o],!0,8));return}const c=F[e].map(p=>{const $=p.layer+r;return $>=0&&$<ve?{...p,layer:$}:p});i({type:"setDraggablesAtD",payload:{d:e,draggables:c}})};function ao(r){r.preventDefault(),window.confirm(`${Zs[o]}?`)&&(window.localStorage.removeItem(Ve),i({type:"resetDraggables",payload:{d:e}}),i({type:"setDraggablesAtD",payload:{d:e,draggables:[]}}),or(er,e),setTimeout(()=>{Te(),tt(Tt)},300))}const or=(r,s)=>{be(0);for(let n=0;n<r;n++){const c=()=>{const O=Lt[s],M=Math.floor(Math.random()*O.length);return[O[M].color1,O[M].color2]},[p,$]=c(),P={layer:0,id:`blob${n+1}-${s}`,number:n+1,i:W>400?Math.round(xe(7,20)):Math.round(xe(7,10)),x:W>ge?`${W/100*Math.round(xe(2,70))}px`:`${W/100*Math.round(xe(2,50))}px`,y:`${ge/100*Math.round(xe(2,60))}px`,z:"1",background:`linear-gradient(${Dr}, ${p??"cyan"},${$??"greenyellow"})`};i({type:"addDraggable",payload:{d:s,draggable:P}})}Le(Tt)},xt=()=>{const r=["cyan","lemonchiffon","pink","orangered","magenta","deepskyblue","darkorange","tomato","violet","dodgerblue","greenyellow","orange","silver","darkgray","gray","hotpink","wheat","sandybrown","rosybrown","dimgray","darkkhaki","darkseagreen","slateblue","royalblue","moccasin","burlywood","chocolate","cadetblue","mediumpurple","sienna","peru","indianred","palevioletred","plum","palegreen","mediumaquamarine","lightsteelblue","aquamarine","yellowgreen"],s=Math.floor(Math.random()*r.length);return r[s]};a.useEffect(()=>{},[E.draggables]);const sr=(r=`${W/100*Math.round(xe(25,55))}px`,s=`${ge/100*Math.round(xe(2,10))}px`,n=le)=>{if(document.activeElement instanceof HTMLElement&&document.activeElement.id===`make-random${e}`&&document.activeElement.blur(),ce.has(le)){b(g(Qs[o],!0,8));return}const c=xt(),p=xt(),$=Math.max(...E.draggables[e].map(M=>parseInt(M.id.split("-")[0].replace("blob",""),10))),P=isNaN(Be[n])?1:Be[n]+1,O={layer:n,id:`blob${$+1}-${e}`,number:$+1,i:Math.ceil(xe(6.5,10)),x:r,y:s,z:`${P}`,background:`linear-gradient(${Dr}, ${c??"cyan"},${p??"greenyellow"})`};i({type:"duplicateDraggable",payload:{d:e,draggable:O}})},no=r=>{const s=r.id,n=window.getComputedStyle(r),c=parseInt(r.id.replace("blob","").split("-")[0],10),p=n.getPropertyValue("--i")??r.style.getPropertyValue("--i")??"7",$=n.getPropertyValue("left")??r.style.getPropertyValue("left"),P=n.getPropertyValue("top")??r.style.getPropertyValue("top"),O=n.getPropertyValue("z-index")??r.style.getPropertyValue("z-index"),M=n.getPropertyValue("background")??r.style.getPropertyValue("background"),$e=n.getPropertyValue("--layer")??r.style.getPropertyValue("--layer"),_e={layer:$e?parseInt($e):le,id:s,number:c,i:isNaN(parseFloat(p))?7:parseFloat(p),x:$,y:P,z:O,background:M??"linear-gradient(90deg, cyan, greenyellow)"};i({type:"updateDraggable",payload:{d:e,draggable:_e}})};a.useEffect(()=>{var r,s;return S?S&&(document.body.style.overflowY="auto",document.body.style.overflowX="hidden",document.removeEventListener("touchmove",Re),d.current&&(d.current.style.overflow="auto"),(s=d.current)==null||s.removeEventListener("touchmove",Re)):(document.addEventListener("touchmove",Re,{passive:!1}),document.body.style.overflow="hidden",(r=d.current)==null||r.addEventListener("touchmove",Re,{passive:!1}),d.current&&(d.current.style.overflow="hidden")),()=>{var n;document.removeEventListener("touchmove",Re),(n=d.current)==null||n.removeEventListener("touchmove",Re)}},[S]);function lo(){ie(!S)}const[nt,Je]=a.useState(()=>{const r=localStorage.getItem(A),s=r?JSON.parse(r):null;return(s==null?void 0:s[0])??x}),[lt,Ge]=a.useState(()=>{const r=localStorage.getItem(A),s=r?JSON.parse(r):null;return(s==null?void 0:s[1])??D}),[ct,Xe]=a.useState(()=>{const r=localStorage.getItem(A),s=r?JSON.parse(r):null;return(s==null?void 0:s[2])??L}),co={backgroundColor:`hsl(var(--hue${e}), calc(var(--saturation${e}) * 1%), calc(var(--lightness${e}) * 1%))`},[io,kt]=a.useState(se.current?{[`--hue${e}`]:`${se.current.value}`}:{[`--hue${e}`]:`${nt}`}),[uo,gt]=a.useState(X.current?{[`--saturation${e}`]:`${X.current.value}`}:{[`--saturation${e}`]:`${lt}`}),[po,wt]=a.useState(G.current?{[`--lightness${e}`]:`${G.current.value}`}:{[`--lightness${e}`]:`${ct}`});function mo(){if(d.current){kt({[`--hue${e}`]:`${nt}`});const r=JSON.parse(JSON.stringify(ne));r[e][0]=nt,i({type:"setBackgroundColor",payload:{d:e,backgroundColor:r[e]}}),fe(r[e])}}function fo(){if(d.current){gt({[`--saturation${e}`]:`${lt}`});const r=JSON.parse(JSON.stringify(ne));r[e][1]=lt,i({type:"setBackgroundColor",payload:{d:e,backgroundColor:r[e]}}),fe(r[e])}}function ho(){if(d.current){wt({[`--lightness${e}`]:`${ct}`});const r=JSON.parse(JSON.stringify(ne));r[e][2]=ct,i({type:"setBackgroundColor",payload:{d:e,backgroundColor:r[e]}}),fe(r[e])}}a.useEffect(()=>{G.current&&Xe(G.current.value)},[(ir=G==null?void 0:G.current)==null?void 0:ir.value]),a.useEffect(()=>{X.current&&Ge(X.current.value)},[(ur=X==null?void 0:X.current)==null?void 0:ur.value]),a.useEffect(()=>{se.current&&Je(se.current.value)},[(dr=se==null?void 0:se.current)==null?void 0:dr.value]);function bo(){wt({[`--lightness${e}`]:`${L}`}),G.current&&(G.current.value=L),Xe(L);const r=JSON.parse(JSON.stringify(ne));r[e][2]=L,fe(r[e]),i({type:"setBackgroundColor",payload:{d:e,backgroundColor:r[e]}})}function yo(){gt({[`--saturation${e}`]:`${D}`}),X.current&&(X.current.value=D),Ge(D);const r=JSON.parse(JSON.stringify(ne));r[e][1]=D,fe(r[e]),i({type:"setBackgroundColor",payload:{d:e,backgroundColor:r[e]}})}function vo(){kt({[`--hue${e}`]:`${x}`}),se.current&&(se.current.value=x),Je(x);const r=JSON.parse(JSON.stringify(ne));r[e][0]=x,fe(r[e]),i({type:"setBackgroundColor",payload:{d:e,backgroundColor:r[e]}})}a.useEffect(()=>{Te()},[W,ge,S]);const Te=()=>{const n=[12,34,56,78];N.current&&m.current&&W<250?Z(N.current,15,0):N.current&&m.current&&Z(N.current,23,0),he.current&&m.current&&Z(he.current,50-he.current.offsetWidth/m.current.offsetWidth*50,0),h.current&&m.current&&W<250?Z(h.current,85-h.current.offsetWidth/m.current.offsetWidth*100,.3):h.current&&m.current&&Z(h.current,77-h.current.offsetWidth/m.current.offsetWidth*100,.3),I.current&&m.current&&W<300?Z(I.current,27,100-I.current.offsetHeight/m.current.offsetHeight*100):I.current&&m.current&&Z(I.current,32,100-I.current.offsetHeight/m.current.offsetHeight*100),J.current&&m.current&&W<300?Z(J.current,73-J.current.offsetWidth/m.current.offsetWidth*100,100-J.current.offsetHeight/m.current.offsetHeight*100):J.current&&m.current&&Z(J.current,68-J.current.offsetWidth/m.current.offsetWidth*100,100-J.current.offsetHeight/m.current.offsetHeight*100),V.current&&m.current&&W<300?Z(V.current,2,100-V.current.offsetHeight/m.current.offsetHeight*100):V.current&&m.current&&Z(V.current,10,100-V.current.offsetHeight/m.current.offsetHeight*100),f.current&&m.current&&W<300?Z(f.current,98-f.current.offsetWidth/m.current.offsetWidth*100,100-f.current.offsetHeight/m.current.offsetHeight*100):f.current&&m.current&&Z(f.current,90-f.current.offsetWidth/m.current.offsetWidth*100,100-f.current.offsetHeight/m.current.offsetHeight*100),vt.forEach(c=>{c.forEach((p,$)=>{if(p.current&&ee.current){const P=$<4?0:100-p.current.offsetWidth/ee.current.offsetWidth*100,O=n[$%4];Z(p.current,P,O)}})})};function Z(r,s,n){r&&m.current&&(r.style.left=m.current.offsetWidth/100*s+"px",r.style.top=m.current.offsetHeight/100*n+"px")}a.useEffect(()=>{H&&v&&l&&H&&oe.current&&(oe.current.style.top=`${H.top+H.width*-.05}px`,oe.current.style.left=`${H.left+H.width*-.05}px`,oe.current.style.width=`${H.width*1.1}px`,oe.current.style.height=`${H.height*1.1}px`)},[H,v,l]);const ar=Ba(),$o=()=>{ar("/portfolio/blob?register=register")},xo=()=>{ar("/portfolio/blob?login=login")},ko=()=>{const r=document.getElementById(`button-container${e}`);r&&r.scrollIntoView({behavior:"smooth",block:"start"})},go={width:"100%",height:"auto",margin:"0 auto"},wo=async()=>{var s,n;if(document.getElementById("drag-wrap"+e)&&!y)try{let c={};for(let _e=0;_e<localStorage.length;_e++){const Nt=localStorage.key(_e);if(Nt){const pr=localStorage.getItem(Nt);pr!==null&&(c[Nt]=pr)}}Y(!0);const P=await fetch("http://localhost:4000/api/blobs/screenshot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:window.location.href,selector:`#drag-wrap${e}`,language:o,localStorageData:c,width:W,height:ge})});if(!P.ok)throw b(g(ae[o],!0,8)),Y(!1),new Error(`Error: ${P.statusText}`);const O=await P.json(),M=re.current,$e=pe.current;M&&$e&&($e.src=`data:image/png;base64,${O.screenshot}`,M.style.display="block",$e.scrollIntoView({behavior:"smooth",block:"start"}),b(g(`${Ks[o]}; ${ea[o]}`,!1,10)),Y(!1),ie(!0))}catch(c){(n=(s=c.response)==null?void 0:s.data)!=null&&n.message?i(g(c.response.data.message,!0,8)):b(g(ae[o],!0,8)),console.error(ae[o],c)}},nr=()=>{const r=pe.current;if(r&&r.src){const s=document.createElement("a");s.href=r.src,s.download="blobs.png",document.body.appendChild(s),s.click(),document.body.removeChild(s),b(g(ta[o],!1,8))}else b(g(Nr[o],!0,8)),console.error(Nr[o])};a.useEffect(()=>{y&&b(g(`${fr[o]}...`,!1,20))},[y]);const[qe,Eo]=a.useState(5),[jo,No]=a.useState({[e]:1}),it=(r,s)=>{No(n=>({...n,[r]:s}))},Bo=()=>{if(ce.size===0){b(g("Please hide the layers you want to delete.",!0,8));return}if(Array.from(ce).filter(p=>F[e].some($=>$.layer===p)).length>0&&!window.confirm(`${ra[o]}. ${oa[o]}`))return;const s=F[e].filter(p=>!ce.has(p.layer)),n=ve-ce.size;if(n<1){b(g(sa[o],!0,8));return}const c=s.map(p=>{const $=p.layer;let P=$;return ce.forEach(O=>{$>O&&(P-=1)}),{...p,layer:P}});i({type:"setDraggablesAtD",payload:{d:e,draggables:c}}),Le(n),tt(n),He(new Set),setTimeout(()=>{Te()},300)},Co=r=>{const s=ve+r;if(s>9){b(g(aa[o],!0,8));return}const n=F[e].map(c=>{const p=c.layer>le?c.layer+r:c.layer;return{...c,layer:p}});i({type:"setDraggablesAtD",payload:{d:e,draggables:n}}),Le(s),tt(s),He(new Set),setTimeout(()=>{Te()},300)},[Et,ut]=a.useState(""),[jt,So]=a.useState("none"),lr=r=>{So(s=>{const n=s===r?"none":r;return n!==r&&ut(""),n})};function Do(r){ut(r.id),k.current&&(k.current.textContent=`${Ie[o]}`)}a.useEffect(()=>{Et&&(i({type:"removeDraggable",payload:{d:e,id:Et}}),ut(""))},[Et,e,i]);const cr=(r,s,n)=>{const c=Math.random().toString(36).substr(2,9);return Qt?t.jsxs("div",{className:"pagination-controls",children:[s!==1?t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>it(Number(r),1),disabled:s===1,className:"btn-small pagination-btn",children:["« ",t.jsx("span",{className:"scr",children:na[o]})]}),t.jsxs("button",{onClick:()=>it(Number(r),Math.max(s-1,1)),disabled:s===1,className:"btn-small pagination-btn",children:[" ‹ ",t.jsx("span",{className:"scr",children:la[o]})]})]}):t.jsx(t.Fragment,{}),t.jsxs("span",{children:[ca[o]," ",s," / ",n]}),s!==n?t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>it(Number(r),Math.min(s+1,n)),disabled:s===n,className:"btn-small pagination-btn",children:[t.jsx("span",{className:"scr",children:ia[o]})," › "]}),t.jsxs("button",{onClick:()=>it(Number(r),n),disabled:s===n,className:"btn-small pagination-btn",children:[t.jsx("span",{className:"scr",children:ua[o]})," »"]})]}):t.jsx(t.Fragment,{}),t.jsx("div",{className:"input-wrap items-per-page",children:t.jsxs("label",{htmlFor:`items-per-page${e}-${c}`,children:[t.jsx("input",{id:`items-per-page${e}-${c}`,className:"",type:"number",value:qe,placeholder:qe.toString(),min:1,max:100,onChange:p=>Eo(Number(p.target.value))}),t.jsx("span",{children:da[o]})]})})]}):t.jsx(t.Fragment,{})};return t.jsx(t.Fragment,{children:t.jsx("section",{className:"card",children:t.jsx("div",{children:t.jsxs("div",{id:`drag-container${e}`,className:`drag-container drag-container${e}`,children:[t.jsxs("div",{className:"blob-title-wrap",children:[t.jsxs("h2",{className:"blob-title",children:[mr[o]," ",e+1]}),e===0?t.jsxs("p",{children:[pt[o]," "]}):e===1?t.jsxs("p",{children:[Yo[o],"."," ",pt[o]," "]}):e===2?t.jsxs("p",{children:[Wo[o],"."," ",pt[o]," "]}):t.jsx("p",{children:pt[o]})]}),t.jsxs("div",{className:"label-container",children:[t.jsx("span",{id:`blobdescription${e}`,className:"scr",children:Jo[o]}),t.jsxs("span",{children:["[",Mt[o],": ",le+1,"]"," "]}),t.jsx("span",{ref:k,id:`selectedvalue${e}`,className:"selectedvalue",children:Ie[o]})]}),t.jsxs("div",{id:`button-container${e}`,className:"button-container",children:[t.jsxs("button",{ref:Q,id:`stop-blobs${e}`,className:"stop-blobs tooltip-wrap ",onClick:r=>{so(r)},"aria-labelledby":`stop-blobs${e}-span`,children:[t.jsx("span",{id:`stop-blobs${e}-span`,className:"tooltip above space",children:Go[o]}),ue?Xo[o]:qo[o]]}),t.jsxs("button",{ref:te,id:`reset-blobs${e}`,"aria-labelledby":`reset-blobs${e}-span`,className:"reset-blobs tooltip-wrap",onClick:r=>{ao(r)},children:[t.jsx("span",{id:`reset-blobs${e}-span`,className:"tooltip above space",children:_o[o]})," ",Zo[o]]}),t.jsxs("button",{id:`toggle-marker${e}`,"aria-labelledby":`toggle-marker${e}-span`,className:"toggle-marker tooltip-wrap",onClick:()=>C(!v),children:[t.jsx("span",{id:`toggle-marker${e}-span`,className:"tooltip above space",children:`${Qo[o]}`}),v?Ko[o]:es[o]]}),t.jsxs("button",{ref:z,id:`disable-scroll${e}`,"aria-labelledby":`disable-scroll${e}-span`,className:`disable-scroll tooltip-wrap ${S?"":"active"}`,onClick:()=>{lo()},children:[t.jsx("span",{id:`disable-scroll${e}-span`,className:"tooltip above space",children:S?ts[o]:rs[o]}),S?os[o]:ss[o]]}),t.jsx("button",{id:`toggle-controls${e}`,"aria-labelledby":`toggle-controls${e}-span`,className:`toggle-controls ${B?"":"active"}`,onClick:()=>{we(!B),B||setTimeout(()=>{Te()},200)},children:t.jsxs("span",{id:`toggle-controls${e}-span`,children:[" ",B?as[o]:ns[o]]})}),t.jsxs("button",{type:"button",id:`take-screenshot${e}`,"aria-labelledby":`take-screenshot${e}-span`,disabled:y,onClick:wo,className:"screenshot tooltip-wrap",children:[t.jsx(fa,{}),t.jsx("span",{id:`take-screenshot${e}-span`,className:"tooltip left below space",children:y?fr[o]:ls[o]})]})]}),t.jsxs("div",{ref:ee,className:`drag-wrap-outest drag-wrap-outest${e}`,children:[t.jsxs("div",{ref:d,id:`drag-wrap-outer${e}`,className:"drag-wrap-outer",style:{...po,...uo,...io,...co},children:[t.jsxs("div",{tabIndex:0,ref:h,className:`make-smaller tooltip-wrap reset ${B?"":"hidden"}`,id:`make-smaller${e}`,children:[t.jsx(ha,{}),t.jsx("span",{id:`make-smaller${e}-span`,className:"tooltip left below",children:`${cs[o]}. ${hr[o]}: ${br[o]}`})]}),t.jsxs("div",{ref:f,className:`make-larger tooltip-wrap reset ${B?"":"hidden"}`,id:`make-larger${e}`,children:[t.jsx(ba,{}),t.jsx("span",{id:`make-larger${e}-span`,className:"tooltip left above",children:`${is[o]}. ${hr[o]}: ${br[o]}`})]}),t.jsxs("button",{ref:N,className:`make-more tooltip-wrap restore ${B?"":"hidden"}`,id:`make-more${e}`,onClick:()=>{lr("clone"),ut("")},children:[t.jsx(ya,{}),jt==="clone"&&t.jsx("span",{className:"clone-alert",children:us[o]}),t.jsx("span",{id:`make-more${e}-span`,className:"tooltip right below",children:ds[o]})]}),t.jsxs("button",{ref:he,className:`make-random tooltip-wrap ${B?"":"hidden"}`,id:`make-random${e}`,"aria-labelledby":`make-random${e}-span`,onClick:()=>sr(),children:[t.jsx(va,{}),t.jsx("span",{id:`make-random${e}-span`,className:"tooltip below",children:`${ps[o]}. ${ms[o]}!`})]}),t.jsxs("button",{ref:V,className:`delete-blob tooltip-wrap restore ${B?"":"hidden"}`,id:`delete-blob${e}`,onClick:()=>lr("delete"),children:[t.jsx($a,{}),jt==="delete"&&t.jsx("span",{className:"delete-alert",children:fs[o]}),t.jsx("span",{id:`delete-blob${e}-span`,className:"tooltip right above",children:hs[o]})]}),t.jsxs("div",{ref:I,id:`layer-decrease${e}`,className:`layer-adjust layer-decrease tooltip-wrap ${B?"":"hidden"}`,children:[t.jsx("span",{id:`layer-decrease${e}-span`,className:"tooltip above",children:`${bs[o]} ${yr[o]}`}),t.jsx(Br,{})]}),t.jsxs("div",{ref:J,id:`layer-increase${e}`,className:`layer-adjust layer-increase tooltip-wrap ${B?"":"hidden"}`,children:[t.jsx("span",{id:`layer-increase${e}-span`,className:"tooltip above",children:`${ys[o]} ${yr[o]}`}),t.jsx(Cr,{})]}),v&&l&&H&&t.jsx("div",{ref:oe,style:{position:"absolute",top:`${H.top+H.width*-.05}px`,left:`${H.left+H.width*-.05}px`,width:`${H.width*1.1}px`,height:`${H.height*1.1}px`,outline:"3px dashed black",outlineOffset:"2px",border:"3px dashed white",borderRadius:"50%",zIndex:999}}),t.jsx("div",{ref:m,id:`drag-wrap${e}`,className:"drag-wrap",children:t.jsx(Da,{layerAmount:ve,layer_:le,hiddenLayers:ce,changeBlobLayer:Pr,setActiveLayer:be,highestZIndex:Be,language:o,dispatch:i,d:e,items:F[e]??[],saveDraggables:qt,getPosition:no,colorBlockProps:vt,makeLarger0:f,makeSmaller0:h,makeMore0:N,removeBlob:Do,layerIncrease:J,layerDecrease:I,dragWrap:m,exitApp:ke,selectedvalue0:k,setFocusedBlob:Ke,colorIndex:yt,setColorIndex:q,colorPairs:Lt,colorswitch:xt,scroll:S,setScroll:ie,clickOutsideRef:m,addRandomDraggable:sr,mode:jt})})]}),t.jsx(Fa,{d:e,language:o,getRefName:Mr,map:Tr,colorBlockProps:vt,colorPairs:Lt,controlsVisible:B})]}),t.jsxs("div",{className:"layer-mover-control-wrap",children:[t.jsxs("div",{className:`movers-wrap movers-wrap1 ${B?"":"hidden"}`,children:[t.jsxs("button",{id:`moveleft${e}`,"aria-labelledby":`moveleft${e}-span`,className:"moveleft mover tooltip-wrap narrow2",onClick:to,children:[t.jsx(xa,{}),t.jsx("span",{id:`moveleft${e}-span`,className:"tooltip above",children:vs[o]})]}),t.jsxs("button",{id:`moveright${e}`,"aria-labelledby":`moveright${e}-span`,className:"moveright mover tooltip-wrap narrow2",onClick:eo,children:[t.jsx(ka,{}),t.jsx("span",{id:`moveright${e}-span`,className:"tooltip above",children:$s[o]})]})]}),t.jsxs("div",{className:"layer-btn-wrap layer-tools layer-tools1",children:[t.jsxs("button",{id:`decrease-layer-amount${e}`,"aria-labelledby":`decrease-layer-amount${e}-span`,className:"layer-tool layer-amount decrease-layer-amount tooltip-wrap narrow2 danger",onClick:Bo,children:[t.jsx("span",{id:`decrease-layer-amount${e}-span`,className:"tooltip above",children:xs[o]}),t.jsx(ga,{style:{fontSize:"0.8em"}})]}),t.jsxs("button",{id:`every-layer-minus${e}`,"aria-labelledby":`every-layer-minus${e}-span`,className:"layer-tool every-layer tooltip-wrap narrow2",onClick:()=>rr(-1),children:[t.jsx("span",{id:`every-layer-minus${e}-span`,className:"tooltip above",children:ks[o]}),t.jsx(Br,{})]})]}),t.jsx("div",{className:"layer-btn-wrap layers",children:Array.from({length:ve},(r,s)=>s).map((r,s)=>t.jsx("button",{id:`layer-button-${e}-${r}`,"aria-labelledby":`layer-button-${e}-${r}-span`,onClick:()=>{le===r?Rr(r):be(r)},className:`layer-button tooltip-wrap narrow2 ${le===r?"active":""} ${ce.has(r)?"dim":""}`,children:t.jsxs("span",{id:`layer-button-${e}-${r}-span`,children:[t.jsx("span",{className:"scr",children:Mt[o]})," ",r+1," ",t.jsx("span",{className:"tooltip above",children:le===r?gs[o]:ws[o]})]})},`${r}*${s}`))}),t.jsxs("div",{className:"layer-btn-wrap layer-tools layer-tools2",children:[t.jsxs("button",{id:`every-layer-plus${e}`,"aria-labelledby":`every-layer-plus${e}-span`,className:"layer-tool every-layer tooltip-wrap narrow2",onClick:()=>rr(1),children:[t.jsx("span",{id:`every-layer-plus${e}-span`,className:"tooltip above",children:Es[o]}),t.jsx(Cr,{})]}),t.jsxs("button",{id:`increase-layer-amount${e}`,disabled:ve>=9,"aria-labelledby":`increase-layer-amount${e}-span`,className:"layer-tool layer-amount increase-layer-amount tooltip-wrap narrow2",onClick:()=>Co(1),children:[t.jsx("span",{id:`increase-layer-amount${e}-span`,className:"tooltip above",children:js[o]}),t.jsx(wa,{})]})]}),t.jsxs("div",{className:`movers-wrap movers-wrap2 ${B?"":"hidden"}`,children:[t.jsxs("button",{id:`moveup${e}`,"aria-labelledby":`moveup${e}-span`,className:"moveup mover tooltip-wrap narrow2",onClick:oo,children:[t.jsx(Ea,{}),t.jsx("span",{id:`moveup${e}-span`,className:"tooltip above",children:Ns[o]})]}),t.jsxs("button",{id:`movedown${e}`,"aria-labelledby":`movedown${e}-span`,className:"movedown mover tooltip-wrap narrow2",onClick:ro,children:[t.jsx(ja,{}),t.jsx("span",{id:`movedown${e}-span`,className:"tooltip above",children:Bs[o]})]})]})]}),t.jsx(Oa,{d:e,defaultHue:x,defaultSaturation:D,defaultLightness:L,setSliderHueVal:Je,setSliderSatVal:Ge,setSliderLightVal:Xe,language:o,sliderLightness:ho,sliderSaturation:fo,sliderHue:mo,sliderLightnessReset:bo,sliderSaturationReset:yo,sliderHueReset:vo,sliderLightVal:ct,sliderSatVal:lt,sliderHueVal:nt,sliderLightnessInput:G,sliderSaturationInput:X,sliderHueInput:se}),t.jsx("div",{ref:ke,id:`exitblob${e}`,className:"exitblob"}),w?t.jsxs("div",{className:"blob-handling",children:[t.jsx("div",{className:"full wide flex column center gap",children:t.jsxs("form",{onSubmit:r=>Xr(r),children:[t.jsx("div",{className:"input-wrap",children:t.jsxs("label",{htmlFor:`blobname${e}`,children:[t.jsx("input",{id:`blobname${e}`,type:"text",value:De,onChange:Jr,placeholder:mt[o],maxLength:30}),t.jsxs("span",{children:[mt[o],":"]})]})}),t.jsx("button",{type:"submit",disabled:y,children:Cs[o]})]})}),t.jsxs("div",{ref:re,id:`blob-screenshot${e}`,style:{display:"none"},children:[t.jsx("button",{onClick:nr,children:vr[o]}),t.jsx("img",{src:"",ref:pe,alt:Ss[o],style:go}),t.jsx("button",{onClick:nr,children:vr[o]})]}),t.jsx("h3",{children:Ds[o]}),Hr?t.jsx("p",{children:Ls[o]}):!K||K.length<1?t.jsx("p",{children:Ts[o]}):Qt?Object.keys(at).map((r,s)=>{const n=Object.keys(at[Number(r)]),c=Math.ceil(n.length/qe),p=jo[Number(r)]??1,$=(p-1)*qe,P=$+qe,O=n.slice($,P);return t.jsxs("div",{className:"flex center margin0auto",children:[cr(r,p,c),t.jsx("ul",{className:"blob-versions-wrap",children:O.map((M,$e)=>t.jsxs("li",{className:"blob-version-item",children:[t.jsx("span",{children:M}),t.jsxs("div",{className:"button-wrap",children:[t.jsxs("button",{onClick:()=>_r(Number(r),M),children:[Ps[o]," ",t.jsx("span",{className:"scr",children:M})]}),t.jsxs("button",{onClick:()=>Zr(Number(r),M),children:[Rs[o]," ",t.jsx("span",{className:"scr",children:M})]}),t.jsx(Is,{language:o,id:`accordion-blobnewname-${Bt(M)}`,className:"blobnewname",wrapperClass:"blobnewname-wrap",text:$r[o],hideBrackets:!0,onClick:()=>{Zt(M),Vr(M)},isOpen:Or===M,children:t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"input-wrap",children:t.jsxs("label",{htmlFor:`blobnewname-${Bt(M)}`,children:[t.jsx("input",{id:`blobnewname-${Bt(M)}`,type:"text",value:rt,onChange:Gr,placeholder:xr[o],maxLength:30}),t.jsxs("span",{children:[$r[o],":"]})," ",t.jsx("span",{className:"scr",children:M})]})}),t.jsxs("button",{onClick:()=>{M!==rt?qr(M,rt):b(g(`${ae[o]}: ${xr[o]}`,!0,5))},children:[As[o]," ",t.jsxs("span",{className:"scr",children:[M,": ",Fs[o]," ",rt]})]})]})})]})]},`${M}+${$e}`))},`${r}+${s}`),cr(r,p,c)]},`${r}:${s}`)}):t.jsx("p",{children:Ms[o]})]}):t.jsxs("div",{className:"wide flex column center gap",children:[t.jsxs("div",{className:"login-to-save wide flex column center gap-half",children:[t.jsx(Na,{}),Os[o]]}),t.jsxs("div",{className:"blob-register-login-wrap",children:[t.jsx("button",{onClick:xo,children:Vs[o]}),t.jsx("big",{children:Hs[o]}),t.jsx("button",{onClick:$o,children:zs[o]})]})]}),t.jsx("svg",{className:"filter",children:t.jsxs("filter",{id:"svgfilter0",children:[t.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"7"}),t.jsx("feColorMatrix",{values:`\r
1 0 0 0 0\r
0 1 0 0 0\r
0 0 1 0 0\r
0 0 0 50 -18\r
`})]})}),t.jsx("svg",{className:"filter",children:t.jsxs("filter",{id:"svgfilter1",children:[t.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"8"}),t.jsx("feColorMatrix",{values:`\r
1 0 0 0 0\r
0 1 0 0 0\r
0 0 1 0 0\r
0 0 0 46 -28\r
`})]})})]})})})})}const hn=({language:o})=>{const e=Array.from({length:3},(x,D)=>D),j=a.useRef(e.reduce((x,D)=>(x[D]=a.createRef(),x),{})),d=x=>t.jsx("div",{className:"to-blob-art-btn-wrap flex center gap-half",children:e.map((D,L)=>x===L?t.jsx(a.Fragment,{},L):t.jsxs("button",{style:{borderRadius:"1rem",flex:"0 0 auto"},className:"to-blob-art-btn grayer",onClick:()=>{const E=document.getElementById(`drag-container${L}`);E&&E.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},children:[pa[o]," ",ma[o]," ",L+1]},L))});return t.jsxs(t.Fragment,{children:[e.map((x,D)=>t.jsxs(a.Fragment,{children:[d(D),t.jsx(Ua,{language:o,d:x,ds:e.length,dragWrapOuter:j.current[x]})]},x)),d(-1)]})};export{hn as default};
