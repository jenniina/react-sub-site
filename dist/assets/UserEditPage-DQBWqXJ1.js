import{r as j,j as e}from"./react-A9DAvxly.js";import{K as O}from"./react-icons-DJiaMApb.js";import{aZ as N,fE as L,fF as b,fG as k,fH as Y,bS as $,b0 as o,fI as B,fJ as W,fK as Q,bR as v,fL as S,fM as U,fN as I,fO as z,fP as H,f5 as M,fQ as G,fR as J,fS as K,dT as V,at as P,fT as A,fU as F,fV as q,c6 as y,fW as Z,fX as X,fY as g,fZ as ee,u as se,H as te,f_ as ae,ek as re,f$ as ie,g0 as ne,g1 as D,g2 as R,g3 as C}from"./index-BWaKbtdG.js";import{a as de}from"./react-redux-CHm9GgGE.js";import{a as oe}from"./react-router-BoqxkIr7.js";import"./hoist-non-react-statics-D5aJipOz.js";import"./react-dom-yh0erWL-.js";import"./scheduler-CzFDRTuY.js";import"./@reduxjs-DTZ4pglK.js";import"./immer-BNrqi0cU.js";import"./redux-CE3tqztX.js";import"./@babel-DF5_wy6Y.js";import"./redux-thunk-CY0Q9z1Q.js";import"./axios-BimPEqV4.js";import"./react-router-dom-j9Ns2JNj.js";import"./@remix-run-DTnHqtaE.js";import"./react-is-DUDD-a5e.js";import"./use-sync-external-store-DEc9BFqZ.js";const ce="_editform_zc9op_1",w={editform:ce,"delete-account":"_delete-account_zc9op_13"},me="_language_1s6pq_21",le="_p_1s6pq_35",x={"edit-user":"_edit-user_1s6pq_1",language:me,p:le,"p-last":"_p-last_1s6pq_43"},pe=({user:s,language:t})=>{const i=N(),[l,E]=j.useState(""),[d,p]=j.useState(""),[u,r]=j.useState(""),h=async n=>{n.preventDefault();try{if(d.trim()!==u.trim()){i(o(B[t],!0,5));return}else if(d.length<10){i(o(W[t],!0,5));return}const m={_id:s._id,passwordOld:l,password:d,language:t};s&&i(Q(m)).then(c=>{c&&(c.success===!1?i(o(`${c.message||v[t]}`,!0,5)):(i(o(`${c.message||S[t]}`,!1,5)),E(""),p(""),r("")))}).catch(c=>{var f,_;console.error(c),c.code==="ERR_BAD_REQUEST"&&((_=(f=c.response)==null?void 0:f.data)!=null&&_.message)?i(o(`${c.response.data.message}`,!0,5)):setTimeout(()=>{i(o(U[t],!0,5))},2e3)})}catch(a){console.error("error",a)}};return e.jsx(e.Fragment,{children:s?e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:L[t]}),e.jsxs("form",{onSubmit:h,className:x["edit-user"],children:[e.jsx("div",{className:"input-wrap",children:e.jsxs("label",{children:[e.jsx("input",{required:!0,type:"password",name:"old-password",id:"old-password",value:l,onChange:({target:n})=>E(n.value.trim())}),e.jsx("span",{children:b[t]})]})}),e.jsx("div",{className:"input-wrap",children:e.jsxs("label",{children:[e.jsx("input",{required:!0,type:"password",name:"password",id:"password-edit",value:d,onChange:({target:n})=>p(n.value.trim())}),e.jsx("span",{children:k[t]})]})}),e.jsx("div",{className:"input-wrap",children:e.jsxs("label",{children:[e.jsx("input",{required:!0,type:"password",name:"confirmPassword",id:"confirmPassword",value:u,onChange:({target:n})=>r(n.value.trim())}),e.jsx("span",{children:Y[t]})]})}),e.jsx("button",{type:"submit",children:$[t]})]})]}):e.jsx(e.Fragment,{})})},he=({user:s,language:t})=>{const i=N(),[l,E]=j.useState((s==null?void 0:s.username)??""),[d,p]=j.useState(""),u=async r=>{r.preventDefault();try{const n={_id:s._id,username:l,passwordOld:d,language:t};if(s){if(l.trim()===s.username.trim()){i(o(`${G[t]}`,!0,5));return}i(J(n)).then(a=>{a&&(a.success===!1?i(o(`${a.message??v[t]}`,!0,5)):(i(o(`${a.message??S[t]}`,!1,5)),p("")))}).catch(a=>{var m,c;console.error(a),a.code==="ERR_BAD_REQUEST"&&((c=(m=a.response)==null?void 0:m.data)!=null&&c.message)?i(o(`${a.response.data.message}`,!0,5)):setTimeout(()=>{i(o(U[t],!0,5))},2e3)})}}catch(h){console.error("error",h)}};return e.jsx(e.Fragment,{children:s?e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:I[t]}),e.jsx("p",{className:x.p,children:z[t]}),e.jsxs("p",{className:`${x.p} ${x["p-last"]}`,children:[H[t],": ",e.jsx("strong",{children:s==null?void 0:s.username})]}),e.jsxs("form",{onSubmit:u,className:x["edit-user"],children:[e.jsx("div",{className:"input-wrap",children:e.jsxs("label",{children:[e.jsx("input",{required:!0,type:"text",name:"username",id:"username",value:l,onChange:({target:r})=>E(r.value.trim())}),e.jsx("span",{children:M[t]})]})}),e.jsx("div",{className:"input-wrap",children:e.jsxs("label",{children:[e.jsx("input",{required:!0,type:"password",name:"old-password",id:"old-password-username",value:d,onChange:({target:r})=>p(r.value.trim())}),e.jsx("span",{children:b[t]})]})}),e.jsx("button",{type:"submit",children:$[t]})]})]}):e.jsx(e.Fragment,{})})},fe=({user:s,language:t,setLanguage:i,options:l,getKeyByValue:E})=>{const d=N(),[p,u]=j.useState(""),[r,h]=j.useState((s==null?void 0:s.language)??t),n=async a=>{a.preventDefault();try{const c={_id:s._id,name:s.name,passwordOld:p,language:r};s&&d(A(c)).then(f=>{f&&(f.success===!1?d(o(`${v[t]}: ${f.message}`,!0,5)):(d(o(`${f.message??S[r]}`,!1,5)),d(F(f.user)).then(()=>{d(q(s==null?void 0:s._id)).then(()=>d(y())),i(r)}),u("")))}).catch(f=>{var _,T;console.error(f),f.code==="ERR_BAD_REQUEST"&&((T=(_=f.response)==null?void 0:_.data)!=null&&T.message)?d(o(`${v[t]}: ${f.response.data.message}`,!0,5)):setTimeout(()=>{d(o(U[t],!0,5))},2e3)})}catch(m){console.error("error",m)}};return e.jsx(e.Fragment,{children:s?e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:K[t]}),e.jsxs("form",{onSubmit:n,className:x["edit-user"],children:[e.jsx(V,{language:t,id:"language-register",className:`language ${x.language}`,instructions:"Language",hide:!0,options:l(P),value:r?{value:r,label:E(P,r)}:void 0,onChange:a=>{h(a==null?void 0:a.value)}}),e.jsx("div",{className:"input-wrap",children:e.jsxs("label",{children:[e.jsx("input",{required:!0,type:"password",name:"old-password",id:"old-password-user-language",value:p,onChange:({target:a})=>u(a.value.trim())}),e.jsx("span",{children:b[t]})]})}),e.jsx("button",{type:"submit",children:$[t]})]})]}):e.jsx(e.Fragment,{})})},ue=({user:s,language:t})=>{const i=N(),[l,E]=j.useState((s==null?void 0:s.name)||""),[d,p]=j.useState(""),u=async r=>{r.preventDefault();try{const n={_id:s._id,name:l,passwordOld:d,language:t};s&&i(A(n)).then(a=>{a&&(a.success===!1?i(o(`${v[t]}: ${a.message}`,!0,5)):(i(o(`${a.message??S[t]}`,!1,5)),i(F(a.user)).then(()=>{i(q(s==null?void 0:s._id)).then(()=>i(y()))}),p("")))}).catch(a=>{var m,c;console.error(a),a.code==="ERR_BAD_REQUEST"&&((c=(m=a.response)==null?void 0:m.data)!=null&&c.message)?i(o(`${v[t]}: ${a.response.data.message}`,!0,5)):setTimeout(()=>{i(o(U[t],!0,5))},2e3)})}catch(h){console.error("error",h)}};return e.jsx(e.Fragment,{children:s?e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:Z[t]}),e.jsxs("p",{className:x.p,children:[X[t],": ",e.jsx("strong",{children:s==null?void 0:s.name})]}),e.jsx("p",{className:`${x.p} ${x["p-last"]}`,children:g[t]}),e.jsxs("form",{onSubmit:u,className:x["edit-user"],children:[e.jsx("div",{className:"input-wrap",children:e.jsxs("label",{children:[e.jsx("input",{required:!0,type:"text",name:"name",id:"name-edit",value:l,onChange:({target:r})=>E(r.value)}),e.jsx("span",{children:ee[t]})]})}),e.jsx("div",{className:"input-wrap",children:e.jsxs("label",{children:[e.jsx("input",{required:!0,type:"password",name:"old-password",id:"old-password-user",value:d,onChange:({target:r})=>p(r.value.trim())}),e.jsx("span",{children:b[t]})]})}),e.jsx("button",{type:"submit",children:$[t]})]})]}):e.jsx(e.Fragment,{})})},Fe=({language:s,setLanguage:t,heading:i,text:l,type:E,options:d,getKeyByValue:p})=>{const u=se(),r=N(),h=oe(),n=de(m=>{var c;return(c=m.auth)==null?void 0:c.user});j.useEffect(()=>{r(y())},[]),j.useEffect(()=>{const m=setTimeout(()=>{n||h("/")},2e3);return()=>clearTimeout(m)},[n]);const a=m=>{m.preventDefault(),n&&window.confirm(`${re[s]} ${n.username}?`)&&window.confirm(`${ie[s]}`)&&(window.confirm(ne[s])?r(D(n._id,!0)).then(()=>{r(R()),h("/"),r(o(C[s],!1,8))}):r(D(n._id,!1)).then(()=>{r(R()),h("/"),r(o(C[s],!1,8))}))};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:`edit ${E} ${u?w.light:""}`,children:[e.jsx(te,{language:s,address:"edit",heading:i,text:l}),e.jsx("div",{className:"inner-wrap",children:e.jsx("section",{className:"card",children:e.jsxs("div",{children:[e.jsx("div",{className:w.editform,children:e.jsx(ue,{user:n,language:s})}),e.jsx("div",{className:w.editform,children:e.jsx(he,{user:n,language:s})}),e.jsx("div",{className:w.editform,children:e.jsx(fe,{user:n,language:s,setLanguage:t,options:d,getKeyByValue:p})}),e.jsx("div",{className:w.editform,children:e.jsx(pe,{user:n,language:s})}),n?e.jsx("form",{onSubmit:a,className:"flex center",children:e.jsxs("button",{type:"submit",className:`submit danger ${w["delete-account"]} ${w.submit}`,children:[e.jsx(O,{})," ",ae[s]]})}):""]})})})]})})};export{Fe as default};
