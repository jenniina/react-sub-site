import{r as d,j as r}from"./react-A9DAvxly.js";import{u as _,hx as Q,hy as c,hz as V,hA as W,hB as p,hC as X,hD as Z,hE as B,J as j,hF as q,hG as H,b2 as U,cr as ee,hH as Y,aK as te,gY as re,hI as se,hJ as ne,hK as oe}from"./index-DdJzb_U7.js";import{M as ae,aO as ie,aP as ce}from"./react-icons-yVutJqMS.js";import"./hoist-non-react-statics-D5aJipOz.js";import"./react-dom-CxfJ6lHP.js";import"./scheduler-CzFDRTuY.js";import"./react-redux-C4cSaZU-.js";import"./react-is-DUDD-a5e.js";import"./use-sync-external-store-DEc9BFqZ.js";import"./@reduxjs-DhFEcpJw.js";import"./immer-C0GRqQ_d.js";import"./redux-CE3tqztX.js";import"./@babel-DF5_wy6Y.js";import"./redux-thunk-CY0Q9z1Q.js";import"./axios-CCb-kr4I.js";import"./react-router-dom-j9Ns2JNj.js";import"./react-router-BoqxkIr7.js";import"./@remix-run-DTnHqtaE.js";function le({language:a,status:i,statuses:x,id:h,index:m,data:s,handleDragging:E,handleUpdate:u,handleRemoveColor:T,setTheTarget:A,focusedCard:N,setFocusedCard:v,translateStatus:O}){const b=_(),I={backgroundColor:s==null?void 0:s.color,padding:"0.3em 5%",color:(s==null?void 0:s.lightness)=="dark"?"white":"black",borderColor:(s==null?void 0:s.lightness)=="dark"?"var(--color-gray-7)":"var(--color-gray-5)",textShadow:(s==null?void 0:s.lightness)=="dark"?"1px 1px 1px black":"1px -1px 3px rgba(255,255,255,0.6), -1px 1px 3px rgba(255,255,255,0.6)"},L={color:"var(--color-primary-20)",textShadow:"none"},R={margin:"0 auto 0.3em",display:"block",width:"max-content",fontSize:"0.9em"},[D,C]=d.useState(!1);function S(){C(e=>!e)}function J(){C(!1)}const y=d.useRef(null);Q({ref:y,onOutsideClick:J});const k=d.useRef(0),M=(e,o)=>{e.preventDefault(),A(o),k.current=o},g=e=>{E(!0),e.preventDefault()},F=(e,o)=>{e.dataTransfer.setData("text/plain",JSON.stringify({type:"item",id:s==null?void 0:s.id}))};function K(e){const o=e.target.closest("a[data-status]"),t=o==null?void 0:o.dataset.status;s&&t&&u(s.id,t)}function P(e){switch(e.code){case"Enter":case"Space":e.stopPropagation(),e.preventDefault();const o=e.target.closest("a[data-status]"),t=(o==null?void 0:o.dataset.status)??i;s&&u(s.id,t),C(n=>!n);break;case"Escape":e.stopPropagation(),e.preventDefault(),C(!1);break}}const z=(e,o)=>{var w,$;const t=e.target.closest("li");let n;t?n=t:n=e.target;const l=Number((w=n==null?void 0:n.previousElementSibling)==null?void 0:w.dataset.identity),f=Number(($=n==null?void 0:n.nextElementSibling)==null?void 0:$.dataset.identity);switch(e.key){case"ArrowUp":s&&l!==null&&(e.preventDefault(),u(o,s.status,l),v(o));break;case"ArrowDown":s&&f!==null&&(e.preventDefault(),u(o,s.status,f),v(o));break;case"Tab":v(null)}};d.useEffect(()=>{var e;N===h&&((e=y.current)==null||e.focus())},[N,h]);const G=e=>{var o,t,n;if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(e).then(()=>{b(j(q[a],!1,3))},l=>{b(j(`${H[a]}`,!0,3))});else{const l=document.createElement("textarea");l.value=e,(o=y.current)==null||o.appendChild(l),l.focus(),l.select();try{document.execCommand("copy"),b(j(q[a],!1,3))}catch(f){(n=(t=f.response)==null?void 0:t.data)!=null&&n.message?b(j(f.response.data.message,!0,8)):b(j(`${H[a]}`,!0,3))}document.body.removeChild(l)}};return r.jsx("li",{ref:y,draggable:"true",onDragStart:e=>F(e),onDragEnter:e=>M(e,h),onDragOver:e=>g(e),onDragEnd:()=>E(!1),role:"listitem",tabIndex:0,onKeyDown:e=>z(e,h),"data-identity":h,children:r.jsxs("div",{style:I,className:`${c.card}`,children:[r.jsx("span",{className:c.text,children:s==null?void 0:s.content}),r.jsxs("b",{children:[r.jsx("button",{onClick:()=>T(s.content),children:"Ã—"}),r.jsxs("button",{"aria-haspopup":"true",onClick:S,children:[r.jsx(ae,{"aria-hidden":"true"}),r.jsx("span",{className:"scr",id:`instructions${h}`,children:V[a]})]})]}),r.jsxs("nav",{className:D?`${c.open} ${c.blur}`:`${c.blur}`,style:L,children:[r.jsxs("span",{style:R,children:[W[a],":"]}),r.jsxs("ul",{role:"listbox","aria-describedby":`instructions${h}`,"aria-expanded":D?"true":"false",className:p(i),children:[r.jsx("li",{role:"option",className:c.copy,children:r.jsxs("a",{className:c.copy,onClick:()=>G(s.content),tabIndex:0,title:X[a],children:[r.jsx(ie,{}),r.jsx("i",{children:Z[a]})]})}),x.map((e,o)=>r.jsx("li",{role:"option",className:p(e),children:r.jsxs("a",{className:p(e),"data-status":e,onClick:t=>K(t),onKeyDown:t=>P(t),tabIndex:0,title:`${B[a]}: ${O(e).toLowerCase()}`,children:[r.jsx(ce,{}),r.jsx("i",{children:O(e)})]})},`${p(e)}-${o}-${m}`))]})]})]})})}const Se=({language:a,status:i,statuses:x,isDragging:h,handleDragging:m,handleUpdate:s,handleRemoveColor:E,itemsByStatus:u,lightTheme:T,updateStatus:A,reorderStatuses:N,deleteStatus:v,regex:O})=>{const b=_(),[I,L]=d.useState(0),[R,D]=d.useState(!1),[C,S]=d.useState(""),[J,y]=d.useState(null),k=d.useRef(null),[M,g]=d.useState(!1),F=t=>{g(!0);const n=t.target.value;O.test(n)?(S(n),g(!1)):(b(j(re[a],!0,6)),g(!1))};Q({ref:k,onOutsideClick:()=>D(!1)});const K=t=>{const n=JSON.parse(t.dataTransfer.getData("text/plain"));n.type==="item"&&(s(n.id,i,I),m(!1))},P=t=>t.preventDefault(),z=(t,n)=>{t.dataTransfer.setData("text/plain",JSON.stringify({type:"span",id:n.toString()})),m(!0)},G=t=>{t.stopPropagation(),t.preventDefault()},e=(t,n)=>{t.preventDefault();const l=JSON.parse(t.dataTransfer.getData("text/plain"));if(l.type==="span"){const f=l.id;if(f!==n){const w=Array.from(x),[$]=w.splice(f,1);w.splice(n,0,$),N(f,n)}m(!1)}},o=t=>{switch(t.toLowerCase()){case"good":return oe[a];case"bad":return ne[a];case"neutral":return se[a];default:return t.replace(/_/g," ")}};return r.jsxs("div",{className:`${c["cards-container"]} ${h?c["area-dragging"]:""} ${T?c.light:""}`,onDrop:t=>e(t,x.indexOf(i)),onDragEnd:()=>m(!1),children:[r.jsxs("span",{ref:k,id:`label-${p(i)}`,className:c["status-label"],draggable:!0,onDragStart:t=>z(t,x.indexOf(i)),onDragOver:G,children:[r.jsx("b",{children:o(i)}),r.jsx(U,{isOpen:R,setIsFormOpen:D,language:a,text:"*",hideBrackets:!0,onClick:()=>S(i),className:`narrow2 ${c["change-status"]} change-status`,wrapperClass:"change-status-wrap",tooltip:ee[a],x:"left",y:"below",children:r.jsxs(r.Fragment,{children:[r.jsx("i",{children:o(i)}),r.jsxs("form",{className:c["change-status-form"],onSubmit:t=>{t.preventDefault(),A(x.indexOf(i),C)},children:[r.jsx("div",{className:"input-wrap",children:r.jsxs("label",{htmlFor:`${p(i)}-status`,children:[r.jsx("input",{type:"text",required:!0,id:`${p(i)}-status`,value:C,onChange:t=>F(t)}),r.jsxs("span",{children:[Y[a],":"]})]})}),r.jsx("button",{type:"submit",disabled:M,children:Y[a]}),r.jsx("button",{type:"button",className:"danger delete",onClick:()=>{v(i)},children:te[a]})]})]})})]}),r.jsx("ul",{"aria-labelledby":`label-${p(i)}`,id:p(i),className:p(i),role:"list",onDrop:K,onDragOver:P,children:u==null?void 0:u.map((t,n)=>r.jsx(le,{language:a,id:t.id,index:n,data:t,status:i,statuses:x,handleDragging:m,handleUpdate:s,handleRemoveColor:E,setTheTarget:L,focusedCard:J,setFocusedCard:y,translateStatus:o},`${p(i)}-item-${t.id}-${n}`))})]})};export{Se as default};
