const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FormJoke-CEFPfpP4.js","assets/index-B_tELgeU.js","assets/react-kX_YxI4E.js","assets/dom-to-image-more-CfDXlNbO.js","assets/react-dom-B5MLDbn_.js","assets/scheduler-CzFDRTuY.js","assets/react-redux-BEmJlIGA.js","assets/hoist-non-react-statics-DQogQWOa.js","assets/react-is-DUDD-a5e.js","assets/use-sync-external-store-BPp6CH6k.js","assets/@reduxjs-DhFEcpJw.js","assets/immer-C0GRqQ_d.js","assets/redux-CE3tqztX.js","assets/@babel-DF5_wy6Y.js","assets/redux-thunk-CY0Q9z1Q.js","assets/axios-CCb-kr4I.js","assets/react-icons-CzVo0GbG.js","assets/react-router-dom-StiqOUIT.js","assets/react-router-DUuhLvki.js","assets/@remix-run-DTnHqtaE.js","assets/index-DWYw7b3r.css","assets/ButtonToggle-BIla2T2y.js","assets/ButtonToggle-CsVqfVrg.css","assets/JokeSubmit-ODc9z-pc.js","assets/uuid-Dv1xt2bl.js","assets/UserJokes-CUWelMS6.js"])))=>i.map(i=>d[i]);
import{_ as _e,L as Qs,O as E,P as M,Q as ne,R as oe,u as Vs,U as Ws,i as H,V as B,e as p,W as Hs,X as Ee,Y as Gs,Z as is,$ as as,a0 as rs,a1 as ns,a2 as os,a3 as ls,a4 as cs,a5 as Xs,a6 as $e,a7 as fs,E as le,a8 as se,a9 as ce,aa as te,ab as Zs,ac as Ds,ad as js,ae as et,r as us}from"./index-B_tELgeU.js";import{r as f,j as x}from"./react-kX_YxI4E.js";import{a as fe}from"./react-redux-BEmJlIGA.js";import{a as K}from"./axios-CCb-kr4I.js";import{a as st}from"./react-router-DUuhLvki.js";const ue="https://api.chucknorris.io/jokes",tt=async()=>(await K.get(`${ue}/categories`)).data,it=async()=>(await K.get(`${ue}/random`)).data,at=async g=>(await K.get(`${ue}/random?category=${g}`)).data,rt=async g=>{const A=await K.get(`${ue}/search?query=${g}`);if(!A.data.result||A.data.result.length===0)return;const l=Math.floor(Math.random()*A.data.result.length);return A.data.result[l]},G={getNorrisCategories:tt,getFullyRandomNorrisJoke:it,getRandomJokeFromNorrisCategory:at,searchNorrisJoke:rt},Le="https://icanhazdadjoke.com/",nt=async()=>(await K.get(Le,{headers:{Accept:"application/json"}})).data,ot=async g=>{const A=await K.get(`${Le}/search?term=${g}&limit=100`,{headers:{Accept:"application/json"}});if(!A.data||A.data.results.length===0)return;const l=Math.floor(Math.random()*A.data.results.length);return A.data.results[l]},lt=async g=>(await K.get(`${Le}/j/${g}`,{headers:{Accept:"application/json"}})).data,ie={getRandomDadJoke:nt,searchDadJokes:ot,getDadJokeById:lt},ct=f.lazy(()=>_e(()=>import("./FormJoke-CEFPfpP4.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]))),ft=f.lazy(()=>_e(()=>import("./JokeSubmit-ODc9z-pc.js"),__vite__mapDeps([23,2,3,1,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,24]))),ut=f.lazy(()=>_e(()=>import("./UserJokes-CUWelMS6.js"),__vite__mapDeps([25,2,3,16,1,4,5,6,7,8,9,10,11,12,13,14,15,17,18,19,20,21,22])));function dt({language:g,setLanguage:A}){const{t:l}=f.useContext(Qs),b=fe(e=>{var s;return(s=e.jokes)==null?void 0:s.jokes}),a=fe(e=>{var s;return(s=e.jokes)==null?void 0:s.joke}),T=fe(e=>e.users),o=fe(e=>{var s;return(s=e.auth)==null?void 0:s.user}),de={en:is,es:as,fr:rs,de:ns,pt:os,cs:ls,fi:cs},ds=l("LanguageTitle"),[ge,I]=f.useState(""),[Te,O]=f.useState(""),[gs,z]=f.useState(""),[Ce,ps]=f.useState(de.en),[Ie,pe]=f.useState(g),[X,P]=f.useState(E.Misc),[_,Ae]=f.useState([]),[Q,hs]=f.useState([{value:"any",label:"Any"}]),[y,be]=f.useState(Q[0]),[L,ms]=f.useState([]),[Ne,Je]=f.useState(M.twopart),[V,ys]=f.useState(!1),[he,Me]=f.useState(ne.Safe),[N,Oe]=f.useState(!0),[Re,ke]=f.useState(oe.None),[k,Be]=f.useState(""),[vs,Ss]=f.useState(""),[xs,qe]=f.useState(!1),[ws,Fe]=f.useState(!0),[me,q]=f.useState(""),[Es,ye]=f.useState(!1),[$s,ve]=f.useState(!1),[_s,Ue]=f.useState(!1),[Pe,Ye]=f.useState(!1),[gt,ze]=f.useState(!1),[Ls,Ke]=f.useState(null),[R,W]=f.useState([]),[Se,pt]=f.useState(6),[Qe,$]=f.useState(!1),[C,Ve]=f.useState({nsfw:!1,religious:!1,political:!1,racist:!1,sexist:!1,explicit:!1}),r=Vs();f.useEffect(()=>{const e=!!(_!=null&&_.find(s=>s.value==="ChuckNorris"));Ye(k===""?e:!1)},[k,_,Pe]),f.useEffect(()=>{r(Ws())},[]),f.useEffect(()=>{r(H())},[]),f.useEffect(()=>{r(B()).then(()=>{p(`${l("JokesLoaded")}...`,!1,3)}).catch(e=>{var s,i;(i=(s=e.response)==null?void 0:s.data)!=null&&i.message?r(p(e.response.data.message,!0,8)):r(p(`${l("Error")}: ${(e==null?void 0:e.message)??""}`,!0,8))})},[]),f.useEffect(()=>{g&&(ps(de[g]),Ae(_.map(e=>({...e,label:de[g][e.value]}))))},[g]);const We=()=>{Oe(!N)},Ts=()=>{ys(!V)};f.useEffect(()=>{Me(N?ne.Safe:ne.Unsafe)},[N]),f.useEffect(()=>{Je(V?M.twopart:M.single)},[V]);const Cs=e=>{e.preventDefault(),$(!0),setTimeout(()=>{Ue(!0)},400),Fe(!0),setTimeout(()=>{Z(),qe(!0),setTimeout(()=>{qe(!1),$(!1)},5500);const s=document.querySelector("#queryValue");s&&s.scrollIntoView({behavior:"smooth"})},600)},Is=(e,s)=>async i=>{var n,t;if(i.preventDefault(),$(!0),window.confirm(`${l("Delete")} ${l("Joke").toLowerCase()} "${s}"?`))try{r(Xs(e,o==null?void 0:o._id)).then(()=>{r(B())}),$(!1)}catch(d){(t=(n=d.response)==null?void 0:n.data)!=null&&t.message?r(p(d.response.data.message,!0,8)):console.error(l("ErrorDeletingJoke"),d),$(!1)}else return},As=(e,s)=>async i=>{i.preventDefault(),$(!0);const n=b.find(h=>h._id===e);if(!n){r(p(`${l("Error")}!`,!0,8)),$(!1);return}const t=async h=>{var v,S;try{await r($e(h)),await r(B());const m=await r($e({...h,verified:!1,_id:e}));r(p(`${l("SavedJoke")}. ${m.message??""}`,!1,8)),Ke(null),ze(!1),$(!1)}catch(m){console.error(m);const J=(m==null?void 0:m.code)==="ERR_BAD_RESPONSE"?(S=(v=m==null?void 0:m.response)==null?void 0:v.data)==null?void 0:S.message:(m==null?void 0:m.message)??"";r(p(`${l("Error")}: ${J}`,!0,8)),$(!1)}},d=()=>{n.private===!0&&s.private===!1?s.category===E.Dark||Object.values(s.flags).some(h=>h)?(t({...s,private:!0,verified:!1,safe:!1}),$(!1)):(t({...s,private:!0,verified:!1,_id:e}),$(!1)):s.category!=E.Dark&&!Object.values(s.flags).some(h=>h)?(t({...s,safe:!0,_id:e}),$(!1)):s.category===E.Dark||Object.values(s.flags).some(h=>h)?(t({...s,safe:!1,_id:e}),$(!1)):(t(s),$(!1))};n.private===!0&&s.private===!1?window.confirm(l("AreYouSureYouWantToMakeThisJokePublic"))&&d():n.private===!1&&s.private===!0?window.confirm(l("AreYouSureYouWantToMakeThisJokePrivate"))&&d():d()},He=e=>Object.entries(e).map(([s,i])=>({value:s,label:i})),bs=e=>Object.entries(e).map(([s,i])=>({value:s,label:i[g]}));function Ge(e,s){for(const i in e)if(e[i]===s)return i}function Ns(e,s){return Object.keys(e).find(i=>e[i]===s)}const[ae,Js]=f.useState(void 0);f.useEffect(()=>{const e=b==null?void 0:b.find(s=>s.jokeId.toString()===(a==null?void 0:a.jokeId.toString())&&s.language===(a==null?void 0:a.language)&&s.category===(a==null?void 0:a.category));e&&Js(e)},[a,b]);const Xe=e=>{var s;if(e.preventDefault(),o){if(ae){if(ae.user.includes((s=o==null?void 0:o._id)==null?void 0:s.toString())){r(p(`${l("JokeAlreadySaved")}`,!1,8));return}r($e({...ae,user:[...ae.user,o==null?void 0:o._id]})).then(()=>B()).catch(i=>{var n,t;(t=(n=i.response)==null?void 0:n.data)!=null&&t.message?r(p(i.response.data.message,!0,8)):r(p(`${l("Error")}:: ${(i==null?void 0:i.message)??""}`,!0,8))})}else a&&(a==null?void 0:a.type)===M.single?r(fs({jokeId:(a==null?void 0:a.jokeId.toString())??me.toString(),joke:ge,type:M.single,category:(a==null?void 0:a.category)??X??E.Misc,subCategories:(a==null?void 0:a.subCategories)??(L==null?void 0:L.length)>0?L:void 0,language:(a==null?void 0:a.language)??Ie,safe:!Object.values(C).some(i=>i),user:[o._id],flags:{nsfw:a==null?void 0:a.flags.nsfw,religious:a==null?void 0:a.flags.religious,political:a==null?void 0:a.flags.political,racist:a==null?void 0:a.flags.racist,sexist:a==null?void 0:a.flags.sexist,explicit:a==null?void 0:a.flags.explicit}})).then(()=>{r(B())}).catch(i=>{var n,t;(t=(n=i.response)==null?void 0:n.data)!=null&&t.message?r(p(i.response.data.message,!0,8)):r(p(`${l("Error")}*: ${(i==null?void 0:i.message)??""}`,!0,8))}):a&&(a==null?void 0:a.type)===M.twopart&&r(fs({jokeId:(a==null?void 0:a.jokeId.toString())??me.toString(),setup:ge,delivery:Te,type:M.twopart,category:(a==null?void 0:a.category)??X??E.Misc,subCategories:(L==null?void 0:L.length)>0?L:void 0,language:(a==null?void 0:a.language)??Ie,safe:!Object.values(a==null?void 0:a.flags).some(i=>i),user:[o._id],flags:{nsfw:a==null?void 0:a.flags.nsfw,religious:a==null?void 0:a.flags.religious,political:a==null?void 0:a.flags.political,racist:a==null?void 0:a.flags.racist,sexist:a==null?void 0:a.flags.sexist,explicit:a==null?void 0:a.flags.explicit}})).then(()=>{r(B())}).catch(i=>{var n,t;(t=(n=i.response)==null?void 0:n.data)!=null&&t.message?r(p(i.response.data.message,!0,8)):r(p(`${l("Error")}: ${(i==null?void 0:i.message)??""}`,!0,8))});r(p(`${l("SavedJoke")}`,!1,8))}else{r(p(`${l("LoginOrRegisterToSave")}`,!1,8));return}},Ms=async(e,s,i,n)=>{var t,d,h,v,S,m,J,c,u,w,F,j,ee;if(we(e.id)){Z();return}if(n&&R.some(U=>U.jokeId===e.jokeId&&U.language===g)){Z();return}W(U=>[...U,{jokeId:e.id,language:g}]),(R==null?void 0:R.length)>Se&&W(U=>U.slice(1)),P(s),ms(i??[]),r(se({jokeId:e.id.toString(),joke:e.joke||e.value,type:M.single,category:s,subCategories:i&&(i==null?void 0:i.length)>0?i:void 0,language:le.en,safe:!((t=e==null?void 0:e.categories)!=null&&t.includes("explicit")||(d=e==null?void 0:e.categories)!=null&&d.includes("political")||(h=e==null?void 0:e.categories)!=null&&h.includes("religion")),user:e.user,flags:{nsfw:((v=e.categories)==null?void 0:v.nsfw)??!1,religious:((S=e.categories)==null?void 0:S.religion)??!1,political:((m=e.categories)==null?void 0:m.political)??!1,racist:((J=e.categories)==null?void 0:J.racist)??!1,sexist:((c=e.categories)==null?void 0:c.sexist)??!1,explicit:((u=e.categories)==null?void 0:u.explicit)??!1}})),Ve({explicit:((w=e==null?void 0:e.categories)==null?void 0:w.includes("explicit"))??!1,religious:((F=e==null?void 0:e.categories)==null?void 0:F.includes("religious"))??!1,political:((j=e==null?void 0:e.categories)==null?void 0:j.includes("political"))??!1,racist:!1,sexist:!1,nsfw:((ee=e==null?void 0:e.categories)==null?void 0:ee.includes("explicit"))??!1}),I(e.joke||e.value),O(""),q(e.id),pe(le.en),I(e.joke||e.value)},Os=()=>{const e=he===ne.Unsafe?Q.filter(n=>n.value!=="any"):Q.filter(n=>n.value!=="any"&&n.value!=="explicit"&&n.value!=="religion"&&n.value!=="political"),s=Math.floor(Math.random()*(e==null?void 0:e.length));return e[s]},[xe,Rs]=f.useState([]);f.useEffect(()=>{if(Array.isArray(b)&&(b==null?void 0:b.length)>0&&Array.isArray(T)&&(T==null?void 0:T.length)>0){let e=b==null?void 0:b.map(s=>{const i=T==null?void 0:T.find(t=>t._id==s.author),n=Hs[s.language];return{...s,translatedLanguage:n??"",name:s.anonymous?l("Anonymous"):(i==null?void 0:i.name)??""}});e=N?N?e.filter(s=>s.safe).sort((s,i)=>{var n,t;return((n=i.user)==null?void 0:n.length)-((t=s.user)==null?void 0:t.length)}):[]:e.filter(s=>s.safe===!1).sort((s,i)=>{var n,t;return((n=i.user)==null?void 0:n.length)-((t=s.user)==null?void 0:t.length)}),Rs(e)}},[b,T,g,N]);const Z=async(e=0)=>{const s=_.map(c=>c.value);if(e>5)return;const i=c=>{if(c&&(c==null?void 0:c.length)>0&&Array.isArray(T)&&(T==null?void 0:T.length)>0){const u=c[Math.floor(Math.random()*(c==null?void 0:c.length))];if(R.some(w=>w.jokeId===u.jokeId&&w.language===g)){Z();return}if(W(w=>[...w,{jokeId:u.jokeId,language:g}]),(R==null?void 0:R.length)>Se&&W(w=>w.slice(1)),u){if(q(u.jokeId),pe(g),P(u.category),"joke"in u?I(u.joke):"setup"in u&&I(u.setup),O("delivery"in u?u==null?void 0:u.delivery:""),(u.private===!1||u.private===void 0)&&u.anonymous===!1){const w=T==null?void 0:T.find(F=>F._id==u.author);z((w==null?void 0:w.name)??"")}else z("");r(se(u));return}else{r(p(`${l("Error")}! ${l("NoJokeFoundWithThisSearchTerm")}. ${l("TryAnotherSearchTerm")}`,!0,8)),I(""),O(""),z("");return}}else{r(p(`${l("Error")}! ${l("NoJokeFoundWithThisSearchTerm")}. ${l("TryAnotherSearchTerm")}`,!0,8)),I(""),O(""),z("");return}},n=V?M.twopart:M.single,t=xe==null?void 0:xe.filter(c=>c.language===g&&((s==null?void 0:s.length)===0||s.includes(c.category))&&(c.private===!1&&c.verified===!0||c.private===void 0)&&c.safe===N&&c.type===n),d=(_==null?void 0:_.length)<1,h=_.some(c=>c.value==="ChuckNorris"),v=_.some(c=>c.value==="DadJoke"),S=k.trim()!==""||k!=="&";pe(g);let m=t;if(S){const c=k.replace(/&$/,"");m=t==null?void 0:t.filter(u=>{var w,F,j,ee,U,es,ss,ts;if(u){const Ps=("joke"in u?(w=u.joke)==null?void 0:w.toLowerCase().includes(c.toLowerCase()):!1)||("setup"in u?(F=u.setup)==null?void 0:F.toLowerCase().includes(c.toLowerCase()):!1)||("delivery"in u?(j=u.delivery)==null?void 0:j.toLowerCase().includes(c.toLowerCase()):!1)||((ee=u.name)==null?void 0:ee.toLowerCase().includes(c.toLowerCase()))||((U=u.category)==null?void 0:U.toLowerCase().includes(c.toLowerCase()))||((es=u.subCategories)==null?void 0:es.includes(c==null?void 0:c.toLowerCase()))||((ss=u.translatedLanguage)==null?void 0:ss.toLowerCase().includes(c.toLowerCase())),Ys=(s==null?void 0:s.length)>0?s.includes(u.category):!0,zs=u.language===g,Ks=(y==null?void 0:y.value)!==""&&(y==null?void 0:y.value)!=="any"?(ts=u.subCategories)==null?void 0:ts.includes(y==null?void 0:y.value):!0;return u.safe===N&&u.type===n&&(u.private===!1&&u.verified===!0||u.private===void 0)?zs&&Ys&&Ks&&Ps:!1}})}if(m=m==null?void 0:m.filter(c=>{var w;return!((w=o==null?void 0:o.blacklistedJokes)==null?void 0:w.some(F=>F.jokeId===c.jokeId&&F.language===c.language))}),m&&(m==null?void 0:m.length)>0&&g===le.fi){i(m);return}else if(m&&(m==null?void 0:m.length)>0&&Math.random()<.1){i(m);return}const J=k.replace(/&$/,"");if(h||v){if(g!==le.en){i(m);return}else if(h&&v){const c=Math.floor(us(1,2.999));if(c===1&&h){if(!await Y(G,S?J:null,E.ChuckNorris,!S)){re();return}}else if(c>1&&v&&!await Y(ie,S?J:null,E.DadJoke,!S)){re();return}}else if(h){if(!await Y(G,S?J:null,E.ChuckNorris,!S)){re();return}}else if(v&&!await Y(ie,S?J:null,E.DadJoke,!S)){re();return}}else if(d&&!V){const c=Math.floor(us(1,10.999)),u=S?J:null;c===1?await Y(G,u,E.ChuckNorris,!S)||await Y(ie,u,E.DadJoke,!1):c===2?await Y(ie,u,E.DadJoke,!1)||await Y(G,u,E.ChuckNorris,!S):c>2&&D()}else D()};async function Y(e,s,i,n){var d,h;let t;try{if(i===E.ChuckNorris&&e===G)if(!N&&(!(y!=null&&y.value)||(y==null?void 0:y.value)==="any"))t=await e.getFullyRandomNorrisJoke();else if(y!=null&&y.value&&(y==null?void 0:y.value)!=="any")t=await e.getRandomJokeFromNorrisCategory(y==null?void 0:y.value);else{const v=Os();t=s?await e.searchNorrisJoke(s):await e.getRandomJokeFromNorrisCategory(v.value)}else i===E.DadJoke&&e===ie&&(t=s?await e.searchDadJokes(s):await e.getRandomDadJoke());if(!t)D();else{if(we(t.id)){Z();return}P(i),q(t.id),await Ms(t,i,(t==null?void 0:t.subCategories)??[],n)}}catch(v){(h=(d=v.response)==null?void 0:d.data)!=null&&h.message?r(p(v.response.data.message,!0,8)):console.error(v),D()}finally{}return!!t}const re=()=>{r(p(`${l("Error")}! ${l("NoJokeFoundWithThisSearchTerm")}`,!0,8)),I(""),O("")};f.useEffect(()=>{(_==null?void 0:_.length)<1&&P(null)},[_]);const D=(e=0)=>{const i=_.map(t=>t.value).filter(t=>t!=="ChuckNorris"&&t!=="DadJoke"),n=(i==null?void 0:i.length)>0?i.join(","):"Any";fetch(`https://v2.jokeapi.dev/joke/${n}?${Re}${k}lang=${g}&format=json${he}&type=${Ne}`).then(t=>t.json()).then(t=>{var d,h,v,S,m,J;if(!(e>5)){if(we(t.id)||Re===oe.None&&R.some(c=>c.jokeId===t.jokeId&&c.language===g)){D(e+1);return}if(W(c=>[...c,{jokeId:t.id,language:g}]),(R==null?void 0:R.length)>Se&&W(c=>c.slice(1)),Ve({nsfw:((d=t.flags)==null?void 0:d.nsfw)??!1,religious:((h=t.flags)==null?void 0:h.religious)??!1,political:((v=t.flags)==null?void 0:v.political)??!1,racist:((S=t.flags)==null?void 0:S.racist)??!1,sexist:((m=t.flags)==null?void 0:m.sexist)??!1,explicit:((J=t.flags)==null?void 0:J.explicit)??!1}),P(t.category),t.error)if(n==="Any"){r(p(`${l("Error")}! ${l("NoJokeFoundWithThisSearchTerm")}. ${l("MaybeTryAnotherLanguage")}`,!0,10)),I(""),O(""),q("");return}else{I(""),O(""),r(p(`${l("Error")}! ${l("NoJokeFoundWithThisSearchTerm")}`,!0,8)),q("");return}Ne===M.twopart?(r(se({jokeId:t.id.toString(),setup:t.setup,delivery:t.delivery,type:M.twopart,category:t.category,subCategories:(L==null?void 0:L.length)>0?L:void 0,language:g,safe:!(X===E.Dark||!Object.values(C).some(c=>c)),user:o?[o._id]:[],flags:{nsfw:C.nsfw,religious:C.religious,political:C.political,racist:C.racist,sexist:C.sexist,explicit:C.explicit}})),P(t.category),I(t.setup),O(t.delivery),q(t.id)):(r(se({jokeId:t.id.toString(),joke:t.joke,type:M.single,category:t.category,subCategories:(L==null?void 0:L.length)>0?L:void 0,language:g,safe:!(X===E.Dark||!Object.values(C).some(c=>c)),user:o?[o._id]:[],flags:{nsfw:C.nsfw,religious:C.religious,political:C.political,racist:C.racist,sexist:C.sexist,explicit:C.explicit}})),P(t.category),I(t.joke),O(""),q(t.id))}}).catch(t=>{var d,h;(h=(d=t.response)==null?void 0:d.data)!=null&&h.message?r(p(t.response.data.message,!0,8)):(console.error(t),r(p(`${l("Error")}! ${t.response.data.message}`,!0,8)))})};function we(e){var s;return((s=o==null?void 0:o.blacklistedJokes)==null?void 0:s.some(i=>i.jokeId===e&&i.language===g))??!1}const ks=async()=>{const e=await G.getNorrisCategories(),s=Bs(e),i=N?s.filter(n=>n.value!=="explicit"&&n.value!=="religion"&&n.value!=="political"):s;N&&be(s[0]),hs(i)};f.useEffect(()=>{ks()},[he]),f.useEffect(()=>{k.trim()===""||k==="&"?ke(oe.None):ke(oe.Contains),k==="&"&&Be("")},[k]),f.useEffect(()=>{const e=document.querySelector(".login-container.closed button.open"),s=document.querySelector(".login-container.open button.close"),i=document.querySelector(".register-container.closed button.open"),n=document.querySelector(".register-container.open button.close");e==null||e.addEventListener("click",()=>{$s===!0&&(n==null||n.click()),ye(!0),ve(!1)}),i==null||i.addEventListener("click",()=>{Es===!0&&(s==null||s.click()),ve(!0),ye(!1)}),s==null||s.addEventListener("click",()=>{ye(!1)}),n==null||n.addEventListener("click",()=>{ve(!1)})},[]);const Bs=(e,s)=>{var n;const i=(n=Object.entries(e))==null?void 0:n.map(([t,d])=>({value:d,label:ce[d]&&ce[d][g]?ce[d][g]:d.charAt(0).toUpperCase()+d.slice(1)}));return i.unshift({value:"any",label:ce.any[g]||l("Any")}),i},Ze=(e,s)=>{const i={en:is,es:as,fr:rs,de:ns,pt:os,cs:ls,fi:cs};let n=e;return e===E.ChuckNorris&&(n="ChuckNorris"),e===E.DadJoke&&(n="DadJoke"),i[s][n]},De=st(),qs=()=>{De("/portfolio/jokes?register=register")},Fs=()=>{De("/portfolio/jokes?login=login")},je=(e,s,i)=>{var n;if(window.confirm(`${l("AreYouSureYouWantToHideThisJoke")}`))if((n=o==null?void 0:o.blacklistedJokes)==null?void 0:n.some(d=>d.jokeId===e&&d.language===s)){r(p(l("ThisJokeIsAlreadyBlacklisted"),!0,3)),r(te(o==null?void 0:o._id)).then(()=>r(H())),I(""),O(""),z(""),q("");return}else Array.isArray(T)&&o?r(Zs(o==null?void 0:o._id)).then(d=>{const h=d==null?void 0:d.find(v=>{var S;return((S=v.jokeId)==null?void 0:S.toString())===(e==null?void 0:e.toString())&&v.language===s});h&&r(Ds(h==null?void 0:h._id)).then(()=>r(B()))}).then(()=>{r(js(o==null?void 0:o._id,e,s,i)).then(()=>{r(p(`${l("JokeHidden")}`,!1,3)),r(B()).then(()=>r(te(o==null?void 0:o._id))).then(()=>r(H())).then(()=>{I(""),O(""),z(""),q("")})}).catch(d=>{var h,v;r(B()).then(()=>r(te(o==null?void 0:o._id))).then(()=>r(H())),(v=(h=d.response)==null?void 0:h.data)!=null&&v.message?r(p(d.response.data.message,!0,8)):(console.error(d),r(p(`${l("ErrorDeletingJoke")}`,!1,5))),I(""),O(""),z(""),q("")})}):r(p(`${l("ErrorDeletingJoke")}`,!1,3))},Us=(e,s,i)=>{e.preventDefault(),r(se(s)),$(!0),window.confirm(`${l("AreYouSureYouWantToRestoreThisJoke")}`)&&(o?(r(et(o==null?void 0:o._id,i,s==null?void 0:s.language)).then(n=>{r(B()).then(()=>r(te(o==null?void 0:o._id))).then(()=>r(H())).then(()=>r(p(`${l("JokeRestored")}`,!1,3)))}).catch(n=>{var t,d;(d=(t=n.response)==null?void 0:t.data)!=null&&d.message?r(p(n.response.data.message,!0,8)):(console.error(n),r(p(`${l("ErrorDeletingJoke")}`,!1,3)))}),$(!1)):(r(p(`${l("ErrorDeletingJoke")}`,!1,3)),$(!1))),setTimeout(()=>{window.confirm(`${l("WouldYouLikeToSaveTheJoke")}`)&&(o?(Xe(e),r(B()).then(()=>r(te(o==null?void 0:o._id))).then(()=>r(H())).then(()=>r(p(`${l("SavedJoke")}`,!1,8))).catch(n=>{var t,d;(d=(t=n.response)==null?void 0:t.data)!=null&&d.message?r(p(n.response.data.message,!0,8)):(console.error(n),r(p(`${l("ErrorDeletingJoke")}`,!1,3)))}),$(!1)):(r(p(`${l("ErrorDeletingJoke")}`,!1,3)),$(!1)))},600)};return x.jsxs(x.Fragment,{children:[x.jsx("section",{className:`joke-container card ${g}`,id:"jokeform",children:x.jsx("div",{children:x.jsxs("div",{className:"jokes-wrap",children:[x.jsx("h2",{children:l("TheComediansCompanion")}),x.jsx("p",{className:"center textcenter mb3",children:l("AJokeGeneratorForTheComicallyInclined")}),x.jsx(f.Suspense,{fallback:x.jsxs("div",{className:"flex center margin0auto textcenter",children:[l("Loading"),"..."]}),children:x.jsx(ct,{sending:Qe,handleFormSubmit:Cs,jokeCategory:X,setJokeCategory:P,categoryValues:_,setCategoryValues:Ae,setQueryValue:Be,setLanguage:A,language:g,joke:ge,delivery:Te,jokeId:me,author:gs,options:Ee,getKeyByValue:Ge,query:vs,setQuery:Ss,isCheckedSafemode:N,isCheckedJokeType:V,handleToggleChangeSafemode:We,handleToggleChangeEJokeType:Ts,submitted:xs,reveal:ws,setReveal:Fe,handleJokeSave:Xe,optionsCategory:He,categoryByLanguages:Ce,visibleJoke:_s,setVisibleJoke:Ue,norrisCategories:Q,selectedNorrisCategory:y,setSelectedNorrisCategory:be,hasNorris:Pe,getCategoryInLanguage:Ze,subCategoryResults:L,handleBlacklistUpdate:je})})]})})}),x.jsx("section",{className:`joke-container ${g}`,children:x.jsxs("div",{children:[o?x.jsxs("p",{className:"textcenter",children:[l("LoggedInAs")," ",o==null?void 0:o.name]}):x.jsxs("div",{className:"register-login-wrap",children:[x.jsx("button",{onClick:Fs,children:l("Login")}),x.jsx("button",{onClick:qs,children:l("Register")})]}),o&&x.jsx(f.Suspense,{fallback:x.jsxs("div",{className:"flex center margin0auto textcenter",children:[l("Loading"),"..."]}),children:x.jsx(ft,{userId:o==null?void 0:o._id,language:g,categoryByLanguages:Ce,getKeyByValue:Ge,options:Ee,optionsCategory:He,jokeCategoryByLanguage:Gs,norrisCategories:Q})})]})}),x.jsx("section",{className:`joke-container card ${g}`,children:x.jsx("div",{children:x.jsx(f.Suspense,{fallback:x.jsxs("div",{className:"flex center margin0auto textcenter",children:[l("Loading"),"..."]}),children:x.jsx(ut,{sending:Qe,user:o,handleDelete:Is,language:g,isCheckedSafemode:N,setIsCheckedSafemode:Oe,handleToggleChangeSafemode:We,translateWordLanguage:ds,getKeyofEnum:Ns,options:Ee,optionsSortBy:bs,norrisCategories:Q,getCategoryInLanguage:Ze,handleUpdate:As,setIsEditOpen:ze,editId:Ls,setEditId:Ke,handleRemoveJokeFromBlacklisted:Us,handleBlacklistUpdate:je})})})})]})}const xt=Object.freeze(Object.defineProperty({__proto__:null,default:dt},Symbol.toStringTag,{value:"Module"}));export{xt as J,ie as d,G as n};
