import{r as N,j as s}from"./react-BnFLqAjc.js";import{K as y,cm as v,cn as $,co as k,cp as _,c4 as C,b3 as S,cj as P,W as n,b2 as U,ca as R,ck as D,cl as F,bj as T,cb as q}from"./index-GKJ6stmI.js";import{s as c}from"./edit.module-Tb44_we2.js";const W=({user:e,language:t})=>{const i=y(),[o,b]=N.useState((e==null?void 0:e.name)||""),[m,p]=N.useState(""),u=async d=>{var l,h;d.preventDefault();try{const w={_id:e._id,name:o,passwordOld:m,language:t};e&&i(P(w)).then(a=>{a&&(a.success===!1?i(n(`${U[t]}: ${a.message}`,!0,5)):(i(n(`${a.message??R[t]}`,!1,5)),i(D(a.user)).then(()=>{i(F(e==null?void 0:e._id)).then(()=>i(T()))}),p("")))}).catch(a=>{var x,j,f,E;console.error(a),(j=(x=a.response)==null?void 0:x.data)!=null&&j.message?i(n(a.response.data.message,!0,8)):a.code==="ERR_BAD_REQUEST"&&((E=(f=a.response)==null?void 0:f.data)!=null&&E.message)?i(n(`${U[t]}: ${a.response.data.message}`,!0,5)):setTimeout(()=>{i(n(q[t],!0,5))},2e3)})}catch(r){(h=(l=r.response)==null?void 0:l.data)!=null&&h.message?i(n(r.response.data.message,!0,8)):console.error("error",r)}};return s.jsx(s.Fragment,{children:e?s.jsxs(s.Fragment,{children:[s.jsx("h2",{children:v[t]}),s.jsxs("p",{className:c.p,children:[$[t],": ",s.jsx("strong",{children:e==null?void 0:e.name})]}),s.jsx("p",{className:`${c.p} ${c["p-last"]}`,children:k[t]}),s.jsxs("form",{onSubmit:u,className:c["edit-user"],children:[s.jsx("div",{className:"input-wrap",children:s.jsxs("label",{children:[s.jsx("input",{required:!0,type:"text",name:"name",id:"name-edit",value:o,onChange:({target:d})=>b(d.value)}),s.jsx("span",{children:_[t]})]})}),s.jsx("div",{className:"input-wrap",children:s.jsxs("label",{children:[s.jsx("input",{required:!0,type:"password",name:"old-password",id:"old-password-user",value:m,onChange:({target:d})=>p(d.value.trim())}),s.jsx("span",{children:C[t]})]})}),s.jsx("button",{type:"submit",children:S[t]})]})]}):s.jsx(s.Fragment,{})})};export{W as default};
