import{K as _,r as E,j as e,cC as $,S as C,L as x,co as D,bk as F,cD as N,X as r,bj as j,cu as R,cE as B,cF as P,bB as A,cv as O}from"./index-DbZW51Zp.js";import{s as U}from"./edit.module-Tb44_we2.js";const q=({user:a,language:n,setLanguage:b,options:v,getKeyByValue:w})=>{const t=_(),[c,l]=E.useState(""),[i,y]=E.useState((a==null?void 0:a.language)??n),S=async d=>{var p,m;d.preventDefault();try{const L={_id:a._id,name:a.name,passwordOld:c,language:i};a&&t(N(L)).then(s=>{s&&(s.success===!1?t(r(`${j[n]}: ${s.message}`,!0,5)):(t(r(`${s.message??R[i]}`,!1,5)),t(B(s.user)).then(()=>{t(P(a==null?void 0:a._id)).then(()=>t(A())),b(i)}),l("")))}).catch(s=>{var u,g,h,f;console.error(s),(g=(u=s.response)==null?void 0:u.data)!=null&&g.message?t(r(s.response.data.message,!0,8)):s.code==="ERR_BAD_REQUEST"&&((f=(h=s.response)==null?void 0:h.data)!=null&&f.message)?t(r(`${j[n]}: ${s.response.data.message}`,!0,5)):setTimeout(()=>{t(r(O[n],!0,5))},2e3)})}catch(o){(m=(p=o.response)==null?void 0:p.data)!=null&&m.message?t(r(o.response.data.message,!0,8)):console.error("error",o)}};return e.jsx(e.Fragment,{children:a?e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:$[n]}),e.jsxs("form",{onSubmit:S,className:U["edit-user"],children:[e.jsx(C,{language:n,id:"language-register",className:`language ${U.language}`,instructions:"Language",hide:!0,options:v(x),value:i?{value:i,label:w(x,i)}:void 0,onChange:d=>{y(d==null?void 0:d.value)}}),e.jsx("div",{className:"input-wrap",children:e.jsxs("label",{children:[e.jsx("input",{required:!0,type:"password",name:"old-password",id:"old-password-user-language",value:c,onChange:({target:d})=>l(d.value.trim())}),e.jsx("span",{children:D[n]})]})}),e.jsx("button",{type:"submit",children:F[n]})]})]}):e.jsx(e.Fragment,{})})};export{q as default};
