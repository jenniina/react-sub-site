import{r as i,j as e}from"./react-kX_YxI4E.js";import{be as j,j8 as D,cl as l,j9 as O,ja as B,cz as z,jb as me,ck as y,u as pe,aC as he,jc as xe,b8 as je,jd as be,je as fe,j2 as ke,j3 as ve,j4 as ye,jf as Ee,jg as Te,jh as Se,ji as R,cs as Ce,ci as Ne,cH as we,bB as E,X as Ae,cV as Je,jj as $e,jk as Pe,jl as d,jm as Fe,jn as ge,jo as Ie,jp as qe,jq as Le,bk as De,cP as Oe,ce as Be,i as ze,cp as Re,o as b,cQ as We,c1 as W,jr as H}from"./index-DXi6uXCT.js";import{B as T}from"./ButtonToggle-BtpKf_Xj.js";import{v as He}from"./uuid-Dv1xt2bl.js";import"./dom-to-image-more-CfDXlNbO.js";import"./react-dom-B5MLDbn_.js";import"./scheduler-CzFDRTuY.js";import"./react-redux-BEmJlIGA.js";import"./hoist-non-react-statics-DQogQWOa.js";import"./react-is-DUDD-a5e.js";import"./use-sync-external-store-BPp6CH6k.js";import"./@reduxjs-DhFEcpJw.js";import"./immer-C0GRqQ_d.js";import"./redux-CE3tqztX.js";import"./@babel-DF5_wy6Y.js";import"./redux-thunk-CY0Q9z1Q.js";import"./axios-CCb-kr4I.js";import"./react-icons-D7bD3W54.js";import"./react-router-dom-StiqOUIT.js";import"./react-router-DUuhLvki.js";import"./@remix-run-DTnHqtaE.js";const us=({userId:f,language:s,optionsCategory:M,categoryByLanguages:S,jokeCategoryByLanguage:V,options:_,getKeyByValue:U,norrisCategories:C})=>{const[k,Y]=i.useState(j[D[s]]),[N,w]=i.useState(l.single),[Q,X]=i.useState(O.en),[G,K]=i.useState(B.en),[A,J]=i.useState(""),[$,P]=i.useState(""),[F,g]=i.useState(""),[u,Z]=i.useState(!0),[n,ee]=i.useState(!0),[m,se]=i.useState(!1),[r,te]=i.useState({label:V[s].Misc,value:z.Misc}),ie=me[s],[I,re]=i.useState(""),[p,ae]=i.useState(C[0]),[ce,oe]=i.useState(!1),[q,h]=i.useState(!1);i.useEffect(()=>{const t=I===y.ChuckNorris;oe(t)},[I]);const c=pe(),le=t=>{t.preventDefault(),h(!0);const v=t.currentTarget.nsfw.checked||t.currentTarget.religious.checked||t.currentTarget.political.checked||t.currentTarget.racist.checked||t.currentTarget.sexist.checked||t.currentTarget.explicit.checked;let o;o={jokeId:He(),category:(r==null?void 0:r.value)??y.Misc,subCategories:(r==null?void 0:r.label)===y.ChuckNorris?[p==null?void 0:p.value]:[],language:k,type:l.single,user:[f],private:n,verified:!!n,anonymous:m,author:f,safe:!((r==null?void 0:r.value)===z.Dark||v),flags:{nsfw:t.currentTarget.nsfw.checked,religious:t.currentTarget.religious.checked,political:t.currentTarget.political.checked,racist:t.currentTarget.racist.checked,sexist:t.currentTarget.sexist.checked,explicit:t.currentTarget.explicit.checked}},N===l.single?o={...o,joke:A,type:l.single}:o={...o,setup:$,delivery:F,type:l.twopart},c(Oe(o)).then(a=>{c(Be(f)).then(()=>c(ze())).then(()=>{c(Re()),J(""),P(""),g(""),h(!1)}),c(b(`${We[s]}. ${a.message??""}`,!1,8))}).catch(a=>{var x,L;console.error(a),h(!1),a.code==="ERR_BAD_RESPONSE"?c(b(`${W[s]}: ${a.response.data.message}. ${H[s]}`,!0,8)):(h(!1),(L=(x=a.response)==null?void 0:x.data)!=null&&L.message?c(b(a.response.data.message,!0,8)):c(b(`${W[s]}: ${a.message}. ${H[s]}`,!0,8)))})};i.useEffect(()=>{w(u?l.twopart:l.single)},[u]);const ne=()=>{Z(!u)},de=()=>{ee(!n)},ue=()=>{se(!m)};return i.useEffect(()=>{X(O[s]),K(B[s])},[s]),i.useEffect(()=>{setTimeout(()=>{const t=document.querySelectorAll(".select-container"),v=(t==null?void 0:t.length)+2;t==null||t.forEach((o,a)=>{const x=v-a;o.style.zIndex=`${x}`})},500)},[]),e.jsx(he,{language:s,text:xe[s],className:"submit",wrapperClass:"submit-wrap",children:e.jsxs("div",{className:"submit-inner",children:[e.jsx("h3",{children:je[s]}),e.jsxs("p",{className:"textcenter",children:[be[s]," jenniina.fi"]}),e.jsx("p",{className:"textcenter mb3",children:fe[s]}),e.jsxs("form",{onSubmit:le,className:"form-submit-new",children:[e.jsxs("div",{className:"toggle-wrap",children:[e.jsx(T,{isChecked:u,name:"submit-joketype",id:"submit-joketype",hideLabel:!1,label:`${ke[s]}: `,className:`${s} submit joketype`,on:ve[s],off:ye[s],handleToggleChange:ne,equal:!0}),e.jsx(T,{isChecked:n,name:"submit-private",id:"submit-private",hideLabel:!1,label:`${Ee[s]}: `,className:`${s} submit private`,on:Te[s],off:Se[s],handleToggleChange:de,equal:!1}),e.jsx(T,{isChecked:m,name:"submit-anonymous",id:"submit-anonymous",hideLabel:!1,label:`${R[s]}: `,className:`${s} submit anonymous`,on:Ce[s],off:Ne[s],handleToggleChange:ue,equal:!1})]}),N===l.single?e.jsxs("label",{htmlFor:"submit-joke-single-input",className:"textarea-wrap",children:[e.jsx("span",{children:we[s]}),e.jsx("textarea",{name:"joke",id:"submit-joke-single-input",required:!0,rows:4,value:A,onChange:t=>{J(t.target.value)}})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"input-wrap",children:e.jsxs("label",{htmlFor:"submit-setup-input",children:[e.jsx("input",{type:"text",id:"submit-setup-input",name:"setup",required:!0,value:$,onChange:t=>{P(t.target.value)}}),e.jsx("span",{children:Q})]})}),e.jsx("div",{className:"input-wrap",children:e.jsxs("label",{htmlFor:"submit-delivery-input",children:[e.jsx("input",{type:"text",id:"submit-delivery-input",name:"delivery",value:F,onChange:t=>{g(t.target.value)},required:!0}),e.jsx("span",{children:G})]})})]}),S?e.jsxs(e.Fragment,{children:[e.jsx(E,{language:s,id:"submit-category-select",className:"submit",instructions:`${Ae[s]}:`,selectAnOption:ie,value:r,options:M(S),onChange:t=>{te(t),re(t==null?void 0:t.label)}}),e.jsx(E,{language:s,id:"jokeCategoryNorrisCategories-submit",className:`category extras narrow ${ce?"":"hidden"}`,instructions:"Chuck Norris Category:",selectAnOption:Je[s],value:p,options:C,onChange:t=>{ae(t)}})]}):"",e.jsx(E,{language:s,id:"submit-language",className:"submit narrow",instructions:`${$e[s]}:`,options:_(j),value:s?{value:j[D[k]],label:U(j,k)}:void 0,onChange:t=>{Y(t==null?void 0:t.value)}}),e.jsxs("fieldset",{children:[e.jsx("legend",{children:Pe[s]}),e.jsxs("div",{className:"checkbox-wrap",children:[e.jsxs("div",{children:[e.jsx("input",{type:"checkbox",id:"flag-nsfw",name:"nsfw",value:"nsfw"}),e.jsx("label",{htmlFor:"flag-nsfw",children:d[s].nsfw})]}),e.jsxs("div",{children:[e.jsx("input",{type:"checkbox",id:"flag-religious",name:"religious",value:"religious"}),e.jsx("label",{htmlFor:"flag-religious",children:d[s].religious})]}),e.jsxs("div",{children:[e.jsx("input",{type:"checkbox",id:"flag-political",name:"political",value:"political"}),e.jsx("label",{htmlFor:"flag-political",children:d[s].political})]}),e.jsxs("div",{children:[e.jsx("input",{type:"checkbox",id:"flag-racist",name:"racist",value:"racist"}),e.jsx("label",{htmlFor:"flag-racist",children:d[s].racist})]}),e.jsxs("div",{children:[e.jsx("input",{type:"checkbox",id:"flag-sexist",name:"sexist",value:"sexist"}),e.jsx("label",{htmlFor:"flag-sexist",children:d[s].sexist})]}),e.jsxs("div",{children:[e.jsx("input",{type:"checkbox",id:"flag-explicit",name:"explicit",value:"explicit"}),e.jsx("label",{htmlFor:"flag-explicit",children:d[s].explicit})]})]})]}),e.jsxs("p",{children:[n?Fe[s]:ge[s],e.jsx("br",{}),e.jsx("br",{}),m?Ie[s]:R[s]]}),e.jsx("button",{type:"submit",className:"small",disabled:q,id:"submit-new-joke",children:q?qe[s]:n?Le[s]:De[s]})]})]})})};export{us as default};
