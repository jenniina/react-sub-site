import{r as o,j as s}from"./react-A9DAvxly.js";import{a_ as $,fw as y,aZ as L,i2 as C,c6 as M,hB as D,bS as O,ie as U,ax as _,ig as k,fG as z,bV as H,g2 as I,b0 as p,ih as P,ii as q,bR as v,ij as A,fI as B,ik as T,il as W}from"./index-C6FAuXie.js";import{a as Q}from"./react-redux-CHm9GgGE.js";import{s as x}from"./quiz.module-DTU83NUw.js";import{D as G,o as K,j as V,x as Y,f as Z,y as R,g as J,h as X,F}from"./quiz-BfGJjqZ6.js";import{L as ss}from"./react-router-dom-BQMcumiI.js";const es=({easy:r,medium:a,hard:i,language:t})=>{const{windowWidth:d}=$(),[n,h]=o.useState(!0);return o.useEffect(()=>{d<y?h(!1):h(!0)},[d]),s.jsxs("table",{className:x.highscores,children:[s.jsx("caption",{children:G[t]}),s.jsx("thead",{children:s.jsxs("tr",{className:x.th,children:[s.jsx("th",{children:K[t]}),s.jsx("th",{className:x.score,children:V[t]}),n&&s.jsx("th",{className:x.percentage,children:"%"}),s.jsx("th",{children:Y[t]})]})}),s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("th",{children:Z[t]}),s.jsxs("td",{children:[r?r.score:0,"/300"]}),n&&s.jsxs("td",{children:[+(r.score*100/300).toFixed(1),"%"]}),s.jsx("td",{children:r.score===0||r.time===0?R[t]:s.jsxs(s.Fragment,{children:[Math.floor(r.time/60)<10&&"0",Math.floor(r.time/60),":",r.time%60<10&&"0",r.time%60]})})]}),s.jsxs("tr",{children:[s.jsx("th",{children:J[t]}),s.jsxs("td",{children:[a?a.score:0,"/300"]}),n&&s.jsxs("td",{children:[+(a.score*100/300).toFixed(1),"%"]}),s.jsx("td",{children:a.score===0||a.time===0?R[t]:s.jsxs(s.Fragment,{children:[Math.floor(a.time/60)<10&&"0",Math.floor(a.time/60),":",a.time%60<10&&"0",a.time%60]})})]}),s.jsxs("tr",{children:[s.jsx("th",{children:X[t]}),s.jsxs("td",{children:[i?i.score:0,"/300"]}),n&&s.jsxs("td",{children:[+(i.score*100/300).toFixed(1),"%"]}),s.jsx("td",{children:i.score===0||i.time===0?R[t]:s.jsxs(s.Fragment,{children:[Math.floor(i.time/60)<10&&"0",Math.floor(i.time/60),":",i.time%60<10&&"0",i.time%60]})})]})]})]})},ts=({easy:r,medium:a,hard:i,language:t,setIsFormOpen:d})=>{const n=L(),[h,u]=o.useState(""),[E,f]=o.useState(""),g=o.useRef(null),[m,w]=o.useState({easy:r??{score:0,time:210},medium:a??{score:0,time:210},hard:i??{score:0,time:210}}),[j,S]=o.useState(!1),e=Q(c=>{var l;return(l=c.auth)==null?void 0:l.user});o.useEffect(()=>{e!=null&&e._id&&n(C(e._id)).then(c=>{c!==null&&w(c.highscores)})},[e==null?void 0:e._id]),o.useEffect(()=>{n(M())},[]);const N=()=>{n(I())},b=async c=>{c.preventDefault(),n(p(P[t],!1,8)),await n(q(h,E,"en")).then(()=>{u(""),f("")}).catch(l=>{l.code==="ERR_BAD_REQUEST"?n(p(`${v.en}: ${l.response.data.message}`,!0,8)):l.code==="ERR_NETWORK"&&n(p(`${v.en}: ${l.message}`,!0,8))})};return s.jsx("div",{className:"login-wrap",children:e?s.jsxs(s.Fragment,{children:[s.jsxs("p",{children:[s.jsxs("span",{children:[D[(e==null?void 0:e.language)??"en"]," ",e!=null&&e.name?e==null?void 0:e.name:e.username," "]}),s.jsx(ss,{to:"/edit",children:`${O[e==null?void 0:e.language]}`}),s.jsxs("button",{onClick:N,id:"logout",className:"logout danger",children:[U[(e==null?void 0:e.language)??"en"]," Ã—"]})]}),s.jsx("button",{onClick:()=>S(!j),className:x.showHighscores,children:`${j?"hide":"show"} highscores`}),j&&s.jsx(es,{language:t,easy:m.easy,medium:m.medium,hard:m.hard})]}):s.jsx(s.Fragment,{children:s.jsxs(_,{language:t,className:"accordion-login login-to-save",text:F[t],ref:g,setIsFormOpen:d,hideBrackets:!0,children:[s.jsx("h2",{children:F[t]}),s.jsxs("form",{onSubmit:b,className:`login ${x.login}`,children:[s.jsx("div",{className:"input-wrap",children:s.jsxs("label",{htmlFor:"quiz-username",children:[s.jsx("input",{id:"quiz-username",name:"username",type:"text",value:h,required:!0,autoComplete:"email",onChange:({target:c})=>u(c.value.trim())}),s.jsxs("span",{children:[k[t],": "]})]})}),s.jsx("div",{className:"input-wrap",children:s.jsxs("label",{children:[s.jsx("input",{name:"password",type:"password",required:!0,autoComplete:"current-password",value:E,onChange:({target:c})=>f(c.value.trim())}),s.jsxs("span",{children:[z[t],": "]})]})}),s.jsx("button",{type:"submit",id:"login",className:"login",children:H[t]})]})]})})})},ls=({language:r,user:a,highscoresLocal:i,text:t})=>{const d=L(),[n,h]=o.useState(!1),[u,E]=o.useState(!1),[f,g]=o.useState(""),[m,w]=o.useState(""),[j,S]=o.useState(""),[e,N]=o.useState(""),b=c=>{if(c.preventDefault(),m.trim()!==j.trim()){d(p(B[r],!0,8));return}d(T({name:e,username:f,password:m,language:"en"})).then(async()=>{d(p(W[r],!1,8))}).catch(l=>{console.error(l),d(p(`${v[r]}: ${l.message}`,!0,8))})};return s.jsxs("div",{className:`quiz-register-login-wrap register-login-wrap ${x["register-login-wrap"]}`,children:[s.jsx("div",{className:`${n?"open":""} ${a?"logged":""}`,children:s.jsx(ts,{setIsFormOpen:h,language:r,easy:i.easy,medium:i.medium,hard:i.hard})}),s.jsx("div",{className:`${u?"open":""}`,children:s.jsx(A,{setIsFormOpen:E,language:r,handleRegister:b,username:f,setUsername:g,password:m,setPassword:w,confirmPassword:j,setConfirmPassword:S,name:e,setName:N,text:t})})]})};export{ls as L};
