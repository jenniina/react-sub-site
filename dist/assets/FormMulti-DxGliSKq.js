import{j as e,r as d}from"./react-A9DAvxly.js";import{fn as w,fx as H,fl as E,dT as R,dM as K,fy as _,fz as M,ff as V,fe as Z,f0 as Q,f6 as U,aZ as X,n as g,f7 as T,f8 as ee,f9 as I,b0 as se}from"./index-BWaKbtdG.js";import{r as A,s as q,t as re,u as te,i as ie,j as ae,v as le,w as L,x as W,y as $,z as oe,A as ne,k as ce,l as de,m as D,B as me,C as he,o as ue,D as pe,F as fe,G as xe,g as be,h as je,q as Ee,H as ve,I as Ne,J as ye,E as we,a as Se}from"./form-C1vuQpLD.js";import{a as Fe}from"./axios-BimPEqV4.js";function S({title:r,description:o,children:t}){return e.jsx(e.Fragment,{children:e.jsxs("fieldset",{children:[e.jsxs("legend",{children:[" ",r,e.jsxs("p",{children:[" ",o," "]})]}),t]})})}const ke="_wrapper_1exrd_1",Ce="_steps_1exrd_13",_e="_hiddenform_1exrd_25",Me="_subfield_1exrd_67",Te="_btns_1exrd_151",Ie="_submit_1exrd_167",Ae="_dropdownsingle_1exrd_177",qe="_dropdownmultiple_1exrd_179",l={wrapper:ke,steps:Ce,hiddenform:_e,subfield:Me,btns:Te,submit:Ie,dropdownsingle:Ae,dropdownmultiple:qe};function Y({email:r,message:o,select:t,updateFields:m,language:i}){const p=[{label:w[i],value:H[i]},{label:A[i],value:A[i]},{label:q[i],value:q[i]},{label:E[i],value:E[i]}],[n,c]=d.useState(p[0]);return e.jsxs(S,{title:"Message",description:re[i],children:[e.jsx("div",{className:l.subfield,style:{paddingTop:"4em"},children:e.jsx("div",{className:"input-wrap",children:e.jsxs("label",{children:[e.jsx("input",{id:"form-email",autoFocus:!0,required:!0,type:"email",name:"email",value:r,onChange:s=>m({email:s.target.value})}),e.jsxs("span",{children:[te[i]," ",e.jsx("i",{className:"required","aria-hidden":"true",children:"*"})]})]})})}),e.jsxs("div",{className:l.subfield,children:[e.jsx("label",{children:ie[i]}),e.jsx(R,{language:i,id:"single",className:`${l.dropdownsingle} full`,instructions:w[i],hide:!0,options:p,value:n,onChange:s=>{c(s),m({select:(s==null?void 0:s.label)??(n==null?void 0:n.label)})}})]}),e.jsxs("div",{className:l.subfield,children:[e.jsxs("label",{htmlFor:"form-message",children:[ae[i]," ",e.jsx("i",{className:"required","aria-hidden":"true",children:"*"})]}),e.jsx("textarea",{id:"form-message",required:!0,name:"message",value:o,rows:3,placeholder:le[i],onChange:s=>m({message:s.target.value})})]})]})}function Le({encouragement:r,color:o,dark:t,light:m,gdpr:i,selectmulti:p,clarification:n,updateFields:c,language:s}){const v=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",[h,x]=K(`${v?"local-":""}multivalues`,[]),u=[{label:_[s],value:_[s]},{label:L[s],value:L[s]},{label:W[s],value:W[s]},{label:`${E[s]}, ${M[s]}`,value:E[s]},{label:`${$[s]}, ${M[s]}`,value:$[s]}];return d.useEffect(()=>{c({selectmulti:h==null?void 0:h.map(a=>a==null?void 0:a.value).join(", ")})},[h]),e.jsx(e.Fragment,{children:e.jsxs(S,{title:oe[s],description:ne[s],children:[e.jsxs("div",{className:l.subfield,children:[e.jsx("label",{className:"full left",htmlFor:"form-encouragement",children:ce[s]}),e.jsx("textarea",{id:"form-encouragement",className:"full",autoFocus:!0,name:"encouragement",value:r,rows:2,placeholder:de[s],onChange:a=>c({encouragement:a.target.value})})]}),e.jsxs("div",{className:l.subfield,children:[e.jsx("label",{id:"label-color",className:`left nowrap full ${l.colorlabel}`,htmlFor:"form-color2",children:D[s]}),e.jsx("input",{id:"form-color2",className:"half bg","aria-labelledby":"label-color",type:"text",name:"color",value:o,onChange:a=>c({color:a.target.value})}),e.jsxs("label",{className:"scr",htmlFor:"form-color",children:[D[s]," ",me[s]]}),e.jsx("input",{id:"form-color",className:"half","aria-labelledby":"label-color",type:"color",name:"color",value:o,onChange:a=>c({color:a.target.value})})]}),e.jsxs("div",{className:l.subfield,children:[e.jsx("label",{className:"full",children:he[s]}),e.jsxs("label",{className:"nowrap",children:[e.jsx("input",{id:"form-dark",type:"radio",name:"mode",value:"dark mode",onChange:a=>c({dark:a.target.value})})," ",V[s]]}),e.jsxs("label",{htmlFor:"form-light",className:"nowrap",children:[e.jsx("input",{id:"form-light",type:"radio",name:"mode",value:"light mode",onChange:a=>{c({light:a.target.value})}})," ",Z[s]]})]}),e.jsxs("div",{className:l.subfield,children:[e.jsx("label",{htmlFor:"multiple-hide",children:ue[s]}),e.jsx("span",{style:{position:"relative",zIndex:"2",width:"100%"},children:e.jsx(R,{language:s,multiple:!0,id:"multiple-hide",className:l.dropdownmultiple,instructions:`${w[s]}. ${Q[s]}`,hide:!0,options:u,value:h,onChange:a=>{x(a),c({selectmulti:h==null?void 0:h.map(f=>f==null?void 0:f.value).join(", ")})}})}),e.jsxs("label",{className:"full",children:[e.jsx("span",{children:pe[s]}),e.jsx("input",{className:"bg",type:"text",name:"clarification",onChange:a=>{c({clarification:a.target.value})}})]})]}),e.jsx("div",{children:e.jsxs("label",{className:"radio-checkbox",children:[e.jsx("input",{id:"form-gdpr",required:!0,type:"checkbox",name:"gdpr",value:"gdpr-ok",onChange:a=>{c({gdpr:a.target.value})}}),e.jsx("i",{className:"required","aria-hidden":"true",children:"*"})," ",U[s]," "]})})]})})}function We(r){const[o,t]=d.useState(0);function m(){t(n=>n>=r.length-1?n:n+1)}function i(){t(n=>n<=0?n:n-1)}function p(n){t(n)}return{currentStepIndex:o,step:r[o],steps:r,isFirstStep:o===0,isLastStep:o===r.length-1,goTo:p,next:m,back:i}}function P({firstName:r,lastName:o,updateFields:t,language:m}){return e.jsxs(S,{title:fe[m],description:xe[m],children:[e.jsx("div",{className:"input-wrap",children:e.jsxs("label",{children:[e.jsx("input",{required:!0,type:"text",name:"firstname",value:r,onChange:i=>t({firstName:i.target.value})}),e.jsxs("span",{children:[be[m]," ",e.jsx("i",{className:"required","aria-hidden":"true",children:"*"})]})]})}),e.jsx("div",{className:"input-wrap",children:e.jsxs("label",{className:"drop",children:[e.jsx("input",{id:"form-last-name",required:!0,type:"text",name:"lastname",value:o,onChange:i=>t({lastName:i.target.value})}),e.jsxs("span",{children:[je[m]," ",e.jsx("i",{className:"required","aria-hidden":"true",children:"*"})]})]})})]})}const O={firstName:"",lastName:"",encouragement:"",color:"#FFFFFF",dark:"",light:"",email:"",message:"",gdpr:"",select:"",selectmulti:"",clarification:""},$e="https://react-bg.braveisland-7060f196.westeurope.azurecontainerapps.io",De=async r=>(await Fe.post(`${$e}/api/send-email-form`,r)).data;function Be({language:r}){const o=d.useRef(),[t,m]=d.useState(O),[i,p]=d.useState(!1),n=X();function c(N){m(y=>({...y,...N}))}const{steps:s,currentStepIndex:v,step:h,isFirstStep:x,isLastStep:u,back:a,next:f,goTo:B}=We([d.createElement(P,{...t,updateFields:c,key:"InitialForm",language:r}),d.createElement(Y,{...t,updateFields:c,key:"MessageForm",language:r}),d.createElement(Le,{...t,updateFields:c,key:"ExtrasForm",language:r})]);async function z(N){if(N.preventDefault(),!u)return f();if(o.current)try{p(!0),await De(t).then(()=>{p(!1),B(0),m(O),k(!0),setTimeout(()=>{k(!1)},1e5),n(se(I[r],!1,8))})}catch(y){console.error("error",y),alert(Se[r])}}function J(){x&&(t.firstName==null||t.firstName==""||t.lastName==null||t.lastName=="")?(b(!0),setTimeout(()=>{b(!1)},3e3)):!x&&!u&&(t.email==null||t.email.trim()==""||t.message==null||t.message.trim()=="")?(b(!0),setTimeout(()=>{b(!1)},3e3)):f()}const[F,b]=d.useState(!1),[G,k]=d.useState(!1),j=d.useRef(),C=d.useRef();return d.useEffect(()=>{if(!(j.current==null||C.current==null))return j.current.style.top="-2em",()=>{}},[F]),e.jsxs("div",{className:l.wrapper,children:[e.jsx("p",{children:g[r]}),e.jsxs("form",{ref:o,onSubmit:z,"aria-labelledby":"steps",children:[e.jsxs("span",{id:"steps",className:l.steps,children:[Ee[r]," ",ve[r]," ",e.jsxs("span",{children:[v+1," / ",s.length]})]}),e.jsx("div",{className:l.hiddenform,children:u?e.jsxs(e.Fragment,{children:[d.createElement(P,{...t,updateFields:c,language:r,key:"InitialForm2"}),d.createElement(Y,{...t,updateFields:c,language:r,key:"MessageForm2"})]}):""}),h,e.jsxs("div",{className:l.btns,style:{position:"relative"},children:[!x&&e.jsxs("button",{type:"button",onClick:a,children:[e.jsx("span",{"aria-hidden":"true",children:"«"})," ",Ne[r]]}),!u&&e.jsxs("button",{ref:C,type:"button",className:u?l.submit:l.next,onClick:J,children:[i?T[r]:ye[r]," ",e.jsx("span",{"aria-hidden":"true",children:"»"})]}),u&&e.jsxs("button",{className:u?l.submit:l.next,type:"submit",children:[i?T[r]:ee[r]," ",e.jsx("span",{"aria-hidden":"true",children:"»"})]}),F&&e.jsx("div",{ref:j,"aria-live":"assertive",style:{position:"absolute",fontWeight:"bold",color:"inherit",letterSpacing:"0.04em"},children:we[r]}),G&&e.jsx("div",{ref:j,"aria-live":"polite",style:{position:"absolute",top:"-1.4em",fontWeight:"bold",color:"inherit",letterSpacing:"0.04em"},children:I[r]})]})]})]})}export{Be as F};
