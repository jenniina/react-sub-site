const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoginRegisterCombo-QUkcKH1a.js","assets/react-B26j9x-B.js","assets/dom-to-image-more-sr33WCep.js","assets/index-ba3uvdEn.js","assets/react-dom-C5TvV5XQ.js","assets/scheduler-C323NY8X.js","assets/react-redux-EG6qnwNo.js","assets/hoist-non-react-statics-C-Qo8PK8.js","assets/react-is-BwqtTtay.js","assets/use-sync-external-store-BqPSEvA7.js","assets/@reduxjs-D09xkNSb.js","assets/immer-C0GRqQ_d.js","assets/redux-D9aXM7rm.js","assets/@babel-CYk816RD.js","assets/redux-thunk-CY0Q9z1Q.js","assets/axios-ngrFHoWO.js","assets/react-icons-W-DbsVi9.js","assets/react-router-dom-Dghs3TPc.js","assets/react-router-vPOY4muN.js","assets/@remix-run-ox1qIyJK.js","assets/react-helmet-async-CnDSc5Ri.js","assets/react-fast-compare-BHbKlhN4.js","assets/invariant-B_pwkeTo.js","assets/shallowequal-C7ef0Lra.js","assets/index-lQ2kPkfG.css","assets/quiz.module-DCrCubZg.js","assets/quiz-Bmyx5hYj.css"])))=>i.map(i=>d[i]);
import{L as E,u as _,i as L,g as b,e as x,a as k,h as P,_ as F}from"./index-ba3uvdEn.js";import{a as r,j as e}from"./react-B26j9x-B.js";import{a as j}from"./react-redux-EG6qnwNo.js";import{s as g}from"./quiz.module-DCrCubZg.js";import{c as O}from"./react-router-vPOY4muN.js";import"./react-dom-C5TvV5XQ.js";import"./dom-to-image-more-sr33WCep.js";import"./scheduler-C323NY8X.js";import"./@reduxjs-D09xkNSb.js";import"./immer-C0GRqQ_d.js";import"./redux-D9aXM7rm.js";import"./@babel-CYk816RD.js";import"./redux-thunk-CY0Q9z1Q.js";import"./axios-ngrFHoWO.js";import"./react-icons-W-DbsVi9.js";import"./react-router-dom-Dghs3TPc.js";import"./@remix-run-ox1qIyJK.js";import"./hoist-non-react-statics-C-Qo8PK8.js";import"./react-is-BwqtTtay.js";import"./react-helmet-async-CnDSc5Ri.js";import"./react-fast-compare-BHbKlhN4.js";import"./invariant-B_pwkeTo.js";import"./shallowequal-C7ef0Lra.js";import"./use-sync-external-store-BqPSEvA7.js";const A=r.lazy(()=>F(()=>import("./LoginRegisterCombo-QUkcKH1a.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]))),fe=({language:q})=>{const{t:s}=r.useContext(E),{points:a,highscores:m,finalSeconds:i}=j(t=>t.questions),{mode:o}=j(t=>t.difficulty),l=+(a*100/300).toFixed(1),p=O(),[C,S]=r.useState(!1),[T,w]=r.useState(!1),[$,D]=r.useState(""),[H,M]=r.useState(""),[Q,R]=r.useState(""),[B,U]=r.useState(""),z=i%60,N=Math.floor(i/60),d=_(),c=j(t=>{var n;return(n=t.auth)==null?void 0:n.user});r.useEffect(()=>{d(L())},[]),r.useEffect(()=>{i===0&&p("/portfolio/quiz")},[]);const v=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1";r.useEffect(()=>{(!c&&a!==0&&i!==0||i===void 0)&&localStorage.setItem(`${v?"local-":""}quiz-highscores`,JSON.stringify(m)),(c!=null&&c._id&&a!==0&&i!==0||c!=null&&c._id&&i!==void 0)&&d(b(c._id)).then(t=>{if(t===null){const n={highscores:{...m,[o]:{score:a,time:i}},user:c._id};d(x(s("NewHighscore"),!1,3)),d(k(n)).then(u=>{d(P(c._id)).then(f=>{})})}else if(t!==null&&t.highscores[o].score<=a){const n={highscores:{...t.highscores,[o]:{score:a,time:t.highscores[o].time}},user:c._id};t.highscores[o].score<a?(d(x(s("NewHighscore"),!1,3)),n.highscores[o].time=i):t.highscores[o].score===a&&t.highscores[o].time>i&&(d(x(s("FasterThanBefore"),!1,3)),n.highscores[o].time=i),d(k(n)).then(u=>{})}})},[]);let h;switch(!0){case l===100:h=s("Perfect");break;case(l>=80&&l<100):h=s("Excellent");break;case(l>=50&&l<80):h=s("GoodJob");break;case(l>=0&&l<50):h=s("BadLuck");break;default:h=""}r.useEffect(()=>{const t=document.querySelector(".login-wrap .open"),n=document.querySelector(".login-wrap .close"),u=document.querySelector(".register-wrap .open"),f=document.querySelector(".register-wrap .close");t==null||t.addEventListener("click",()=>{S(!0)}),n==null||n.addEventListener("click",()=>{S(!1)}),u==null||u.addEventListener("click",()=>{w(!0)}),f==null||f.addEventListener("click",()=>{w(!1)})},[]);const y=()=>{p("/portfolio/quiz")};return e.jsx(e.Fragment,{children:i!==0&&e.jsx(e.Fragment,{children:e.jsx("section",{className:`card ${g.top}`,children:e.jsxs("div",{children:[e.jsxs("div",{className:`${g.quiz}`,children:[e.jsx("h1",{className:g.h1,children:e.jsxs("a",{href:"#",onClick:y,children:["« ",s("QuizApp")]})}),e.jsx("h2",{children:h}),e.jsxs("p",{className:"result",children:[s("YouScored")," ",e.jsx("strong",{children:a})," ",s("OutOf300Points")," (",l,"%)"]}),e.jsxs("p",{children:[s("Difficulty"),":"," ",(()=>{switch(o){case"easy":return s("Easy");case"medium":return s("Medium");case"hard":return s("Hard");default:return o}})()]}),e.jsx("p",{children:i===0?e.jsxs(e.Fragment,{children:[s("Speed"),": ",s("NA")]}):e.jsxs(e.Fragment,{children:[s("Speed"),": ",N<10&&"0",N,":",z<10&&"0",z]})}),e.jsxs("p",{className:"highscore",children:["(",s("Highscore"),": ",m[o].score," ",s("Points"),")"]}),e.jsxs("div",{className:`${g.reset}`,children:[e.jsx("button",{className:"btn",onClick:()=>p("/portfolio/quiz"),children:s("BackToMenu")}),e.jsx("button",{className:"btn",onClick:()=>p(`/portfolio/quiz/difficulty/${o}`),children:s("TryAgain")})]})]}),e.jsx(r.Suspense,{fallback:e.jsxs("div",{className:"flex center margin0auto textcenter",children:[s("Loading"),"..."]}),children:e.jsx(A,{language:q,user:c,highscoresLocal:m,text:"quizfinish"})})]})})})})};export{fe as default};
