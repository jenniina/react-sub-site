import{r as E,j as e}from"./react-BnFLqAjc.js";import{K as _,ci as $,S as N,L as j,c4 as R,b3 as C,cj as D,W as d,b2 as x,ca as F,ck as P,cl as A,bj as B,cb as O}from"./index-GKJ6stmI.js";import{s as U}from"./edit.module-Tb44_we2.js";const z=({user:a,language:n,setLanguage:b,options:v,getKeyByValue:w})=>{const t=_(),[c,l]=E.useState(""),[r,y]=E.useState((a==null?void 0:a.language)??n),S=async i=>{var p,m;i.preventDefault();try{const L={_id:a._id,name:a.name,passwordOld:c,language:r};a&&t(D(L)).then(s=>{s&&(s.success===!1?t(d(`${x[n]}: ${s.message}`,!0,5)):(t(d(`${s.message??F[r]}`,!1,5)),t(P(s.user)).then(()=>{t(A(a==null?void 0:a._id)).then(()=>t(B())),b(r)}),l("")))}).catch(s=>{var u,g,h,f;console.error(s),(g=(u=s.response)==null?void 0:u.data)!=null&&g.message?t(d(s.response.data.message,!0,8)):s.code==="ERR_BAD_REQUEST"&&((f=(h=s.response)==null?void 0:h.data)!=null&&f.message)?t(d(`${x[n]}: ${s.response.data.message}`,!0,5)):setTimeout(()=>{t(d(O[n],!0,5))},2e3)})}catch(o){(m=(p=o.response)==null?void 0:p.data)!=null&&m.message?t(d(o.response.data.message,!0,8)):console.error("error",o)}};return e.jsx(e.Fragment,{children:a?e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:$[n]}),e.jsxs("form",{onSubmit:S,className:U["edit-user"],children:[e.jsx(N,{language:n,id:"language-register",className:`language ${U.language}`,instructions:"Language",hide:!0,options:v(j),value:r?{value:r,label:w(j,r)}:void 0,onChange:i=>{y(i==null?void 0:i.value)}}),e.jsx("div",{className:"input-wrap",children:e.jsxs("label",{children:[e.jsx("input",{required:!0,type:"password",name:"old-password",id:"old-password-user-language",value:c,onChange:({target:i})=>l(i.value.trim())}),e.jsx("span",{children:R[n]})]})}),e.jsx("button",{type:"submit",children:C[n]})]})]}):e.jsx(e.Fragment,{})})};export{z as default};
