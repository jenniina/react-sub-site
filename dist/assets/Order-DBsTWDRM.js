import{r as d,j as e}from"./react-kX_YxI4E.js";import{L,u as q,l as N,w as i,e as D}from"./index-B_tELgeU.js";import{c as P}from"./cart-CgS8CQgD.js";import"./dom-to-image-more-CfDXlNbO.js";import"./react-dom-B5MLDbn_.js";import"./scheduler-CzFDRTuY.js";import"./react-redux-BEmJlIGA.js";import"./hoist-non-react-statics-DQogQWOa.js";import"./react-is-DUDD-a5e.js";import"./use-sync-external-store-BPp6CH6k.js";import"./@reduxjs-DhFEcpJw.js";import"./immer-C0GRqQ_d.js";import"./redux-CE3tqztX.js";import"./@babel-DF5_wy6Y.js";import"./redux-thunk-CY0Q9z1Q.js";import"./axios-CCb-kr4I.js";import"./react-icons-CzVo0GbG.js";import"./react-router-dom-StiqOUIT.js";import"./react-router-DUuhLvki.js";import"./@remix-run-DTnHqtaE.js";const Z=({language:S,paidStatus:c,itemStatus:l,splitToLines:v,info:y})=>{var m,j,f,g;const{t}=d.useContext(L),p=q(),w=N(),[r,I]=d.useState(null),[h,u]=d.useState(""),[A,o]=d.useState(!1),x=async(s=h)=>{var a,b;o(!0);try{const n=await P.getOrderByOrderID(S,s),O={...n,createdAt:new Date(n.createdAt),updatedAt:new Date(n.updatedAt)};I(O),o(!1)}catch(n){(b=(a=n.response)==null?void 0:a.data)!=null&&b.message?p(D(n.response.data.message,!0,8)):p(D(n.message,!0,8)),o(!1)}};return d.useEffect(()=>{const a=new URLSearchParams(window.location.search).get("orderID");a&&(u(a),x(a))},[]),e.jsxs("div",{className:`${i["order-wrap"]} ${w?i.light:""}`,children:[e.jsxs("form",{onSubmit:s=>{s.preventDefault(),x()},children:[e.jsx("div",{className:"input-wrap",children:e.jsxs("label",{children:[e.jsx("input",{type:"text",required:!0,name:"orderID",value:h,onChange:s=>u(s.target.value)}),e.jsx("span",{className:"label",children:t("OrderID")})]})}),e.jsx("button",{type:"submit",disabled:A,children:t("Submit")})]}),r&&e.jsxs("div",{children:[e.jsx("h2",{children:r.orderID}),e.jsxs("div",{className:i["order-items"],children:[(m=r.items)==null?void 0:m.map(s=>e.jsxs("div",{className:i["order-item"],children:[e.jsxs("h3",{children:[s.name,s.id==="misc-quote"?"":` x ${s.quantity}`]}),e.jsx("p",{children:s.description}),e.jsxs("p",{children:[e.jsxs("strong",{children:[t("Price"),":"]})," ",s.id==="misc-quote"?s.price+" €":s.price+" x "+s.quantity+" = "+s.quantity*s.price+" €"]}),e.jsxs("p",{children:[e.jsxs("strong",{children:[t("Info"),":"]})," ",e.jsx("br",{})," ",v(s.details)]}),e.jsxs("p",{children:[e.jsxs("strong",{children:[t("Status"),":"]})," ",l(s.status)," "]}),s.id==="misc-quote"?null:e.jsxs("p",{children:[e.jsxs("strong",{children:[t("PaymentState"),":"]})," ",c[s.paid]]},s.id)]},s.id))," "]}),e.jsxs("div",{className:i["info-wrap"],children:[e.jsxs("table",{className:`${i["info-table"]}`,children:[e.jsx("caption",{children:t("Info")}),e.jsx("tbody",{children:Object.keys(r.info).map(s=>{var a;return s==="_id"?null:r.info[s]!==null&&((a=r.info[s])==null?void 0:a.trim())!==""&&e.jsxs("tr",{children:[e.jsxs("th",{children:[y(s),":"]}),e.jsx("td",{children:r.info[s]})]},s)})})]}),e.jsx("p",{children:r.extra}),e.jsxs("p",{children:[t("Total"),": ",e.jsxs("big",{children:[r.total," € "]}),e.jsx("br",{})]}),e.jsxs("p",{children:[t("Status"),": ",l(r.status)]}),e.jsxs("p",{children:[t("PaymentState"),":"," ",c[r.items.every(s=>s.paid==="full")?"full":r.items.every(s=>s.paid==="none")?"none":"partial"]]}),e.jsxs("p",{children:[e.jsxs("strong",{children:[t("Ordered"),": "]}),(j=r.createdAt)==null?void 0:j.toLocaleDateString()," ",(f=r.createdAt)==null?void 0:f.toLocaleTimeString()," ",e.jsx("br",{}),e.jsxs("strong",{children:[t("LastUpdated"),": "]}),r.updatedAt.toLocaleDateString()," ",(g=r.updatedAt)==null?void 0:g.toLocaleTimeString()]})]})]})]})};export{Z as default};
