import{r as I,j as u}from"./react-A9DAvxly.js";import{gm as G,io as V,u as H,le as C,iv as E,a2 as J,G as P,lf as K,lg as O,iu as Q}from"./index-DQhGG1l7.js";import"./hoist-non-react-statics-D5aJipOz.js";import"./react-dom-CxfJ6lHP.js";import"./scheduler-CzFDRTuY.js";import"./react-redux-C4cSaZU-.js";import"./react-is-DUDD-a5e.js";import"./use-sync-external-store-DEc9BFqZ.js";import"./@reduxjs-DhFEcpJw.js";import"./immer-C0GRqQ_d.js";import"./redux-CE3tqztX.js";import"./@babel-DF5_wy6Y.js";import"./redux-thunk-CY0Q9z1Q.js";import"./axios-CCb-kr4I.js";import"./react-icons-yVutJqMS.js";import"./react-router-dom-j9Ns2JNj.js";import"./react-router-BoqxkIr7.js";import"./@remix-run-DTnHqtaE.js";const X=({d:s,layer:w,language:c,item:r,index:h,start:m,movement:x,stopMovementCheck:y,stopMoving:T,wheel:S,focused:j,blurred:M,selectedvalue0:o,setFocusedBlob:f,dragUlRef:n,removeBlob:A,mode:l,changeBlobLayer:g,layerAmount:B,changeColor:k})=>{const v=s===0?33:G(22,r.i*2.6,50),{dispatch:b}=I.useContext(V),N=H(),d={background:`${r.background}`,display:"block",left:`${r.x}`,top:`${r.y}`,zIndex:`${r.z}`,"--i":isNaN(Number(r.i))?"10":`${r.i}`,"--layer":`${w}`,WebkitFilter:`blur(${v}px)`,filter:`blur(${v}px)`},i=s===0?["5.9px","8.2px","9.9px","10.8px","10.7px","10.5px","10px"]:["5.1px","5.4px","6.5px","7px","7.8px","8.4px","8.6px"],q=e=>{if(l==="change-color")k(r.id);else if(l==="delete")A(r);else if(l==="clone")b({type:"duplicateDraggable",payload:{d:s,draggable:r}});else if(l==="layer-up"){let t=r.layer;t<B-1?(t+=1,g(r,t)):N(P(K[c],!0,4))}else if(l==="layer-down"){let t=r.layer;t>0?(t-=1,g(r,t)):N(P(O[c],!0,4))}else if(l==="scale-down"){let t=r.i;t=isNaN(t)?10:t,t-=.4,t=Math.min(Math.max(7,t),36),b({type:"partialUpdate",payload:{d:s,id:r.id,update:{i:t}}})}else if(l==="scale-up"){let t=r.i;t=isNaN(t)?10:t,t+=.4,t=Math.min(Math.max(7,t),36),b({type:"partialUpdate",payload:{d:s,id:r.id,update:{i:t}}})}};return u.jsxs("li",{onFocus:e=>{var a;n&&n.current&&((a=n.current)==null||a.setAttribute("aria-activedescendant",`${e.target.id}`));const t=e.target;setTimeout(()=>{var F,L;const p=t.getBoundingClientRect(),D=(F=t.parentNode)==null?void 0:F.getBoundingClientRect(),$=t.closest(".drag-wrap-outer"),z=$==null?void 0:$.scrollLeft,W=$==null?void 0:$.scrollTop;f({top:p.top-D.top-W,left:p.left-D.left-z,width:p.width,height:p.height}),o.current&&(o.current.textContent=`${C[c]}: ${(L=t.querySelector("span"))==null?void 0:L.textContent}`)},500),j(t)},onBlur:e=>{var t;f(null),M(e.target),n&&n.current&&((t=n.current)==null||t.removeAttribute("aria-activedescendant")),o.current&&(o.current.textContent=`${E[c]}`)},className:`dragzone animation ${l}`,id:r.id,role:"option",tabIndex:0,style:d,onClick:q,children:[u.jsx("div",{className:"draggable-overlay",style:Number(r.i)<8?{width:`calc(var(--i) * ${i[0]})`,height:`calc(var(--i) * ${i[0]})`}:Number(r.i)<10?{width:`calc(var(--i) * ${i[1]})`,height:`calc(var(--i) * ${i[1]})`}:Number(r.i)<20?{width:`calc(var(--i) * ${i[2]})`,height:`calc(var(--i) * ${i[2]})`}:Number(r.i)<24?{width:`calc(var(--i) * ${i[3]})`,height:`calc(var(--i) * ${i[3]})`}:Number(r.i)<28?{width:`calc(var(--i) * ${i[4]})`,height:`calc(var(--i) * ${i[4]})`}:Number(r.i)<32?{width:`calc(var(--i) * ${i[5]})`,height:`calc(var(--i) * ${i[5]})`}:isNaN(Number(r.i))||r.i===null||r.i===void 0?{width:`7 * ${i[6]})`,height:`7 * ${i[6]})`}:{width:`calc(var(--i) * ${i[6]})`,height:`calc(var(--i) * ${i[6]})`},onMouseDown:e=>{var a,p;e.stopPropagation();const t=e.currentTarget.parentElement;t.draggable=!0,o.current&&(o.current.textContent=`${C[c]}: ${(a=t==null?void 0:t.querySelector("span"))==null?void 0:a.textContent}`),n&&n.current&&((p=n.current)==null||p.setAttribute("aria-activedescendant",`${t.id}`)),m(e,t)},onMouseMove:e=>{var t;if(e.buttons===1){e.stopPropagation();const a=e.currentTarget.parentElement;a.draggable=!0,x(e,a),o.current&&(o.current.textContent=`${C[c]}: ${(t=a==null?void 0:a.querySelector("span"))==null?void 0:t.textContent}`)}},onMouseLeave:e=>{var a;e.stopPropagation();const t=e.currentTarget.parentElement;t.draggable=!1,n&&n.current&&((a=n.current)==null||a.removeAttribute("aria-activedescendant")),T(e,t),o.current&&(o.current.textContent=`${E[c]}`)},onMouseUp:e=>{var a;const t=e.currentTarget.parentElement;t.draggable=!1,y(e,t),n&&n.current&&((a=n.current)==null||a.removeAttribute("aria-activedescendant")),o.current&&(o.current.textContent=`${E[c]}`)},onTouchStart:e=>{var a,p;e.preventDefault(),e.stopPropagation();const t=e.currentTarget.parentElement;t.draggable=!0,n&&n.current&&((a=n.current)==null||a.setAttribute("aria-activedescendant",`${t.id}`)),m(e,t),o.current&&(o.current.textContent=`${C[c]}: ${(p=t==null?void 0:t.querySelector("span"))==null?void 0:p.textContent}`)},onTouchMove:e=>{e.preventDefault(),e.stopPropagation();const t=e.currentTarget.parentElement;t.draggable=!0,x(e,t)},onTouchEnd:e=>{var a;const t=e.currentTarget.parentElement;t.draggable=!1,n&&n.current&&((a=n.current)==null||a.removeAttribute("aria-activedescendant")),y(e,t),o.current&&(o.current.textContent=`${E[c]}`)},onWheel:e=>{const t=e.currentTarget.parentElement;S(t)}}),u.jsxs("span",{className:"scr",children:[J[c]," ",r.number]})]},h)},$t=({layer_:s,className:w,language:c,d:r,items:h,saveDraggables:m,dragUlRef:x,selectedvalue0:y,setFocusedBlob:T,start:S,movement:j,stopMovementCheck:M,stopMoving:o,wheel:f,focused:n,blurred:A,removeBlob:l,mode:g,layerAmount:B,changeBlobLayer:k,changeColor:v})=>{const b=r===0?0:1,N={WebkitFilter:`url(#svgfilter${b})`,filter:`url(#svgfilter${b})`,backgroundColor:"transparent",position:"absolute",top:0,left:0,height:"100%",width:"100%",pointerEvents:"none"};return u.jsxs(u.Fragment,{children:[u.jsxs("span",{id:`listbox${r}-layer${s}-label`,className:"scr",children:[Q[c]," ",s+1]}),u.jsx("ul",{ref:x,role:"listbox",id:`listbox${r}-layer${s}`,className:`drag-container-layer drag-container${r}-layer drag-container${r}-layer${s} ${w}`,"aria-labelledby":`listbox${r}-layer${s}-label`,"aria-activedescendant":"",style:N,children:h==null?void 0:h.map((d,i)=>{if(d!=null)return u.jsx(X,{layer:s,d:r,language:c,item:d,index:i,start:S,movement:j,stopMovementCheck:M,stopMoving:o,wheel:f,focused:n,blurred:A,selectedvalue0:y,setFocusedBlob:T,dragUlRef:x,removeBlob:l,mode:g,changeBlobLayer:k,layerAmount:B,changeColor:v},i)})})]})};export{$t as default};
