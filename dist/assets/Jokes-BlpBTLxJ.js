const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FormJoke-B5qigDYW.js","assets/index-C0uTZr51.js","assets/react-B26j9x-B.js","assets/dom-to-image-more-sr33WCep.js","assets/react-dom-C5TvV5XQ.js","assets/scheduler-C323NY8X.js","assets/react-redux-EG6qnwNo.js","assets/hoist-non-react-statics-C-Qo8PK8.js","assets/react-is-BwqtTtay.js","assets/use-sync-external-store-BqPSEvA7.js","assets/@reduxjs-D09xkNSb.js","assets/immer-C0GRqQ_d.js","assets/redux-D9aXM7rm.js","assets/@babel-CYk816RD.js","assets/redux-thunk-CY0Q9z1Q.js","assets/axios-ngrFHoWO.js","assets/react-icons-BjZ8OXEo.js","assets/react-router-dom-Dghs3TPc.js","assets/react-router-vPOY4muN.js","assets/@remix-run-ox1qIyJK.js","assets/react-helmet-async-CnDSc5Ri.js","assets/react-fast-compare-BHbKlhN4.js","assets/invariant-B_pwkeTo.js","assets/shallowequal-C7ef0Lra.js","assets/index-lQ2kPkfG.css","assets/ButtonToggle-CWl8mh2a.js","assets/ButtonToggle-CsVqfVrg.css","assets/JokeSubmit-vTlOQaqk.js","assets/uuid-BOvFkHkt.js","assets/UserJokes-Bo8ihdL-.js"])))=>i.map(i=>d[i]);
import{L as Vs,q as Ws,Q as is,R as $,U as M,V as oe,W as le,u as Hs,X as Gs,i as G,Y as B,e as p,Z as rs,$ as ns,a0 as os,a1 as ls,a2 as cs,a3 as fs,a4 as Xs,a5 as we,a6 as Zs,_ as Le,a7 as te,a8 as Ds,a9 as js,aa as et,ab as _e,ac as us,ad as ae,ae as st,af as tt,ag as ce,E as fe,w as ds}from"./index-C0uTZr51.js";import{a as f,j as x}from"./react-B26j9x-B.js";import{a as ue}from"./react-redux-EG6qnwNo.js";import{a as K}from"./axios-ngrFHoWO.js";import{c as at}from"./react-router-vPOY4muN.js";const de="https://api.chucknorris.io/jokes",it=async()=>(await K.get(`${de}/categories`)).data,rt=async()=>(await K.get(`${de}/random`)).data,nt=async g=>(await K.get(`${de}/random?category=${g}`)).data,ot=async g=>{const A=await K.get(`${de}/search?query=${g}`);if(!A.data.result||A.data.result.length===0)return;const l=Math.floor(Math.random()*A.data.result.length);return A.data.result[l]},X={getNorrisCategories:it,getFullyRandomNorrisJoke:rt,getRandomJokeFromNorrisCategory:nt,searchNorrisJoke:ot},Te="https://icanhazdadjoke.com/",lt=async()=>(await K.get(Te,{headers:{Accept:"application/json"}})).data,ct=async g=>{const A=await K.get(`${Te}/search?term=${g}&limit=100`,{headers:{Accept:"application/json"}});if(!A.data||A.data.results.length===0)return;const l=Math.floor(Math.random()*A.data.results.length);return A.data.results[l]},ft=async g=>(await K.get(`${Te}/j/${g}`,{headers:{Accept:"application/json"}})).data,ie={getRandomDadJoke:lt,searchDadJokes:ct,getDadJokeById:ft},ut=f.lazy(()=>Le(()=>import("./FormJoke-B5qigDYW.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]))),dt=f.lazy(()=>Le(()=>import("./JokeSubmit-vTlOQaqk.js"),__vite__mapDeps([27,2,3,1,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,28]))),gt=f.lazy(()=>Le(()=>import("./UserJokes-Bo8ihdL-.js"),__vite__mapDeps([29,2,3,16,1,4,5,6,7,8,9,10,11,12,13,14,15,17,18,19,20,21,22,23,24,25,26])));function pt({language:g,setLanguage:A}){const{t:l}=f.useContext(Vs),Q=Ws(),b=ue(e=>{var s;return(s=e.jokes)==null?void 0:s.jokes}),i=ue(e=>{var s;return(s=e.jokes)==null?void 0:s.joke}),T=ue(e=>e.users),o=ue(e=>{var s;return(s=e.auth)==null?void 0:s.user}),ge={en:is,es:fs,fr:cs,de:ls,pt:os,cs:ns,fi:rs},gs=l("LanguageTitle"),[pe,I]=f.useState(""),[Ce,O]=f.useState(""),[ps,z]=f.useState(""),[Ie,hs]=f.useState(ge.en),[Ae,he]=f.useState(g),[Z,Y]=f.useState($.Misc),[_,be]=f.useState([]),[V,ms]=f.useState([{value:"any",label:"Any"}]),[y,Ne]=f.useState(V[0]),[L,ys]=f.useState([]),[Je,Me]=f.useState(M.twopart),[W,vs]=f.useState(!1),[me,Oe]=f.useState(oe.Safe),[N,Re]=f.useState(!0),[ke,Be]=f.useState(le.None),[k,qe]=f.useState(""),[Ss,xs]=f.useState(""),[Es,Fe]=f.useState(!1),[$s,Ue]=f.useState(!0),[ye,q]=f.useState(""),[ws,ve]=f.useState(!1),[_s,Se]=f.useState(!1),[Ls,Ye]=f.useState(!1),[Pe,ze]=f.useState(!1),[ht,Ke]=f.useState(!1),[Ts,Qe]=f.useState(null),[R,H]=f.useState([]),[xe,mt]=f.useState(6),[Ve,w]=f.useState(!1),[C,We]=f.useState({nsfw:!1,religious:!1,political:!1,racist:!1,sexist:!1,explicit:!1}),r=Hs();f.useEffect(()=>{const e=!!(_!=null&&_.find(s=>s.value==="ChuckNorris"));ze(k===""?e:!1)},[k,_,Pe]),f.useEffect(()=>{r(Gs())},[]),f.useEffect(()=>{r(G())},[]),f.useEffect(()=>{r(B()).then(()=>{p(`${l("JokesLoaded")}...`,!1,3)}).catch(e=>{var s,a;(a=(s=e.response)==null?void 0:s.data)!=null&&a.message?r(p(e.response.data.message,!0,8)):r(p(`${l("Error")}: ${(e==null?void 0:e.message)??""}`,!0,8))})},[]),f.useEffect(()=>{g&&(hs(ge[g]),be(_.map(e=>({...e,label:ge[g][e.value]}))))},[g]);const He=()=>{Re(!N)},Cs=()=>{vs(!W)};f.useEffect(()=>{Oe(N?oe.Safe:oe.Unsafe)},[N]),f.useEffect(()=>{Me(W?M.twopart:M.single)},[W]);const Is=e=>{e.preventDefault(),w(!0),setTimeout(()=>{Ye(!0)},400),Ue(!0),setTimeout(()=>{D(),Fe(!0),setTimeout(()=>{Fe(!1),w(!1)},5500);const s=document.querySelector("#queryValue");s&&s.scrollIntoView({behavior:"smooth"})},600)},As=(e,s)=>async a=>{var n,t;if(a.preventDefault(),w(!0),await Q({message:`${l("Delete")} ${l("Joke").toLowerCase()} "${s}"?`}))try{r(tt(e,o==null?void 0:o._id)).then(()=>{r(B())}),w(!1)}catch(d){(t=(n=d.response)==null?void 0:n.data)!=null&&t.message?r(p(d.response.data.message,!0,8)):console.error(l("ErrorDeletingJoke"),d),w(!1)}else return},bs=(e,s)=>async a=>{a.preventDefault(),w(!0);const n=b.find(h=>h._id===e);if(!n){r(p(`${l("Error")}!`,!0,8)),w(!1);return}const t=async h=>{var v,S;try{await r(_e(h)),await r(B());const m=await r(_e({...h,verified:!1,_id:e}));r(p(`${l("SavedJoke")}. ${m.message??""}`,!1,8)),Qe(null),Ke(!1),w(!1)}catch(m){console.error(m);const J=(m==null?void 0:m.code)==="ERR_BAD_RESPONSE"?(S=(v=m==null?void 0:m.response)==null?void 0:v.data)==null?void 0:S.message:(m==null?void 0:m.message)??"";r(p(`${l("Error")}: ${J}`,!0,8)),w(!1)}},d=()=>{n.private===!0&&s.private===!1?s.category===$.Dark||Object.values(s.flags).some(h=>h)?(t({...s,private:!0,verified:!1,safe:!1}),w(!1)):(t({...s,private:!0,verified:!1,_id:e}),w(!1)):s.category!=$.Dark&&!Object.values(s.flags).some(h=>h)?(t({...s,safe:!0,_id:e}),w(!1)):s.category===$.Dark||Object.values(s.flags).some(h=>h)?(t({...s,safe:!1,_id:e}),w(!1)):(t(s),w(!1))};n.private===!0&&s.private===!1?await Q({message:l("AreYouSureYouWantToMakeThisJokePublic")})&&d():n.private===!1&&s.private===!0?await Q({message:l("AreYouSureYouWantToMakeThisJokePrivate")})&&d():d()},Ge=e=>Object.entries(e).map(([s,a])=>({value:s,label:a})),Ns=e=>Object.entries(e).map(([s,a])=>({value:s,label:a[g]}));function Xe(e,s){for(const a in e)if(e[a]===s)return a}function Js(e,s){return Object.keys(e).find(a=>e[a]===s)}const[re,Ms]=f.useState(void 0);f.useEffect(()=>{const e=b==null?void 0:b.find(s=>s.jokeId.toString()===(i==null?void 0:i.jokeId.toString())&&s.language===(i==null?void 0:i.language)&&s.category===(i==null?void 0:i.category));e&&Ms(e)},[i,b]);const Ze=e=>{var s;if(e.preventDefault(),o){if(re){if(re.user.includes((s=o==null?void 0:o._id)==null?void 0:s.toString())){r(p(`${l("JokeAlreadySaved")}`,!1,8));return}r(_e({...re,user:[...re.user,o==null?void 0:o._id]})).then(()=>B()).catch(a=>{var n,t;(t=(n=a.response)==null?void 0:n.data)!=null&&t.message?r(p(a.response.data.message,!0,8)):r(p(`${l("Error")}:: ${(a==null?void 0:a.message)??""}`,!0,8))})}else i&&(i==null?void 0:i.type)===M.single?r(us({jokeId:(i==null?void 0:i.jokeId.toString())??ye.toString(),joke:pe,type:M.single,category:(i==null?void 0:i.category)??Z??$.Misc,subCategories:(i==null?void 0:i.subCategories)??(L==null?void 0:L.length)>0?L:void 0,language:(i==null?void 0:i.language)??Ae,safe:!Object.values(C).some(a=>a),user:[o._id],flags:{nsfw:i==null?void 0:i.flags.nsfw,religious:i==null?void 0:i.flags.religious,political:i==null?void 0:i.flags.political,racist:i==null?void 0:i.flags.racist,sexist:i==null?void 0:i.flags.sexist,explicit:i==null?void 0:i.flags.explicit}})).then(()=>{r(B())}).catch(a=>{var n,t;(t=(n=a.response)==null?void 0:n.data)!=null&&t.message?r(p(a.response.data.message,!0,8)):r(p(`${l("Error")}*: ${(a==null?void 0:a.message)??""}`,!0,8))}):i&&(i==null?void 0:i.type)===M.twopart&&r(us({jokeId:(i==null?void 0:i.jokeId.toString())??ye.toString(),setup:pe,delivery:Ce,type:M.twopart,category:(i==null?void 0:i.category)??Z??$.Misc,subCategories:(L==null?void 0:L.length)>0?L:void 0,language:(i==null?void 0:i.language)??Ae,safe:!Object.values(i==null?void 0:i.flags).some(a=>a),user:[o._id],flags:{nsfw:i==null?void 0:i.flags.nsfw,religious:i==null?void 0:i.flags.religious,political:i==null?void 0:i.flags.political,racist:i==null?void 0:i.flags.racist,sexist:i==null?void 0:i.flags.sexist,explicit:i==null?void 0:i.flags.explicit}})).then(()=>{r(B())}).catch(a=>{var n,t;(t=(n=a.response)==null?void 0:n.data)!=null&&t.message?r(p(a.response.data.message,!0,8)):r(p(`${l("Error")}: ${(a==null?void 0:a.message)??""}`,!0,8))});r(p(`${l("SavedJoke")}`,!1,8))}else{r(p(`${l("LoginOrRegisterToSave")}`,!1,8));return}},Os=async(e,s,a,n)=>{var t,d,h,v,S,m,J,c,u,E,F,ee,se;if($e(e.id)){D();return}if(n&&R.some(U=>U.jokeId===e.jokeId&&U.language===g)){D();return}H(U=>[...U,{jokeId:e.id,language:g}]),(R==null?void 0:R.length)>xe&&H(U=>U.slice(1)),Y(s),ys(a??[]),r(ae({jokeId:e.id.toString(),joke:e.joke||e.value,type:M.single,category:s,subCategories:a&&(a==null?void 0:a.length)>0?a:void 0,language:fe.en,safe:!((t=e==null?void 0:e.categories)!=null&&t.includes("explicit")||(d=e==null?void 0:e.categories)!=null&&d.includes("political")||(h=e==null?void 0:e.categories)!=null&&h.includes("religion")),user:e.user,flags:{nsfw:((v=e.categories)==null?void 0:v.nsfw)??!1,religious:((S=e.categories)==null?void 0:S.religion)??!1,political:((m=e.categories)==null?void 0:m.political)??!1,racist:((J=e.categories)==null?void 0:J.racist)??!1,sexist:((c=e.categories)==null?void 0:c.sexist)??!1,explicit:((u=e.categories)==null?void 0:u.explicit)??!1}})),We({explicit:((E=e==null?void 0:e.categories)==null?void 0:E.includes("explicit"))??!1,religious:((F=e==null?void 0:e.categories)==null?void 0:F.includes("religious"))??!1,political:((ee=e==null?void 0:e.categories)==null?void 0:ee.includes("political"))??!1,racist:!1,sexist:!1,nsfw:((se=e==null?void 0:e.categories)==null?void 0:se.includes("explicit"))??!1}),I(e.joke||e.value),O(""),q(e.id),he(fe.en),I(e.joke||e.value)},Rs=()=>{const e=me===oe.Unsafe?V.filter(n=>n.value!=="any"):V.filter(n=>n.value!=="any"&&n.value!=="explicit"&&n.value!=="religion"&&n.value!=="political"),s=Math.floor(Math.random()*(e==null?void 0:e.length));return e[s]},[Ee,ks]=f.useState([]);f.useEffect(()=>{if(Array.isArray(b)&&(b==null?void 0:b.length)>0&&Array.isArray(T)&&(T==null?void 0:T.length)>0){let e=b==null?void 0:b.map(s=>{const a=T==null?void 0:T.find(t=>t._id==s.author),n=Xs[s.language];return{...s,translatedLanguage:n??"",name:s.anonymous?l("Anonymous"):(a==null?void 0:a.name)??""}});e=N?N?e.filter(s=>s.safe).sort((s,a)=>{var n,t;return((n=a.user)==null?void 0:n.length)-((t=s.user)==null?void 0:t.length)}):[]:e.filter(s=>s.safe===!1).sort((s,a)=>{var n,t;return((n=a.user)==null?void 0:n.length)-((t=s.user)==null?void 0:t.length)}),ks(e)}},[b,T,g,N]);const D=async(e=0)=>{const s=_.map(c=>c.value);if(e>5)return;const a=c=>{if(c&&(c==null?void 0:c.length)>0&&Array.isArray(T)&&(T==null?void 0:T.length)>0){const u=c[Math.floor(Math.random()*(c==null?void 0:c.length))];if(R.some(E=>E.jokeId===u.jokeId&&E.language===g)){D();return}if(H(E=>[...E,{jokeId:u.jokeId,language:g}]),(R==null?void 0:R.length)>xe&&H(E=>E.slice(1)),u){if(q(u.jokeId),he(g),Y(u.category),"joke"in u?I(u.joke):"setup"in u&&I(u.setup),O("delivery"in u?u==null?void 0:u.delivery:""),(u.private===!1||u.private===void 0)&&u.anonymous===!1){const E=T==null?void 0:T.find(F=>F._id==u.author);z((E==null?void 0:E.name)??"")}else z("");r(ae(u));return}else{r(p(`${l("Error")}! ${l("NoJokeFoundWithThisSearchTerm")}. ${l("TryAnotherSearchTerm")}`,!0,8)),I(""),O(""),z("");return}}else{r(p(`${l("Error")}! ${l("NoJokeFoundWithThisSearchTerm")}. ${l("TryAnotherSearchTerm")}`,!0,8)),I(""),O(""),z("");return}},n=W?M.twopart:M.single,t=Ee==null?void 0:Ee.filter(c=>c.language===g&&((s==null?void 0:s.length)===0||s.includes(c.category))&&(c.private===!1&&c.verified===!0||c.private===void 0)&&c.safe===N&&c.type===n),d=(_==null?void 0:_.length)<1,h=_.some(c=>c.value==="ChuckNorris"),v=_.some(c=>c.value==="DadJoke"),S=k.trim()!==""||k!=="&";he(g);let m=t;if(S){const c=k.replace(/&$/,"");m=t==null?void 0:t.filter(u=>{var E,F,ee,se,U,ss,ts,as;if(u){const Ps=("joke"in u?(E=u.joke)==null?void 0:E.toLowerCase().includes(c.toLowerCase()):!1)||("setup"in u?(F=u.setup)==null?void 0:F.toLowerCase().includes(c.toLowerCase()):!1)||("delivery"in u?(ee=u.delivery)==null?void 0:ee.toLowerCase().includes(c.toLowerCase()):!1)||((se=u.name)==null?void 0:se.toLowerCase().includes(c.toLowerCase()))||((U=u.category)==null?void 0:U.toLowerCase().includes(c.toLowerCase()))||((ss=u.subCategories)==null?void 0:ss.includes(c==null?void 0:c.toLowerCase()))||((ts=u.translatedLanguage)==null?void 0:ts.toLowerCase().includes(c.toLowerCase())),zs=(s==null?void 0:s.length)>0?s.includes(u.category):!0,Ks=u.language===g,Qs=(y==null?void 0:y.value)!==""&&(y==null?void 0:y.value)!=="any"?(as=u.subCategories)==null?void 0:as.includes(y==null?void 0:y.value):!0;return u.safe===N&&u.type===n&&(u.private===!1&&u.verified===!0||u.private===void 0)?Ks&&zs&&Qs&&Ps:!1}})}if(m=m==null?void 0:m.filter(c=>{var E;return!((E=o==null?void 0:o.blacklistedJokes)==null?void 0:E.some(F=>F.jokeId===c.jokeId&&F.language===c.language))}),m&&(m==null?void 0:m.length)>0&&g===fe.fi){a(m);return}else if(m&&(m==null?void 0:m.length)>0&&Math.random()<.1){a(m);return}const J=k.replace(/&$/,"");if(h||v){if(g!==fe.en){a(m);return}else if(h&&v){const c=Math.floor(ds(1,2.999));if(c===1&&h){if(!await P(X,S?J:null,$.ChuckNorris,!S)){ne();return}}else if(c>1&&v&&!await P(ie,S?J:null,$.DadJoke,!S)){ne();return}}else if(h){if(!await P(X,S?J:null,$.ChuckNorris,!S)){ne();return}}else if(v&&!await P(ie,S?J:null,$.DadJoke,!S)){ne();return}}else if(d&&!W){const c=Math.floor(ds(1,10.999)),u=S?J:null;c===1?await P(X,u,$.ChuckNorris,!S)||await P(ie,u,$.DadJoke,!1):c===2?await P(ie,u,$.DadJoke,!1)||await P(X,u,$.ChuckNorris,!S):c>2&&j()}else j()};async function P(e,s,a,n){var d,h;let t;try{if(a===$.ChuckNorris&&e===X)if(!N&&(!(y!=null&&y.value)||(y==null?void 0:y.value)==="any"))t=await e.getFullyRandomNorrisJoke();else if(y!=null&&y.value&&(y==null?void 0:y.value)!=="any")t=await e.getRandomJokeFromNorrisCategory(y==null?void 0:y.value);else{const v=Rs();t=s?await e.searchNorrisJoke(s):await e.getRandomJokeFromNorrisCategory(v.value)}else a===$.DadJoke&&e===ie&&(t=s?await e.searchDadJokes(s):await e.getRandomDadJoke());if(!t)j();else{if($e(t.id)){D();return}Y(a),q(t.id),await Os(t,a,(t==null?void 0:t.subCategories)??[],n)}}catch(v){(h=(d=v.response)==null?void 0:d.data)!=null&&h.message?r(p(v.response.data.message,!0,8)):console.error(v),j()}finally{}return!!t}const ne=()=>{r(p(`${l("Error")}! ${l("NoJokeFoundWithThisSearchTerm")}`,!0,8)),I(""),O("")};f.useEffect(()=>{(_==null?void 0:_.length)<1&&Y(null)},[_]);const j=(e=0)=>{const a=_.map(t=>t.value).filter(t=>t!=="ChuckNorris"&&t!=="DadJoke"),n=(a==null?void 0:a.length)>0?a.join(","):"Any";fetch(`https://v2.jokeapi.dev/joke/${n}?${ke}${k}lang=${g}&format=json${me}&type=${Je}`).then(t=>t.json()).then(t=>{var d,h,v,S,m,J;if(!(e>5)){if($e(t.id)||ke===le.None&&R.some(c=>c.jokeId===t.jokeId&&c.language===g)){j(e+1);return}if(H(c=>[...c,{jokeId:t.id,language:g}]),(R==null?void 0:R.length)>xe&&H(c=>c.slice(1)),We({nsfw:((d=t.flags)==null?void 0:d.nsfw)??!1,religious:((h=t.flags)==null?void 0:h.religious)??!1,political:((v=t.flags)==null?void 0:v.political)??!1,racist:((S=t.flags)==null?void 0:S.racist)??!1,sexist:((m=t.flags)==null?void 0:m.sexist)??!1,explicit:((J=t.flags)==null?void 0:J.explicit)??!1}),Y(t.category),t.error)if(n==="Any"){r(p(`${l("Error")}! ${l("NoJokeFoundWithThisSearchTerm")}. ${l("MaybeTryAnotherLanguage")}`,!0,10)),I(""),O(""),q("");return}else{I(""),O(""),r(p(`${l("Error")}! ${l("NoJokeFoundWithThisSearchTerm")}`,!0,8)),q("");return}Je===M.twopart?(r(ae({jokeId:t.id.toString(),setup:t.setup,delivery:t.delivery,type:M.twopart,category:t.category,subCategories:(L==null?void 0:L.length)>0?L:void 0,language:g,safe:!(Z===$.Dark||!Object.values(C).some(c=>c)),user:o?[o._id]:[],flags:{nsfw:C.nsfw,religious:C.religious,political:C.political,racist:C.racist,sexist:C.sexist,explicit:C.explicit}})),Y(t.category),I(t.setup),O(t.delivery),q(t.id)):(r(ae({jokeId:t.id.toString(),joke:t.joke,type:M.single,category:t.category,subCategories:(L==null?void 0:L.length)>0?L:void 0,language:g,safe:!(Z===$.Dark||!Object.values(C).some(c=>c)),user:o?[o._id]:[],flags:{nsfw:C.nsfw,religious:C.religious,political:C.political,racist:C.racist,sexist:C.sexist,explicit:C.explicit}})),Y(t.category),I(t.joke),O(""),q(t.id))}}).catch(t=>{var d,h;(h=(d=t.response)==null?void 0:d.data)!=null&&h.message?r(p(t.response.data.message,!0,8)):(console.error(t),r(p(`${l("Error")}! ${t.response.data.message}`,!0,8)))})};function $e(e){var s;return((s=o==null?void 0:o.blacklistedJokes)==null?void 0:s.some(a=>a.jokeId===e&&a.language===g))??!1}const Bs=async()=>{const e=await X.getNorrisCategories(),s=qs(e),a=N?s.filter(n=>n.value!=="explicit"&&n.value!=="religion"&&n.value!=="political"):s;N&&Ne(s[0]),ms(a)};f.useEffect(()=>{Bs()},[me]),f.useEffect(()=>{k.trim()===""||k==="&"?Be(le.None):Be(le.Contains),k==="&"&&qe("")},[k]),f.useEffect(()=>{const e=document.querySelector(".login-container.closed button.open"),s=document.querySelector(".login-container.open button.close"),a=document.querySelector(".register-container.closed button.open"),n=document.querySelector(".register-container.open button.close");e==null||e.addEventListener("click",()=>{_s===!0&&(n==null||n.click()),ve(!0),Se(!1)}),a==null||a.addEventListener("click",()=>{ws===!0&&(s==null||s.click()),Se(!0),ve(!1)}),s==null||s.addEventListener("click",()=>{ve(!1)}),n==null||n.addEventListener("click",()=>{Se(!1)})},[]);const qs=(e,s)=>{var n;const a=(n=Object.entries(e))==null?void 0:n.map(([t,d])=>({value:d,label:ce[d]&&ce[d][g]?ce[d][g]:d.charAt(0).toUpperCase()+d.slice(1)}));return a.unshift({value:"any",label:ce.any[g]||l("Any")}),a},De=(e,s)=>{const a={en:is,es:fs,fr:cs,de:ls,pt:os,cs:ns,fi:rs};let n=e;return e===$.ChuckNorris&&(n="ChuckNorris"),e===$.DadJoke&&(n="DadJoke"),a[s][n]},je=at(),Fs=()=>{je("/portfolio/jokes?register=register")},Us=()=>{je("/portfolio/jokes?login=login")},es=async(e,s,a)=>{var n;if(await Q({message:`${l("AreYouSureYouWantToHideThisJoke")}`}))if((n=o==null?void 0:o.blacklistedJokes)==null?void 0:n.some(d=>d.jokeId===e&&d.language===s)){r(p(l("ThisJokeIsAlreadyBlacklisted"),!0,3)),r(te(o==null?void 0:o._id)).then(()=>r(G())),I(""),O(""),z(""),q("");return}else Array.isArray(T)&&o?r(Ds(o==null?void 0:o._id)).then(d=>{const h=d==null?void 0:d.find(v=>{var S;return((S=v.jokeId)==null?void 0:S.toString())===(e==null?void 0:e.toString())&&v.language===s});h&&r(js(h==null?void 0:h._id)).then(()=>r(B()))}).then(()=>{r(et(o==null?void 0:o._id,e,s,a)).then(()=>{r(p(`${l("JokeHidden")}`,!1,3)),r(B()).then(()=>r(te(o==null?void 0:o._id))).then(()=>r(G())).then(()=>{I(""),O(""),z(""),q("")})}).catch(d=>{var h,v;r(B()).then(()=>r(te(o==null?void 0:o._id))).then(()=>r(G())),(v=(h=d.response)==null?void 0:h.data)!=null&&v.message?r(p(d.response.data.message,!0,8)):(console.error(d),r(p(`${l("ErrorDeletingJoke")}`,!1,5))),I(""),O(""),z(""),q("")})}):r(p(`${l("ErrorDeletingJoke")}`,!1,3))},Ys=async(e,s,a)=>{e.preventDefault(),r(ae(s)),w(!0),await Q({message:`${l("AreYouSureYouWantToRestoreThisJoke")}`})&&(o?(r(st(o==null?void 0:o._id,a,s==null?void 0:s.language)).then(n=>{r(B()).then(()=>r(te(o==null?void 0:o._id))).then(()=>r(G())).then(()=>r(p(`${l("JokeRestored")}`,!1,3)))}).catch(n=>{var t,d;(d=(t=n.response)==null?void 0:t.data)!=null&&d.message?r(p(n.response.data.message,!0,8)):(console.error(n),r(p(`${l("ErrorDeletingJoke")}`,!1,3)))}),w(!1)):(r(p(`${l("ErrorDeletingJoke")}`,!1,3)),w(!1))),setTimeout(async()=>{await Q({message:`${l("WouldYouLikeToSaveTheJoke")}`})&&(o?(Ze(e),r(B()).then(()=>r(te(o==null?void 0:o._id))).then(()=>r(G())).then(()=>r(p(`${l("SavedJoke")}`,!1,8))).catch(n=>{var t,d;(d=(t=n.response)==null?void 0:t.data)!=null&&d.message?r(p(n.response.data.message,!0,8)):(console.error(n),r(p(`${l("ErrorDeletingJoke")}`,!1,3)))}),w(!1)):(r(p(`${l("ErrorDeletingJoke")}`,!1,3)),w(!1)))},600)};return x.jsxs(x.Fragment,{children:[x.jsx("section",{className:`joke-container card ${g}`,id:"jokeform",children:x.jsx("div",{children:x.jsxs("div",{className:"jokes-wrap",children:[x.jsx("h2",{children:l("TheComediansCompanion")}),x.jsx("p",{className:"center textcenter mb3",children:l("AJokeGeneratorForTheComicallyInclined")}),x.jsx(f.Suspense,{fallback:x.jsxs("div",{className:"flex center margin0auto textcenter",children:[l("Loading"),"..."]}),children:x.jsx(ut,{sending:Ve,handleFormSubmit:Is,jokeCategory:Z,setJokeCategory:Y,categoryValues:_,setCategoryValues:be,setQueryValue:qe,setLanguage:A,language:g,joke:pe,delivery:Ce,jokeId:ye,author:ps,options:we,getKeyByValue:Xe,query:Ss,setQuery:xs,isCheckedSafemode:N,isCheckedJokeType:W,handleToggleChangeSafemode:He,handleToggleChangeEJokeType:Cs,submitted:Es,reveal:$s,setReveal:Ue,handleJokeSave:Ze,optionsCategory:Ge,categoryByLanguages:Ie,visibleJoke:Ls,setVisibleJoke:Ye,norrisCategories:V,selectedNorrisCategory:y,setSelectedNorrisCategory:Ne,hasNorris:Pe,getCategoryInLanguage:De,subCategoryResults:L,handleBlacklistUpdate:es})})]})})}),x.jsx("section",{className:`joke-container ${g}`,children:x.jsxs("div",{children:[o?x.jsxs("p",{className:"textcenter",children:[l("LoggedInAs")," ",o==null?void 0:o.name]}):x.jsxs("div",{className:"register-login-wrap",children:[x.jsx("button",{onClick:Us,children:l("Login")}),x.jsx("button",{onClick:Fs,children:l("Register")})]}),o&&x.jsx(f.Suspense,{fallback:x.jsxs("div",{className:"flex center margin0auto textcenter",children:[l("Loading"),"..."]}),children:x.jsx(dt,{userId:o==null?void 0:o._id,language:g,categoryByLanguages:Ie,getKeyByValue:Xe,options:we,optionsCategory:Ge,jokeCategoryByLanguage:Zs,norrisCategories:V})})]})}),x.jsx("section",{className:`joke-container card ${g}`,children:x.jsx("div",{children:x.jsx(f.Suspense,{fallback:x.jsxs("div",{className:"flex center margin0auto textcenter",children:[l("Loading"),"..."]}),children:x.jsx(gt,{sending:Ve,user:o,handleDelete:As,language:g,isCheckedSafemode:N,setIsCheckedSafemode:Re,handleToggleChangeSafemode:He,translateWordLanguage:gs,getKeyofEnum:Js,options:we,optionsSortBy:Ns,norrisCategories:V,getCategoryInLanguage:De,handleUpdate:bs,setIsEditOpen:Ke,editId:Ts,setEditId:Qe,handleRemoveJokeFromBlacklisted:Ys,handleBlacklistUpdate:es})})})})]})}const $t=Object.freeze(Object.defineProperty({__proto__:null,default:pt},Symbol.toStringTag,{value:"Module"}));export{$t as J,ie as d,X as n};
