import{r as m,j as e}from"./react-kX_YxI4E.js";import{u as L,g3 as N,bp as R,ai as j,g4 as B,fS as C,bo as D,g5 as F,o,ca as U,fY as P,g6 as q,dq as A,i as O,fZ as T}from"./index-ht7i4Lck.js";import{s as b}from"./edit.module-3NLXhYEv.js";import"./dom-to-image-more-CfDXlNbO.js";import"./react-dom-B5MLDbn_.js";import"./scheduler-CzFDRTuY.js";import"./react-redux-BEmJlIGA.js";import"./hoist-non-react-statics-DQogQWOa.js";import"./react-is-DUDD-a5e.js";import"./use-sync-external-store-BPp6CH6k.js";import"./@reduxjs-DhFEcpJw.js";import"./immer-C0GRqQ_d.js";import"./redux-CE3tqztX.js";import"./@babel-DF5_wy6Y.js";import"./redux-thunk-CY0Q9z1Q.js";import"./axios-CCb-kr4I.js";import"./react-icons-DhcENkY1.js";import"./react-router-dom-StiqOUIT.js";import"./react-router-DUuhLvki.js";import"./@remix-run-DTnHqtaE.js";const ne=({user:a,language:i,setLanguage:y,options:S})=>{const t=L(),[l,c]=m.useState(""),[n,v]=m.useState((a==null?void 0:a.language)??i),[w,d]=m.useState(!1),_=async r=>{var g,u;r.preventDefault(),d(!0);try{const $={_id:a._id,name:a.name,passwordOld:l,language:n};a&&t(F($)).then(s=>{s&&(s.success===!1?t(o(`${U[i]}: ${s.message}`,!0,5)):(t(o(`${s.message??P[n]}`,!1,5)),t(q(s.user)).then(()=>{t(A(a==null?void 0:a._id)).then(()=>t(O())),y(n)}),c(""))),d(!1)}).catch(s=>{var f,h,E,x;console.error(s),(h=(f=s.response)==null?void 0:f.data)!=null&&h.message?t(o(s.response.data.message,!0,8)):s.code==="ERR_BAD_REQUEST"&&((x=(E=s.response)==null?void 0:E.data)!=null&&x.message)?t(o(`${U[i]}: ${s.response.data.message}`,!0,5)):setTimeout(()=>{t(o(T[i],!0,5))},2e3),d(!1)})}catch(p){(u=(g=p.response)==null?void 0:g.data)!=null&&u.message?t(o(p.response.data.message,!0,8)):console.error("error",p),d(!1)}};return e.jsx(e.Fragment,{children:a?e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:N[i]}),e.jsxs("form",{onSubmit:_,className:b["edit-user"],children:[e.jsx(R,{language:i,id:"language-register",className:`language ${b.language}`,instructions:"Language",hide:!0,options:S(j),value:n?{value:n,label:B(j,n)}:void 0,onChange:r=>{v(r==null?void 0:r.value)}}),e.jsx("div",{className:"input-wrap",children:e.jsxs("label",{children:[e.jsx("input",{required:!0,type:"password",name:"old-password",id:"old-password-user-language",value:l,onChange:({target:r})=>c(r.value.trim())}),e.jsx("span",{children:C[i]})]})}),e.jsx("button",{type:"submit",disabled:w,children:D[i]})]})]}):e.jsx(e.Fragment,{})})};export{ne as default};
