import{j as t,r as a}from"./react-A9DAvxly.js";import{Y as Eo,Z as pt,_ as Ve,$ as jo,a0 as Lt,a1 as No,a2 as Bo,a3 as So,a4 as Co,a5 as Do,a6 as Lo,a7 as To,a8 as Po,a9 as Mo,aa as Ro,K as Io,ab as Ao,ac as ir,W as k,ad as ur,ae as mt,af as Fo,ag as Oo,ah as Vo,ai as Ho,aj as zo,ak as Uo,al as Yo,am as Wo,an as Jo,ao as Go,ap as Xo,aq as qo,ar as _o,as as Zo,at as Qo,au as Ko,av as es,aw as ts,ax as rs,ay as dr,az as pr,aA as os,aB as ss,aC as as,aD as ns,aE as ls,aF as cs,aG as mr,aH as is,aI as us,aJ as ds,aK as ps,aL as ms,aM as fs,aN as hs,aO as bs,aP as ys,aQ as vs,aR as $s,aS as ft,aT as xs,aU as fr,aV as ks,aW as gs,aX as ws,aY as Es,aZ as js,a_ as Ns,a$ as Bs,b0 as Ss,b1 as jt,b2 as hr,b3 as br,b4 as ae,b5 as Cs,b6 as Ds,b7 as Ls,b8 as Ts,b9 as Ps,ba as Ms,bb as yr,bc as vr,bd as $r,be as Rs,bf as xr,bg as kr,bh as Is,bi as As,bj as Fs,bk as Os,bl as Vs,bm as Hs,bn as zs,bo as Us,bp as Ys,bq as ke,br as Ws,bs as Js,bt as Gs,bu as gr,bv as Xs,bw as qs,bx as _s,by as Zs,bz as Qs,bA as Ks,bB as ea,bC as ta,bD as ra,bE as oa,bF as sa,bG as aa}from"./index-D0nytp2M.js";import{O as na,P as la,Q as ca,S as ia,U as ua,V as da,W as wr,X as Er,Y as pa,Z as ma,_ as fa,$ as ha,u as ba,w as ya,a0 as va}from"./react-icons-BGZR1ov-.js";import{a as jr}from"./react-redux-CHm9GgGE.js";import{a as He}from"./axios-CCb-kr4I.js";import{a as $a}from"./react-router-S1Hdk0kP.js";import"./hoist-non-react-statics-D5aJipOz.js";import"./react-dom-yh0erWL-.js";import"./scheduler-CzFDRTuY.js";import"./@reduxjs-DhFEcpJw.js";import"./immer-C0GRqQ_d.js";import"./redux-CE3tqztX.js";import"./@babel-DF5_wy6Y.js";import"./redux-thunk-CY0Q9z1Q.js";import"./react-router-dom-CYs6befe.js";import"./@remix-run-DTnHqtaE.js";import"./react-is-DUDD-a5e.js";import"./use-sync-external-store-DEc9BFqZ.js";const xa=({d:o,layer:e,language:j,item:d,index:x,start:B,movement:S,stopMovementCheck:E,stopMoving:i,wheel:y,focused:g,blurred:te,selectedvalue0:m,setFocusedBlob:G,dragUlRef:w})=>{const X=o===0?33:Eo(22,d.i*2.6,50),J={background:`${d.background}`,display:"block",left:`${d.x}`,top:`${d.y}`,zIndex:`${d.z}`,"--i":isNaN(Number(d.i))?"7":`${d.i}`,"--layer":`${e}`,WebkitFilter:`blur(${X}px)`,filter:`blur(${X}px)`},M=o===0?["5.9px","8.2px","9.9px","10.8px","10.7px","10.5px","10px"]:["5.1px","5.4px","6.5px","7px","7.8px","8.4px","8.6px"];return t.jsxs("li",{onFocus:v=>{var b;w&&w.current&&((b=w.current)==null||b.setAttribute("aria-activedescendant",`${v.target.id}`));const h=v.target;h.parentNode,setTimeout(()=>{var K,I;const A=h.getBoundingClientRect(),he=(K=h.parentNode)==null?void 0:K.getBoundingClientRect(),F=h.closest(".drag-wrap-outer"),Q=F==null?void 0:F.scrollLeft,ie=F==null?void 0:F.scrollTop;G({top:A.top-he.top-ie,left:A.left-he.left-Q,width:A.width,height:A.height}),m.current&&(m.current.textContent=`${pt[j]}: ${(I=h.querySelector("span"))==null?void 0:I.textContent}`)},500),g(h)},onBlur:v=>{var h;G(null),te(v.target),w&&w.current&&((h=w.current)==null||h.removeAttribute("aria-activedescendant")),m.current&&(m.current.textContent=`${Ve[j]}`)},className:"dragzone animation",id:d.id,role:"option",tabIndex:0,style:J,children:[t.jsx("div",{className:"draggable-overlay",style:Number(d.i)<8?{width:`calc(var(--i) * ${M[0]})`,height:`calc(var(--i) * ${M[0]})`}:Number(d.i)<10?{width:`calc(var(--i) * ${M[1]})`,height:`calc(var(--i) * ${M[1]})`}:Number(d.i)<20?{width:`calc(var(--i) * ${M[2]})`,height:`calc(var(--i) * ${M[2]})`}:Number(d.i)<24?{width:`calc(var(--i) * ${M[3]})`,height:`calc(var(--i) * ${M[3]})`}:Number(d.i)<28?{width:`calc(var(--i) * ${M[4]})`,height:`calc(var(--i) * ${M[4]})`}:Number(d.i)<32?{width:`calc(var(--i) * ${M[5]})`,height:`calc(var(--i) * ${M[5]})`}:isNaN(Number(d.i))||d.i===null||d.i===void 0?{width:`7 * ${M[6]})`,height:`7 * ${M[6]})`}:{width:`calc(var(--i) * ${M[6]})`,height:`calc(var(--i) * ${M[6]})`},onMouseDown:v=>{var b,A;v.stopPropagation();const h=v.currentTarget.parentElement;h.draggable=!0,m.current&&(m.current.textContent=`${pt[j]}: ${(b=h==null?void 0:h.querySelector("span"))==null?void 0:b.textContent}`),w&&w.current&&((A=w.current)==null||A.setAttribute("aria-activedescendant",`${h.id}`)),B(v,h)},onMouseMove:v=>{var h;if(v.buttons===1){v.stopPropagation();const b=v.currentTarget.parentElement;b.draggable=!0,S(v,b),m.current&&(m.current.textContent=`${pt[j]}: ${(h=b==null?void 0:b.querySelector("span"))==null?void 0:h.textContent}`)}},onMouseLeave:v=>{var b;v.stopPropagation();const h=v.currentTarget.parentElement;h.draggable=!1,w&&w.current&&((b=w.current)==null||b.removeAttribute("aria-activedescendant")),i(v,h),m.current&&(m.current.textContent=`${Ve[j]}`)},onMouseUp:v=>{var b;const h=v.currentTarget.parentElement;h.draggable=!1,E(v,h),w&&w.current&&((b=w.current)==null||b.removeAttribute("aria-activedescendant")),m.current&&(m.current.textContent=`${Ve[j]}`)},onTouchStart:v=>{var b,A;v.preventDefault(),v.stopPropagation();const h=v.currentTarget.parentElement;h.draggable=!0,w&&w.current&&((b=w.current)==null||b.setAttribute("aria-activedescendant",`${h.id}`)),B(v,h),m.current&&(m.current.textContent=`${pt[j]}: ${(A=h==null?void 0:h.querySelector("span"))==null?void 0:A.textContent}`)},onTouchMove:v=>{v.preventDefault(),v.stopPropagation();const h=v.currentTarget.parentElement;h.draggable=!0,S(v,h)},onTouchEnd:v=>{var b;const h=v.currentTarget.parentElement;h.draggable=!1,w&&w.current&&((b=w.current)==null||b.removeAttribute("aria-activedescendant")),E(v,h),m.current&&(m.current.textContent=`${Ve[j]}`)},onWheel:v=>{const h=v.currentTarget.parentElement;y(h)}}),t.jsxs("span",{className:"scr",children:[jo[j]," ",d.number]})]},x)},ka=({layer_:o,className:e,language:j,d,items:x,saveDraggables:B,dragUlRef:S,selectedvalue0:E,setFocusedBlob:i,start:y,movement:g,stopMovementCheck:te,stopMoving:m,wheel:G,focused:w,blurred:X})=>{const J=d===0?0:1,M={WebkitFilter:`url(#svgfilter${J})`,filter:`url(#svgfilter${J})`,backgroundColor:"transparent",position:"absolute",top:0,left:0,height:"100%",width:"100%",pointerEvents:"none"};return t.jsxs(t.Fragment,{children:[t.jsxs("span",{id:`listbox${d}-layer${o}-label`,className:"scr",children:[Lt[j]," ",o+1]}),t.jsx("ul",{ref:S,role:"listbox",id:`listbox${d}-layer${o}`,className:`drag-container-layer drag-container${d}-layer drag-container${d}-layer${o} ${e}`,"aria-labelledby":`listbox${d}-layer${o}-label`,"aria-activedescendant":"",style:M,children:x==null?void 0:x.map((v,h)=>{if(v!=null)return t.jsx(xa,{layer:o,d,language:j,item:v,index:h,start:y,movement:g,stopMovementCheck:te,stopMoving:m,wheel:G,focused:w,blurred:X,selectedvalue0:E,setFocusedBlob:i,dragUlRef:S},h)})})]})};let ht,D=!0,Nt=0,Bt=0,Ae,et=0,St=null,bt="90deg",P;const Fe=o=>{o.preventDefault(),o.stopImmediatePropagation()},ga=({layer_:o,layerAmount:e,hiddenLayers:j,setActiveLayer:d,changeBlobLayer:x,highestZIndex:B,language:S,dispatch:E,d:i,items:y,saveDraggables:g,getPosition:te,dragWrap:m,selectedvalue0:G,exitApp:w,colorBlockProps:X,colorPairs:J,makeLarger0:M,makeSmaller0:v,makeMore0:h,deleteBlob0:b,layerIncrease:A,layerDecrease:he,setFocusedBlob:F,colorIndex:Q,setColorIndex:ie,setScroll:K,scroll:I,clickOutsideRef:ue,colorswitch:be,addRandomDraggable:ye})=>{const re=[...y].sort((l,u)=>l.layer-u.layer).reduce((l,u)=>(l[u.layer]||(l[u.layer]=[]),l[u.layer].push(u),l),{}),ee=Array.from({length:e},(l,u)=>u),Be=a.useRef({});a.useEffect(()=>{const l=ee.reduce((u,f)=>(u[f]=a.createRef(),u),{});Be.current=l},[e]);const V=()=>{try{return document.createEvent("TouchEvent"),!0}catch{return!1}};a.useEffect(()=>{V()},[]);const ge=l=>{let u=l.layer;u<e-1&&(u+=1,x(l,u))},Ue=l=>{let u=l.layer;u>0&&(u-=1,x(l,u))};function z(l,u){const f=l.getBoundingClientRect(),N=u.getBoundingClientRect();return!(f.top+5>N.bottom-5||f.right<N.left||f.bottom-5<N.top+5||f.left>N.right)}const U=a.useCallback(l=>{D=!0,document.removeEventListener("keydown",q),document.removeEventListener("touchmove",Fe)},[q]);No({ref:ue,onOutsideClick:U}),a.useEffect(()=>{V()&&!P&&I&&(document.body.style.overflowY="auto",document.body.style.overflowX="hidden",document.removeEventListener("keydown",q),document.removeEventListener("touchmove",Fe))},[P,I,V,q]);const we=a.useCallback((l,u)=>{l.stopPropagation(),l.preventDefault(),document.activeElement instanceof HTMLElement&&document.activeElement.blur(),ht=!0,P=u,Nt=V()?l.touches[0].clientX:l.clientX,Bt=V()?l.touches[0].clientY:l.clientY,u.classList.add("drag");const f=B[o];if(V()){let C=(u==null?void 0:u.style.getPropertyValue("--i"))??"7";Ae=parseFloat(C),Ae=isNaN(Ae)?7:Ae}E({type:"partialUpdate",payload:{d:i,id:u.id,update:{z:`${Math.max(1,f+1)}`}}}),document.addEventListener("keydown",q);const N=u.style.getPropertyValue("--layer");d(isNaN(parseInt(N))?1:parseInt(N)),V()&&(document.addEventListener("touchmove",Fe,{passive:!1}),document.body.style.overflow="hidden")},[q,V]),W=a.useCallback(l=>{if(l.stopPropagation(),V()&&(l.preventDefault(),document.body.style.overflow="hidden"),ht){let u=V()?l.touches[0].clientX:l.clientX,f=V()?l.touches[0].clientY:l.clientY;P.style.top=P.offsetTop-(Bt-f)+"px",P.style.left=P.offsetLeft-(Nt-u)+"px",Nt=u,Bt=f,E({type:"partialUpdate",payload:{d:i,id:P==null?void 0:P.id,update:{x:P.style.left,y:P.style.top}}})}},[V]),oe=a.useCallback((l,u)=>{l.stopPropagation(),l.preventDefault(),ht=!1,et++,St&&clearTimeout(St),St=setTimeout(()=>{if(et===2){let R=Ae-.8;R=Math.max(7,R),E({type:"partialUpdate",payload:{d:i,id:P==null?void 0:P.id,update:{i:R}}})}else if(et===3){let R=Ae+.8;R=Math.min(36,R),E({type:"partialUpdate",payload:{d:i,id:P==null?void 0:P.id,update:{i:R}}})}et=0},300),document.removeEventListener("keydown",q);let f=u.style.getPropertyValue("--i")??"7",N=parseFloat(f);N=isNaN(N)?7:N;const C=u.querySelector("div"),se={layer:parseInt(u.style.getPropertyValue("--layer")),id:u.id,number:parseInt(u.id.replace("blob","").split("-")[0],10),i:N,x:u.style.left,y:u.style.top,z:u.style.zIndex,background:u.style.background||"linear-gradient(90deg, cyan, greenyellow)"};V()&&I?(document.removeEventListener("touchmove",Fe),document.body.style.overflowY="auto",document.body.style.overflowX="hidden"):V()&&!I&&(document.body.style.overflow="hidden"),A.current&&z(C,A.current)&&ge(se),he.current&&z(C,he.current)&&Ue(se),J[i].forEach((R,pe)=>{const me=X[i][pe];if(me.current&&z(C,me.current)){const{color1:Ee,color2:le}=R;u.style.background=`linear-gradient(${bt}, ${Ee},${le})`}}),M.current&&z(C,M.current)&&(N+=.4,N=Math.min(Math.max(7,N),36),E({type:"partialUpdate",payload:{d:i,id:u.id,update:{i:N}}})),v.current&&z(C,v.current)&&(N-=.4,N=Math.min(Math.max(7,N),36),E({type:"partialUpdate",payload:{d:i,id:u.id,update:{i:N}}})),h.current&&z(C,h.current)&&H(se),b.current&&z(C,b.current)&&Le(se),u.classList.remove("drag"),u.blur(),et===0?P=null:P=u,F(null)},[bt,z,q,H,X,J,Le,I]),ve=a.useCallback((l,u)=>{l.stopPropagation(),ht=!1,P=null,V()&&I?(document.removeEventListener("touchmove",Fe),document.body.style.overflowY="auto",document.body.style.overflowX="hidden"):V()&&!I&&(document.body.style.overflow="hidden"),te(u),u.classList.remove("drag"),document.removeEventListener("keydown",q),u.blur()},[q]);a.useEffect(()=>{V()&&!P&&I&&(document.removeEventListener("touchmove",Fe),document.body.style.overflowY="auto",document.body.style.overflowX="hidden")},[oe,ve,P,I]);function de(l){l.classList.remove("drag"),document.removeEventListener("keydown",q),te(l),l.draggable=!1,P=null}function Ye(l){P=l,l.classList.add("drag");const u=l.style.getPropertyValue("--layer");d(parseInt(u)??2),document.addEventListener("keydown",q),l.draggable=!0}function Se(l){const u=f=>yt(f,l);return I||l.addEventListener("wheel",u,{passive:!1}),()=>{l.removeEventListener("wheel",u)}}function yt(l,u){if(D){D=!1;let N=window.getComputedStyle(u).getPropertyValue("--i")??u.style.getPropertyValue("--i")??"7",C=parseFloat(N);C=isNaN(C)?7:C,l.deltaY<0?C*=1.04:C*=.96,C=Math.min(Math.max(7,C),36),E({type:"partialUpdate",payload:{d:i,id:u.id,update:{i:C}}}),setTimeout(()=>{D=!0},100)}}a.useEffect(()=>{const l=P;if(l){const{color1:u,color2:f}=J[i][Q],N=`linear-gradient(${bt}, ${u}, ${f})`;E({type:"partialUpdate",payload:{d:i,id:l.id,update:{background:N}}})}},[Q]);function q(l){var We,Je;const f=P;if(!f)return;const N=window.getComputedStyle(f),C=_=>{var Xe;const ce=parseFloat(N.marginTop),Pe=parseFloat(N.marginLeft),Ne=_.getBoundingClientRect(),Ge=(Xe=_.parentNode)==null?void 0:Xe.getBoundingClientRect();F({top:Ne.top-Ge.top-ce,left:Ne.left-Ge.left-Pe,width:Ne.width,height:Ne.height})};let se=N.getPropertyValue("--i")??f.style.getPropertyValue("--i")??"7",R=parseFloat(se);R=isNaN(R)?7:R;let pe=parseFloat(N.getPropertyValue("left"))??parseFloat(f.style.getPropertyValue("left"))??0,me=parseFloat(N.getPropertyValue("top"))??parseFloat(f.style.getPropertyValue("top"))??0;const Ee=f.style.getPropertyValue("--layer"),le={layer:parseInt(Ee)??o,id:f.id,number:parseInt(f.id.replace("blob","").split("-")[0],10),i:R,x:f.style.getPropertyValue("left").toString(),y:f.style.getPropertyValue("top").toString(),z:f.style.zIndex??"0",background:f.style.background??"linear-gradient(90deg, cyan, greenyellow)"},je=(_,ce)=>{E({type:"partialUpdate",payload:{d:i,id:f.id,update:{x:`${_}px`,y:`${ce}px`}}}),C(f)},Y=()=>{D=!0},ot=_=>{l.preventDefault(),D&&(D=!1,x(le,_),setTimeout(Y,100))},Te=l.key;switch(parseInt(Te)>=1&&parseInt(Te)<=e&&ot(parseInt(Te)-1),l.key){case"ArrowLeft":l.preventDefault(),D&&(je(pe-4,me),setTimeout(Y,100));break;case"ArrowRight":l.preventDefault(),D&&(je(pe+4,me),setTimeout(Y,100));break;case"ArrowUp":l.preventDefault(),D&&(je(pe,me-4),setTimeout(Y,100));break;case"ArrowDown":l.preventDefault(),D&&(je(pe,me+4),setTimeout(Y,100));break;case"Escape":l.preventDefault(),K(!0),document.body.style.overflowY="auto",document.body.style.overflowX="hidden",w.current&&(w.current.setAttribute("tabindex","0"),w.current.addEventListener("blur",rt)),f.blur(),(We=m.current)==null||We.blur(),w.current&&(w.current.textContent=Bo[S]),(Je=w.current)==null||Je.focus();break;case"Enter":l.preventDefault(),l.stopPropagation(),D&&(D=!1,f.closest(`#drag-wrap${i}`)&&ie(_=>(_+1)%J[i].length),setTimeout(Y,100));break;case"R":case"r":case" ":if(l.preventDefault(),l.stopPropagation(),D){if(D=!1,f.closest(`#drag-wrap${i}`)){const _=be();let ce=be();ce===_&&(ce=be());const Pe=`linear-gradient(${bt}, ${_}, ${ce})`;E({type:"partialUpdate",payload:{d:i,id:f.id,update:{background:Pe}}})}setTimeout(Y,100)}break;case"Z":case"z":l.preventDefault(),D&&(D=!1,E({type:"partialUpdate",payload:{d:i,id:f.id,update:{z:"0"}}}),setTimeout(Y,100));break;case"T":case"t":l.preventDefault(),D&&(D=!1,E({type:"partialUpdate",payload:{d:i,id:f.id,update:{z:`${Math.max(1,B[o]+1)}`}}}),setTimeout(Y,100));break;case"S":case"s":l.preventDefault(),D&&(D=!1,R-=.4,R=Math.min(Math.max(7,R),36),E({type:"partialUpdate",payload:{d:i,id:f.id,update:{i:R}}}),setTimeout(Y,100));break;case"B":case"b":case"L":case"l":l.preventDefault(),D&&(D=!1,R+=.4,R=Math.min(Math.max(7,R),36),E({type:"partialUpdate",payload:{d:i,id:f.id,update:{i:R}}}),setTimeout(Y,100));break;case"C":case"c":case"D":case"d":l.preventDefault(),D&&(D=!1,H(le),setTimeout(Y,100));break;case"+":l.preventDefault(),D&&(D=!1,ye(le.x,le.y,le.layer),setTimeout(Y,200));break;case"Delete":case"-":l.preventDefault(),D&&(D=!1,Le(le),setTimeout(Y,100));break}}function rt(){var l,u;w.current&&((l=w.current)==null||l.removeAttribute("tabindex"),(u=w.current)==null||u.removeEventListener("blur",rt),w.current.textContent="")}function H(l){E({type:"duplicateDraggable",payload:{d:i,draggable:l}})}const[Ce,De]=a.useState("");function Le(l){De(l.id),G.current&&(G.current.textContent=`${Ve[S]}`)}return a.useEffect(()=>{Ce&&(E({type:"removeDraggable",payload:{d:i,id:Ce}}),De(""))},[Ce,i,E]),t.jsx(t.Fragment,{children:ee.map(l=>t.jsx(ka,{layer_:l,dragUlRef:Be.current[l],items:re[l]||[],className:j.has(l)?"hidden":"",language:S,d:i,saveDraggables:g,selectedvalue0:G,setFocusedBlob:F,start:we,movement:W,stopMovementCheck:oe,stopMoving:ve,wheel:Se,focused:Ye,blurred:de},l))})},wa="http://localhost:4000",ze=`${wa}/api/blobs`,Ea=async(o,e,j)=>(await He.get(`${ze}/${o}/${e}`,{params:{language:j}})).data,ja=async(o,e,j,d)=>(await He.get(`${ze}/${o}/${e}/${j}/${d}`)).data,Na=async(o,e,j,d,x,B)=>(await He.post(`${ze}/${o}/${e}/${d}/${B}`,{draggables:j,backgroundColor:x})).data,Ba=async(o,e,j,d,x,B,S)=>(await He.put(`${ze}/${o}/${e}/${d}/${B}`,{d:e,versionName:d,draggables:j,backgroundColor:x,newVersionName:S})).data,Sa=async(o,e,j,d)=>(await He.delete(`${ze}/${o}/${e}/${j}/${d}`)).data,Ca=async(o,e,j)=>(await He.post(`${ze}/screenshot`,{url:o,selector:e,language:j})).data,tt={getAllBlobsByUser:Ea,getBlobsVersionByUser:ja,saveBlobsByUser:Na,editBlobsByUser:Ba,deleteBlobsVersionByUser:Sa,takeScreenshot:Ca},Da=({d:o,language:e,controlsVisible:j,colorBlockProps:d,colorPairs:x,getRefName:B,map:S})=>t.jsx(t.Fragment,{children:d[o].map((E,i)=>{var y;return t.jsx("div",{ref:E,className:`colorblock ${(y=B(S[o],E))==null?void 0:y.toLowerCase()} tooltip-wrap ${j?"":"hidden"}`,id:`color${i}-${o}`,style:{background:`linear-gradient(45deg, ${x[o][i].color1}, ${x[o][i].color2})`,borderRadius:`${i<4?"5rem 6.7rem 6.7rem 5rem / 0.7rem 8.7rem 8.7rem 0.7rem":"6.7rem 5rem 5rem 6.7rem / 8.7rem 0.7rem 0.7rem 8.7rem"}`},children:t.jsx("span",{className:`tooltip below ${i<4?"right":"left"}`,children:So[e]})},`${x[o][i].color1}${i}-${o}`)})}),La=({d:o,language:e,sliderLightnessInput:j,setSliderLightVal:d,sliderLightness:x,sliderLightVal:B,defaultLightness:S,sliderLightnessReset:E,sliderSaturationInput:i,setSliderSatVal:y,sliderSaturation:g,sliderSatVal:te,defaultSaturation:m,sliderSaturationReset:G,sliderHueInput:w,setSliderHueVal:X,sliderHue:J,sliderHueVal:M,defaultHue:v,sliderHueReset:h})=>t.jsx(t.Fragment,{children:t.jsxs("div",{id:`drag-slider-wrap${o}`,className:"drag-slider-wrap",children:[t.jsxs("div",{className:"drag-slider-single",children:[t.jsx("label",{htmlFor:`drag-slider-hue${o}`,id:`huedescription${o}`,children:Co[e]}),t.jsx("input",{ref:w,onChange:b=>{X(b.target.value),J()},onMouseUp:b=>{X(b.target.value),J()},onPointerUp:b=>{X(b.target.value),J()},type:"range",min:0,max:359,value:M,className:"drag-slider drag-slider-hue",id:`drag-slider-hue${o}`}),t.jsx("span",{children:M}),t.jsx("button",{onClick:()=>{X(v),h()},children:Do[e]})]}),t.jsxs("div",{className:"drag-slider-single",children:[t.jsx("label",{htmlFor:`drag-slider-saturation${o}`,id:`saturationdescription${o}`,children:Lo[e]}),t.jsx("input",{ref:i,onChange:b=>{y(b.target.value),g()},onMouseUp:b=>{y(b.target.value),g()},onPointerUp:b=>{y(b.target.value),g()},type:"range",min:0,max:100,value:te,className:"drag-slider drag-slider-saturation",id:`drag-slider-saturation${o}`}),t.jsx("span",{children:te}),t.jsx("button",{onClick:()=>{y(m),G()},children:To[e]})]}),t.jsxs("div",{className:"drag-slider-single",children:[t.jsx("label",{htmlFor:`drag-slider-lightness${o}`,id:`lightnessdescription${o}`,children:Po[e]}),t.jsx("input",{ref:j,onChange:b=>{d(b.target.value),x()},onMouseUp:b=>{d(b.target.value),x()},onPointerUp:b=>{d(b.target.value),x()},type:"range",min:0,max:100,value:B,className:"drag-slider drag-slider-lightness",id:`drag-slider-lightness${o}`}),t.jsx("span",{children:B}),t.jsx("button",{onClick:()=>{d(S),E()},children:Mo[e]})]})]})}),Ta=[{color1:"darkorange",color2:"orange"},{color1:"orangered",color2:"palevioletred"},{color1:"magenta",color2:"violet"},{color1:"blue",color2:"cyan"},{color1:"greenyellow",color2:"lemonchiffon"},{color1:"cyan",color2:"greenyellow"},{color1:"cyan",color2:"pink"},{color1:"lemonchiffon",color2:"pink"}],Pa=[{color1:"indianred",color2:"palevioletred"},{color1:"sienna",color2:"peru"},{color1:"chocolate",color2:"burlywood"},{color1:"darkkhaki",color2:"moccasin"},{color1:"slateblue",color2:"mediumpurple"},{color1:"royalblue",color2:"turquoise"},{color1:"cadetblue",color2:"mediumaquamarine"},{color1:"lightslategray",color2:"lightsteelblue"}],Ma=[{color1:"indigo",color2:"mediumorchid"},{color1:"darkmagenta",color2:"palevioletred"},{color1:"crimson",color2:"indianred"},{color1:"chocolate",color2:"orangered"},{color1:"darkcyan",color2:"olivedrab"},{color1:"midnightblue",color2:"darkturquoise"},{color1:"mediumblue",color2:"cadetblue"},{color1:"darkblue",color2:"mediumslateblue"}],Ct=[Ta,Pa,Ma];let Nr="90deg";const Dt=3,Oe=o=>{o.preventDefault()};function Ra({language:o,d:e,ds:j,dragWrapOuter:d}){var ar,nr,lr;const x="214",B=e===0?"80":e===2?"50":"45",S=e===0?"30":e===2?"5":"25",{state:E,dispatch:i}=a.useContext(Ro),y=Io(),g=jr(r=>{var s;return(s=r.auth)==null?void 0:s.user}),te=jr(r=>r.users),m=a.useRef(),G=a.useRef(),w=a.useRef(),X=a.useRef(),J=a.useRef(),M=a.useRef(),v=a.useRef(),h=a.useRef(),[b,A]=a.useState(!1),he=a.useRef(),F=a.useRef(),Q=a.useRef(),ie=a.useRef(),K=a.useRef(),I=a.useRef(),ue=a.useRef(),be=a.useRef(),ye=a.useRef(null),ne=a.useRef(),re=a.useRef(),ee=a.useRef(),Be=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",V=`${Be?"local-":""}BlobLayerAmount${[e]}`,ge=`${Be?"local-":""}BackgroundColor${[e]}`,Ue=`${Be?"local-":""}Draggables${[e]}`,z=E.backgroundColor,U=E.draggables,{windowHeight:we,windowWidth:W}=Ao(),[oe,ve]=a.useState(0),[de,Ye]=a.useState(new Set),[Se,yt]=a.useState({}),[q,rt]=a.useState(0),[H,Ce]=a.useState(null),[De,Le]=a.useState(!1),[l,u]=a.useState(!0),[f,N]=a.useState(!0),[C,se]=a.useState(!0),[R,pe]=a.useState(!1),[me,Ee]=a.useState(!1),[le,je]=a.useState(!1),Y=a.useRef(),ot=a.useRef(),Te=a.useRef(),We=a.useRef(),Je=a.useRef(),_=a.useRef(),ce=a.useRef(),Pe=a.useRef(),Ne=a.useRef(),Ge=a.useRef(),Xe=a.useRef(),Tt=a.useRef(),Pt=a.useRef(),Mt=a.useRef(),Rt=a.useRef(),It=a.useRef(),At=a.useRef(),Ft=a.useRef(),Ot=a.useRef(),Vt=a.useRef(),Ht=a.useRef(),zt=a.useRef(),Ut=a.useRef(),Yt=a.useRef(),Br=[new Map([[Y,"colorBlockOrange"],[ot,"colorBlockRed"],[Te,"colorBlockPurple"],[We,"colorBlockBlue"],[Je,"colorBlockYellowLime"],[_,"colorBlockCyanYellow"],[ce,"colorBlockCyanPink"],[Pe,"colorBlockPinkYellow"]]),new Map([[Ne,"colorBlockReddish"],[Ge,"colorBlockBrown"],[Rt,"colorBlockTan"],[Xe,"colorBlockKhaki"],[Pt,"colorBlockPurplish"],[Tt,"colorBlockBluish"],[Mt,"colorBlockGreenish"],[It,"colorBlockGray"]]),new Map([[At,"colorBlockDarkPurple"],[Ft,"colorBlockDarkPink"],[Ot,"colorBlockDarkRed"],[Vt,"colorBlockDarkOrange"],[Ht,"colorBlockDarkGreen"],[zt,"colorBlockGreenishBlue"],[Ut,"colorBlockDarkBlue"],[Yt,"colorBlockPurplishBlue"]])],Sr=(r,s)=>r.get(s),vt=[[Y,ot,Te,We,Je,_,ce,Pe],[Ne,Ge,Rt,Xe,Pt,Tt,Mt,It],[At,Ft,Ot,Vt,Ht,zt,Ut,Yt]],Cr=(r,s)=>{const n=Se[s]+1;i({type:"partialUpdate",payload:{d:e,id:r.id,update:{layer:s,z:n}}}),ve(s)},Dr=r=>{Ye(s=>{var c;const n=new Set(s);return n.has(r)?n.delete(r):(n.add(r),ve(r!==0?r-1:r),(c=document.activeElement)==null||c.blur()),n})};a.useEffect(()=>{const r=()=>Le(!0),s=()=>{Le(!1)},n=()=>{Ce(null)};return window.addEventListener("keyup",r),window.addEventListener("mousedown",s),window.addEventListener("mouseup",n),()=>{window.removeEventListener("keyup",r),window.removeEventListener("mousedown",s),window.removeEventListener("mouseup",n)}},[]);function Lr(){return new Promise(r=>{setTimeout(()=>{const s=localStorage.getItem(Ue);if(s==null||s==null||s==="undefined")r(null);else{const n=JSON.parse(s);r(n.map(c=>({...c,layer:c.layer??0})))}},300)})}function Tr(){return new Promise(r=>{setTimeout(()=>{var n;const s=localStorage.getItem(V);s!=null?r(parseInt(s)):((n=U[e])==null?void 0:n.length)>0?r(Math.max(...U[e].map(c=>c.layer))+1):r(Dt)},100)})}function Pr(){return new Promise(r=>{setTimeout(()=>{const s=localStorage.getItem(ge);s==null||s==null||s==="undefined"?r(null):r(JSON.parse(s))},300)})}function st(r=$e){localStorage.setItem(V,JSON.stringify(r))}function fe(r=z[e]){localStorage.setItem(ge,JSON.stringify(r))}function Wt(r=U[e]){localStorage.setItem(Ue,JSON.stringify(r))}const[Me,Jt]=a.useState(ir[o]),[at,Gt]=a.useState(Me),[Mr,Rr]=a.useState(""),[Ir,Xt]=a.useState(!0),[qt,Ar]=a.useState(!1),[nt,$t]=a.useState(!1),[lt,Fr]=a.useState({}),[$e,Re]=a.useState(0),Or=async()=>{var r,s;Xt(!0);try{g!=null&&g._id&&tt.getAllBlobsByUser(g==null?void 0:g._id,e,o).then(n=>{if(n){const c={};n.forEach(p=>{const{d:$,versionName:T}=p;c[$]||(c[$]={}),c[$][T]=p}),Fr(c),Ar(Object.keys(c).length>0)}}).catch(n=>{var c,p;(p=(c=n.response)==null?void 0:c.data)!=null&&p.message?i(k(n.response.data.message,!0,8)):y(k(`${ae[o]}: ${n.message}`,!0,8))})}catch(n){(s=(r=n.response)==null?void 0:r.data)!=null&&s.message?i(k(n.response.data.message,!0,8)):y(k(ae[o],!0,8))}finally{Xt(!1)}},Vr=r=>{for(const s in lt)if(lt[s][r])return!0;return!1},_t=/^[\w\s\u00C0-\u024F\u1E00-\u1EFF-_]*$/,Hr=r=>{const s=r.target.value;_t.test(s)?Jt(s):y(k(yr[o],!0,8))},zr=r=>{const s=r.target.value;_t.test(s)?Gt(s):y(k(yr[o],!0,8))},Ur=async r=>{var s,n;A(!0),r.preventDefault();try{if(Me.trim()===""){y(k(ft[o],!0,8)),A(!1);return}else if(Me.trim().length>30){A(!1),y(k(`${vr[o]}. ${$r[o]}`,!0,8));return}else if(g!=null&&g._id){const c=Me.trim();if(Vr(c)&&!window.confirm(Rs[o]))return;tt.saveBlobsByUser(g==null?void 0:g._id,e,U[e],Me,z[e],o).then(()=>{$t(!nt),A(!1),y(k(xr[o],!1,8))}).catch(p=>{var $,T;(T=($=p.response)==null?void 0:$.data)!=null&&T.message?i(k(p.response.data.message,!0,8)):y(k(`${ae[o]}: ${p.message}`,!0,8))})}else y(k(kr[o],!0,8)),A(!1)}catch(c){(n=(s=c.response)==null?void 0:s.data)!=null&&n.message?i(k(c.response.data.message,!0,8)):y(k(ae[o],!0,8)),A(!1)}},Yr=async(r,s)=>{var c,p;const n=s.trim();if(s.trim()===""){y(k(ft[o],!0,8));return}else if(s.trim().length>30){y(k(`${vr[o]}. ${$r[o]}`,!0,8));return}else try{g!=null&&g._id?tt.editBlobsByUser(g==null?void 0:g._id,e,U[e],r,z[e],o,n).then(()=>{$t(!nt),y(k(xr[o],!1,8))}).catch($=>{var T,O;(O=(T=$.response)==null?void 0:T.data)!=null&&O.message?i(k($.response.data.message,!0,8)):y(k(`${ae[o]}: ${$.message}`,!0,8))}):y(k(kr[o],!0,8))}catch($){(p=(c=$.response)==null?void 0:c.data)!=null&&p.message?i(k($.response.data.message,!0,8)):y(k(ae[o],!0,8))}},Wr=(r,s)=>{const n=s.trim();g!=null&&g._id&&window.confirm(Is[o])&&tt.getBlobsVersionByUser(g==null?void 0:g._id,r,n,o).then(c=>{const p=Math.max(...c.draggables.map($=>$.layer));Re(p+1),setTimeout(()=>{st(p+1)},300),i({type:"setDraggablesAtD",payload:{d:r,draggables:c.draggables}}),i({type:"setBackgroundColor",payload:{d:r,backgroundColor:c.backgroundColor}}),fe(c.backgroundColor),qe(c.backgroundColor[0]),_e(c.backgroundColor[1]),Ze(c.backgroundColor[2]),kt({[`--hue${r}`]:`${c.backgroundColor[0]}`}),gt({[`--saturation${r}`]:`${c.backgroundColor[1]}`}),wt({[`--lightness${r}`]:`${c.backgroundColor[2]}`})}).then(()=>{Jt(n),bo(),setTimeout(()=>{Ie()},300)}).catch(c=>{var p,$;($=(p=c.response)==null?void 0:p.data)!=null&&$.message?i(k(c.response.data.message,!0,8)):y(k(`${ae[o]}: ${c.message}`,!0,8))})},Jr=(r,s)=>{g._id&&window.confirm(As[o])&&tt.deleteBlobsVersionByUser(g._id,r,s,o).then(()=>{y(k(Fs[o],!1,8)),$t(!nt)}).catch(n=>{var c,p;(p=(c=n.response)==null?void 0:c.data)!=null&&p.message?i(k(n.response.data.message,!0,8)):y(k(`${ae[o]}: ${n.message}`,!0,8))})};a.useEffect(()=>{(async()=>{await y(Os()),await y(Vs())})()},[y]),a.useEffect(()=>{g&&Or()},[g,nt]);function Gr(r){return r.reduce((s,n)=>{const c=parseInt(n.z,10),p=n.layer;return(!s[p]||c>s[p])&&(s[p]=c),s},{})}a.useEffect(()=>{(async()=>{const s=await Lr(),n=await Pr(),c=setTimeout(async()=>{var $,T,O;const p=await Tr();n&&n.length===3?(i({type:"setBackgroundColor",payload:{d:e,backgroundColor:n}}),fe(n),qe(n[0]),_e(n[1]),Ze(n[2]),($=d.current)==null||$.style.setProperty(`--hue${e}`,`${n[0]}`),(T=d.current)==null||T.style.setProperty(`--saturation${e}`,`${n[1]}`),(O=d.current)==null||O.style.setProperty(`--lightness${e}`,`${n[2]}`)):(i({type:"setBackgroundColor",payload:{d:e,backgroundColor:[x,B,S]}}),fe([x,B,S])),p?Re(p):s&&s.length>0&&Re(Math.max(...s.map(L=>L.layer))+1),s&&s.length>0?(s&&s.length>0&&Xr(s),pe(!0)):s==null&&!R&&(er(Zt,e),pe(!0))},300);return()=>clearTimeout(c)})()},[]),a.useEffect(()=>{var r;if(U[e]!==void 0&&((r=U[e])==null?void 0:r.length)>0){Wt();const s=Gr(U[e]);yt(s)}},[U[e]]);function Xr(r){if(!R&&r&&(r==null?void 0:r.length)>0){for(let s=0;s<(r==null?void 0:r.length);s++)if(r[s]!==null&&r[s]!==void 0){const n={layer:r[s].layer,id:`${r[s].id}`,number:r[s].number,i:r[s].i,x:`${r[s].x}`,y:`${r[s].y}`,z:`${r[s].z}`,background:`${r[s].background??"linear-gradient(90deg, cyan, greenyellow)"}`};i({type:"addDraggable",payload:{d:e,draggable:n}})}}pe(!0)}const qr=()=>{i({type:"moveDraggablesLeft",payload:{d:e}})},_r=()=>{i({type:"moveDraggablesRight",payload:{d:e}})},Zr=()=>{i({type:"moveDraggablesUp",payload:{d:e}})},Qr=()=>{i({type:"moveDraggablesDown",payload:{d:e}})};function Kr(r){var n;r.preventDefault();const s=(n=d.current)==null?void 0:n.querySelectorAll(".dragzone");s&&!me?(s.forEach(c=>{c.classList.remove("animation"),c.offsetWidth}),Ee(!0)):s&&(s.forEach(c=>{c.classList.add("animation"),c.offsetWidth}),Ee(!1))}a.useEffect(()=>{le&&m.current&&(m.current.classList.add("paused"),Ee(!0))},[le]),a.useEffect(()=>{const r=window.matchMedia("(prefers-reduced-motion: reduce)");je(r.matches);const s=()=>je(r.matches);return r.addEventListener("change",s),()=>{r.removeEventListener("change",s)}},[]);const Zt=W>700?10:6,Qt=r=>{switch(r.key){case"Escape":se(!0),document.body.style.overflowY="auto",document.body.style.overflowX="hidden";break}};a.useEffect(()=>(window.addEventListener("keyup",Qt),()=>{window.removeEventListener("keyup",Qt)}),[]);const Kt=r=>{const s=U[e].some(p=>p.layer===0&&r<0),n=U[e].some(p=>p.layer===$e-1&&r>0);if(s){y(k(Hs[o],!0,8));return}if(n){y(k(zs[o],!0,8));return}const c=U[e].map(p=>{const $=p.layer+r;return $>=0&&$<$e?{...p,layer:$}:p});i({type:"setDraggablesAtD",payload:{d:e,draggables:c}})};function eo(r){r.preventDefault(),window.confirm(`${Us[o]}?`)&&(window.localStorage.removeItem(Ue),i({type:"resetDraggables",payload:{d:e}}),i({type:"setDraggablesAtD",payload:{d:e,draggables:[]}}),er(Zt,e),setTimeout(()=>{Ie(),st(Dt)},300))}const er=(r,s)=>{ve(0);for(let n=0;n<r;n++){const c=()=>{const O=Ct[s],L=Math.floor(Math.random()*O.length);return[O[L].color1,O[L].color2]},[p,$]=c(),T={layer:0,id:`blob${n+1}-${s}`,number:n+1,i:W>400?Math.round(ke(7,20)):Math.round(ke(7,10)),x:W>we?`${W/100*Math.round(ke(2,70))}px`:`${W/100*Math.round(ke(2,50))}px`,y:`${we/100*Math.round(ke(2,60))}px`,z:"1",background:`linear-gradient(${Nr}, ${p??"cyan"},${$??"greenyellow"})`};i({type:"addDraggable",payload:{d:s,draggable:T}})}Re(Dt)},xt=()=>{const r=["cyan","lemonchiffon","pink","orangered","magenta","deepskyblue","darkorange","tomato","violet","dodgerblue","greenyellow","orange","silver","darkgray","gray","hotpink","wheat","sandybrown","rosybrown","dimgray","darkkhaki","darkseagreen","slateblue","royalblue","moccasin","burlywood","chocolate","cadetblue","mediumpurple","sienna","peru","indianred","palevioletred","plum","palegreen","mediumaquamarine","lightsteelblue","aquamarine","yellowgreen"],s=Math.floor(Math.random()*r.length);return r[s]};a.useEffect(()=>{},[E.draggables]);const tr=(r=`${W/100*Math.round(ke(25,55))}px`,s=`${we/100*Math.round(ke(2,10))}px`,n=oe)=>{if(document.activeElement instanceof HTMLElement&&document.activeElement.id===`make-random${e}`&&document.activeElement.blur(),de.has(oe)){y(k(Ys[o],!0,8));return}const c=xt(),p=xt(),$=Math.max(...E.draggables[e].map(L=>parseInt(L.id.split("-")[0].replace("blob",""),10))),T=isNaN(Se[n])?1:Se[n]+1,O={layer:n,id:`blob${$+1}-${e}`,number:$+1,i:Math.ceil(ke(6.5,10)),x:r,y:s,z:`${T}`,background:`linear-gradient(${Nr}, ${c??"cyan"},${p??"greenyellow"})`};i({type:"duplicateDraggable",payload:{d:e,draggable:O}})},to=r=>{const s=r.id,n=window.getComputedStyle(r),c=parseInt(r.id.replace("blob","").split("-")[0],10),p=n.getPropertyValue("--i")??r.style.getPropertyValue("--i")??"7",$=n.getPropertyValue("left")??r.style.getPropertyValue("left"),T=n.getPropertyValue("top")??r.style.getPropertyValue("top"),O=n.getPropertyValue("z-index")??r.style.getPropertyValue("z-index"),L=n.getPropertyValue("background")??r.style.getPropertyValue("background"),xe=n.getPropertyValue("--layer")??r.style.getPropertyValue("--layer"),Ke={layer:xe?parseInt(xe):oe,id:s,number:c,i:isNaN(parseFloat(p))?7:parseFloat(p),x:$,y:T,z:O,background:L??"linear-gradient(90deg, cyan, greenyellow)"};i({type:"updateDraggable",payload:{d:e,draggable:Ke}})};a.useEffect(()=>{var r,s;return C?C&&(document.body.style.overflowY="auto",document.body.style.overflowX="hidden",document.removeEventListener("touchmove",Oe),d.current&&(d.current.style.overflow="auto"),(s=d.current)==null||s.removeEventListener("touchmove",Oe)):(document.addEventListener("touchmove",Oe,{passive:!1}),document.body.style.overflow="hidden",(r=d.current)==null||r.addEventListener("touchmove",Oe,{passive:!1}),d.current&&(d.current.style.overflow="hidden")),()=>{var n;document.removeEventListener("touchmove",Oe),(n=d.current)==null||n.removeEventListener("touchmove",Oe)}},[C]);function ro(){se(!C)}const[ct,qe]=a.useState(()=>{const r=localStorage.getItem(ge),s=r?JSON.parse(r):null;return(s==null?void 0:s[0])??x}),[it,_e]=a.useState(()=>{const r=localStorage.getItem(ge),s=r?JSON.parse(r):null;return(s==null?void 0:s[1])??B}),[ut,Ze]=a.useState(()=>{const r=localStorage.getItem(ge),s=r?JSON.parse(r):null;return(s==null?void 0:s[2])??S}),oo={backgroundColor:`hsl(var(--hue${e}), calc(var(--saturation${e}) * 1%), calc(var(--lightness${e}) * 1%))`},[so,kt]=a.useState(ee.current?{[`--hue${e}`]:`${ee.current.value}`}:{[`--hue${e}`]:`${ct}`}),[ao,gt]=a.useState(re.current?{[`--saturation${e}`]:`${re.current.value}`}:{[`--saturation${e}`]:`${it}`}),[no,wt]=a.useState(ne.current?{[`--lightness${e}`]:`${ne.current.value}`}:{[`--lightness${e}`]:`${ut}`});function lo(){if(d.current){kt({[`--hue${e}`]:`${ct}`});const r=JSON.parse(JSON.stringify(z));r[e][0]=ct,i({type:"setBackgroundColor",payload:{d:e,backgroundColor:r[e]}}),fe(r[e])}}function co(){if(d.current){gt({[`--saturation${e}`]:`${it}`});const r=JSON.parse(JSON.stringify(z));r[e][1]=it,i({type:"setBackgroundColor",payload:{d:e,backgroundColor:r[e]}}),fe(r[e])}}function io(){if(d.current){wt({[`--lightness${e}`]:`${ut}`});const r=JSON.parse(JSON.stringify(z));r[e][2]=ut,i({type:"setBackgroundColor",payload:{d:e,backgroundColor:r[e]}}),fe(r[e])}}a.useEffect(()=>{ne.current&&Ze(ne.current.value)},[(ar=ne==null?void 0:ne.current)==null?void 0:ar.value]),a.useEffect(()=>{re.current&&_e(re.current.value)},[(nr=re==null?void 0:re.current)==null?void 0:nr.value]),a.useEffect(()=>{ee.current&&qe(ee.current.value)},[(lr=ee==null?void 0:ee.current)==null?void 0:lr.value]);function uo(){wt({[`--lightness${e}`]:`${S}`}),ne.current&&(ne.current.value=S),Ze(S);const r=JSON.parse(JSON.stringify(z));r[e][2]=S,fe(r[e]),i({type:"setBackgroundColor",payload:{d:e,backgroundColor:r[e]}})}function po(){gt({[`--saturation${e}`]:`${B}`}),re.current&&(re.current.value=B),_e(B);const r=JSON.parse(JSON.stringify(z));r[e][1]=B,fe(r[e]),i({type:"setBackgroundColor",payload:{d:e,backgroundColor:r[e]}})}function mo(){kt({[`--hue${e}`]:`${x}`}),ee.current&&(ee.current.value=x),qe(x);const r=JSON.parse(JSON.stringify(z));r[e][0]=x,fe(r[e]),i({type:"setBackgroundColor",payload:{d:e,backgroundColor:r[e]}})}a.useEffect(()=>{Ie()},[W,we,C]);const Ie=()=>{const n=[12,34,56,78];ie.current&&m.current&&W<250?Z(ie.current,15,0):ie.current&&m.current&&Z(ie.current,23,0),be.current&&m.current&&Z(be.current,50-be.current.offsetWidth/m.current.offsetWidth*50,0),Q.current&&m.current&&W<250?Z(Q.current,85-Q.current.offsetWidth/m.current.offsetWidth*100,.3):Q.current&&m.current&&Z(Q.current,77-Q.current.offsetWidth/m.current.offsetWidth*100,.3),ue.current&&m.current&&W<300?Z(ue.current,27,100-ue.current.offsetHeight/m.current.offsetHeight*100):ue.current&&m.current&&Z(ue.current,32,100-ue.current.offsetHeight/m.current.offsetHeight*100),I.current&&m.current&&W<300?Z(I.current,73-I.current.offsetWidth/m.current.offsetWidth*100,100-I.current.offsetHeight/m.current.offsetHeight*100):I.current&&m.current&&Z(I.current,68-I.current.offsetWidth/m.current.offsetWidth*100,100-I.current.offsetHeight/m.current.offsetHeight*100),K.current&&m.current&&W<300?Z(K.current,2,100-K.current.offsetHeight/m.current.offsetHeight*100):K.current&&m.current&&Z(K.current,10,100-K.current.offsetHeight/m.current.offsetHeight*100),F.current&&m.current&&W<300?Z(F.current,98-F.current.offsetWidth/m.current.offsetWidth*100,100-F.current.offsetHeight/m.current.offsetHeight*100):F.current&&m.current&&Z(F.current,90-F.current.offsetWidth/m.current.offsetWidth*100,100-F.current.offsetHeight/m.current.offsetHeight*100),vt.forEach(c=>{c.forEach((p,$)=>{if(p.current&&G.current){const T=$<4?0:100-p.current.offsetWidth/G.current.offsetWidth*100,O=n[$%4];Z(p.current,T,O)}})})};function Z(r,s,n){r&&m.current&&(r.style.left=m.current.offsetWidth/100*s+"px",r.style.top=m.current.offsetHeight/100*n+"px")}a.useEffect(()=>{H&&l&&De&&H&&ye.current&&(ye.current.style.top=`${H.top+H.width*-.05}px`,ye.current.style.left=`${H.left+H.width*-.05}px`,ye.current.style.width=`${H.width*1.1}px`,ye.current.style.height=`${H.height*1.1}px`)},[H,l,De]);const rr=$a(),fo=()=>{rr("/portfolio/blob?register=register")},ho=()=>{rr("/portfolio/blob?login=login")},bo=()=>{const r=document.getElementById(`button-container${e}`);r&&r.scrollIntoView({behavior:"smooth",block:"start"})},yo={width:"100%",height:"auto",margin:"0 auto"},vo=async()=>{var s,n;if(document.getElementById("drag-wrap"+e)&&!b)try{let c={};for(let Ke=0;Ke<localStorage.length;Ke++){const Et=localStorage.key(Ke);if(Et){const cr=localStorage.getItem(Et);cr!==null&&(c[Et]=cr)}}A(!0);const T=await fetch("http://localhost:4000/api/blobs/screenshot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:window.location.href,selector:`#drag-wrap${e}`,language:o,localStorageData:c,width:W,height:we})});if(!T.ok)throw y(k(ae[o],!0,8)),A(!1),new Error(`Error: ${T.statusText}`);const O=await T.json(),L=v.current,xe=h.current;L&&xe&&(xe.src=`data:image/png;base64,${O.screenshot}`,L.style.display="block",xe.scrollIntoView({behavior:"smooth",block:"start"}),y(k(`${Ws[o]}; ${Js[o]}`,!1,10)),A(!1),se(!0))}catch(c){(n=(s=c.response)==null?void 0:s.data)!=null&&n.message?i(k(c.response.data.message,!0,8)):y(k(ae[o],!0,8)),console.error(ae[o],c)}},or=()=>{const r=h.current;if(r&&r.src){const s=document.createElement("a");s.href=r.src,s.download="blobs.png",document.body.appendChild(s),s.click(),document.body.removeChild(s),y(k(Gs[o],!1,8))}else y(k(gr[o],!0,8)),console.error(gr[o])};a.useEffect(()=>{b&&y(k(`${ur[o]}...`,!1,20))},[b]);const[Qe,$o]=a.useState(5),[xo,ko]=a.useState({[e]:1}),dt=(r,s)=>{ko(n=>({...n,[r]:s}))},go=()=>{if(de.size===0){y(k("Please hide the layers you want to delete.",!0,8));return}if(Array.from(de).filter(p=>U[e].some($=>$.layer===p)).length>0&&!window.confirm(`${Xs[o]}. ${qs[o]}`))return;const s=U[e].filter(p=>!de.has(p.layer)),n=$e-de.size;if(n<1){y(k(_s[o],!0,8));return}const c=s.map(p=>{const $=p.layer;let T=$;return de.forEach(O=>{$>O&&(T-=1)}),{...p,layer:T}});i({type:"setDraggablesAtD",payload:{d:e,draggables:c}}),Re(n),st(n),Ye(new Set),setTimeout(()=>{Ie()},300)},wo=r=>{const s=$e+r;if(s>9){y(k(Zs[o],!0,8));return}const n=U[e].map(c=>{const p=c.layer>oe?c.layer+r:c.layer;return{...c,layer:p}});i({type:"setDraggablesAtD",payload:{d:e,draggables:n}}),Re(s),st(s),Ye(new Set),setTimeout(()=>{Ie()},300)},sr=(r,s,n)=>{const c=Math.random().toString(36).substr(2,9);return qt?t.jsxs("div",{className:"pagination-controls",children:[s!==1?t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>dt(Number(r),1),disabled:s===1,className:"btn-small pagination-btn",children:["« ",t.jsx("span",{className:"scr",children:Qs[o]})]}),t.jsxs("button",{onClick:()=>dt(Number(r),Math.max(s-1,1)),disabled:s===1,className:"btn-small pagination-btn",children:[" ‹ ",t.jsx("span",{className:"scr",children:Ks[o]})]})]}):t.jsx(t.Fragment,{}),t.jsxs("span",{children:[ea[o]," ",s," / ",n]}),s!==n?t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:()=>dt(Number(r),Math.min(s+1,n)),disabled:s===n,className:"btn-small pagination-btn",children:[t.jsx("span",{className:"scr",children:ta[o]})," › "]}),t.jsxs("button",{onClick:()=>dt(Number(r),n),disabled:s===n,className:"btn-small pagination-btn",children:[t.jsx("span",{className:"scr",children:ra[o]})," »"]})]}):t.jsx(t.Fragment,{}),t.jsx("div",{className:"input-wrap items-per-page",children:t.jsxs("label",{htmlFor:`items-per-page${e}-${c}`,children:[t.jsx("input",{id:`items-per-page${e}-${c}`,className:"",type:"number",value:Qe,placeholder:Qe.toString(),min:1,max:100,onChange:p=>$o(Number(p.target.value))}),t.jsx("span",{children:oa[o]})]})})]}):t.jsx(t.Fragment,{})};return t.jsx(t.Fragment,{children:t.jsx("section",{className:"card",children:t.jsx("div",{children:t.jsxs("div",{id:`drag-container${e}`,className:`drag-container drag-container${e}`,children:[t.jsxs("div",{className:"blob-title-wrap",children:[t.jsxs("h2",{className:"blob-title",children:[ir[o]," ",e+1]}),e===0?t.jsxs("p",{children:[mt[o]," "]}):e===1?t.jsxs("p",{children:[Fo[o],"."," ",mt[o]," "]}):e===2?t.jsxs("p",{children:[Oo[o],"."," ",mt[o]," "]}):t.jsx("p",{children:mt[o]})]}),t.jsxs("div",{className:"label-container",children:[t.jsx("span",{id:`blobdescription${e}`,className:"scr",children:Vo[o]}),t.jsxs("span",{children:["[",Lt[o],": ",oe+1,"]"," "]}),t.jsx("span",{ref:w,id:`selectedvalue${e}`,className:"selectedvalue",children:Ve[o]})]}),t.jsxs("div",{id:`button-container${e}`,className:"button-container",children:[t.jsxs("button",{ref:X,id:`stop-blobs${e}`,className:"stop-blobs tooltip-wrap ",onClick:r=>{Kr(r)},"aria-labelledby":`stop-blobs${e}-span`,children:[t.jsx("span",{id:`stop-blobs${e}-span`,className:"tooltip above space",children:Ho[o]}),me?zo[o]:Uo[o]]}),t.jsxs("button",{ref:M,id:`reset-blobs${e}`,"aria-labelledby":`reset-blobs${e}-span`,className:"reset-blobs tooltip-wrap",onClick:r=>{eo(r)},children:[t.jsx("span",{id:`reset-blobs${e}-span`,className:"tooltip above space",children:Yo[o]})," ",Wo[o]]}),t.jsxs("button",{id:`toggle-marker${e}`,"aria-labelledby":`toggle-marker${e}-span`,className:"toggle-marker tooltip-wrap",onClick:()=>u(!l),children:[t.jsx("span",{id:`toggle-marker${e}-span`,className:"tooltip above space",children:`${Jo[o]}`}),l?Go[o]:Xo[o]]}),t.jsxs("button",{ref:J,id:`disable-scroll${e}`,"aria-labelledby":`disable-scroll${e}-span`,className:`disable-scroll tooltip-wrap ${C?"":"active"}`,onClick:()=>{ro()},children:[t.jsx("span",{id:`disable-scroll${e}-span`,className:"tooltip above space",children:C?qo[o]:_o[o]}),C?Zo[o]:Qo[o]]}),t.jsx("button",{id:`toggle-controls${e}`,"aria-labelledby":`toggle-controls${e}-span`,className:`toggle-controls ${f?"":"active"}`,onClick:()=>{N(!f),f||setTimeout(()=>{Ie()},200)},children:t.jsxs("span",{id:`toggle-controls${e}-span`,children:[" ",f?Ko[o]:es[o]]})}),t.jsxs("button",{type:"button",id:`take-screenshot${e}`,"aria-labelledby":`take-screenshot${e}-span`,disabled:b,onClick:vo,className:"screenshot tooltip-wrap",children:[t.jsx(na,{}),t.jsx("span",{id:`take-screenshot${e}-span`,className:"tooltip left below space",children:b?ur[o]:ts[o]})]})]}),t.jsxs("div",{ref:G,className:`drag-wrap-outest drag-wrap-outest${e}`,children:[t.jsxs("div",{ref:d,id:`drag-wrap-outer${e}`,className:"drag-wrap-outer",style:{...no,...ao,...so,...oo},children:[t.jsxs("div",{tabIndex:0,ref:Q,className:`make-smaller tooltip-wrap reset ${f?"":"hidden"}`,id:`make-smaller${e}`,children:[t.jsx(la,{}),t.jsx("span",{id:`make-smaller${e}-span`,className:"tooltip left below",children:`${rs[o]}. ${dr[o]}: ${pr[o]}`})]}),t.jsxs("div",{ref:F,className:`make-larger tooltip-wrap reset ${f?"":"hidden"}`,id:`make-larger${e}`,children:[t.jsx(ca,{}),t.jsx("span",{id:`make-larger${e}-span`,className:"tooltip left above",children:`${os[o]}. ${dr[o]}: ${pr[o]}`})]}),t.jsxs("div",{ref:ie,className:`make-more tooltip-wrap reset ${f?"":"hidden"}`,id:`make-more${e}`,children:[t.jsx(ia,{}),t.jsx("span",{id:`make-more${e}-span`,className:"tooltip right below",children:ss[o]})]}),t.jsxs("button",{ref:be,className:`make-random tooltip-wrap ${f?"":"hidden"}`,id:`make-random${e}`,"aria-labelledby":`make-random${e}-span`,onClick:()=>tr(),children:[t.jsx(ua,{}),t.jsx("span",{id:`make-random${e}-span`,className:"tooltip below",children:`${as[o]}. ${ns[o]}!`})]}),t.jsxs("div",{ref:K,className:`delete-blob tooltip-wrap reset ${f?"":"hidden"}`,id:`delete-blob${e}`,children:[t.jsx(da,{}),t.jsx("span",{id:`delete-blob${e}-span`,className:"tooltip right above",children:ls[o]})]}),t.jsxs("div",{ref:ue,id:`layer-decrease${e}`,className:`layer-adjust layer-decrease tooltip-wrap ${f?"":"hidden"}`,children:[t.jsx("span",{id:`layer-decrease${e}-span`,className:"tooltip above",children:`${cs[o]} ${mr[o]}`}),t.jsx(wr,{})]}),t.jsxs("div",{ref:I,id:`layer-increase${e}`,className:`layer-adjust layer-increase tooltip-wrap ${f?"":"hidden"}`,children:[t.jsx("span",{id:`layer-increase${e}-span`,className:"tooltip above",children:`${is[o]} ${mr[o]}`}),t.jsx(Er,{})]}),l&&De&&H&&t.jsx("div",{ref:ye,style:{position:"absolute",top:`${H.top+H.width*-.05}px`,left:`${H.left+H.width*-.05}px`,width:`${H.width*1.1}px`,height:`${H.height*1.1}px`,outline:"3px dashed black",outlineOffset:"2px",border:"3px dashed white",borderRadius:"50%",zIndex:999}}),t.jsx("div",{ref:m,id:`drag-wrap${e}`,className:"drag-wrap",children:t.jsx(ga,{layerAmount:$e,layer_:oe,hiddenLayers:de,changeBlobLayer:Cr,setActiveLayer:ve,highestZIndex:Se,language:o,dispatch:i,d:e,items:U[e]??[],saveDraggables:Wt,getPosition:to,colorBlockProps:vt,makeLarger0:F,makeSmaller0:Q,makeMore0:ie,deleteBlob0:K,layerIncrease:I,layerDecrease:ue,dragWrap:m,exitApp:he,selectedvalue0:w,setFocusedBlob:Ce,colorIndex:q,setColorIndex:rt,colorPairs:Ct,colorswitch:xt,scroll:C,setScroll:se,clickOutsideRef:m,addRandomDraggable:tr})})]}),t.jsx(Da,{d:e,language:o,getRefName:Sr,map:Br,colorBlockProps:vt,colorPairs:Ct,controlsVisible:f})]}),t.jsxs("div",{className:"layer-mover-control-wrap",children:[t.jsxs("div",{className:`movers-wrap movers-wrap1 ${f?"":"hidden"}`,children:[t.jsxs("button",{id:`moveleft${e}`,"aria-labelledby":`moveleft${e}-span`,className:"moveleft mover tooltip-wrap narrow2",onClick:_r,children:[t.jsx(pa,{}),t.jsx("span",{id:`moveleft${e}-span`,className:"tooltip above",children:us[o]})]}),t.jsxs("button",{id:`moveright${e}`,"aria-labelledby":`moveright${e}-span`,className:"moveright mover tooltip-wrap narrow2",onClick:qr,children:[t.jsx(ma,{}),t.jsx("span",{id:`moveright${e}-span`,className:"tooltip above",children:ds[o]})]})]}),t.jsxs("div",{className:"layer-btn-wrap layer-tools layer-tools1",children:[t.jsxs("button",{id:`decrease-layer-amount${e}`,"aria-labelledby":`decrease-layer-amount${e}-span`,className:"layer-tool layer-amount decrease-layer-amount tooltip-wrap narrow2 danger",onClick:go,children:[t.jsx("span",{id:`decrease-layer-amount${e}-span`,className:"tooltip above",children:ps[o]}),t.jsx(fa,{style:{fontSize:"0.8em"}})]}),t.jsxs("button",{id:`every-layer-minus${e}`,"aria-labelledby":`every-layer-minus${e}-span`,className:"layer-tool every-layer tooltip-wrap narrow2",onClick:()=>Kt(-1),children:[t.jsx("span",{id:`every-layer-minus${e}-span`,className:"tooltip above",children:ms[o]}),t.jsx(wr,{})]})]}),t.jsx("div",{className:"layer-btn-wrap layers",children:Array.from({length:$e},(r,s)=>s).map((r,s)=>t.jsx("button",{id:`layer-button-${e}-${r}`,"aria-labelledby":`layer-button-${e}-${r}-span`,onClick:()=>{oe===r?Dr(r):ve(r)},className:`layer-button tooltip-wrap narrow2 ${oe===r?"active":""} ${de.has(r)?"dim":""}`,children:t.jsxs("span",{id:`layer-button-${e}-${r}-span`,children:[t.jsx("span",{className:"scr",children:Lt[o]})," ",r+1," ",t.jsx("span",{className:"tooltip above",children:oe===r?fs[o]:hs[o]})]})},`${r}*${s}`))}),t.jsxs("div",{className:"layer-btn-wrap layer-tools layer-tools2",children:[t.jsxs("button",{id:`every-layer-plus${e}`,"aria-labelledby":`every-layer-plus${e}-span`,className:"layer-tool every-layer tooltip-wrap narrow2",onClick:()=>Kt(1),children:[t.jsx("span",{id:`every-layer-plus${e}-span`,className:"tooltip above",children:bs[o]}),t.jsx(Er,{})]}),t.jsxs("button",{id:`increase-layer-amount${e}`,disabled:$e>=9,"aria-labelledby":`increase-layer-amount${e}-span`,className:"layer-tool layer-amount increase-layer-amount tooltip-wrap narrow2",onClick:()=>wo(1),children:[t.jsx("span",{id:`increase-layer-amount${e}-span`,className:"tooltip above",children:ys[o]}),t.jsx(ha,{})]})]}),t.jsxs("div",{className:`movers-wrap movers-wrap2 ${f?"":"hidden"}`,children:[t.jsxs("button",{id:`moveup${e}`,"aria-labelledby":`moveup${e}-span`,className:"moveup mover tooltip-wrap narrow2",onClick:Qr,children:[t.jsx(ba,{}),t.jsx("span",{id:`moveup${e}-span`,className:"tooltip above",children:vs[o]})]}),t.jsxs("button",{id:`movedown${e}`,"aria-labelledby":`movedown${e}-span`,className:"movedown mover tooltip-wrap narrow2",onClick:Zr,children:[t.jsx(ya,{}),t.jsx("span",{id:`movedown${e}-span`,className:"tooltip above",children:$s[o]})]})]})]}),t.jsx(La,{d:e,defaultHue:x,defaultSaturation:B,defaultLightness:S,setSliderHueVal:qe,setSliderSatVal:_e,setSliderLightVal:Ze,language:o,sliderLightness:io,sliderSaturation:co,sliderHue:lo,sliderLightnessReset:uo,sliderSaturationReset:po,sliderHueReset:mo,sliderLightVal:ut,sliderSatVal:it,sliderHueVal:ct,sliderLightnessInput:ne,sliderSaturationInput:re,sliderHueInput:ee}),t.jsx("div",{ref:he,id:`exitblob${e}`,className:"exitblob"}),g?t.jsxs("div",{className:"blob-handling",children:[t.jsx("div",{className:"full wide flex column center gap",children:t.jsxs("form",{onSubmit:r=>Ur(r),children:[t.jsx("div",{className:"input-wrap",children:t.jsxs("label",{htmlFor:`blobname${e}`,children:[t.jsx("input",{id:`blobname${e}`,type:"text",value:Me,onChange:Hr,placeholder:ft[o],maxLength:30}),t.jsxs("span",{children:[ft[o],":"]})]})}),t.jsx("button",{type:"submit",disabled:b,children:xs[o]})]})}),t.jsxs("div",{ref:v,id:`blob-screenshot${e}`,style:{display:"none"},children:[t.jsx("button",{onClick:or,children:fr[o]}),t.jsx("img",{src:"",ref:h,alt:ks[o],style:yo}),t.jsx("button",{onClick:or,children:fr[o]})]}),t.jsx("h3",{children:gs[o]}),Ir?t.jsx("p",{children:ws[o]}):!te||te.length<1?t.jsx("p",{children:Es[o]}):qt?Object.keys(lt).map((r,s)=>{const n=Object.keys(lt[Number(r)]),c=Math.ceil(n.length/Qe),p=xo[Number(r)]??1,$=(p-1)*Qe,T=$+Qe,O=n.slice($,T);return t.jsxs("div",{className:"flex center margin0auto",children:[sr(r,p,c),t.jsx("ul",{className:"blob-versions-wrap",children:O.map((L,xe)=>t.jsxs("li",{className:"blob-version-item",children:[t.jsx("span",{children:L}),t.jsxs("div",{className:"button-wrap",children:[t.jsxs("button",{onClick:()=>Wr(Number(r),L),children:[Ns[o]," ",t.jsx("span",{className:"scr",children:L})]}),t.jsxs("button",{onClick:()=>Jr(Number(r),L),children:[Bs[o]," ",t.jsx("span",{className:"scr",children:L})]}),t.jsx(Ss,{language:o,id:`accordion-blobnewname-${jt(L)}`,className:"blobnewname",wrapperClass:"blobnewname-wrap",text:hr[o],hideBrackets:!0,onClick:()=>{Gt(L),Rr(L)},isOpen:Mr===L,children:t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"input-wrap",children:t.jsxs("label",{htmlFor:`blobnewname-${jt(L)}`,children:[t.jsx("input",{id:`blobnewname-${jt(L)}`,type:"text",value:at,onChange:zr,placeholder:br[o],maxLength:30}),t.jsxs("span",{children:[hr[o],":"]})," ",t.jsx("span",{className:"scr",children:L})]})}),t.jsxs("button",{onClick:()=>{L!==at?Yr(L,at):y(k(`${ae[o]}: ${br[o]}`,!0,5))},children:[Cs[o]," ",t.jsxs("span",{className:"scr",children:[L,": ",Ds[o]," ",at]})]})]})})]})]},`${L}+${xe}`))},`${r}+${s}`),sr(r,p,c)]},`${r}:${s}`)}):t.jsx("p",{children:js[o]})]}):t.jsxs("div",{className:"wide flex column center gap",children:[t.jsxs("div",{className:"login-to-save wide flex column center gap-half",children:[t.jsx(va,{}),Ls[o]]}),t.jsxs("div",{className:"blob-register-login-wrap",children:[t.jsx("button",{onClick:ho,children:Ts[o]}),t.jsx("big",{children:Ps[o]}),t.jsx("button",{onClick:fo,children:Ms[o]})]})]}),t.jsx("svg",{className:"filter",children:t.jsxs("filter",{id:"svgfilter0",children:[t.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"7"}),t.jsx("feColorMatrix",{values:`\r
1 0 0 0 0\r
0 1 0 0 0\r
0 0 1 0 0\r
0 0 0 50 -18\r
`})]})}),t.jsx("svg",{className:"filter",children:t.jsxs("filter",{id:"svgfilter1",children:[t.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"8"}),t.jsx("feColorMatrix",{values:`\r
1 0 0 0 0\r
0 1 0 0 0\r
0 0 1 0 0\r
0 0 0 46 -28\r
`})]})})]})})})})}const nn=({language:o})=>{const e=Array.from({length:3},(x,B)=>B),j=a.useRef(e.reduce((x,B)=>(x[B]=a.createRef(),x),{})),d=x=>t.jsx("div",{className:"to-blob-art-btn-wrap flex center gap-half",children:e.map((B,S)=>x===S?t.jsx(a.Fragment,{},S):t.jsxs("button",{style:{borderRadius:"1rem",flex:"0 0 auto"},className:"to-blob-art-btn grayer",onClick:()=>{const E=document.getElementById(`drag-container${S}`);E&&E.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},children:[sa[o]," ",aa[o]," ",S+1]},S))});return t.jsxs(t.Fragment,{children:[e.map((x,B)=>t.jsxs(a.Fragment,{children:[d(B),t.jsx(Ra,{language:o,d:x,ds:e.length,dragWrapOuter:j.current[x]})]},x)),d(-1)]})};export{nn as default};
