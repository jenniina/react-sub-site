import{r as F,j as o}from"./react-A9DAvxly.js";import{K as le,S as xe,f3 as fe,f4 as Ft,W as nt,bd as St,c$ as $e,f5 as Ce,u as yt,bX as _e,f6 as be,f7 as we,f8 as ye,f9 as Re,fa as Ne,z as ve,A as je,fb as Te,fc as Ee,ap as Se,fd as Ie,fe as Ue,ff as Fe,fg as Le,fh as Be,fi as Rt,fj as Tt,fk as oe,fl as W,d9 as Ge,fm as De,fn as He,ax as Me,ay as We,fo as ke,fp as ze,fq as Oe,fr as Ve,fs as Nt,bC as se,ft as Pe,fu as Je,br as re,fv as Xe,fw as Ye}from"./index-BAu6JWqg.js";import{a2 as ne,a3 as qe,a4 as Ke}from"./react-icons-BXtkaQB_.js";import"./hoist-non-react-statics-D5aJipOz.js";import"./react-dom-yh0erWL-.js";import"./scheduler-CzFDRTuY.js";import"./react-redux-CHm9GgGE.js";import"./react-is-DUDD-a5e.js";import"./use-sync-external-store-DEc9BFqZ.js";import"./@reduxjs-DhFEcpJw.js";import"./immer-C0GRqQ_d.js";import"./redux-CE3tqztX.js";import"./@babel-DF5_wy6Y.js";import"./redux-thunk-CY0Q9z1Q.js";import"./axios-CCb-kr4I.js";import"./react-router-dom-CYs6befe.js";import"./react-router-S1Hdk0kP.js";import"./@remix-run-DTnHqtaE.js";const Qe="_light_xgcdz_39",Ze="_drag_xgcdz_221",to="_overflow_xgcdz_235",eo="_indicator_xgcdz_343",oo="_tooltip_xgcdz_343",so="_form_xgcdz_511",ro="_remove_xgcdz_539",no="_inputs_xgcdz_569",d={"color-container":"_color-container_xgcdz_1",light:Qe,"color-picker":"_color-picker_xgcdz_57","width-wrap":"_width-wrap_xgcdz_109","btn-wrap":"_btn-wrap_xgcdz_123","info-wrap":"_info-wrap_xgcdz_141","color-blocks":"_color-blocks_xgcdz_189",drag:Ze,overflow:to,"block-wrap":"_block-wrap_xgcdz_243","color-wrap":"_color-wrap_xgcdz_261","color-block":"_color-block_xgcdz_189","compliance-indicators":"_compliance-indicators_xgcdz_321",indicator:eo,tooltip:oo,"indicator-aaa":"_indicator-aaa_xgcdz_373","indicator-null":"_indicator-null_xgcdz_381","compliance-info":"_compliance-info_xgcdz_389","toggle-controls":"_toggle-controls_xgcdz_397","color-edit-container":"_color-edit-container_xgcdz_427","color-select":"_color-select_xgcdz_429","mode-container":"_mode-container_xgcdz_485",form:so,"color-format-submit":"_color-format-submit_xgcdz_537",remove:ro,"color-name":"_color-name_xgcdz_553",inputs:no,"hex-input":"_hex-input_xgcdz_591"},lo=({language:p,block:f,fontSize:S,updateColor:z,width:I,hexToRGB:ft,hslToRGB:O,rgbToHex:X,rgbToHSL:E})=>{const L=le(),Y=/^hsl\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*\)$/i,q=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i,H=/^#([0-9A-F]{3}){1,2}$/i,V=[{value:"hsl",label:"HSL"},{value:"rgb",label:"RGB"},{value:"hex",label:"Hex"}],[v,$t]=F.useState(V.find(m=>m.value===f.colorFormat)||V[0]),[R,K]=F.useState(""),[lt,at]=F.useState(0),[it,ct]=F.useState(0),[tt,P]=F.useState(0),[mt,h]=F.useState(0),[Q,M]=F.useState(0),[dt,et]=F.useState(0);F.useEffect(()=>{switch(f.colorFormat){case"hex":{K(f.color);const{r:m,g:$,b:A}=ft(f.color);at(m),ct($),P(A);const{h:j,s:w,l:U}=E(m,$,A);h(j),M(w),et(U);break}case"rgb":{const m=f.color.match(q);if(m){const $=Number(m[1]),A=Number(m[2]),j=Number(m[3]);at($),ct(A),P(j);const{h:w,s:U,l:k}=E($,A,j);h(w),M(U),et(k)}break}case"hsl":{const m=f.color.match(Y);if(m){const $=Number(m[1]),A=Number(m[2]),j=Number(m[3]);h($),M(A),et(j);const{r:w,g:U,b:k}=O($,A,j);at(w),ct(U),P(k);const ot=X(w,U,k);K(ot)}break}}},[]);const ht=m=>{m.preventDefault();const $=v==null?void 0:v.value;try{let A;if($==="hex")if(H.test(R))A=R.toUpperCase(),z(f.id,A,"hex");else throw new Error("Invalid Hex format.");else if($==="rgb")if(lt>=0&&lt<=255&&it>=0&&it<=255&&tt>=0&&tt<=255)A=`rgb(${lt}, ${it}, ${tt})`,z(f.id,A,"rgb");else throw new Error("Invalid RGB values.");else if($==="hsl")if(mt>=0&&mt<=360&&Q>=0&&Q<=100&&dt>=0&&dt<=100)A=`hsl(${mt}, ${Q}%, ${dt}%)`,z(f.id,A,"hsl");else throw new Error("Invalid HSL values.");else throw new Error("Unsupported color format.")}catch(A){console.error(A.message),L(nt(St[p]+" "+A.message,!0,4))}},Ct=(m,$)=>{m==="h"&&h($),m==="s"&&M($),m==="l"&&et($);const A=m==="h"?$:mt,j=m==="s"?$:Q,w=m==="l"?$:dt;if(A>=0&&A<=360&&j>=0&&j<=100&&w>=0&&w<=100){const{r:U,g:k,b:ot}=O(A,j,w);at(U),ct(k),P(ot),z(f.id,`hsl(${A}, ${j}%, ${w}%)`,"hsl"),K(X(U,k,ot))}},ut=(m,$)=>{m==="r"&&at($),m==="g"&&ct($),m==="b"&&P($);const A=m==="r"?$:lt,j=m==="g"?$:it,w=m==="b"?$:tt;if([A,j,w].every(U=>U>=0&&U<=255)){const{h:U,s:k,l:ot}=E(A,j,w);h(U),M(k),et(ot),z(f.id,`rgb(${A}, ${j}, ${w})`,"rgb"),K(X(A,j,w))}};return o.jsxs(o.Fragment,{children:[o.jsx(xe,{hideDelete:!0,id:"color-select",className:d["color-select"],language:p,instructions:fe[p],hide:!0,options:V,value:v,onChange:m=>{$t(m)}}),(v==null?void 0:v.value)==="hex"&&o.jsxs("form",{className:d.form,onSubmit:ht,children:[o.jsx("div",{className:`${d.inputs} ${d["hex-input"]}`,children:o.jsxs("label",{children:[o.jsx("span",{children:"Hex: "}),o.jsx("input",{name:`hex-input-${f.id}`,type:"text",value:R,onChange:m=>K(m.target.value),className:d["color-input"],style:{maxWidth:`${I}`,fontSize:S},placeholder:"#FFFFFF"})]})}),o.jsx("button",{style:{minWidth:"calc(100% - 4px)",maxWidth:"calc(100% - 4px)",fontSize:S},type:"submit",className:`${d["color-format-submit"]} small gray`,children:Ft[p]})]}),(v==null?void 0:v.value)==="rgb"&&o.jsxs("form",{className:`${d.inputs} ${d["rgb-inputs"]}`,onSubmit:ht,children:[o.jsxs("label",{children:[o.jsx("span",{children:"R: "}),o.jsx("input",{name:`r-input-${f.id}`,type:"number",value:lt,onChange:m=>ut("r",Number(m.target.value)),min:0,max:255,className:d["color-input"],style:{maxWidth:`${I}`,fontSize:S}})]}),o.jsxs("label",{children:[o.jsx("span",{children:"G: "}),o.jsx("input",{name:`g-input-${f.id}`,type:"number",value:it,onChange:m=>ut("g",Number(m.target.value)),min:0,max:255,className:d["color-input"],style:{maxWidth:`${I}`,fontSize:S}})]}),o.jsxs("label",{children:[o.jsx("span",{children:"B: "}),o.jsx("input",{name:`b-input-${f.id}`,type:"number",value:tt,onChange:m=>ut("b",Number(m.target.value)),min:0,max:255,className:d["color-input"],style:{maxWidth:`${I}`,fontSize:S}})]}),o.jsx("button",{style:{minWidth:"calc(100% - 4px)",maxWidth:"calc(100% - 4px)",fontSize:S},type:"submit",className:`${d["color-format-submit"]} small gray`,children:Ft[p]})]}),(v==null?void 0:v.value)==="hsl"&&o.jsxs("form",{className:`${d.inputs} ${d["hsl-inputs"]}`,onSubmit:ht,children:[o.jsxs("label",{children:[o.jsx("span",{children:"H: "}),o.jsx("input",{name:`h-input-${f.id}`,type:"number",value:mt,onChange:m=>Ct("h",Number(m.target.value)),min:0,max:360,className:d["color-input"],style:{maxWidth:`${I}`,fontSize:S}})," "]}),o.jsxs("label",{children:[o.jsx("span",{children:"S: "}),o.jsx("input",{name:`s-input-${f.id}`,type:"number",value:Q,onChange:m=>Ct("s",Number(m.target.value)),min:0,max:100,className:d["color-input"],style:{maxWidth:`${I}`,fontSize:S}})]}),o.jsxs("label",{children:[o.jsx("span",{children:"L: "}),o.jsx("input",{name:`l-input-${f.id}`,type:"number",value:dt,onChange:m=>Ct("l",Number(m.target.value)),min:0,max:100,className:d["color-input"],style:{maxWidth:`${I}`,fontSize:S}})]}),o.jsx("button",{style:{minWidth:"calc(100% - 4px)",maxWidth:"calc(100% - 4px)",fontSize:S},type:"submit",className:`${d["color-format-submit"]} small gray`,children:Ft[p]})]})]})},At=Ve(5),It=["analogous","complementary","triad","monochromatic"];let Lt=Math.floor(Math.random()*It.length);const Et=(p,f)=>{const S=E=>{let L,Y,q;if(E.colorFormat==="hex")({r:L,g:Y,b:q}=Rt(E.color));else if(E.colorFormat==="rgb"){const H=E.color.match(/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i);if(H)L=Number(H[1]),Y=Number(H[2]),q=Number(H[3]);else throw new Error("Invalid RGB format")}else if(E.colorFormat==="hsl"){const H=E.color.match(/^hsl\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*\)$/i);if(H){const V=Number(H[1]),v=Number(H[2]),$t=Number(H[3]);({r:L,g:Y,b:q}=W(V,v,$t))}else throw new Error("Invalid HSL format")}else throw new Error("Unsupported color format");return{r:L,g:Y,b:q}},z=S(p),I=S(f),ft=Nt(z.r,z.g,z.b),O=Nt(I.r,I.g,I.b),X=Xe(ft,O);return{isAAARegularTextCompliant:X>=7,isAARegularTextCompliant:X>=4.5,isAAUIComponentsCompliant:X>=3}},_="colors",xt="hsl",Bt=[{id:1,color:"hsl(200, 50%, 10%)",luminance:.011540526030345211,status:_,colorFormat:xt,compliantColors:{AAA_RegularText:[4,5],AA_UIComponents:[3,4,5],AA_RegularText:[3,4,5]}},{id:2,color:"hsl(200, 50%, 35%)",luminance:.12179747967530058,status:_,colorFormat:xt,compliantColors:{AAA_RegularText:[],AA_UIComponents:[4,5],AA_RegularText:[5]}},{id:3,color:"hsl(200, 50%, 55%)",luminance:.3071249100459835,status:_,colorFormat:xt,compliantColors:{AAA_RegularText:[],AA_UIComponents:[1],AA_RegularText:[1]}},{id:4,color:"hsl(200, 50%, 75%)",luminance:.5493970089199802,status:_,colorFormat:xt,compliantColors:{AAA_RegularText:[1],AA_UIComponents:[1,2],AA_RegularText:[1]}},{id:5,color:"hsl(200, 50%, 90%)",luminance:.800081557105977,status:_,colorFormat:xt,compliantColors:{AAA_RegularText:[1],AA_UIComponents:[1,2],AA_RegularText:[1,2]}}],No=({language:p})=>{var Gt,Dt,Ht,Mt,Wt;const f=le(),S=$e(),z=Ce(),[I,ft]=F.useState(!0),[O,X]=yt("Jenniina-showColorNames",!0),[E,L,Y]=yt("Jenniina-colorsAccessibility",Bt),[q,H]=yt("Jenniina-currentColor","#7D7D7D"),[V,v]=yt("Jenniina-idCounter",1),{isDragging:$t,listItemsByStatus:R,handleDragging:K,handleUpdate:lt}=_e(E,[_]),at=F.useRef(0),[it,ct]=F.useState(0),tt=8,[P,mt]=yt("Jenniina-color-block-width",tt),h=`${P}em`,Q=P/tt,M={tooltip:`${.7*Q}em`,colorName:`${.7*Q}em`,input:`${.8*Q}em`},[dt,et]=F.useState(!1),ht=(e,s)=>{const r=Et(e,s);return r.isAAARegularTextCompliant&&(e.compliantColors.AAA_RegularText.push(s.id),s.compliantColors.AAA_RegularText.push(e.id)),r.isAARegularTextCompliant&&(e.compliantColors.AA_RegularText.push(s.id),s.compliantColors.AA_RegularText.push(e.id)),r.isAAUIComponentsCompliant&&(e.compliantColors.AA_UIComponents.push(s.id),s.compliantColors.AA_UIComponents.push(e.id)),e.compliantColors.AAA_RegularText=Array.from(new Set(e.compliantColors.AAA_RegularText)),e.compliantColors.AA_RegularText=Array.from(new Set(e.compliantColors.AA_RegularText)),e.compliantColors.AA_UIComponents=Array.from(new Set(e.compliantColors.AA_UIComponents)),s.compliantColors.AAA_RegularText=Array.from(new Set(s.compliantColors.AAA_RegularText)),s.compliantColors.AA_RegularText=Array.from(new Set(s.compliantColors.AA_RegularText)),s.compliantColors.AA_UIComponents=Array.from(new Set(s.compliantColors.AA_UIComponents)),{updatedColor1:e,updatedColor2:s}},Ct=e=>e.map(s=>{try{let r;if(s.colorFormat==="hex")r=Rt(s.color);else if(s.colorFormat==="rgb"){const t=s.color.match(/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i);if(t)r={r:Number(t[1]),g:Number(t[2]),b:Number(t[3])};else throw new Error("Invalid RGB format")}else if(s.colorFormat==="hsl"){const t=s.color.match(/^hsl\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*\)$/i);if(t){const l=Number(t[1]),g=Number(t[2]),n=Number(t[3]);r=W(l,g,n)}else throw new Error("Invalid HSL format")}else throw new Error("Unsupported color format");return[r.r,r.g,r.b]}catch(r){return console.error(`Error transforming color ID ${s.id}:`,r),"N"}}),ut=()=>Math.floor(Math.random()*256),[m,$]=F.useState(It[Lt]),A=e=>{let s=e;const r=[ut(),ut(),ut()],t=Tt(r[0],r[1],r[2]);let l="N",g="N";switch(m){case"analogous":{const n=[(t.h+30)%360,t.s,t.l],a=W(n[0],n[1],n[2]);l=[a.r,a.g,a.b];const c=[(t.h+60)%360,t.s,t.l],u=W(c[0],c[1],c[2]);g=[u.r,u.g,u.b]}break;case"complementary":{const n=[(t.h+180)%360,t.s,t.l],a=W(n[0],n[1],n[2]);l=[a.r,a.g,a.b]}break;case"triad":{const n=[(t.h+120)%360,t.s,t.l],a=W(n[0],n[1],n[2]);l=[a.r,a.g,a.b];const c=[(t.h+240)%360,t.s,t.l],u=W(c[0],c[1],c[2]);g=[u.r,u.g,u.b]}break;case"monochromatic":{const n=[t.h,t.s,Math.min(t.l+10,100)],a=W(n[0],n[1],n[2]);l=[a.r,a.g,a.b];const c=[t.h,t.s,Math.max(t.l-10,0)],u=W(c[0],c[1],c[2]);g=[u.r,u.g,u.b]}break;default:{const n=[(t.h+30)%360,t.s,t.l],a=W(n[0],n[1],n[2]);l=[a.r,a.g,a.b];const c=[(t.h+60)%360,t.s,t.l],u=W(c[0],c[1],c[2]);g=[u.r,u.g,u.b]}break}if(e.length===0)return m==="complementary"?[r,l,"N","N","N"]:[r,l,g,"N","N"];if(e.length>3)s=e.slice(0,3);else{if(e.length===1)return[...e,"N","N","N","N"];if(e.length===2)return[...e,"N","N","N"]}return[...s,"N","N"]},j=async()=>{et(!0);const e=Ct(E),s=A(e),r="http://colormind.io/api/",t={model:"ui",input:s};try{const l=await fetch(r,{method:"POST",body:JSON.stringify(t)});if(!l.ok)throw new Error(`Error: ${l.statusText}`);const n=(await l.json()).result,a=E.length<1?n:E.length===1?n.slice(-4):E.length===2?n.slice(-3):n.slice(-2),c=a.map((y,N)=>{const[i,x,b]=y,C=Tt(i,x,b),T=Nt(i,x,b);return{id:V+N,color:`hsl(${C.h}, ${C.s}%, ${C.l}%)`,luminance:T,status:_,colorFormat:xt,compliantColors:{AA_RegularText:[],AAA_RegularText:[],AA_UIComponents:[]}}}),u=E.map(y=>(c.forEach(N=>{const{updatedColor1:i,updatedColor2:x}=ht(y,N);y=i,N=x}),y));for(let y=0;y<c.length;y++)for(let N=y+1;N<c.length;N++){const{updatedColor1:i,updatedColor2:x}=ht(c[y],c[N]);c[y]=i,c[N]=x}Lt=Math.floor(Math.random()*It.length),L([...u,...c]),v(V+a.length),$(It[Lt])}catch(l){console.error(l),f(nt(`Error: ${l.message}`,!0,4))}finally{et(!1)}},w=(e,s)=>{if(s==="hex"){if(/^#([A-Fa-f0-9]{6})$/.test(e))return e.toUpperCase();throw new Error(`Invalid HEX color format: ${e}`)}else if(s==="rgb"){const r=e.match(/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i);if(r){const t=Number(r[1]),l=Number(r[2]),g=Number(r[3]);if([t,l,g].every(n=>n>=0&&n<=255))return oe(t,l,g);throw new Error(`RGB values out of range in color: ${e}`)}else throw new Error(`Invalid RGB color format: ${e}`)}else if(s==="hsl"){const r=e.match(/^hsl\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*\)$/i);if(r){const t=Number(r[1]),l=Number(r[2]),g=Number(r[3]);if([t,l,g].every((n,a)=>a===0?n>=0&&n<=360:n>=0&&n<=100))return Ye(t,l,g);throw new Error(`HSL values out of range in color: ${e}`)}else throw new Error(`Invalid HSL color format: ${e}`)}else throw new Error(`Unsupported color format: ${s}`)},U={AA_RegularText:({xPosition:e,yIndicator:s,blockWidth:r,indicatorSize:t,otherColor:l,blockColor:g,colorFormatBlock:n,colorFormatOther:a})=>{const c=w(g,n),u=w(l,a);return`
 <circle
  cx="${e+r/2}"
  cy="${s+t/2}"
  r="${t*.32}"
  fill="${c}"
  stroke="${u}"
  stroke-width="${t*.1}"
/>
`},AA_UIComponents:({xPosition:e,yIndicator:s,blockWidth:r,indicatorSize:t,otherColor:l,blockColor:g,colorFormatBlock:n,colorFormatOther:a})=>{const c=w(g,n),u=w(l,a);return`
    <rect
  x="${e+r/2-t*.2}"
  y="${s+t/2-t*.15}"
  width="${t*.3}"
  height="${t*.3}"
  fill="${c}"
  stroke="${u}"
  stroke-width="${t*.1}"
/>
`},AAA_RegularText:({xPosition:e,yIndicator:s,blockWidth:r,indicatorSize:t,otherColor:l,blockColor:g,colorFormatBlock:n,colorFormatOther:a})=>{const c=w(l,a);return`
<circle
  cx="${e+r/2}"
  cy="${s+t/2}"
  r="${t/2}"
  fill="${c}"
  stroke="none"
/>
`}},k=()=>{var kt,zt,Ot,Vt,Pt,Jt,Xt,Yt,qt;const e=P*20,s=e,r=s/3,t=r/1.5,l=e/4,g=r/20,n=s/10,c=((zt=(kt=R[_])==null?void 0:kt.items)==null?void 0:zt.length)*(r+t)-t+l*2,u=O?n+l:0,y=((Ot=R[_])==null?void 0:Ot.items.length)*s,N=c+u*1.6,i=(Pt=(Vt=R[_])==null?void 0:Vt.items)==null?void 0:Pt.map((D,_t)=>{const gt=_t*s;let rt;try{rt=w(D.color,D.colorFormat)}catch(bt){console.error(bt),f(nt(`${St[p]}: ${bt.message}`,!0,4)),rt="#000000"}const vt=`
        <rect
          x="${gt}"
          y="0"
          width="${s}"
          height="${c}"
          fill="${rt}"
          stroke="none"
        />
      `,jt=O?`
        <!-- Text Background -->
        <rect
          x="${gt}"
          y="${c-.5}"
          width="${s}"
          height="${u}"
          fill="${rt}"
          stroke="none"
        />
        <!-- Color Text Label -->
        <text
          x="${gt+s/2}"
          y="${c+u/2+n/3}"
          font-size="${n}"
          font-family="Arial"
          text-anchor="middle"
          dominant-baseline="middle"
          fill="${D.luminance>.179?"#000000":"#FFFFFF"}"
          stroke="none"
        >
          ${D.color}
        </text>
      `:"";return`
        <g>
          <!-- Color Block -->
          ${vt}
          <!-- Color Text Label -->
          ${jt}
        </g>
      `}).join(""),x=(Xt=(Jt=R[_])==null?void 0:Jt.items)==null?void 0:Xt.map((D,_t)=>{const rt=l+_t*(r+t)+(r-g)/2,vt=w(D.color,D.colorFormat);return`
        <rect
          x="0"
          y="${rt}"
          width="${y}"
          height="${g}"
          fill="${vt}"
          stroke="none"
        />
      `}).join(""),b=(qt=(Yt=R[_])==null?void 0:Yt.items)==null?void 0:qt.map((D,_t)=>{var jt,bt;const gt=_t*s,rt=J=>{var wt,Kt,Qt,Zt,te,ee;return(Kt=(wt=D.compliantColors)==null?void 0:wt.AAA_RegularText)!=null&&Kt.includes(J)?"AAA_RegularText":(Zt=(Qt=D.compliantColors)==null?void 0:Qt.AA_RegularText)!=null&&Zt.includes(J)?"AA_RegularText":(ee=(te=D.compliantColors)==null?void 0:te.AA_UIComponents)!=null&&ee.includes(J)?"AA_UIComponents":null};return`
        <g>
          <!-- Compliance Indicators -->
          ${(bt=(jt=R[_])==null?void 0:jt.items)==null?void 0:bt.filter(J=>J.id!==D.id).map(J=>{const wt=rt(J.id);return wt?U[wt]({xPosition:gt,yIndicator:l+(J.id-1)*(r+t),blockWidth:s,indicatorSize:r,otherColor:J.color,blockColor:D.color,colorFormatBlock:D.colorFormat,colorFormatOther:J.colorFormat}):""}).join("")}
        </g>
      `}).join(""),C=10,T=y-C,B=N-C*1.5,G="https://colors.jenniina.fi",pt=`
      <a href="${G}" target="_blank" rel="noopener noreferrer">
        <text
          x="${T}"
          y="${B}"
          font-size="${n}"
          font-family="Arial"
          text-anchor="end"
          fill="#000000"
          stroke="none"
        >
          ${G}
        </text>
      </a>
    `,st=`
      <a href="${G}" target="_blank" rel="noopener noreferrer">
        <text
          x="${C}"
          y="${B}"
          font-size="${n}"
          font-family="Arial"
          text-anchor="start"
          fill="#FFFFFF"
          stroke="none"
        >
          ${G}
        </text>
      </a>
    `;return{svgContent:`
    <svg xmlns="http://www.w3.org/2000/svg" width="${y}" height="${N}">
      <!-- Color Blocks -->
      <g>
        ${i}
      </g>
      <!-- Lines -->
      <g>
        ${x}
      </g>
      <!-- Compliance Indicators -->
      <g>
        ${b}
      </g>
      <!-- Source Link -->
      <g>
        ${st}
      </g>
      <g>
        ${pt}
      </g>
    </svg>
  `,svgWidth:y,svgHeight:N}},ot=()=>{const{svgContent:e}=k(),s=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),r=URL.createObjectURL(s),t=document.createElement("a");t.href=r,t.download="color-blocks.svg",document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(r),f(nt(se[p],!1,5))},ae=()=>{const{svgContent:e,svgWidth:s,svgHeight:r}=k(),t=new Image;t.width=s,t.height=r;const l=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),g=URL.createObjectURL(l);t.onload=()=>{const n=document.createElement("canvas");n.width=s,n.height=r;const a=n.getContext("2d");a==null||a.drawImage(t,0,0);const c=n.toDataURL("image/png"),u=document.createElement("a");u.href=c,u.download="color-blocks.png",document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(g),f(nt(se[p],!1,5))},t.onerror=n=>{console.error("Error loading SVG into image for PNG conversion:",n),URL.revokeObjectURL(g),f(nt(St[p],!0,4))},t.src=g},ie=()=>{var u,y,N;const{r:e,g:s,b:r}=Rt(q),{h:t,s:l,l:g}=Tt(e,s,r),n=Nt(e,s,r),a={id:V,color:`hsl(${t}, ${l}%, ${g}%)`,luminance:n,status:_,colorFormat:"hsl",compliantColors:{AA_RegularText:[],AAA_RegularText:[],AA_UIComponents:[]}};(y=(u=R[_])==null?void 0:u.items)==null||y.forEach(i=>{var b,C,T,B,G,pt,st,Z;const x=Et(a,i);x.isAAARegularTextCompliant?((b=a.compliantColors)==null||b.AAA_RegularText.push(i.id),(C=i.compliantColors)==null||C.AAA_RegularText.push(a.id)):x.isAARegularTextCompliant?((T=a.compliantColors)==null||T.AA_RegularText.push(i.id),(B=i.compliantColors)==null||B.AA_RegularText.push(a.id)):x.isAAUIComponentsCompliant&&((pt=(G=a.compliantColors)==null?void 0:G.AA_UIComponents)==null||pt.push(i.id),(Z=(st=i.compliantColors)==null?void 0:st.AA_UIComponents)==null||Z.push(a.id))});const c=(N=R[_])==null?void 0:N.items.map(i=>{var x,b,C;return{...i,compliantColors:{AAA_RegularText:Array.from(new Set((x=i.compliantColors)==null?void 0:x.AAA_RegularText)),AA_RegularText:Array.from(new Set((b=i.compliantColors)==null?void 0:b.AA_RegularText)),AA_UIComponents:Array.from(new Set((C=i.compliantColors)==null?void 0:C.AA_UIComponents))}}});L([...c,a]),v(V+1)},ce=e=>{var s;if(window.confirm(Pe[p])){const r=(s=R[_])==null?void 0:s.items.filter(t=>t.id!==e).map(t=>{var l,g,n,a;return{...t,compliantColors:{AAA_RegularText:(l=t.compliantColors)==null?void 0:l.AAA_RegularText.filter(c=>c!==e),AA_RegularText:(g=t.compliantColors)==null?void 0:g.AA_RegularText.filter(c=>c!==e),AA_UIComponents:(a=(n=t.compliantColors)==null?void 0:n.AA_UIComponents)==null?void 0:a.filter(c=>c!==e)}}});L(r),f(nt(Je[p],!1,5))}},me=(e,s,r)=>{var t;try{let l,g,n,a;if(r==="hsl"){const i=s.match(/^hsl\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*\)$/i);if(!i)throw new Error("Invalid HSL format");const x=Number(i[1]),b=Number(i[2]),C=Number(i[3]);if(x<0||x>360||b<0||b>100||C<0||C>100)throw new Error("HSL values out of range");l=`hsl(${x}, ${b}%, ${C}%)`;const T=W(x,b,C);g=T.r,n=T.g,a=T.b}else if(r==="rgb"){const i=s.match(/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i);if(!i)throw new Error("Invalid RGB format");const x=Number(i[1]),b=Number(i[2]),C=Number(i[3]);if([x,b,C].some(T=>T<0||T>255))throw new Error("RGB values must be between 0 and 255");l=`rgb(${x}, ${b}, ${C})`,g=x,n=b,a=C}else if(r==="hex"){if(!/^#([0-9A-F]{3}){1,2}$/i.test(s))throw new Error("Invalid Hex format");l=s.toUpperCase();const i=Rt(l);g=i.r,n=i.g,a=i.b}else throw new Error("Unsupported color format");const c=Nt(g,n,a),u=(t=R[_])==null?void 0:t.items.map(i=>{var x,b,C,T,B,G,pt;if(i.id===e)return{...i,color:l,colorFormat:r,luminance:c,compliantColors:{AAA_RegularText:[],AA_RegularText:[],AA_UIComponents:[]}};{const st=Et(i,{id:e,color:l,colorFormat:r,luminance:c,status:i.status,compliantColors:{AAA_RegularText:[],AA_RegularText:[],AA_UIComponents:[]}});return{...i,compliantColors:{AAA_RegularText:st.isAAARegularTextCompliant?[...new Set([...(x=i.compliantColors)==null?void 0:x.AAA_RegularText,e])]:(b=i.compliantColors)==null?void 0:b.AAA_RegularText.filter(Z=>Z!==e),AA_RegularText:st.isAARegularTextCompliant?[...new Set([...(C=i.compliantColors)==null?void 0:C.AA_RegularText,e])]:(T=i.compliantColors)==null?void 0:T.AA_RegularText.filter(Z=>Z!==e),AA_UIComponents:st.isAAUIComponentsCompliant?[...new Set([...(B=i.compliantColors)==null?void 0:B.AA_UIComponents,e])]:(pt=(G=i.compliantColors)==null?void 0:G.AA_UIComponents)==null?void 0:pt.filter(Z=>Z!==e)}}}}),y=(i,x)=>{let b=[],C=[],T=[];return x.forEach(B=>{if(B.id===i.id)return;const G=Et(i,B);G.isAAARegularTextCompliant&&b.push(B.id),G.isAARegularTextCompliant&&T.push(B.id),G.isAAUIComponentsCompliant&&C.push(B.id)}),{AAA_RegularText:Array.from(new Set(b)),AA_RegularText:Array.from(new Set(T)),AA_UIComponents:Array.from(new Set(C))}},N=u.findIndex(i=>i.id===e);if(N!==-1){const i=y(u[N],u);u[N]={...u[N],compliantColors:i}}L([...u])}catch(l){console.error("Error updating color:",l),f(nt(`${St[p]}: ${l.message}`,!0,4))}},de=(e,s)=>{e.dataTransfer.setData("text/plain",JSON.stringify({type:"item",id:s}))},ue=(e,s)=>{e.preventDefault(),ct(s),at.current=s},pe=e=>{e.preventDefault(),K(!0)},he=e=>{const s=JSON.parse(e.dataTransfer.getData("text/plain"));s.type==="item"&&(lt(s.id,_,it),K(!1))};F.useEffect(()=>{var e,s;(!((e=R[_])!=null&&e.items)||((s=R[_])==null?void 0:s.items.length)<1)&&L(Bt)},[]),F.useEffect(()=>{var e;((e=R[_])==null?void 0:e.items.length)<1&&v(1)},[E]);const ge=()=>{window.confirm(re[p])&&(Y(),L([]))},Ae=()=>{window.confirm(re[p])&&(Y(),L(Bt))},Ut=.04;return o.jsxs("div",{id:d["color-container"],className:`${d["color-container"]} ${S?d.light:""}`,style:{"--font-size":M.input},children:[o.jsx("div",{id:"info",className:d["info-wrap"],children:o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx("div",{style:{display:"inline-block",backgroundColor:"var(--color-primary-20)",borderRadius:"50%",width:"2em",height:"2em"}}),o.jsx("span",{children:be[p]})]}),o.jsxs("li",{children:[o.jsx("div",{style:{display:"inline-block",backgroundColor:"transparent",outline:"0.3em solid var(--color-primary-20)",outlineOffset:"-0.3em",borderRadius:"50%",width:"1.7em",height:"1.7em",margin:"0 0.2em 0 0.2em "}}),o.jsx("span",{children:we[p]})]}),o.jsxs("li",{children:[o.jsx("div",{style:{display:"inline-block",backgroundColor:"transparent",outline:"0.3em solid var(--color-primary-20)",outlineOffset:"-0.26em",borderRadius:"0",width:"0.9em",height:"0.9em",margin:"0 0.65em 0 0.65em"}}),o.jsx("span",{children:ye[p]})]})]})}),o.jsxs("div",{className:d["btn-wrap"],children:[((Dt=(Gt=R[_])==null?void 0:Gt.items)==null?void 0:Dt.length)>0&&o.jsxs(o.Fragment,{children:[o.jsxs("button",{type:"button",onClick:ae,className:"gray small",children:[Re[p],"  ",o.jsx(ne,{})]}),o.jsxs("button",{type:"button",onClick:ot,className:"gray small",children:[Ne[p],"  ",o.jsx(ne,{})]})]}),o.jsx("button",{onClick:z,className:"gray small",children:S?o.jsxs(o.Fragment,{children:[ve[p],"  ",o.jsx(qe,{})]}):o.jsxs(o.Fragment,{children:[je[p],"  ",o.jsx(Ke,{})," "]})})]}),o.jsxs("div",{className:d["color-picker"],children:[o.jsxs("label",{htmlFor:"color-input",className:" ",children:[Te[p],":"]}),o.jsx("input",{id:"color-input",type:"color",value:q,onChange:e=>H(e.target.value)}),o.jsx("button",{className:"gray small",type:"button",onClick:ie,children:Ee[p]}),o.jsx("button",{className:"gray small",type:"button",onClick:Ae,children:Se[p]}),o.jsx("button",{className:"gray small",type:"button",onClick:ge,children:Ie[p]}),o.jsx("button",{className:"gray small",type:"button",onClick:j,disabled:dt,children:Ue[p]})]}),o.jsx("div",{id:"color-blocks",className:`${d["color-blocks"]} ${!O||!I?d.overflow:""} ${$t?d.drag:""}`,children:(Ht=R[_])==null?void 0:Ht.items.map(e=>{var s,r;return o.jsx("ul",{className:d["block-wrap"],onDrop:he,children:o.jsxs("li",{className:d["color-wrap"],title:`ID: ${e.id}`,"aria-label":`ID: ${e.id}`,style:{width:`${h}`,maxWidth:`${h}`},children:[o.jsx("ul",{children:o.jsx("li",{draggable:"true",onDragStart:t=>de(t,e.id),onDragEnter:t=>ue(t,e.id),onDragOver:t=>pe(t),onDragEnd:()=>K(!1),"data-identity":e.id,className:d["color-block"],style:{"--color":e.color,backgroundColor:e.color,width:`${h}`,maxWidth:`${h}`,height:`calc(calc(${h} * 0.6) * ${(s=R[_])==null?void 0:s.items.length})`},children:o.jsx("div",{className:d["compliance-indicators"],style:{gap:`calc(${h} / 4)`,"--width-full":`${h}`},children:(r=R[_])==null?void 0:r.items.map(t=>{var g,n,a,c,u,y;if(t.id===e.id)return o.jsx("div",{className:`${d["indicator-null"]} ${d.indicator}`,style:{"--color":t.color,"--width":`calc(${h} / 3)`,"--left":`calc(calc(${h} / 3) * -1)`,backgroundColor:"transparent",width:`calc(${h} / 3)`,height:`calc(${h} / 3)`}},`none-${t.color}-${t.id}`);let l=null;return(n=(g=e.compliantColors)==null?void 0:g.AAA_RegularText)!=null&&n.includes(t.id)?l="AAA_RegularText":(c=(a=e.compliantColors)==null?void 0:a.AA_RegularText)!=null&&c.includes(t.id)?l="AA_RegularText":(y=(u=e.compliantColors)==null?void 0:u.AA_UIComponents)!=null&&y.includes(t.id)&&(l="AA_UIComponents"),l==="AAA_RegularText"?o.jsx("div",{tabIndex:0,className:`${d["indicator-aaa"]} ${d.indicator} tooltip-wrap`,style:{"--color":t.color,backgroundColor:t.color,"--left":`calc(calc(${h} / 3) * -1)`,width:`calc(${h} / 3)`,height:`calc(${h} / 3)`},"aria-labelledby":`span-${t.id}-${e.id}-${At}`,children:o.jsx("span",{id:`span-${t.id}-${e.id}-${At}`,className:`tooltip below narrow3 ${d.tooltip}`,style:{fontSize:`clamp(0.7rem, ${M.input}, 0.9rem)`,"--tooltip-max-width":h},children:`${Fe[p]}: ${t.id}`})},`aaa-${t.color}-${t.id}`):l==="AA_RegularText"?o.jsx("div",{tabIndex:0,className:`${d["indicator-aa"]} ${d.indicator} tooltip-wrap`,style:{"--color":t.color,backgroundColor:e.color,outline:`calc(${h} * ${Ut*1.1}) solid ${t.color}`,outlineOffset:`calc(${h} * -0.013)`,"--left":`calc(calc(${h} / 5) * -2)`,width:`calc(${h} / 5)`,height:`calc(${h} / 5)`,margin:`calc(${h} / 15)`,borderRadius:"50%"},"aria-labelledby":`span-${t.id}-${e.id}-${At}`,children:o.jsx("span",{id:`span-${t.id}-${e.id}-${At}`,className:"tooltip below narrow3",style:{fontSize:`clamp(0.7rem, ${M.input}, 0.9rem)`,"--tooltip-max-width":h},children:`${Le[p]}: ${t.id}`})},`aa-${t.color}-${t.id}`):l==="AA_UIComponents"?o.jsx("div",{tabIndex:0,className:`${d["indicator-aa-ui"]} ${d.indicator} tooltip-wrap`,style:{"--color":t.color,"--left":`calc(calc(${h} / 7) * -3)`,backgroundColor:e.color,outline:`calc(${h} * ${Ut}) solid ${t.color}`,outlineOffset:`calc(${h} * ${Ut} * -1)`,width:`calc(${h} / 7)`,height:`calc(${h} / 7)`,margin:`calc(${h} / 10.5)`},"aria-labelledby":`span-ui-${t.id}-${e.id}-${At}`,children:o.jsx("span",{id:`span-ui-${t.id}-${e.id}-${At}`,className:`tooltip below narrow3 ${d.tooltip}`,style:{fontSize:`clamp(0.7rem, ${M.input}, 0.9rem)`,"--tooltip-max-width":h},children:`${Be[p]}: ${t.id}`})},`aa-ui-${t.color}-${t.id}`):o.jsx("div",{"aria-hidden":"true",className:`${d["indicator-null"]} ${d.indicator}`,style:{"--color":t.color,backgroundColor:"transparent","--left":`calc(calc(${h} / 3) * -1)`,width:`calc(${h} / 3)`,height:`calc(${h} / 3)`}},`null-${t.color}-${t.id}`)})})})}),O&&o.jsx("div",{style:{backgroundColor:e.color,width:`${h}`,maxWidth:`${h}`,display:"flex",justifyContent:"center",alignItems:"center",padding:"0.5em 0.1em "},className:d["color-name"],children:o.jsx("span",{style:{color:e.luminance<.179?"white":"black",fontSize:`clamp(0.7rem, ${M.input}, 1.2rem)`,textAlign:"center"},children:e.color})}),I&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:d["color-edit-container"],children:o.jsx(lo,{language:p,block:e,updateColor:me,width:h,hexToRGB:Rt,rgbToHSL:Tt,rgbToHex:oe,hslToRGB:W,fontSize:`clamp(0.75rem, ${M.input}, 1rem)`})}),o.jsx("button",{className:`tooltip-wrap small delete danger gray ${d.remove}`,onClick:()=>ce(e.id),style:{margin:"0.8em auto",width:"calc(100% - 4px)",minWidth:"calc(100% - 4px)",fontSize:`clamp(0.75rem, ${M.input}, 2rem)`},children:Ge[p]})]})]})},`${e.color}-${e.id}`)})}),((Wt=(Mt=R[_])==null?void 0:Mt.items)==null?void 0:Wt.length)>0&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:d["width-wrap"],children:[o.jsx("label",{htmlFor:"color-block-width",children:De[p]}),o.jsx("input",{id:"color-block-width",type:"range",min:6,max:12,step:.5,value:P,onChange:e=>mt(Number(e.target.value))})]}),o.jsxs("div",{className:`${d["toggle-controls"]}`,children:[o.jsxs("div",{children:[o.jsx("strong",{children:He[p]}),o.jsx("button",{id:"toggle-controls",type:"button",onClick:()=>ft(!I),className:"gray small",children:I?Me[p]:We[p]})]}),o.jsxs("div",{children:[o.jsx("strong",{children:ke[p]}),o.jsx("button",{type:"button",onClick:()=>X(!O),className:"gray small",children:O?ze[p]:Oe[p]})]})]})]})]})};export{No as default};
