import{a as g,j as t}from"./react-B26j9x-B.js";import{s as h}from"./AccessibleColors-C8MPi2Qe.js";import{L as Q,u as X,S as Y,e as Z}from"./index-ba3uvdEn.js";import"./dom-to-image-more-sr33WCep.js";import"./react-icons-W-DbsVi9.js";import"./react-router-dom-Dghs3TPc.js";import"./react-router-vPOY4muN.js";import"./@remix-run-ox1qIyJK.js";import"./react-dom-C5TvV5XQ.js";import"./scheduler-C323NY8X.js";import"./react-redux-EG6qnwNo.js";import"./hoist-non-react-statics-C-Qo8PK8.js";import"./react-is-BwqtTtay.js";import"./use-sync-external-store-BqPSEvA7.js";import"./@reduxjs-D09xkNSb.js";import"./immer-C0GRqQ_d.js";import"./redux-D9aXM7rm.js";import"./@babel-CYk816RD.js";import"./redux-thunk-CY0Q9z1Q.js";import"./axios-ngrFHoWO.js";import"./react-helmet-async-CnDSc5Ri.js";import"./react-fast-compare-BHbKlhN4.js";import"./invariant-B_pwkeTo.js";import"./shallowequal-C7ef0Lra.js";const js=({language:U,block:r,fontSize:f,updateColor:c,width:V,hexToRGB:H,hslToRGB:L,rgbToHex:W,rgbToHSL:R})=>{const{t:B}=g.useContext(Q),O=X(),q=/^hsl\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*\)$/i,J=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i,K=/^#([0-9A-F]{3}){1,2}$/i,C=[{value:"hsl",label:"HSL"},{value:"rgb",label:"RGB"},{value:"hex",label:"Hex"}],[m,M]=g.useState(C.find(s=>s.value===r.colorFormat)||C[0]);g.useEffect(()=>{const s=C.find(e=>e.value===r.colorFormat);s&&s.value!==(m==null?void 0:m.value)&&M(s)},[r.colorFormat]);const[I,j]=g.useState(""),[u,v]=g.useState(0),[o,N]=g.useState(0),[x,y]=g.useState(0),[$,F]=g.useState(0),[d,S]=g.useState(0),[b,w]=g.useState(0);g.useEffect(()=>{switch(r.colorFormat){case"hex":{j(r.color);const{r:s,g:e,b:n}=H(r.color);v(s),N(e),y(n);const{h:a,s:i,l}=R(s,e,n);F(a),S(i),w(l);break}case"rgb":{const s=r.color.match(J);if(s){const e=Number(s[1]),n=Number(s[2]),a=Number(s[3]);v(e),N(n),y(a);const{h:i,s:l,l:p}=R(e,n,a);F(i),S(l),w(p)}break}case"hsl":{const s=r.color.match(q);if(s){const e=Number(s[1]),n=Number(s[2]),a=Number(s[3]);F(e),S(n),w(a);const{r:i,g:l,b:p}=L(e,n,a);v(i),N(l),y(p);const E=W(i,l,p);j(E)}break}}},[r.color,r.colorFormat]);const P=s=>{try{let e;if(s==="hex")if(K.test(I)){e=I.toUpperCase(),c(r.id,e,"hex");const{r:n,g:a,b:i}=H(e);v(n),N(a),y(i);const{h:l,s:p,l:E}=R(n,a,i);F(l),S(p),w(E),c(r.id,I,"hex")}else throw new Error("Invalid Hex format.");else if(s==="rgb")if(u>=0&&u<=255&&o>=0&&o<=255&&x>=0&&x<=255){e=`rgb(${u}, ${o}, ${x})`,c(r.id,e,"rgb");const n=W(u,o,x);j(n);const{h:a,s:i,l}=R(u,o,x);F(a),S(i),w(l),c(r.id,`rgb(${u}, ${o}, ${x})`,"rgb")}else throw new Error("Invalid RGB values.");else if(s==="hsl")if($>=0&&$<=360&&d>=0&&d<=100&&b>=0&&b<=100){e=`hsl(${$}, ${d}%, ${b}%)`,c(r.id,e,"hsl");const{r:n,g:a,b:i}=L($,d,b);v(n),N(a),y(i);const l=W(n,a,i);j(l),c(r.id,`hsl(${$}, ${d}%, ${b}%)`,"hsl")}else throw new Error("Invalid HSL values.");else throw new Error("Unsupported color format.")}catch(e){console.error(e.message),O(Z(B("Error")+" "+e.message,!0,4))}},D=s=>{s.preventDefault(),P(m==null?void 0:m.value)},G=(s,e)=>{s==="h"&&F(e),s==="s"&&S(e),s==="l"&&w(e);const n=s==="h"?e:$,a=s==="s"?e:d,i=s==="l"?e:b;if(n>=0&&n<=360&&a>=0&&a<=100&&i>=0&&i<=100){const{r:l,g:p,b:E}=L(n,a,i);v(l),N(p),y(E),c(r.id,`hsl(${n}, ${a}%, ${i}%)`,"hsl"),j(W(l,p,E))}},A=(s,e)=>{s==="r"&&v(e),s==="g"&&N(e),s==="b"&&y(e);const n=s==="r"?e:u,a=s==="g"?e:o,i=s==="b"?e:x;if([n,a,i].every(l=>l>=0&&l<=255)){const{h:l,s:p,l:E}=R(n,a,i);F(l),S(p),w(E),c(r.id,`rgb(${n}, ${a}, ${i})`,"rgb"),j(W(n,a,i))}};return t.jsxs(t.Fragment,{children:[t.jsx(Y,{hideDelete:!0,id:"color-select",className:h["color-select"],language:U,instructions:B("SelectColorFormat"),hide:!0,options:C,value:m,z:1,onChange:s=>{if(M(s),(s==null?void 0:s.value)==="hex"){const e=W(u,o,x);j(e),c(r.id,e,"hex")}else(s==null?void 0:s.value)==="rgb"?(v(u),N(o),y(x),c(r.id,`rgb(${u}, ${o}, ${x})`,"rgb")):(s==null?void 0:s.value)==="hsl"&&(F($),S(d),w(b),c(r.id,`hsl(${$}, ${d}%, ${b}%)`,"hsl"))}}),(m==null?void 0:m.value)==="hex"&&t.jsxs("form",{className:h.form,onSubmit:D,children:[t.jsx("div",{className:`${h.inputs} ${h["hex-input"]}`,children:t.jsxs("label",{children:[t.jsx("span",{children:"Hex: "}),t.jsx("input",{name:`hex-input-${r.id}`,type:"text",value:I,onChange:s=>j(s.target.value),className:h["color-input"],style:{maxWidth:`${V}`,fontSize:f},placeholder:"#FFFFFF"})]})}),t.jsx("button",{style:{minWidth:"calc(100% - 4px)",maxWidth:"calc(100% - 4px)",fontSize:f},type:"submit",className:`${h["color-format-submit"]} small gray`,children:B("Submit")})]}),(m==null?void 0:m.value)==="rgb"&&t.jsxs("form",{className:`${h.inputs} ${h["rgb-inputs"]}`,onSubmit:D,children:[t.jsxs("label",{children:[t.jsx("span",{children:"R: "}),t.jsx("input",{name:`r-input-${r.id}`,type:"number",value:u,onChange:s=>A("r",Number(s.target.value)),min:0,max:255,className:h["color-input"],style:{maxWidth:`${V}`,fontSize:f}})]}),t.jsxs("label",{children:[t.jsx("span",{children:"G: "}),t.jsx("input",{name:`g-input-${r.id}`,type:"number",value:o,onChange:s=>A("g",Number(s.target.value)),min:0,max:255,className:h["color-input"],style:{maxWidth:`${V}`,fontSize:f}})]}),t.jsxs("label",{children:[t.jsx("span",{children:"B: "}),t.jsx("input",{name:`b-input-${r.id}`,type:"number",value:x,onChange:s=>A("b",Number(s.target.value)),min:0,max:255,className:h["color-input"],style:{maxWidth:`${V}`,fontSize:f}})]})]}),(m==null?void 0:m.value)==="hsl"&&t.jsxs("form",{className:`${h.inputs} ${h["hsl-inputs"]}`,onSubmit:D,children:[t.jsxs("label",{children:[t.jsx("span",{children:"H: "}),t.jsx("input",{name:`h-input-${r.id}`,type:"number",value:$,onChange:s=>G("h",Number(s.target.value)),min:0,max:360,className:h["color-input"],style:{maxWidth:`${V}`,fontSize:f}})]}),t.jsxs("label",{children:[t.jsx("span",{children:"S: "}),t.jsx("input",{name:`s-input-${r.id}`,type:"number",value:d,onChange:s=>G("s",Number(s.target.value)),min:0,max:100,className:h["color-input"],style:{maxWidth:`${V}`,fontSize:f}})]}),t.jsxs("label",{children:[t.jsx("span",{children:"L: "}),t.jsx("input",{name:`l-input-${r.id}`,type:"number",value:b,onChange:s=>G("l",Number(s.target.value)),min:0,max:100,className:h["color-input"],style:{maxWidth:`${V}`,fontSize:f}})]})]})]})};export{js as default};
