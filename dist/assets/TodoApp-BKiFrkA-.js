const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TodoList-DyTnN_tK.js","assets/index-DlLCwrmZ.js","assets/react-kX_YxI4E.js","assets/dom-to-image-more-CfDXlNbO.js","assets/react-dom-B5MLDbn_.js","assets/scheduler-CzFDRTuY.js","assets/react-redux-BEmJlIGA.js","assets/hoist-non-react-statics-DQogQWOa.js","assets/react-is-DUDD-a5e.js","assets/use-sync-external-store-BPp6CH6k.js","assets/@reduxjs-DhFEcpJw.js","assets/immer-C0GRqQ_d.js","assets/redux-CE3tqztX.js","assets/@babel-DF5_wy6Y.js","assets/redux-thunk-CY0Q9z1Q.js","assets/axios-CCb-kr4I.js","assets/react-icons-CzVo0GbG.js","assets/react-router-dom-StiqOUIT.js","assets/react-router-DUuhLvki.js","assets/@remix-run-DTnHqtaE.js","assets/index-BB6z88U0.css"])))=>i.map(i=>d[i]);
import{L as je,u as Ce,i as Ae,af as _e,e as m,ag as Oe,ah as B,ai as u,S as _,_ as be,aj as q,ak as V,al as U,am as Y,an as $e,ao as Ie,ap as Fe,aq as z,ar as Ke,as as Pe}from"./index-DlLCwrmZ.js";import{r as c,j as n}from"./react-kX_YxI4E.js";import{a as O}from"./react-redux-BEmJlIGA.js";import{aC as Je}from"./react-icons-CzVo0GbG.js";import{v as ze}from"./uuid-Dv1xt2bl.js";import"./react-dom-B5MLDbn_.js";import"./dom-to-image-more-CfDXlNbO.js";import"./scheduler-CzFDRTuY.js";import"./@reduxjs-DhFEcpJw.js";import"./immer-C0GRqQ_d.js";import"./redux-CE3tqztX.js";import"./@babel-DF5_wy6Y.js";import"./redux-thunk-CY0Q9z1Q.js";import"./axios-CCb-kr4I.js";import"./react-router-dom-StiqOUIT.js";import"./react-router-DUuhLvki.js";import"./@remix-run-DTnHqtaE.js";import"./hoist-non-react-statics-DQogQWOa.js";import"./react-is-DUDD-a5e.js";import"./use-sync-external-store-BPp6CH6k.js";var G=(e=>(e.en="Low",e.es="Bajo",e.fr="Faible",e.de="Niedrig",e.pt="Baixo",e.cs="Nízký",e.fi="Matala",e))(G||{}),Q=(e=>(e.en="Medium",e.es="Medio",e.fr="Moyen",e.de="Mittel",e.pt="Médio",e.cs="Střední",e.fi="Keskiverto",e))(Q||{}),X=(e=>(e.en="High",e.es="Alto",e.fr="Haut",e.de="Hoch",e.pt="Alto",e.cs="Vysoký",e.fi="Korkea",e))(X||{}),Z=(e=>(e.en="Priority",e.es="Prioridad",e.fr="Priorité",e.de="Priorität",e.pt="Prioridade",e.cs="Priorita",e.fi="Tärkeys",e))(Z||{}),H=(e=>(e.en="Deadline",e.es="Fecha Límite",e.fr="Date Limite",e.de="Frist",e.pt="Prazo",e.cs="Termín",e.fi="Määräaika",e))(H||{}),W=(e=>(e.en="Category",e.es="Categoría",e.fr="Catégorie",e.de="Kategorie",e.pt="Categoria",e.cs="Kategorie",e.fi="Kategoria",e))(W||{}),E=(e=>(e.en="Shopping",e.es="Compras",e.fr="Achats",e.de="Einkaufen",e.pt="Compras",e.cs="Nákupy",e.fi="Ostokset",e))(E||{}),ee=(e=>(e.en="All",e.es="Todos",e.fr="Tous",e.de="Alle",e.pt="Todos",e.cs="Vše",e.fi="Kaikki",e))(ee||{}),te=(e=>(e.en="Work",e.es="Trabajo",e.fr="Travail",e.de="Arbeit",e.pt="Trabalho",e.cs="Práce",e.fi="Työ",e))(te||{}),se=(e=>(e.en="Personal",e.es="Personal",e.fr="Personnel",e.de="Persönlich",e.pt="Pessoal",e.cs="Osobní",e.fi="Henkilökohtainen",e))(se||{}),re=(e=>(e.en="Other",e.es="Otro",e.fr="Autre",e.de="Andere",e.pt="Outro",e.cs="Jiný",e.fi="Muu",e))(re||{}),oe=(e=>(e.en="None",e.es="Ninguna",e.fr="Aucun",e.de="Keiner",e.pt="Nenhum",e.cs="Žádný",e.fi="Ei mitään",e))(oe||{}),ae=(e=>(e.en="Text",e.es="Texto",e.fr="Texte",e.de="Text",e.pt="Texto",e.cs="Text",e.fi="Teksti",e))(ae||{});const Le={all:ee,low:G,medium:Q,high:X,priority:Z,deadline:H,category:W,work:te,personal:se,shopping:E,other:re,none:oe,text:ae},b=(e,d)=>e.map(o=>({label:Le[o][d],value:o})),De=c.lazy(()=>be(()=>import("./TodoList-DyTnN_tK.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]))),v=300;function nt({language:e}){const{t:d}=c.useContext(je),o=Ce(),a=O(t=>{var s;return(s=t.auth)==null?void 0:s.user});c.useEffect(()=>{o(Ae())},[]);const i=O(t=>t.todos.todos),$=O(t=>t.todos.status),L=O(t=>t.todos.error),[j,ie]=c.useState("low"),[D,Me]=c.useState(""),[I,ne]=c.useState("other"),[S,de]=c.useState("all"),[w,le]=c.useState("all"),T="ReactTodos",ce=i==null?void 0:i.some(t=>t.complete);c.useEffect(()=>{if(i.length===0&&!a){const t=JSON.parse(window.localStorage.getItem(T)||"[]"),s=new Set(i.map(r=>r.key));t.forEach(r=>{s.has(r.key)||o(_e(r))})}},[o,i,a]),c.useEffect(()=>{window.localStorage.setItem(T,JSON.stringify(i))},[i]);const fe=t=>{const s=new Set,r=[];return t.forEach(f=>{s.has(f.key)?r.push(f):s.add(f.key)}),r},ue=t=>{if(!t){o(m("Error: no key",!0,8));return}if(a!=null&&a._id)o(q(a._id,t));else{o(V(t));const s=i.filter(r=>r.key!==t);window.localStorage.setItem(T,JSON.stringify(s))}};c.useEffect(()=>{const t=fe(i),s=new Set;t.forEach(r=>{s.has(r.key)||(ue(r.key),s.add(r.key))})},[i]);const[k,pe]=c.useState([]),F=i.filter(t=>{const s=S==="all"||t.priority===S,r=w==="all"||t.category===w;return s&&r});c.useEffect(()=>{const t=F==null?void 0:F.slice().sort((s,r)=>(s.order??0)-(r.order??0)).map(s=>({...s,id:s.order,status:"todos"}));pe(t)},[i,S,w]);const me=["all","low","medium","high"],he=["all","work","personal","shopping","other"],ye=["low","medium","high"],ge=["work","personal","shopping","other"],K=b(me,e),P=b(he,e),C=b(ye,e),A=b(ge,e);c.useEffect(()=>{$==="failed"&&o(m(`There was an error: ${L}`,!0,8))},[$,L,o]);const[M,h]=c.useState(!1);c.useEffect(()=>{a!=null&&a._id&&o(Oe(a._id)).then(()=>{o(B(a._id))}).catch(t=>{var s,r;console.error(t),(r=(s=t.response)==null?void 0:s.data)!=null&&r.message?o(m(t.response.data.message,!0,8)):o(m(`${t.message}`,!0,8))})},[a==null?void 0:a._id]);function Te(t){const s=i.find(r=>r.key===t);if(s){const r={...s,complete:!s.complete};o(a?U(a._id,t,r):Y(r))}}const xe=async(t,s,r,f,g)=>{if(h(!0),!t){o(m("Error: no key",!0,8)),h(!1);return}const p=i.find(l=>l.key===t);if(p){const l={...p,name:s,priority:r,deadline:f,category:g};if(a)await o(U(a._id,t,l)).then(()=>{o(m(`${d("Updated")}`,!1,3)),h(!1)}).catch(y=>{var N,R;console.error(y),(R=(N=y.response)==null?void 0:N.data)!=null&&R.message?o(m(y.response.data.message,!0,8)):o(m(`${y}`,!0,8)),h(!1)});else{o(Y(l));const y=i.map(N=>N.key===t?l:N);window.localStorage.setItem(T,JSON.stringify(y)),h(!1)}}},ve=t=>{var s,r;if(a)o(async f=>{var g,p;try{await $e(a._id,t).then(()=>{f(B(a._id))})}catch(l){console.error(l),(p=(g=l.response)==null?void 0:g.data)!=null&&p.message?f(m(l.response.data.message,!0,8)):f(m(`${l}`,!0,8))}});else try{o(Ie(t))}catch(f){console.error(f),(r=(s=f.response)==null?void 0:s.data)!=null&&r.message?o(m(f.response.data.message,!0,8)):o(m(`${f}`,!0,8))}finally{window.localStorage.setItem(T,JSON.stringify(i))}},J=c.useRef(null),[x,Se]=c.useState(""),we=t=>{if(t.preventDefault(),h(!0),x===""){h(!1),o(m(d("AddTask"),!0,3));return}if(x.length>v){h(!1),o(m(`${d("NameTooLong")} (${v} max)`,!0,8));return}const s=ze(),r=i.reduce((p,l)=>l.order>p?l.order:p,0),f=i.reduce((p,l)=>l.order<p?l.order:p,0);let g;if(j==="high"?g={key:s,name:x,complete:!1,order:f-1,priority:j,deadline:D,category:I}:g={key:s,name:x,complete:!1,order:r+1,priority:j,deadline:D,category:I},a)o(Fe(a._id,g)),h(!1);else{const p=[...i,g].sort((l,y)=>l.order-y.order).map((l,y)=>({...l,order:y}));o(z(p)),window.localStorage.setItem(T,JSON.stringify(p)),z(p),h(!1)}J.current&&(J.current.value="")};async function ke(t){if(t.preventDefault(),window.confirm(d("AreYouSureYouWantToClearAllCompletedTasks")))if(a)await o(Ke(a._id));else{o(Pe());const s=i.filter(r=>!r.complete);window.localStorage.setItem(T,JSON.stringify(s))}}function Ne(t){if(!t){o(m("Error: no key",!0,8));return}if(a!=null&&a._id)o(q(a._id,t));else{o(V(t));let s=i.filter(r=>r.key!==t);s=s.map((r,f)=>({...r,order:f+1})),o(z(s)),window.localStorage.setItem(T,JSON.stringify(s))}}return n.jsxs(n.Fragment,{children:[n.jsx("form",{onSubmit:we,className:u.form,children:n.jsxs("fieldset",{children:[n.jsx("legend",{className:"scr",children:d("AddTaskToTheTaskList")}),n.jsxs("div",{className:u["todo-input-area"],children:[n.jsx("label",{htmlFor:"taskinput",children:d("AddTask")}),n.jsx("textarea",{ref:J,id:"taskinput",className:"bg",rows:3,name:"task",value:x,onChange:t=>Se(t.target.value),required:!0,autoComplete:"off",placeholder:`${d("Task")}...`}),n.jsxs("p",{className:u.small,children:[v-x.length," ",d("CharactersLeft")," (",d("Max"),":"," ",v,")"," ",x.length>v&&n.jsx("span",{className:u.warning,children:d("NameTooLong")})]}),n.jsx(_,{z:k.length+5,id:"category",className:`${u.select} ${u["category-select"]}`,hideDelete:!0,instructions:d("SelectCategory"),value:A.find(t=>t.value===I)||A[0],onChange:t=>ne(t==null?void 0:t.value),options:A,language:e}),n.jsx(_,{id:"priority",className:u.select,hideDelete:!0,instructions:d("SelectPriority"),value:C.find(t=>t.value===j)||C[0],onChange:t=>ie(t==null?void 0:t.value),options:C,language:e,z:k.length+4}),n.jsxs("button",{id:u["submit-todo"],className:u["submit-todo"],type:"submit",disabled:M,children:[d("AddTask")," ",n.jsx(Je,{})]})]})]})}),n.jsxs("div",{className:u["controls-wrap"],children:[n.jsx(_,{id:"category-filter",className:`${u.select} ${u["category-select"]}`,hideDelete:!0,instructions:d("FilterByCategory"),value:P.find(t=>t.value===w)||P[0],onChange:t=>le(t==null?void 0:t.value),options:P,language:e,z:k.length+3}),n.jsx(_,{id:"priority-filter",className:u.select,hideDelete:!0,instructions:d("FilterByPriority"),value:K.find(t=>t.value===S)||K[0],onChange:t=>de(t==null?void 0:t.value),options:K,language:e,z:k.length+2}),n.jsx("button",{className:`danger ${u["clear-completed"]}`,disabled:!ce,onClick:t=>ke(t),children:d("ClearCompleted")})]}),n.jsxs("div",{className:u["list-wrap"],children:[n.jsxs("p",{className:u["left-to-do"],children:[i==null?void 0:i.filter(t=>!(t!=null&&t.complete)).length," ",d("LeftToDo")]}),(S!=="all"||w!=="all")&&n.jsxs("p",{className:u["filter-notification"],children:[d("Note")," ",d("Filtered")]}),n.jsx(c.Suspense,{fallback:n.jsxs("p",{className:"flex center margin0auto textcenter",children:[d("Loading"),"..."]}),children:n.jsx(De,{sending:M,todosWithIdAndStatus:k,toggleTodo:Te,deleteTodo:Ne,language:e,modifyTodo:xe,modifyTodoOrder:ve,priorityOptions:C,categoryOptions:A,maxCharacters:v})}),$==="loading"&&n.jsxs("p",{className:"flex center margin0auto textcenter",children:[d("Loading"),"..."]})]})]})}export{nt as default};
