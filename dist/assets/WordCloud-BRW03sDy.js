import{r as $,j as T}from"./react-kX_YxI4E.js";import{L as O,u as q,l as G,j as J,e as v,aL as Q}from"./index-kanJP55Y.js";import"./dom-to-image-more-CfDXlNbO.js";import"./react-dom-B5MLDbn_.js";import"./scheduler-CzFDRTuY.js";import"./react-redux-BEmJlIGA.js";import"./hoist-non-react-statics-DQogQWOa.js";import"./react-is-DUDD-a5e.js";import"./use-sync-external-store-BPp6CH6k.js";import"./@reduxjs-DhFEcpJw.js";import"./immer-C0GRqQ_d.js";import"./redux-CE3tqztX.js";import"./@babel-DF5_wy6Y.js";import"./redux-thunk-CY0Q9z1Q.js";import"./axios-CCb-kr4I.js";import"./react-icons-DF9X557m.js";import"./react-router-dom-StiqOUIT.js";import"./react-router-DUuhLvki.js";import"./@remix-run-DTnHqtaE.js";import"./react-helmet-async-yKbZhP8U.js";import"./react-fast-compare-DeY8XGN4.js";import"./invariant-BxDqUhCT.js";import"./shallowequal-CbQcWkYp.js";const U="_cloud_1ami1_1",V="_word_1ami1_29",b={"cloud-wrap":"_cloud-wrap_1ami1_1",cloud:U,word:V},gt=({language:L,title:A,onClick:F,words:j,width:f=600,height:g=400})=>{const{t:u}=$.useContext(O),y=q(),[M,N]=$.useState([]),_=G(),{windowWidth:a}=J(),E=$.useRef(null),R=(t,n)=>{const e=document.createElement("canvas").getContext("2d");if(e){e.font=`${n}px Arial`;const s=e.measureText(t).width+2,c=n*.65,x=n*.2,m=c+x;return{width:s,height:m,ascent:c,descent:x}}return{width:0,height:0,ascent:0,descent:0}},I=(t,n)=>{const{width:i,height:e,ascent:h}=R(t.text,n);return{width:i,height:e,ascent:h}},K=(t,n)=>{const i=[],e=n.width*Q(.2,.4),h=n.height*.2;return i.push({x:t.x+e,y:t.y-n.height}),i.push({x:t.x+e,y:t.y+t.height}),i.push({x:t.x+t.width,y:t.y+h}),i.push({x:t.x+t.width-e,y:t.y-n.height}),i.push({x:t.x+t.width-e,y:t.y+t.height}),i.push({x:t.x-n.width,y:t.y+h}),i.push({x:t.x-n.width,y:t.y+t.height}),a<500&&i.push({x:t.x-n.width,y:t.y-n.height}),a<500&&i.push({x:t.x-e,y:t.y+t.height*2}),a<500&&i.push({x:t.x-e,y:t.y-t.height*2}),a<500&&i.push({x:t.x+e,y:t.y+t.height*3}),a<500&&i.push({x:t.x+e,y:t.y-t.height*3}),a<500&&i.push({x:t.x-e,y:t.y+t.height*3}),a<500&&i.push({x:t.x-e,y:t.y-t.height*3}),i},S=(t,n,i,e,h)=>h.some(s=>t<s.x+s.width&&t+i>s.x&&n<s.y+s.height&&n+e>s.y),p=async t=>{var i,e;const n=t;if(F)F(t);else if(navigator.clipboard&&navigator.clipboard.writeText)navigator.clipboard.writeText(n).then(()=>{y(v(u("CopiedToClipboard"),!1,3))},h=>{y(v(`${u("FailedToCopy")}`,!0,3)),console.error("Failed to copy:",h)});else{const h=document.createElement("textarea");h.value=n,(i=E.current)==null||i.appendChild(h),h.focus(),h.select();try{document.execCommand("copy"),y(v(u("CopiedToClipboard"),!1,3))}catch(s){console.error("Failed to copy:",s),y(v(`${u("FailedToCopy")}`,!0,3))}(e=E.current)==null||e.removeChild(h)}};return $.useEffect(()=>{if(j.length===0){N([]);return}const t=[...j].sort((e,h)=>h.weight!==e.weight?h.weight-e.weight:e.text.length-h.text.length),n=[],i=[];t.forEach((e,h)=>{const s=e.weight,{width:c,height:x,ascent:m}=I(e,s);let l=!1;const z=30;let k=0;if(h===0){const o=(f-c)/2,w=(g+m-x)/2;n.push({x:o,y:w,width:c,height:x}),i.push(T.jsx("text",{x:o,y:w+m,fontSize:s,fontFamily:"Arial, sans-serif",fill:`hsl(${h*110%360}, 100%, ${_?"20":"70"}%)`,className:b.word,style:{cursor:"pointer"},onClick:()=>{p(e.text)},tabIndex:0,onKeyDown:C=>{(C.key==="Enter"||C.key===" ")&&p(e.text)},"aria-label":A??`${u("CopyToClipboard")}: ${e.text}`,children:e.text},`${e.text}-${h}`)),l=!0}for(;!l&&k<z;){for(let o=0;o<n.length&&!l;o++){const w=n[o],C=K(w,{width:c,height:x});for(let D of C){const r={x:D.x,y:D.y,width:c,height:x};if(!(r.x<0||r.y<0||r.x+r.width>f||r.y+r.height>g)&&!S(r.x,r.y,r.width,r.height,n)){n.push(r),i.push(T.jsx("text",{x:r.x,y:r.y+m,fontSize:s,fontFamily:"Arial, sans-serif",fill:`hsl(${h*110%360}, 100%, ${_?"20":"70"}%)`,style:{cursor:"pointer"},className:b.word,onClick:()=>p(e.text),tabIndex:0,onKeyDown:H=>{(H.key==="Enter"||H.key===" ")&&p(e.text)},"aria-label":A??`${u("CopyToClipboard")}: ${e.text}`,children:e.text},`${e.text}-${h}`)),l=!0;break}}}k++}l||console.warn(`Could not place word after ${k} attempts:: ${e.text}`)}),N(i)},[j,f,g,L,_,y]),T.jsx("div",{ref:E,className:b["cloud-wrap"],children:T.jsx("svg",{width:f,height:g,className:b.cloud,children:M})})};export{gt as default};
